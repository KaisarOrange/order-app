"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{2011:(st,Ee,k)=>{k.d(Ee,{Dh:()=>de,GT:()=>ae,cc:()=>Ie,hO:()=>Ue,on:()=>j,pX:()=>oe,xv:()=>le});var h=k(4650),Q=k(9260),O=k(2122);st=k.hmd(st);const se=["ngOnDestroy"],oe=(be,we,Fe,Te={})=>new Proxy(be,{get:(_e,Se)=>Fe.runOutsideAngular(()=>{var Le;if(be[Se])return!(null===(Le=Te?.spy)||void 0===Le)&&Le.get&&Te.spy.get(Se,be[Se]),be[Se];if(se.indexOf(Se)>-1)return()=>{};const Oe=we.toPromise().then(U=>{const ye=U&&U[Se];return"function"==typeof ye?ye.bind(U):ye&&ye.then?ye.then(q=>Fe.run(()=>q)):Fe.run(()=>ye)});return new Proxy(()=>{},{get:(U,ye)=>Oe[ye],apply:(U,ye,q)=>Oe.then(Y=>{var ie;const ne=Y&&Y(...q);return!(null===(ie=Te?.spy)||void 0===ie)&&ie.apply&&Te.spy.apply(Se,q,ne),ne})})})}),ae=(be,we)=>{we.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(Te=>{Object.defineProperty(be.prototype,Te,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,Te))})})};class fe{constructor(we){return we}}const de=new h.OlP("angularfire2.app.options"),le=new h.OlP("angularfire2.app.name");function j(be,we,Fe){const _e="object"==typeof Fe&&Fe||{};_e.name=_e.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const Le=Q.Z.apps.filter(Oe=>Oe&&Oe.name===_e.name)[0]||we.runOutsideAngular(()=>Q.Z.initializeApp(be,_e));try{JSON.stringify(be)!==JSON.stringify(Le.options)&&$("error",`${Le.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Le)}const $=(be,...we)=>{(0,h.X6Q)()&&typeof console<"u"&&console[be](...we)},Z={provide:fe,useFactory:j,deps:[de,h.R0b,[new h.FiY,le]]};let Ue=(()=>{class be{constructor(Fe){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",h.q4F.full,Fe.toString())}static initializeApp(Fe,Te){return{ngModule:be,providers:[{provide:de,useValue:Fe},{provide:le,useValue:Te}]}}}return be.\u0275fac=function(Fe){return new(Fe||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[Z]}),be})();function Ie(be,we,Fe,Te,_e){const[,Se,Le]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===be)||[];if(Se)return function He(be,we){try{return be.toString()===we.toString()}catch{return be===we}}(_e,Le)||(he("error",`${we} was already initialized on the ${Fe} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:Le})),Se;{const Oe=Te();return globalThis.\u0275AngularfireInstanceCache.push([be,Oe,_e]),Oe}}const tt=!!st.hot,he=(be,...we)=>{(0,h.X6Q)()&&typeof console<"u"&&console[be](...we)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(st,Ee,k)=>{k.d(Ee,{q4:()=>Ou,iC:()=>Po,fc:()=>Pf,HU:()=>Fu,vb:()=>Xe,JM:()=>Fn});var h=k(4650),Q=k(259),O=k(5861),se=k(9681),oe=k(2090),ae=k(4859),fe=k(1877),de=k(8766);const le="@firebase/installations",j="0.6.1",Z=`w:${j}`,Ue="FIS_v2",we=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fe(D){return D instanceof oe.ZR&&D.code.includes("request-failed")}function Te({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function _e(D){return{token:D.token,requestStatus:2,expiresIn:Y(D.expiresIn),creationTime:Date.now()}}function Se(D,C){return Le.apply(this,arguments)}function Le(){return(Le=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return we.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Oe({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const x=Oe(D);return x.append("Authorization",function ie(D){return`${Ue} ${D}`}(C)),x}function ye(D){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function Y(D){return Number(D.replace("s","000"))}function ne(D,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=Te(D),H=Oe(D),ee=C.getImmediate({optional:!0});if(ee){const Qe=yield ee.getHeartbeatsHeader();Qe&&H.append("x-firebase-client",Qe)}const Ye={method:"POST",headers:H,body:JSON.stringify({fid:x,authVersion:Ue,appId:D.appId,sdkVersion:Z})},nt=yield ye(()=>fetch(F,Ye));if(nt.ok){const Qe=yield nt.json();return{fid:Qe.fid||x,registrationStatus:2,refreshToken:Qe.refreshToken,authToken:_e(Qe.authToken)}}throw yield Se("Create Installation",nt)})).apply(this,arguments)}function ke(D){return new Promise(C=>{setTimeout(C,D)})}const en=/^[cdef][\w-]{21}$/;function Rt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function Bt(D){return function ot(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return en.test(x)?x:""}catch{return""}}function lt(D){return`${D.appName}!${D.appId}`}const Qt=new Map;function _r(D,C){const x=lt(D);mn(x,C),function ni(D,C){const x=function Mr(){return!Gr&&"BroadcastChannel"in self&&(Gr=new BroadcastChannel("[Firebase] FID Change"),Gr.onmessage=D=>{mn(D.data.key,D.data.fid)}),Gr}();x&&x.postMessage({key:D,fid:C}),function Rr(){0===Qt.size&&Gr&&(Gr.close(),Gr=null)}()}(x,C)}function mn(D,C){const x=Qt.get(D);if(x)for(const F of x)F(C)}let Gr=null;const _i="firebase-installations-store";let Nr=null;function Hs(){return Nr||(Nr=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(_i)}})),Nr}function dn(D,C){return zr.apply(this,arguments)}function zr(){return(zr=(0,O.Z)(function*(D,C){const x=lt(D),H=(yield Hs()).transaction(_i,"readwrite"),ee=H.objectStore(_i),Ce=yield ee.get(x);return yield ee.put(C,x),yield H.done,(!Ce||Ce.fid!==C.fid)&&_r(D,C.fid),C})).apply(this,arguments)}function dt(D){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,O.Z)(function*(D){const C=lt(D),F=(yield Hs()).transaction(_i,"readwrite");yield F.objectStore(_i).delete(C),yield F.done})).apply(this,arguments)}function vi(D,C){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(D,C){const x=lt(D),H=(yield Hs()).transaction(_i,"readwrite"),ee=H.objectStore(_i),Ce=yield ee.get(x),Ye=C(Ce);return void 0===Ye?yield ee.delete(x):yield ee.put(Ye,x),yield H.done,Ye&&(!Ce||Ce.fid!==Ye.fid)&&_r(D,Ye.fid),Ye})).apply(this,arguments)}function Or(D){return Es.apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(D){let C;const x=yield vi(D.appConfig,F=>{const H=Tt(F),ee=ft(D,H);return C=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function Tt(D){return vr(D||{fid:Rt(),registrationStatus:0})}function ft(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(we.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function _t(D,C){return Ji.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Sn(D)}:{installationEntry:C}}function Ji(){return(Ji=(0,O.Z)(function*(D,C){try{const x=yield ne(D,C);return dn(D.appConfig,x)}catch(x){throw Fe(x)&&409===x.customData.serverCode?yield dt(D.appConfig):yield dn(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Sn(D){return wn.apply(this,arguments)}function wn(){return(wn=(0,O.Z)(function*(D){let C=yield wi(D.appConfig);for(;1===C.registrationStatus;)yield ke(100),C=yield wi(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Or(D);return F||x}return C})).apply(this,arguments)}function wi(D){return vi(D,C=>{if(!C)throw we.create("installation-not-found");return vr(C)})}function vr(D){return function na(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function rn(D,C){return es.apply(this,arguments)}function es(){return(es=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=Zt(D,x),H=U(D,x),ee=C.getImmediate({optional:!0});if(ee){const Qe=yield ee.getHeartbeatsHeader();Qe&&H.append("x-firebase-client",Qe)}const Ye={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Z,appId:D.appId}})},nt=yield ye(()=>fetch(F,Ye));if(nt.ok)return _e(yield nt.json());throw yield Se("Generate Auth Token",nt)})).apply(this,arguments)}function Zt(D,{fid:C}){return`${Te(D)}/${C}/authTokens:generate`}function wr(D){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(D,C=!1){let x;const F=yield vi(D.appConfig,ee=>{if(!kt(ee))throw we.create("not-registered");const Ce=ee.authToken;if(!C&&B(Ce))return ee;if(1===Ce.requestStatus)return x=je(D,C),ee;{if(!navigator.onLine)throw we.create("app-offline");const Ye=W(ee);return x=wt(D,Ye),Ye}});return x?yield x:F.authToken})).apply(this,arguments)}function je(D,C){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,C){let x=yield We(D.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield We(D.appConfig);const F=x.authToken;return 0===F.requestStatus?wr(D,C):F})).apply(this,arguments)}function We(D){return vi(D,C=>{if(!kt(C))throw we.create("not-registered");return function ge(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function wt(D,C){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,O.Z)(function*(D,C){try{const x=yield rn(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield dn(D.appConfig,F),x}catch(x){if(!Fe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield dn(D.appConfig,F)}else yield dt(D.appConfig);throw x}})).apply(this,arguments)}function kt(D){return void 0!==D&&2===D.registrationStatus}function B(D){return 2===D.requestStatus&&!function L(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function W(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Je(){return(Je=(0,O.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield Or(C);return F?F.catch(console.error):wr(C).catch(console.error),x.fid})).apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(D,C=!1){const x=D;return yield En(x),(yield wr(x,C)).token})).apply(this,arguments)}function En(D){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(D){const{registrationPromise:C}=yield Or(D);C&&(yield C)})).apply(this,arguments)}function uu(D){return we.create("missing-app-config-values",{valueName:D})}const Mc="installations",In=D=>{const C=D.getProvider("app").getImmediate(),x=function ia(D){if(!D||!D.options)throw uu("App Configuration");if(!D.name)throw uu("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw uu(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},pd=D=>{const C=D.getProvider("app").getImmediate(),x=(0,se._getProvider)(C,Mc).getImmediate();return{getId:()=>function J(D){return Je.apply(this,arguments)}(x),getToken:H=>function Pt(D){return qt.apply(this,arguments)}(x,H)}};(function Rc(){(0,se._registerComponent)(new ae.wA(Mc,In,"PUBLIC")),(0,se._registerComponent)(new ae.wA("installations-internal",pd,"PRIVATE"))})(),(0,se.registerVersion)(le,j),(0,se.registerVersion)(le,j,"esm2017");const sa="@firebase/remote-config",Rn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class aa{constructor(C,x,F,H){this.client=C,this.storage=x,this.storageCache=F,this.logger=H}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,H=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${H}.`),H}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,H]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(H&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return H;C.eTag=H&&H.eTag;const ee=yield x.client.fetch(C),Ce=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Ce.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Ce),ee})()}}function Ii(D=navigator){return D.languages&&D.languages[0]||D.language}class Is{constructor(C,x,F,H,ee,Ce){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=H,this.apiKey=ee,this.appId=Ce}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,H]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},nt={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:H,app_id:x.appId,language_code:Ii()},Qe={method:"POST",headers:Ye,body:JSON.stringify(nt)},Nt=fetch(Ce,Qe),Et=new Promise((Jn,Gi)=>{C.signal.addEventListener(()=>{const Dn=new Error("The operation was aborted.");Dn.name="AbortError",Gi(Dn)})});let gr;try{yield Promise.race([Nt,Et]),gr=yield Nt}catch(Jn){let Gi="fetch-client-network";throw"AbortError"===Jn?.name&&(Gi="fetch-timeout"),Rn.create(Gi,{originalErrorMessage:Jn?.message})}let Bn=gr.status;const Ra=gr.headers.get("ETag")||void 0;let Na,Hi;if(200===gr.status){let Jn;try{Jn=yield gr.json()}catch(Gi){throw Rn.create("fetch-client-parse",{originalErrorMessage:Gi?.message})}Na=Jn.entries,Hi=Jn.state}if("INSTANCE_STATE_UNSPECIFIED"===Hi?Bn=500:"NO_CHANGE"===Hi?Bn=304:("NO_TEMPLATE"===Hi||"EMPTY_CONFIG"===Hi)&&(Na={}),304!==Bn&&200!==Bn)throw Rn.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:Ra,config:Na}})()}}class hg{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var H=this;return(0,O.Z)(function*(){yield function On(D,C){return new Promise((x,F)=>{const H=Math.max(C-Date.now(),0),ee=setTimeout(x,H);D.addEventListener(()=>{clearTimeout(ee),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ee=yield H.client.fetch(C);return yield H.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function sn(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ee))throw ee;const Ce={throttleEndTimeMillis:Date.now()+(0,oe.$s)(F),backoffCount:F+1};return yield H.storage.setThrottleMetadata(Ce),H.attemptFetch(C,Ce)}})()}}class zs{constructor(C,x,F,H,ee){this.app=C,this._client=x,this._storageCache=F,this._storage=H,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qs(D,C){const x=D.target.error||void 0;return Rn.create(C,{originalErrorMessage:x&&x?.message})}const kr="app_namespace_store";class bi{constructor(C,x,F,H=function Wr(){return new Promise((D,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{C(qs(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(kr,{keyPath:"compositeKey"})}}catch(x){C(Rn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((H,ee)=>{const Ye=F.transaction([kr],"readonly").objectStore(kr),nt=x.createCompositeKey(C);try{const Qe=Ye.get(nt);Qe.onerror=Nt=>{ee(qs(Nt,"storage-get"))},Qe.onsuccess=Nt=>{const Et=Nt.target.result;H(Et?Et.value:void 0)}}catch(Qe){ee(Rn.create("storage-get",{originalErrorMessage:Qe?.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const H=yield F.openDbPromise;return new Promise((ee,Ce)=>{const nt=H.transaction([kr],"readwrite").objectStore(kr),Qe=F.createCompositeKey(C);try{const Nt=nt.put({compositeKey:Qe,value:x});Nt.onerror=Et=>{Ce(qs(Et,"storage-set"))},Nt.onsuccess=()=>{ee()}}catch(Nt){Ce(Rn.create("storage-set",{originalErrorMessage:Nt?.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((H,ee)=>{const Ye=F.transaction([kr],"readwrite").objectStore(kr),nt=x.createCompositeKey(C);try{const Qe=Ye.delete(nt);Qe.onerror=Nt=>{ee(qs(Nt,"storage-delete"))},Qe.onsuccess=()=>{H()}}catch(Qe){ee(Rn.create("storage-delete",{originalErrorMessage:Qe?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class ua{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),H=C.storage.getActiveConfig(),ee=yield x;ee&&(C.lastFetchStatus=ee);const Ce=yield F;Ce&&(C.lastSuccessfulFetchTimestampMillis=Ce);const Ye=yield H;Ye&&(C.activeConfig=Ye)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function ca(){return vf.apply(this,arguments)}function vf(){return(vf=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Di(){(0,se._registerComponent)(new ae.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),H=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rn.create("registration-window");if(!(0,oe.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Ce,appId:Ye}=F.options;if(!ee)throw Rn.create("registration-project-id");if(!Ce)throw Rn.create("registration-api-key");if(!Ye)throw Rn.create("registration-app-id");const nt=new bi(Ye,F.name,x=x||"firebase"),Qe=new ua(nt),Nt=new fe.Yd(sa);Nt.logLevel=fe.in.ERROR;const Et=new Is(H,se.SDK_VERSION,x,ee,Ce,Ye),gr=new hg(Et,nt),Bn=new aa(gr,nt,Qe,Nt),Ra=new zs(F,Bn,Qe,nt,Nt);return function yn(D){const C=(0,oe.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ra),Ra},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(sa,"0.4.1"),(0,se.registerVersion)(sa,"0.4.1","esm2017")}();const Oc="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",Ws="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yd="google.c.a.c_id",vo="google.c.a.c_l",kc="google.c.a.ts",_d="google.c.a.e";var lu=(()=>{return(D=lu||(lu={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",lu;var D})();function Ci(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vd(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),H=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)H[ee]=F.charCodeAt(ee);return H}const Fc="fcm_token_details_db",Pr="fcm_token_object_Store";function Ed(D){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Fc))return null;let C=null;return(yield(0,de.X3)(Fc,5,{upgrade:(F=(0,O.Z)(function*(H,ee,Ce,Ye){var nt;if(ee<2||!H.objectStoreNames.contains(Pr))return;const Qe=Ye.objectStore(Pr),Nt=yield Qe.index("fcmSenderId").get(D);if(yield Qe.clear(),Nt)if(2===ee){const Et=Nt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;C={token:Et.fcmToken,createTime:null!==(nt=Et.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Ci(Et.vapidKey)}}}else if(3===ee){const Et=Nt;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ci(Et.auth),p256dh:Ci(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ci(Et.vapidKey)}}}else if(4===ee){const Et=Nt;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ci(Et.auth),p256dh:Ci(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ci(Et.vapidKey)}}}}),function(ee,Ce,Ye,nt){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(Fc),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),wf(C)?C:null;var F}),Lc.apply(this,arguments)}function wf(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const bs="firebase-messaging-store";let da=null;function Ks(){return da||(da=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(bs)}})),da}function du(D){return hu.apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(D){const C=pu(D),F=yield(yield Ks()).transaction(bs).objectStore(bs).get(C);if(F)return F;{const H=yield Ed(D.appConfig.senderId);if(H)return yield Ys(D,H),H}})).apply(this,arguments)}function Ys(D,C){return ha.apply(this,arguments)}function ha(){return(ha=(0,O.Z)(function*(D,C){const x=pu(D),H=(yield Ks()).transaction(bs,"readwrite");return yield H.objectStore(bs).put(C,x),yield H.done,C})).apply(this,arguments)}function fu(D){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(D){const C=pu(D),F=(yield Ks()).transaction(bs,"readwrite");yield F.objectStore(bs).delete(C),yield F.done})).apply(this,arguments)}function pu({appConfig:D}){return D.appId}const An=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function fa(D,C){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(D,C){const x=yield Ds(D),F=pa(C),H={method:"POST",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(Io(D.appConfig),H)).json()}catch(Ce){throw An.create("token-subscribe-failed",{errorInfo:Ce?.toString()})}if(ee.error)throw An.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw An.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Eo(D,C){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(D,C){const x=yield Ds(D),F=pa(C.subscriptionOptions),H={method:"PATCH",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${Io(D.appConfig)}/${C.token}`,H)).json()}catch(Ce){throw An.create("token-update-failed",{errorInfo:Ce?.toString()})}if(ee.error)throw An.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw An.create("token-update-no-token");return ee.token})).apply(this,arguments)}function hr(D,C){return bd.apply(this,arguments)}function bd(){return(bd=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield Ds(D)};try{const ee=yield(yield fetch(`${Io(D.appConfig)}/${C}`,F)).json();if(ee.error)throw An.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(H){throw An.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function Io({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ds(D){return ir.apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function pa({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const H={web:{endpoint:x,auth:C,p256dh:D}};return F!==Ws&&(H.web.applicationPubKey=F),H}const ga=6048e5;function gu(D){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,O.Z)(function*(D){const C=yield Uc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Ci(C.getKey("auth")),p256dh:Ci(C.getKey("p256dh"))},F=yield du(D.firebaseDependencies);if(F){if(_u(F.subscriptionOptions,x))return Date.now()>=F.createTime+ga?St(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield hr(D.firebaseDependencies,F.token)}catch(H){console.warn(H)}return Vc(D.firebaseDependencies,x)}return Vc(D.firebaseDependencies,x)})).apply(this,arguments)}function ma(D){return ya.apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(D){const C=yield du(D.firebaseDependencies);C&&(yield hr(D.firebaseDependencies,C.token),yield fu(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function St(D,C){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(D,C){try{const x=yield Eo(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Ys(D.firebaseDependencies,F),x}catch(x){throw yield ma(D),x}})).apply(this,arguments)}function Vc(D,C){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(D,C){const F={token:yield fa(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Ys(D,F),F.token})).apply(this,arguments)}function Uc(D,C){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vd(C)})})).apply(this,arguments)}function _u(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Pn(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Cd(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const H=C.notification.image;H&&(D.notification.image=H);const ee=C.notification.icon;ee&&(D.notification.icon=ee)}(C,D),function De(D,C){C.data&&(D.data=C.data)}(C,D),function Yt(D,C){var x,F,H,ee,Ce;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Ye=null!==(H=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==H?H:null===(ee=C.notification)||void 0===ee?void 0:ee.click_action;Ye&&(D.fcmOptions.link=Ye);const nt=null===(Ce=C.fcmOptions)||void 0===Ce?void 0:Ce.analytics_label;nt&&(D.fcmOptions.analyticsLabel=nt)}(C,D),C}function Bc(D){return"object"==typeof D&&!!D&&yd in D}function Td(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function bo(D){return An.create("missing-app-config-values",{valueName:D})}Td("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Td("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vu{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function fr(D){if(!D||!D.options)throw bo("App Configuration Object");if(!D.name)throw bo("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw bo(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:H,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ii(D){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Oc,{scope:ts}),D.swRegistration.update().catch(()=>{})}catch(C){throw An.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Do(D,C){return jc.apply(this,arguments)}function jc(){return(jc=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield ii(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Sd(D,C){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Ws)})).apply(this,arguments)}function Ui(){return(Ui=(0,O.Z)(function*(D,C){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield Sd(D,C?.vapidKey),yield Do(D,C?.serviceWorkerRegistration),gu(D)})).apply(this,arguments)}function $c(D,C,x){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(D,C,x){const F=si(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[yd],message_name:x[vo],message_time:x[kc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function si(D){switch(D){case lu.NOTIFICATION_CLICKED:return"notification_open";case lu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Hc(){return(Hc=(0,O.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===lu.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Pn(x)):D.onMessageHandler.next(Pn(x)));const F=x.data;Bc(F)&&"1"===F[_d]&&(yield $c(D,x.messageType,F))})).apply(this,arguments)}const Gc="@firebase/messaging",Ad=D=>{const C=new vu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function fg(D,C){return Hc.apply(this,arguments)}(C,x)),C},Xs=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function bn(D,C){return Ui.apply(this,arguments)}(C,F)}};function zc(){return Md.apply(this,arguments)}function Md(){return(Md=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xd(){(0,se._registerComponent)(new ae.wA("messaging",Ad,"PUBLIC")),(0,se._registerComponent)(new ae.wA("messaging-internal",Xs,"PRIVATE")),(0,se.registerVersion)(Gc,"0.12.1"),(0,se.registerVersion)(Gc,"0.12.1","esm2017")}();const qc="analytics",Kr="firebase_id",To="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wc="https://www.googletagmanager.com/gtag/js",pr=new fe.Yd("@firebase/analytics");function bf(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function mg(D,C){const x=document.createElement("script");x.src=`${Wc}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Cs(D,C,x,F,H,ee){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(D,C,x,F,H,ee){const Ce=F[H];try{if(Ce)yield C[Ce];else{const nt=(yield bf(x)).find(Qe=>Qe.measurementId===H);nt&&(yield C[nt.appId])}}catch(Ye){pr.error(Ye)}D("config",H,ee)})).apply(this,arguments)}function bu(D,C,x,F,H){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(D,C,x,F,H){try{let ee=[];if(H&&H.send_to){let Ce=H.send_to;Array.isArray(Ce)||(Ce=[Ce]);const Ye=yield bf(x);for(const nt of Ce){const Qe=Ye.find(Et=>Et.measurementId===nt),Nt=Qe&&C[Qe.appId];if(!Nt){ee=[];break}ee.push(Nt)}}0===ee.length&&(ee=Object.values(C)),yield Promise.all(ee),D("event",F,H||{})}catch(ee){pr.error(ee)}})).apply(this,arguments)}function So(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Wc)&&x.src.includes(D))return x;return null}const ai=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Yc=new class Bi{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Nd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ts(D){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,O.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,H={method:"GET",headers:Nd(F)},ee=To.replace("{app-id}",x),Ce=yield fetch(ee,H);if(200!==Ce.status&&304!==Ce.status){let Ye="";try{const nt=yield Ce.json();null!==(C=nt.error)&&void 0!==C&&C.message&&(Ye=nt.error.message)}catch{}throw ai.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:Ye})}return Ce.json()})).apply(this,arguments)}function _n(D){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,O.Z)(function*(D,C=Yc,x){const{appId:F,apiKey:H,measurementId:ee}=D.options;if(!F)throw ai.create("no-app-id");if(!H){if(ee)return{measurementId:ee,appId:F};throw ai.create("no-api-key")}const Ce=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Cu;return setTimeout((0,O.Z)(function*(){Ye.abort()}),void 0!==x?x:6e4),xo({appId:F,apiKey:H,measurementId:ee},Ce,Ye,C)})).apply(this,arguments)}function xo(D,C,x){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,H=Yc){var ee;const{appId:Ce,measurementId:Ye}=D;try{yield Du(F,C)}catch(nt){if(Ye)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${nt?.message}]`),{appId:Ce,measurementId:Ye};throw nt}try{const nt=yield Ts(D);return H.deleteThrottleMetadata(Ce),nt}catch(nt){const Qe=nt;if(!Od(Qe)){if(H.deleteThrottleMetadata(Ce),Ye)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Qe?.message}]`),{appId:Ce,measurementId:Ye};throw nt}const Nt=503===Number(null===(ee=Qe?.customData)||void 0===ee?void 0:ee.httpStatus)?(0,oe.$s)(x,H.intervalMillis,30):(0,oe.$s)(x,H.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Nt,backoffCount:x+1};return H.setThrottleMetadata(Ce,Et),pr.debug(`Calling attemptFetch again in ${Nt} millis`),xo(D,Et,F,H)}})).apply(this,arguments)}function Du(D,C){return new Promise((x,F)=>{const H=Math.max(C-Date.now(),0),ee=setTimeout(x,H);D.addEventListener(()=>{clearTimeout(ee),F(ai.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Od(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Cu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Tu,xs;function rs(){return(rs=(0,O.Z)(function*(D,C,x,F,H){if(H&&H.global)D("event",x,F);else{const ee=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function Au(D){xs=D}function xu(D){Tu=D}function Jc(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,O.Z)(function*(){if(!(0,oe.hl)())return pr.warn(ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(D){return pr.warn(ai.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(D,C,x,F,H,ee,Ce){var Ye;const nt=_n(D);nt.then(Bn=>{x[Bn.measurementId]=Bn.appId,D.options.measurementId&&Bn.measurementId!==D.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>pr.error(Bn)),C.push(nt);const Qe=Jc().then(Bn=>{if(Bn)return F.getId()}),[Nt,Et]=yield Promise.all([nt,Qe]);So(ee)||mg(ee,Nt.measurementId),xs&&(H("consent","default",xs),Au(void 0)),H("js",new Date);const gr=null!==(Ye=Ce?.config)&&void 0!==Ye?Ye:{};return gr.origin="firebase",gr.update=!0,null!=Et&&(gr[Kr]=Et),H("config",Nt.measurementId,gr),Tu&&(H("set",Tu),xu(void 0)),Nt.measurementId})).apply(this,arguments)}class tl{constructor(C){this.app=C}_delete(){return delete is[this.app.options.appId],Promise.resolve()}}let is={},Ru=[];const Da={};let nl,Ai,Si="dataLayer",ui=!1;function Pd(D,C,x){!function kd(){const D=[];if((0,oe.ru)()&&D.push("This is a browser extension environment."),(0,oe.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,H)=>`(${H+1}) ${F}`).join(" "),x=ai.create("invalid-analytics-context",{errorInfo:C});pr.warn(x.message)}}();const F=D.options.appId;if(!F)throw ai.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ai.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=is[F])throw ai.create("already-exists",{id:F});if(!ui){!function Df(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Si);const{wrappedGtag:ee,gtagCore:Ce}=function Rd(D,C,x,F,H){let ee=function(...Ce){window[F].push(arguments)};return window[H]&&"function"==typeof window[H]&&(ee=window[H]),window[H]=function Zc(D,C,x,F){function ee(){return(ee=(0,O.Z)(function*(Ce,Ye,nt){try{"event"===Ce?yield bu(D,C,x,Ye,nt):"config"===Ce?yield Cs(D,C,x,F,Ye,nt):"consent"===Ce?D("consent","update",nt):D("set",Ye)}catch(Qe){pr.error(Qe)}})).apply(this,arguments)}return function H(Ce,Ye,nt){return ee.apply(this,arguments)}}(ee,D,C,x),{gtagCore:ee,wrappedGtag:window[H]}}(is,Ru,Da,Si,"gtag");Ai=ee,nl=Ce,ui=!0}return is[F]=function No(D,C,x,F,H,ee,Ce){return el.apply(this,arguments)}(D,Ru,Da,C,nl,Si,x),new tl(D)}function rl(){return ji.apply(this,arguments)}function ji(){return(ji=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const on="@firebase/analytics";!function xf(){(0,se._registerComponent)(new ae.wA(qc,(C,{options:x})=>Pd(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new ae.wA("analytics-internal",function D(C){try{const x=C.getProvider(qc).getImmediate();return{logEvent:(F,H,ee)=>function eo(D,C,x,F){D=(0,oe.m9)(D),function Mo(D,C,x,F,H){return rs.apply(this,arguments)}(Ai,is[D.app.options.appId],C,x,F).catch(H=>pr.error(H))}(x,F,H,ee)}}catch(x){throw ai.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(on,"0.9.1"),(0,se.registerVersion)(on,"0.9.1","esm2017")}();var Mf=k(4408),Rf=k(7565);const Nf=new class il extends Rf.v{}(class $y extends Mf.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):(C.flush(this),0)}});var Of=k(4986),ol=k(8505),fn=k(5363),Aa=k(9468);const Ou=new h.GfV("7.5.0"),Vd="__angularfire_symbol__analyticsIsSupportedValue",Qr="__angularfire_symbol__analyticsIsSupported",$i="__angularfire_symbol__remoteConfigIsSupportedValue",ku="__angularfire_symbol__remoteConfigIsSupported",xa="__angularfire_symbol__messagingIsSupportedValue",ko="__angularfire_symbol__messagingIsSupported";function Fn(D,C,x){if(C){if(1===C.length)return C[0];const ee=C.filter(Ce=>Ce.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Qr]||(globalThis[Qr]=rl().then(D=>globalThis[Vd]=D).catch(()=>globalThis[Vd]=!1)),globalThis[ko]||(globalThis[ko]=zc().then(D=>globalThis[xa]=D).catch(()=>globalThis[xa]=!1)),globalThis[ku]||(globalThis[ku]=ca().then(D=>globalThis[$i]=D).catch(()=>globalThis[$i]=!1));const Xe=(D,C)=>{const x=C?[C]:(0,Q.C6)(),F=[];return x.forEach(H=>{H.container.getProvider(D).instances.forEach(Ce=>{F.includes(Ce)||F.push(Ce)})}),F};function Yn(){}class Qn{constructor(C,x=Nf){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const H=this.zone;return this.delegate.schedule(function(Ce){H.runGuarded(()=>{C.apply(this,[Ce])})},x,F)}}class Ud{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yn,{},Yn,Yn)),x.pipe((0,ol.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Qn(Zone.current)),this.insideAngular=x.run(()=>new Qn(Zone.current,Of.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(h.LFG(h.R0b))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Xn(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Pf(D){return D.pipe((0,fn.Q)(Xn().outsideAngular))}function Po(D){return Xn(),function Ma(D){return function(x){return(x=x.lift(new Ud(D.ngZone))).pipe((0,Aa.R)(D.outsideAngular),(0,fn.Q)(D.insideAngular))}}(Xn())(D)}},2090:(st,Ee,k)=>{k.d(Ee,{$s:()=>We,BH:()=>_e,G6:()=>ot,L:()=>de,LL:()=>Qt,Pz:()=>Te,Sg:()=>Se,UG:()=>U,US:()=>ae,ZB:()=>$,ZR:()=>lt,aH:()=>Fe,b$:()=>Y,eu:()=>ln,hl:()=>en,jU:()=>ye,m9:()=>kt,ne:()=>Es,pd:()=>vn,r3:()=>ws,ru:()=>q,tV:()=>le,uI:()=>Oe,vZ:()=>dn,w1:()=>ne,xO:()=>Xi,xb:()=>Nr,z$:()=>Le,zI:()=>Rt,zd:()=>vi});const se=function(B){const L=[];let W=0;for(let ge=0;ge<B.length;ge++){let J=B.charCodeAt(ge);J<128?L[W++]=J:J<2048?(L[W++]=J>>6|192,L[W++]=63&J|128):55296==(64512&J)&&ge+1<B.length&&56320==(64512&B.charCodeAt(ge+1))?(J=65536+((1023&J)<<10)+(1023&B.charCodeAt(++ge)),L[W++]=J>>18|240,L[W++]=J>>12&63|128,L[W++]=J>>6&63|128,L[W++]=63&J|128):(L[W++]=J>>12|224,L[W++]=J>>6&63|128,L[W++]=63&J|128)}return L},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let J=0;J<B.length;J+=3){const Je=B[J],Pt=J+1<B.length,qt=Pt?B[J+1]:0,En=J+2<B.length,gt=En?B[J+2]:0;let Zn=(15&qt)<<2|gt>>6,go=63&gt;En||(go=64,Pt||(Zn=64)),ge.push(W[Je>>2],W[(3&Je)<<4|qt>>4],W[Zn],W[go])}return ge.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(se(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let W=0,ge=0;for(;W<B.length;){const J=B[W++];if(J<128)L[ge++]=String.fromCharCode(J);else if(J>191&&J<224){const Je=B[W++];L[ge++]=String.fromCharCode((31&J)<<6|63&Je)}else if(J>239&&J<365){const En=((7&J)<<18|(63&B[W++])<<12|(63&B[W++])<<6|63&B[W++])-65536;L[ge++]=String.fromCharCode(55296+(En>>10)),L[ge++]=String.fromCharCode(56320+(1023&En))}else{const Je=B[W++],Pt=B[W++];L[ge++]=String.fromCharCode((15&J)<<12|(63&Je)<<6|63&Pt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const W=L?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let J=0;J<B.length;){const Je=W[B.charAt(J++)],qt=J<B.length?W[B.charAt(J)]:0;++J;const gt=J<B.length?W[B.charAt(J)]:64;++J;const $t=J<B.length?W[B.charAt(J)]:64;if(++J,null==Je||null==qt||null==gt||null==$t)throw Error();ge.push(Je<<2|qt>>4),64!==gt&&(ge.push(qt<<4&240|gt>>2),64!==$t&&ge.push(gt<<6&192|$t))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},de=function(B){return function(B){const L=se(B);return ae.encodeByteArray(L,!0)}(B).replace(/\./g,"")},le=function(B){try{return ae.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function $(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const W in L)!L.hasOwnProperty(W)||!Z(W)||(B[W]=$(B[W],L[W]));return B}function Z(B){return"__proto__"!==B}const he=()=>{try{return function Ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&le(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Fe=()=>{var B;return null===(B=he())||void 0===B?void 0:B.config},Te=B=>{var L;return null===(L=he())||void 0===L?void 0:L[`_${B}`]};class _e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,W)=>{this.resolve=L,this.reject=W})}wrapCallback(L){return(W,ge)=>{W?this.reject(W):this.resolve(ge),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(W):L(W,ge))}}}function Se(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=L||"demo-project",J=B.iat||0,Je=B.sub||B.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pt=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:J,exp:J+3600,auth_time:J,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},B);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(Pt)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function U(){var B;const L=null===(B=he())||void 0===B?void 0:B.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function q(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ne(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function ot(){return!U()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function en(){try{return"object"==typeof indexedDB}catch{return!1}}function ln(){return new Promise((B,L)=>{try{let W=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ge);J.onsuccess=()=>{J.result.close(),W||self.indexedDB.deleteDatabase(ge),B(!0)},J.onupgradeneeded=()=>{W=!1},J.onerror=()=>{var Je;L((null===(Je=J.error)||void 0===Je?void 0:Je.message)||"")}}catch(W){L(W)}})}function Rt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class lt extends Error{constructor(L,W,ge){super(W),this.code=L,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}}class Qt{constructor(L,W,ge){this.service=L,this.serviceName=W,this.errors=ge}create(L,...W){const ge=W[0]||{},J=`${this.service}/${L}`,Je=this.errors[L],Pt=Je?function _r(B,L){return B.replace(xr,(W,ge)=>{const J=L[ge];return null!=J?String(J):`<${ge}?>`})}(Je,ge):"Error";return new lt(J,`${this.serviceName}: ${Pt} (${J}).`,ge)}}const xr=/\{\$([^}]+)}/g;function ws(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function Nr(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function dn(B,L){if(B===L)return!0;const W=Object.keys(B),ge=Object.keys(L);for(const J of W){if(!ge.includes(J))return!1;const Je=B[J],Pt=L[J];if(zr(Je)&&zr(Pt)){if(!dn(Je,Pt))return!1}else if(Je!==Pt)return!1}for(const J of ge)if(!W.includes(J))return!1;return!0}function zr(B){return null!==B&&"object"==typeof B}function Xi(B){const L=[];for(const[W,ge]of Object.entries(B))Array.isArray(ge)?ge.forEach(J=>{L.push(encodeURIComponent(W)+"="+encodeURIComponent(J))}):L.push(encodeURIComponent(W)+"="+encodeURIComponent(ge));return L.length?"&"+L.join("&"):""}function vi(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[J,Je]=ge.split("=");L[decodeURIComponent(J)]=decodeURIComponent(Je)}}),L}function vn(B){const L=B.indexOf("?");if(!L)return"";const W=B.indexOf("#",L);return B.substring(L,W>0?W:void 0)}function Es(B,L){const W=new Tt(B,L);return W.subscribe.bind(W)}class Tt{constructor(L,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{L(this)}).catch(ge=>{this.error(ge)})}next(L){this.forEachObserver(W=>{W.next(L)})}error(L){this.forEachObserver(W=>{W.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,W,ge){let J;if(void 0===L&&void 0===W&&void 0===ge)throw new Error("Missing Observer.");J=function _t(B,L){if("object"!=typeof B||null===B)return!1;for(const W of L)if(W in B&&"function"==typeof B[W])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:W,complete:ge},void 0===J.next&&(J.next=Ji),void 0===J.error&&(J.error=Ji),void 0===J.complete&&(J.complete=Ji);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Je}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,L)}sendOne(L,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{W(this.observers[L])}catch(ge){typeof console<"u"&&console.error&&console.error(ge)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ji(){}function We(B,L=1e3,W=2){const ge=L*Math.pow(W,B),J=Math.round(.5*ge*(Math.random()-.5)*2);return Math.min(144e5,ge+J)}function kt(B){return B&&B._delegate?B._delegate:B}},2262:(st,Ee,k)=>{var h=k(4650);let Q=null;function O(){return Q}class oe{}const ae=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function de(){return(0,h.LFG)(j)}()},providedIn:"platform"}),n})();const le=new h.OlP("Location Initialized");let j=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){$()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){$()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Z(){return new j((0,h.LFG)(ae))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let tt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(be)},providedIn:"root"}),n})();const he=new h.OlP("appBaseHref");let be=(()=>{class n extends tt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+He(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+He(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(he,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),we=(()=>{class n extends tt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(he,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Le(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ie(Se(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function _e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,Se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=He,n.joinWithSlash=Ue,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(h.LFG(tt))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Te(){return new Fe((0,h.LFG)(tt))}()},providedIn:"root"}),n})();function Se(n){return n.replace(/\/index.html$/,"")}const Oe={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var U=(()=>((U=U||{})[U.Decimal=0]="Decimal",U[U.Percent=1]="Percent",U[U.Currency=2]="Currency",U[U.Scientific=3]="Scientific",U))(),ne=(()=>((ne=ne||{})[ne.Decimal=0]="Decimal",ne[ne.Group=1]="Group",ne[ne.List=2]="List",ne[ne.PercentSign=3]="PercentSign",ne[ne.PlusSign=4]="PlusSign",ne[ne.MinusSign=5]="MinusSign",ne[ne.Exponential=6]="Exponential",ne[ne.SuperscriptingExponent=7]="SuperscriptingExponent",ne[ne.PerMille=8]="PerMille",ne[ne.Infinity=9]="Infinity",ne[ne.NaN=10]="NaN",ne[ne.TimeSeparator=11]="TimeSeparator",ne[ne.CurrencyDecimal=12]="CurrencyDecimal",ne[ne.CurrencyGroup=13]="CurrencyGroup",ne))();function ht(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ne.CurrencyDecimal)return t[h.wAp.NumberSymbols][ne.Decimal];if(e===ne.CurrencyGroup)return t[h.wAp.NumberSymbols][ne.Group]}return r}const En=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function uu(n,e,t,r,s){const l=function In(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],l=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],m=l[0],w=l[1]||"";t.posPre=m.substring(0,m.indexOf("#"));for(let S=0;S<w.length;S++){const N=w.charAt(S);"0"===N?t.minFrac=t.maxFrac=S+1:"#"===N?t.maxFrac=S+1:t.posSuf+=N}const b=m.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,u){const S=s.length-t.posPre.length-t.posSuf.length,N=u.indexOf("#");t.negPre=u.substring(0,N).replace(/'/g,""),t.negSuf=u.slice(N+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function mn(n,e){return(0,h.cg1)(n)[h.wAp.NumberFormats][e]}(e,U.Currency),ht(e,ne.MinusSign));return l.minFrac=function vi(n){let e;const t=Oe[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),l.maxFrac=l.minFrac,function ia(n,e,t,r,s,u,l=!1){let m="",w=!1;if(isFinite(n)){let b=function Rc(n){let r,s,u,l,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(m=e.length))r=[0],s=1;else{for(m--;"0"===e.charAt(m);)m--;for(s-=u,r=[],l=0;u<=m;u++,l++)r[l]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);l&&(b=function pd(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let S=e.minInt,N=e.minFrac,V=e.maxFrac;if(u){const At=u.match(En);if(null===At)throw new Error(`${u} is not a valid digit info`);const ut=At[1],it=At[3],bt=At[5];null!=ut&&(S=oa(ut)),null!=it&&(N=oa(it)),null!=bt?V=oa(bt):null!=it&&N>V&&(V=N)}!function sa(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let l=u+n.integerLen,m=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let N=l;N<r.length;N++)r[N]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let N=1;N<l;N++)r[N]=0}if(m>=5)if(l-1<0){for(let N=0;N>l;N--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;s<Math.max(0,u);s++)r.push(0);let w=0!==u;const b=e+n.integerLen,S=r.reduceRight(function(N,V,K,te){return te[K]=(V+=N)<10?V:V-10,w&&(0===te[K]&&K>=b?te.pop():w=!1),V>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(b,N,V);let K=b.digits,te=b.integerLen;const xe=b.exponent;let Me=[];for(w=K.every(At=>!At);te<S;te++)K.unshift(0);for(;te<0;te++)K.unshift(0);te>0?Me=K.splice(te,K.length):(Me=K,K=[0]);const Ct=[];for(K.length>=e.lgSize&&Ct.unshift(K.splice(-e.lgSize,K.length).join(""));K.length>e.gSize;)Ct.unshift(K.splice(-e.gSize,K.length).join(""));K.length&&Ct.unshift(K.join("")),m=Ct.join(ht(t,r)),Me.length&&(m+=ht(t,s)+Me.join("")),xe&&(m+=ht(t,ne.Exponential)+"+"+xe)}else m=ht(t,ne.Infinity);return m=n<0&&!w?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,l,e,ne.CurrencyGroup,ne.CurrencyDecimal,s).replace("\xa4",t).replace("\xa4","").trim()}function oa(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class qr{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ei=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new qr(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Nn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Nn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Nn(n,e){n.context.$implicit=e.item}let yn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Gs("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Gs("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class mo{constructor(){this.$implicit=null,this.ngIf=null}}function Gs(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function On(n,e){return new h.vHH(2100,!1)}class sn{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class hg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ri=new hg,gd=new sn;let zs=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return ri;if((0,h.F4k)(t))return gd;throw On()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),vo=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,s="symbol",u,l){if(!function kc(n){return!(null==n||""===n||n!=n)}(t))return null;l=l||this._locale,"boolean"==typeof s&&(s=s?"symbol":"code");let m=r||this._defaultCurrencyCode;"code"!==s&&(m="symbol"===s||"symbol-narrow"===s?function dt(n,e,t="en"){const r=function Rr(n){return(0,h.cg1)(n)[h.wAp.Currencies]}(t)[n]||Oe[n]||[],s=r[1];return"narrow"===e&&"string"==typeof s?s:r[0]||n}(m,"symbol"===s?"wide":"narrow",l):s);try{return uu(function _d(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),l,m,r,u)}catch(w){throw On()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(h.EJc,16))},n.\u0275pipe=h.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let Ci=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Lc(n){return"server"===n}let bs=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new da((0,h.LFG)(ae),window)}),n})();class da{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function du(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ks(this.window.history)||Ks(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ks(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Df extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Cs extends Df{static makeCurrent(){!function se(n){Q||(Q=n)}(new Cs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bu(){return oi=oi||document.querySelector("base"),oi?oi.getAttribute("href"):null}();return null==t?null:function Zc(n){Ti=Ti||document.createElement("a"),Ti.setAttribute("href",n);const e=Ti.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){oi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ir(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ti,oi=null;const Rd=new h.OlP("TRANSITION_ID"),wa=[{provide:h.ip1,useFactory:function So(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Rd,ae,h.zs3],multi:!0}];let Kc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ea=new h.OlP("EventManagerPlugins");let Bi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ea),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Yc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Nd=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ts=(()=>{class n extends Nd{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,s.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Qc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Qc))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Qc(n){O().remove(n)}const _n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ao=/%COMP%/g;function Mo(n,e){return e.flat(100).map(t=>t.replace(Ao,n))}function rs(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Js=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new As(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Yr(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case h.ifc.ShadowDom:return new Xc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Mo(r.id,r.styles);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bi),h.LFG(Ts),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class As{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_n[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Su(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Su(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=_n[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=_n[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,rs(r)):this.eventManager.addEventListener(e,t,rs(r))}}function Su(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Yr extends As{constructor(e,t,r,s){super(e),this.component=r;const u=Mo(s+"-"+r.id,r.styles);t.addStyles(u),this.contentAttr=function Cu(n){return"_ngcontent-%COMP%".replace(Ao,n)}(s+"-"+r.id),this.hostAttr=function Tu(n){return"_nghost-%COMP%".replace(Ao,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Xc extends As{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Mo(s.id,s.styles);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ro=(()=>{class n extends Yc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const xs=["alt","control","meta","shift"],Au={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Jc=(()=>{class n extends Yc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),xs.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=Au[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),xs.forEach(l=>{l!==s&&(0,xu[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const nl=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Ru(){Cs.makeCurrent()},multi:!0},{provide:ae,useFactory:function Si(){return(0,h.RDi)(document),document},deps:[]}]),Ai=new h.OlP(""),ui=[{provide:h.rWj,useClass:class ai{addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Cf=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Da(){return new h.qLn},deps:[]},{provide:Ea,useClass:Ro,multi:!0,deps:[ae,h.R0b,h.Lbi]},{provide:Ea,useClass:Jc,multi:!0,deps:[ae]},{provide:Js,useClass:Js,deps:[Bi,Ts,h.AFp]},{provide:h.FYo,useExisting:Js},{provide:Nd,useExisting:Ts},{provide:Ts,useClass:Ts,deps:[ae]},{provide:Bi,useClass:Bi,deps:[Ea,h.R0b]},{provide:class Ys{},useClass:Kc,deps:[]},[]];let kd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Rd,useExisting:h.AFp},wa]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ai,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Cf,...ui],imports:[Ci,h.hGG]}),n})(),ji=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function rl(){return new ji((0,h.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var an=k(8996),Fn=k(7669);function Xe(...n){const e=(0,Fn.yG)(n);return(0,an.D)(n,e)}var Yn=k(7579);class Qn extends Yn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Fu=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Xn=k(9751);const{isArray:al}=Array,{getPrototypeOf:ss,prototype:Pf,keys:Bd}=Object;function Po(n){if(1===n.length){const e=n[0];if(al(e))return{args:e,keys:null};if(function Ma(n){return n&&"object"==typeof n&&ss(n)===Pf}(e)){const t=Bd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var to=k(4671),pt=k(4004);const{isArray:D}=Array;function x(n){return(0,pt.U)(e=>function C(n,e){return D(e)?n(...e):n(e)}(n,e))}function F(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var H=k(5403),ee=k(9672);function Ce(...n){const e=(0,Fn.yG)(n),t=(0,Fn.jO)(n),{args:r,keys:s}=Po(n);if(0===r.length)return(0,an.D)([],e);const u=new Xn.y(function Ye(n,e,t=to.y){return r=>{nt(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)nt(e,()=>{const b=(0,an.D)(n[w],e);let S=!1;b.subscribe((0,H.x)(r,N=>{u[w]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>F(s,l):to.y));return t?u.pipe(x(t)):u}function nt(n,e,t){n?(0,ee.f)(t,n,e):e()}var Qe=k(8189);function Et(...n){return function Nt(){return(0,Qe.J)(1)}()((0,an.D)(n,(0,Fn.yG)(n)))}var gr=k(8421);function Bn(n){return new Xn.y(e=>{(0,gr.Xf)(n()).subscribe(e)})}var Ra=k(9635),Na=k(576);function Hi(n,e){const t=(0,Na.m)(n)?n:()=>n,r=s=>s.error(t());return new Xn.y(e?s=>e.schedule(r,0,s):r)}var Jn=k(515),Gi=k(727),Dn=k(4482);function jd(){return(0,Dn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,H.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class yg extends Xn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Gi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,H.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Gi.w0.EMPTY)}return e}refCount(){return jd()(this)}}function jn(n,e){return(0,Dn.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,H.x)(r,w=>{s?.unsubscribe();let b=0;const S=u++;(0,gr.Xf)(n(w,S)).subscribe(s=(0,H.x)(r,N=>r.next(e?e(w,N,S,b++):N),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function Lu(n){return n<=0?()=>Jn.E:(0,Dn.e)((e,t)=>{let r=0;e.subscribe((0,H.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function ul(...n){const e=(0,Fn.yG)(n);return(0,Dn.e)((t,r)=>{(e?Et(n,t,e):Et(n,t)).subscribe(r)})}function Ms(n,e){return(0,Dn.e)((t,r)=>{let s=0;t.subscribe((0,H.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Lr=k(5577);function $d(n){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,H.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Oa(n=Z0){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,H.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Z0(){return new Fu}function Fo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((s,u)=>n(s,u,r)):to.y,Lu(1),t?$d(e):Oa(()=>new Fu))}function no(n,e){return(0,Na.m)(e)?(0,Lr.z)(n,e,1):(0,Lr.z)(n,1)}var Xr=k(8505);function ka(n){return(0,Dn.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,H.x)(t,void 0,void 0,l=>{u=(0,gr.Xf)(n(l,ka(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function K0(n,e,t,r,s){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,H.x)(l,S=>{const N=b++;w=m?n(w,S,N):(m=!0,S),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}function Hd(n,e){return(0,Dn.e)(K0(n,e,arguments.length>=2,!0))}function _g(n){return n<=0?()=>Jn.E:(0,Dn.e)((e,t)=>{let r=[];e.subscribe((0,H.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Gd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((s,u)=>n(s,u,r)):to.y,_g(1),t?$d(e):Oa(()=>new Fu))}function zd(n){return(0,Dn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",Vu=Symbol("RouteTitle");class os{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uu(n){return new os(n)}function Gy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function as(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Bu(n[s],e[s]))return!1;return!0}function Bu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function wg(n){return Array.prototype.concat.apply([],n)}function qd(n){return n.length>0?n[n.length-1]:null}function sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Lo(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,an.D)(Promise.resolve(n)):Xe(n)}const ju=!1,ci={exact:function Dr(n,e,t){if(!Uo(n.segments,e.segments)||!dl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dr(n.children[r],e.children[r],t))return!1;return!0},subset:Vf},cl={exact:function Lf(n,e){return as(n,e)},subset:function ll(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Bu(n[t],e[t]))},ignored:()=>!0};function Wd(n,e,t){return ci[t.paths](n.root,e.root,t.matrixParams)&&cl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vf(n,e,t){return Uf(n,e,e.segments,t)}function Uf(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Uo(s,t)||e.hasChildren()||!dl(s,t,r))}if(n.segments.length===t.length){if(!Uo(n.segments,t)||!dl(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Vf(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Uo(n.segments,s)&&dl(n.segments,s,r)&&n.children[Gt])&&Uf(n.children[Gt],e,u,r)}}function dl(n,e,t){return e.every((r,s)=>cl[t](n[s].parameters,r.parameters))}class Vo{constructor(e=new Wt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uu(this.queryParams)),this._queryParamMap}toString(){return jf.serialize(this)}}class Wt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,sr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zd(this)}}class zi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uu(this.parameters)),this._parameterMap}toString(){return Yd(this)}}function Uo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let hl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Pa},providedIn:"root"}),n})();class Pa{parse(e){const t=new Ky(e);return new Vo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${us(e.root,!0)}`,r=function bg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Kd(t)}=${Kd(s)}`).join("&"):`${Kd(t)}=${Kd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function fl(n){return encodeURI(n)}(e.fragment)}`:""}`}}const jf=new Pa;function Zd(n){return n.segments.map(e=>Yd(e)).join("/")}function us(n,e){if(!n.hasChildren())return Zd(n);if(e){const t=n.children[Gt]?us(n.children[Gt],!1):"",r=[];return sr(n.children,(s,u)=>{u!==Gt&&r.push(`${u}:${us(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Bf(n,e){let t=[];return sr(n.children,(r,s)=>{s===Gt&&(t=t.concat(e(r,s)))}),sr(n.children,(r,s)=>{s!==Gt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Gt?[us(n.children[Gt],!1)]:[`${s}:${us(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${Zd(n)}/${t[0]}`:`${Zd(n)}/(${t.join("//")})`}}function Eg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kd(n){return Eg(n).replace(/%3B/gi,";")}function pl(n){return Eg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gl(n){return decodeURIComponent(n)}function Fa(n){return gl(n.replace(/\+/g,"%20"))}function Yd(n){return`${pl(n.path)}${function Ig(n){return Object.keys(n).map(e=>`;${pl(e)}=${pl(n[e])}`).join("")}(n.parameters)}`}const ml=/^[^\/()?;=#]+/;function Qd(n){const e=n.match(ml);return e?e[0]:""}const Wy=/^[^=?&#]+/,Hf=/^[^&#]+/;class Ky{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new Wt(e,t)),r}parseSegment(){const e=Qd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,ju);return this.capture(e),new zi(gl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Qd(this.remaining);s&&(r=s,this.capture(r))}e[gl(t)]=gl(r)}parseQueryParam(e){const t=function $f(n){const e=n.match(Wy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Zy(n){const e=n.match(Hf);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Fa(t),u=Fa(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qd(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.vHH(4010,ju);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Gt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Gt]:new Wt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,ju)}}function La(n){return n.segments.length>0?new Wt([],{[Gt]:n}):n}function $u(n){const e={};for(const r of Object.keys(n.children)){const u=$u(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Dg(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new Wt(n.segments.concat(e.segments),e.children)}return n}(new Wt(n.segments,e))}function ro(n){return n instanceof Vo}function Va(n,e,t,r,s){if(0===t.length)return Ua(e.root,e.root,e.root,r,s);const u=function Sg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yl(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return sr(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new yl(t,e,r)}(t);return u.toRoot()?Ua(e.root,e.root,new Wt([],{}),r,s):function l(w){const b=function Jd(n,e,t,r){if(n.isAbsolute)return new Ba(e.root,!0,0);if(-1===r)return new Ba(t,t===e.root,0);return function Gu(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new h.vHH(4005,!1);s=r.segments.length}return new Ba(r,!1,s-u)}(t,r+(Rs(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=b.processChildren?Ns(b.segmentGroup,b.index,u.commands):zu(b.segmentGroup,b.index,u.commands);return Ua(e.root,b.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function Rs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hu(n){return"object"==typeof n&&null!=n&&n.outlets}function Ua(n,e,t,r,s){let l,u={};r&&sr(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),l=n===e?t:Yy(n,e,t);const m=La($u(l));return new Vo(m,u,s)}function Yy(n,e,t){const r={};return sr(n.children,(s,u)=>{r[u]=s===e?t:Yy(s,e,t)}),new Wt(n.segments,r)}class yl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rs(r[0]))throw new h.vHH(4003,!1);const s=r.find(Hu);if(s&&s!==qd(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ba{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function zu(n,e,t){if(n||(n=new Wt([],{})),0===n.segments.length&&n.hasChildren())return Ns(n,e,t);const r=function Ag(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(Hu(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!qu(w,b,l))return u;r+=2}else{if(!qu(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Wt(n.segments.slice(0,r.pathIndex),{});return u.children[Gt]=new Wt(n.segments.slice(r.pathIndex),n.children),Ns(u,0,s)}return r.match&&0===s.length?new Wt(n.segments,{}):r.match&&!n.hasChildren()?Cr(n,e,t):r.match?Ns(n,0,s):Cr(n,e,t)}function Ns(n,e,t){if(0===t.length)return new Wt(n.segments,{});{const r=function zf(n){return Hu(n[0])?n[0].outlets:{[Gt]:n}}(t),s={};return sr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=zu(n.children[l],e,u))}),sr(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Wt(n.segments,s)}}function Cr(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Hu(u)){const w=ja(u.outlets);return new Wt(r,w)}if(0===s&&Rs(t[0])){r.push(new zi(n.segments[e].path,_l(t[0]))),s++;continue}const l=Hu(u)?u.outlets[Gt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&Rs(m)?(r.push(new zi(l,_l(m))),s+=2):(r.push(new zi(l,{})),s++)}return new Wt(r,{})}function ja(n){const e={};return sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Cr(new Wt([],{}),0,t))}),e}function _l(n){const e={};return sr(n,(t,r)=>e[r]=`${t}`),e}function qu(n,e,t){return n==t.path&&as(e,t.parameters)}const $a="imperative";class xi{constructor(e,t){this.id=e,this.url=t}}class qf extends xi{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bo extends xi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class eh extends xi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Os extends xi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class th extends xi{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nh extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wf extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ha extends xi{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xg extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class li extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wu{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vl{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ng=(()=>{class n{createUrlTree(t,r,s,u,l,m){return Va(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Xy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return Ng.\u0275fac(e)},providedIn:"root"}),n})();class Og{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=y(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=y(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=f(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return f(e,this._root).map(t=>t.value)}}function y(n,e){if(n===e.value)return e;for(const t of e.children){const r=y(n,t);if(r)return r}return null}function f(n,e){if(n===e.value)return[e];for(const t of e.children){const r=f(n,t);if(r.length)return r.unshift(e),r}return[]}class g{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function v(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class A extends Og{constructor(e,t){super(e),this.snapshot=t,$n(this,e)}toString(){return this.snapshot.toString()}}function R(n,e){const t=function z(n,e){const l=new yt([],{},{},"",{},Gt,e,null,n.root,-1,{});return new ct("",new g(l,[]))}(n,e),r=new Qn([new zi("",{})]),s=new Qn({}),u=new Qn({}),l=new Qn({}),m=new Qn(""),w=new ce(r,s,l,m,u,Gt,e,t.root);return w.snapshot=t.root,new A(new g(w,[]),t)}class ce{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,pt.U)(b=>b[Vu]))??Xe(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Uu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Uu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Be(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ze(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yt{get title(){return this.data?.[Vu]}constructor(e,t,r,s,u,l,m,w,b,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ct extends Og{constructor(e,t){super(t),this.url=e,$n(this,t)}toString(){return qi(this._root)}}function $n(n,e){e.value._routerState=n,e.children.forEach(t=>$n(n,t))}function qi(n){const e=n.children.length>0?` { ${n.children.map(qi).join(", ")} } `:"";return`${n.value}${e}`}function Zu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,as(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),as(e.params,t.params)||n.params.next(t.params),function zy(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!as(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),as(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rh(n,e){const t=as(n.params,e.params)&&function qy(n,e){return Uo(n,e)&&n.every((t,r)=>as(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rh(n.parent,e.parent))}function di(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Ku(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return di(n,r,s);return di(n,r)})}(n,e,t);return new g(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>di(n,m)),l}}const r=function ih(n){return new ce(new Qn(n.url),new Qn(n.params),new Qn(n.queryParams),new Qn(n.fragment),new Qn(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>di(n,u));return new g(r,s)}}const Il="ngNavigationCancelingError";function sh(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ro(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Qf(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Qf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Il]=!0,r.cancellationCode=e,t&&(r.url=t),r}function kg(n){return Jy(n)&&ro(n.url)}function Jy(n){return n&&n[Il]}class bl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ga,this.attachRef=null}}let Ga=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bl,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e_=!1;let X0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Ga),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,e_);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,e_);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,e_);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,e_);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new J0(t,m,s.injector);if(r&&function Yb(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class J0{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ce?this.route:e===Ga?this.childContexts:this.parent.get(e,t)}}let t_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[X0],encapsulation:2}),n})();function ew(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function r_(n){const e=n.children&&n.children.map(r_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=t_),t}function Wi(n){return n.outlet||Gt}function i_(n,e){const t=n.filter(r=>Wi(r)===e);return t.push(...n.filter(r=>Wi(r)!==e)),t}function Jf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class tD{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=v(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),sr(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=v(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=v(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=v(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new vl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new io(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Zu(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Zu(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Jf(s.snapshot),w=m?.get(h._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class tw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ep{constructor(e,t){this.component=e,this.route=t}}function wA(n,e,t){const r=n._root;return Dl(r,e?e._root:null,t,[r.value])}function jo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Dl(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=v(e);return n.children.forEach(l=>{(function nw(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function rw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Uo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Uo(n.url,e.url)||!as(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rh(n,e)||!as(n.queryParams,e.queryParams);default:return!rh(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new tw(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Dl(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new ep(m.outlet.component,l))}else l&&oh(e,m,s),s.canActivateChecks.push(new tw(r)),Dl(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),sr(u,(l,m)=>oh(l,t.getContext(m),s)),s}function oh(n,e,t){const r=v(n),s=n.value;sr(r,(u,l)=>{oh(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new ep(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Pg(n){return"function"==typeof n}function Fg(n){return n instanceof Fu||"EmptyError"===n?.name}const tp=Symbol("INITIAL_VALUE");function ks(){return jn(n=>Ce(n.map(e=>e.pipe(Lu(1),ul(tp)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===tp)return tp;if(!1===t||t instanceof Vo)return t}return!0}),Ms(e=>e!==tp),Lu(1)))}function aw(n){return(0,Ra.z)((0,Xr.b)(e=>{if(ro(e))throw sh(0,e)}),(0,pt.U)(e=>!0===e))}const Ug={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tl(n,e,t,r,s){const u=d_(n,e,t);return u.matched?function sD(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?Xe(s.map(l=>{const m=jo(l,n);return Lo(function o_(n){return n&&Pg(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(ks(),aw()):Xe(!0)}(r=ew(e,r),e,t).pipe((0,pt.U)(l=>!0===l?u:{...Ug})):Xe(u)}function d_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ug}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Gy)(t,n,e);if(!s)return{...Ug};const u={};sr(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function Bg(n,e,t,r){if(t.length>0&&function aD(n,e,t){return t.some(r=>jg(n,e,r)&&Wi(r)!==Gt)}(n,t,r)){const u=new Wt(e,function h_(n,e,t,r){const s={};s[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Wi(u)!==Gt){const l=new Wt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[Wi(u)]=l}return s}(n,e,r,new Wt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function uw(n,e,t){return t.some(r=>jg(n,e,r))}(n,t,r)){const u=new Wt(n.segments,function oD(n,e,t,r,s){const u={};for(const l of r)if(jg(n,t,l)&&!s[Wi(l)]){const m=new Wt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[Wi(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Wt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function jg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function f_(n,e,t,r){return!!(Wi(n)===r||r!==Gt&&jg(e,t,n))&&("**"===n.path||d_(e,n,t).matched)}function uD(n,e,t){return 0===e.length&&!n.children[t]}const $g=!1;class Yu{constructor(e){this.segmentGroup=e||null}}class cw{constructor(e){this.urlTree=e}}function $o(n){return Hi(new Yu(n))}function ah(n){return Hi(new cw(n))}class dD{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=Bg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Wt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Gt).pipe((0,pt.U)(u=>this.createUrlTree($u(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ka(u=>{if(u instanceof cw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Yu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Gt).pipe((0,pt.U)(s=>this.createUrlTree($u(s),e.queryParams,e.fragment))).pipe(ka(s=>{throw s instanceof Yu?this.noMatchError(s):s}))}noMatchError(e){return new h.vHH(4002,$g)}createUrlTree(e,t,r){const s=La(e);return new Vo(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new Wt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,an.D)(s).pipe(no(u=>{const l=r.children[u],m=i_(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,pt.U)(w=>({segment:w,outlet:u})))}),Hd((u,l)=>(u[l.outlet]=l.segment,u),{}),Gd())}expandSegment(e,t,r,s,u,l){return(0,an.D)(r).pipe(no(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(ka(b=>{if(b instanceof Yu)return Xe(null);throw b}))),Fo(m=>!!m),ka((m,w)=>{if(Fg(m))return uD(t,s,u)?Xe(new Wt([],{})):$o(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return f_(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):$o(t):$o(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ah(u):this.lineralizeSegments(r,u).pipe((0,Lr.z)(l=>{const m=new Wt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:S}=d_(t,s,u);if(!m)return $o(t);const N=this.applyRedirectCommands(w,s.redirectTo,S);return s.redirectTo.startsWith("/")?ah(N):this.lineralizeSegments(s,N).pipe((0,Lr.z)(V=>this.expandSegment(e,t,r,V.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=ew(r,e),r.loadChildren?(r._loadedRoutes?Xe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Wt(s,{})))):Xe(new Wt(s,{}))):Tl(t,r,s,e).pipe(jn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Lr.z)(S=>{const N=S.injector??e,V=S.routes,{segmentGroup:K,slicedSegments:te}=Bg(t,m,w,V),xe=new Wt(K.segments,K.children);if(0===te.length&&xe.hasChildren())return this.expandChildren(N,V,xe).pipe((0,pt.U)(ut=>new Wt(m,ut)));if(0===V.length&&0===te.length)return Xe(new Wt(m,{}));const Me=Wi(r)===u;return this.expandSegment(N,xe,V,te,Me?Gt:u,!0).pipe((0,pt.U)(At=>new Wt(m.concat(At.segments),At.children)))})):$o(t)))}getChildConfig(e,t,r){return t.children?Xe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Xe({routes:t._loadedRoutes,injector:t._loadedInjector}):function l_(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?Xe(!0):Xe(s.map(l=>{const m=jo(l,n);return Lo(function iw(n){return n&&Pg(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(ks(),aw())}(e,t,r).pipe((0,Lr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Xr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function lw(n){return Hi(Qf($g,3))}())):Xe({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Xe(r);if(s.numberOfChildren>1||!s.children[Gt])return Hi(new h.vHH(4e3,$g));s=s.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Vo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return sr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return sr(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new Wt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.vHH(4001,$g);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class dw{}class fD{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=Bg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new yt([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new g(r,t),u=new ct(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Be(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,an.D)(Object.keys(r.children)).pipe(no(s=>{const u=r.children[s],l=i_(t,s);return this.processSegmentGroup(e,l,u,s)}),Hd((s,u)=>s&&u?(s.push(...u),s):null),function vg(n,e=!1){return(0,Dn.e)((t,r)=>{let s=0;t.subscribe((0,H.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),$d(null),Gd(),(0,pt.U)(s=>{if(null===s)return null;const u=hw(s);return function y_(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,an.D)(t).pipe(no(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Fo(l=>!!l),ka(l=>{if(Fg(l))return uD(r,s,u)?Xe([]):Xe(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!f_(t,r,s,u))return Xe(null);let l;if("**"===t.path){const m=s.length>0?qd(s).parameters:{},w=pw(r)+s.length;l=Xe({snapshot:new yt(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gw(t),Wi(t),t.component??t._loadedComponent??null,t,fw(r),w,Sl(t)),consumedSegments:[],remainingSegments:[]})}else l=Tl(r,t,s,e).pipe((0,pt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:S})=>{if(!m)return null;const N=pw(r)+w.length;return{snapshot:new yt(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gw(t),Wi(t),t.component??t._loadedComponent??null,t,fw(r),N,Sl(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(jn(m=>{if(null===m)return Xe(null);const{snapshot:w,consumedSegments:b,remainingSegments:S}=m;e=t._injector??e;const N=t._loadedInjector??e,V=function np(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:K,slicedSegments:te}=Bg(r,b,S,V.filter(Me=>void 0===Me.redirectTo));if(0===te.length&&K.hasChildren())return this.processChildren(N,V,K).pipe((0,pt.U)(Me=>null===Me?null:[new g(w,Me)]));if(0===V.length&&0===te.length)return Xe([new g(w,[])]);const xe=Wi(t)===u;return this.processSegment(N,V,K,te,xe?Gt:u).pipe((0,pt.U)(Me=>null===Me?null:[new g(w,Me)]))}))}}function pD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function hw(n){const e=[],t=new Set;for(const r of n){if(!pD(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=hw(r.children);e.push(new g(r.value,s))}return e.filter(r=>!t.has(r))}function fw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function pw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function gw(n){return n.data||{}}function Sl(n){return n.resolve||{}}function _D(n){return"string"==typeof n.title||null===n.title}function Hg(n){return jn(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,pt.U)(()=>e)):Xe(e)})}const Al=new h.OlP("ROUTES");let __=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Xe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Lo(t.loadComponent()).pipe((0,pt.U)(Ps),(0,Xr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),zd(()=>{this.componentLoaders.delete(t)})),s=new yg(r,()=>new Yn.x).pipe(jd());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,S=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=wg(w.get(Al,[],h.XFs.Self|h.XFs.Optional)));return{routes:b.map(r_),injector:w}}),zd(()=>{this.childrenLoaders.delete(r)})),l=new yg(u,()=>new Yn.x).pipe(jd());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Lo(t()).pipe((0,pt.U)(Ps),(0,Lr.z)(s=>s instanceof h.YKP||Array.isArray(s)?Xe(s):(0,an.D)(this.compiler.compileModuleAsync(s))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ps(n){return function vD(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let rp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Yn.x,this.configLoader=(0,h.f3M)(__),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(hl),this.rootContexts=(0,h.f3M)(Ga),this.navigationId=0,this.afterPreactivation=()=>Xe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new Zf(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Mg(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Qn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$a,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ms(r=>0!==r.id),(0,pt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),jn(r=>{let s=!1,u=!1;return Xe(r).pipe((0,Xr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),jn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Os(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Jn.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return vw(l.source)&&(t.browserUrlTree=l.extractedUrl),Xe(l).pipe(jn(S=>{const N=this.transitions?.getValue();return this.events.next(new qf(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?Jn.E:Promise.resolve(S)}),function hD(n,e,t,r){return jn(s=>function lD(n,e,t,r,s){return new dD(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,pt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Xr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function za(n,e,t,r,s){return(0,Lr.z)(u=>function m_(n,e,t,r,s,u,l="emptyOnly"){return new fD(n,e,t,r,s,l,u).recognize().pipe(jn(m=>null===m?function g_(n){return new Xn.y(e=>e.error(n))}(new dw):Xe(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,pt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Xr.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(V,S)}t.browserUrlTree=S.urlAfterRedirects}const N=new nh(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:N,source:V,restoredState:K,extras:te}=l,xe=new qf(S,this.urlSerializer.serialize(N),V,K);this.events.next(xe);const Me=R(N,this.rootComponentType).snapshot;return Xe(r={...l,targetSnapshot:Me,urlAfterRedirects:N,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new Os(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Jn.E}}),(0,Xr.b)(l=>{const m=new Wf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,pt.U)(l=>r={...l,guards:wA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function rD(n,e){return(0,Lr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Xe({...t,guardsResult:!0}):function u_(n,e,t,r){return(0,an.D)(n).pipe((0,Lr.z)(s=>function ow(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Xe(u.map(m=>{const w=Jf(e)??s,b=jo(m,w);return Lo(function IA(n){return n&&Pg(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Fo())})).pipe(ks()):Xe(!0)}(s.component,s.route,t,e,r)),Fo(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Lr.z)(m=>m&&function nD(n){return"boolean"==typeof n}(m)?function Lg(n,e,t,r){return(0,an.D)(e).pipe(no(s=>Et(function c_(n,e){return null!==n&&e&&e(new Kf(n)),Xe(!0)}(s.route.parent,r),function iD(n,e){return null!==n&&e&&e(new Wu(n)),Xe(!0)}(s.route,r),function Cl(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function EA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Bn(()=>Xe(l.guards.map(w=>{const b=Jf(l.node)??t,S=jo(w,b);return Lo(function s_(n){return n&&Pg(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(Fo())})).pipe(ks())));return Xe(u).pipe(ks())}(n,s.path,t),function Vg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const s=r.map(u=>Bn(()=>{const l=Jf(e)??t,m=jo(u,l);return Lo(function sw(n){return n&&Pg(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Fo())}));return Xe(s).pipe(ks())}(n,s.route,t))),Fo(s=>!0!==s,!0))}(r,u,n,e):Xe(m)),(0,pt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Xr.b)(l=>{if(r.guardsResult=l.guardsResult,ro(l.guardsResult))throw sh(0,l.guardsResult);const m=new Ha(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Ms(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3,t),!1)),Hg(l=>{if(l.guards.canActivateChecks.length)return Xe(l).pipe((0,Xr.b)(m=>{const w=new xg(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),jn(m=>{let w=!1;return Xe(m).pipe(function mD(n,e){return(0,Lr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return Xe(t);let u=0;return(0,an.D)(s).pipe(no(l=>function yD(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!_D(s)&&(u[Vu]=s.title),function CA(n,e,t,r){const s=function TA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return Xe({});const u={};return(0,an.D)(s).pipe((0,Lr.z)(l=>function mw(n,e,t,r){const s=Jf(e)??r,u=jo(n,s);return Lo(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Fo(),(0,Xr.b)(m=>{u[l]=m}))),_g(1),function Ff(n){return(0,pt.U)(()=>n)}(u),ka(l=>Fg(l)?Jn.E:Hi(l)))}(u,n,e,r).pipe((0,pt.U)(l=>(n._resolvedData=l,n.data=Be(n,t).resolve,s&&_D(s)&&(n.data[Vu]=s.title),null)))}(l.route,r,n,e)),(0,Xr.b)(()=>u++),_g(1),(0,Lr.z)(l=>u===s.length?Xe(t):Jn.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Xr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2,t))}}))}),(0,Xr.b)(m=>{const w=new li(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),Hg(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Xr.b)(S=>{w.component=S}),(0,pt.U)(()=>{})));for(const S of w.children)b.push(...m(S));return b};return Ce(m(l.targetSnapshot.root)).pipe($d(),Lu(1))}),Hg(()=>this.afterPreactivation()),(0,pt.U)(l=>{const m=function El(n,e,t){const r=di(n,e._root,t?t._root:void 0);return new A(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Xr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new tD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,Xr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Bo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),zd(()=>{s||u||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ka(l=>{if(u=!0,Jy(l)){kg(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new eh(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),kg(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||vw(r.source)};t.scheduleNavigation(w,$a,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new th(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Jn.E}))}))}cancelNavigationTransition(t,r,s,u){const l=new eh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(l),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vw(n){return n!==$a}let ww=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[Vu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(wD)},providedIn:"root"}),n})(),wD=(()=>{class n extends ww{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ji))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ED=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(ID)},providedIn:"root"}),n})();class Ew{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let ID=(()=>{class n extends Ew{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zg=new h.OlP("",{providedIn:"root",factory:()=>({})});let jt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Iw)},providedIn:"root"}),n})(),Iw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bw(n){throw n}function DD(n,e,t){return e.parse("/")}const CD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(zg,{optional:!0})||{},this.errorHandler=this.options.errorHandler||bw,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||DD,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(jt),this.routeReuseStrategy=(0,h.f3M)(ED),this.urlCreationStrategy=(0,h.f3M)(Xy),this.titleStrategy=(0,h.f3M)(ww),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=wg((0,h.f3M)(Al,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(rp),this.urlSerializer=(0,h.f3M)(hl),this.location=(0,h.f3M)(Fe),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Vo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=R(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),$a,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(r_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let S=null;switch(m){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ro(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,$a,null,r)}navigate(t,r={skipLocationChange:!1}){return function Cw(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...CD}:!1===r?{...Dw}:r,ro(t))return Wd(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Wd(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,S;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((N,V)=>{m=N,w=V}),S="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===s?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qa=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Yn.x;const w=l.nativeElement.tagName;this.isAnchorElement="A"===w||"AREA"===w,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof Bo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Zi),h.Y36(ce),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(tt))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class w_{}let AD=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ms(t=>t instanceof Bo),no(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,an.D)(s).pipe((0,Qe.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Xe(null);const u=s.pipe((0,Lr.z)(l=>null===l?Xe(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,an.D)([u,l]).pipe((0,Qe.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(w_),h.LFG(__))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ip=new h.OlP("");let qg=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function lh(n,e){return{\u0275kind:n,\u0275providers:e}}function xl(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Zi),s=n.get(Sw);1===n.get(Wg)&&r.initialNavigation(),n.get(xw,null,h.XFs.Optional)?.setUpPreloading(),n.get(ip,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const Sw=new h.OlP("",{factory:()=>new Yn.x}),Wg=new h.OlP("",{providedIn:"root",factory:()=>1});const xw=new h.OlP("");function RD(n){return lh(0,[{provide:xw,useExisting:AD},{provide:w_,useExisting:n}])}const Mw=new h.OlP("ROUTER_FORROOT_GUARD"),Rw=[Fe,{provide:hl,useClass:Pa},Zi,Ga,{provide:ce,useFactory:function xD(n){return n.routerState.root},deps:[Zi]},__,[]];function Nw(){return new h.PXZ("Router",Zi)}let op=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Rw,[],{provide:Al,multi:!0,useValue:t},{provide:Mw,useFactory:NA,deps:[[Zi,new h.FiY,new h.tp0]]},{provide:zg,useValue:r||{}},r?.useHash?{provide:tt,useClass:we}:{provide:tt,useClass:be},{provide:ip,useFactory:()=>{const n=(0,h.f3M)(bs),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(zg),r=(0,h.f3M)(rp),s=(0,h.f3M)(hl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new qg(s,r,n,e,t)}},r?.preloadingStrategy?RD(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:Nw},r?.initialNavigation?dh(r):[],[{provide:b_,useFactory:xl},{provide:h.tb,multi:!0,useExisting:b_}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Al,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mw,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[t_]}),n})();function NA(n){return"guarded"}function dh(n){return["disabled"===n.initialNavigation?lh(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Zi);return()=>{e.setUpLocationChangeListener()}}},{provide:Wg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?lh(2,[{provide:Wg,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(le,Promise.resolve());return()=>t.then(()=>new Promise(s=>{const u=e.get(Zi),l=e.get(Sw);(function r(s){e.get(Zi).events.pipe(Ms(l=>l instanceof Bo||l instanceof eh||l instanceof th),(0,pt.U)(l=>l instanceof Bo||l instanceof eh&&(0===l.code||1===l.code)&&null),Ms(l=>null!==l),Lu(1)).subscribe(()=>{s()})})(()=>{s(!0)}),e.get(rp).afterPreactivation=()=>(s(!0),l.closed?Xe(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const b_=new h.OlP("");class hh{}hh.\u0275fac=function(e){return new(e||hh)},hh.\u0275mod=h.oAB({type:hh}),hh.\u0275inj=h.cJS({imports:[op.forRoot([]),op]});var ap=k(4986),gn=k(2122);function up(){return(0,Dn.e)((n,e)=>{let t,r=!1;n.subscribe((0,H.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function D_(n,e){return n===e}var at,Vr=k(2011),Kg=(k(750),k(3942)),pe=k(5861),cs=k(9681),Ml=k(4859),Ho=k(1877),Ht=k(2090),VD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Go={},Yg=Yg||{},Ot=VD||self;function Qg(){}function Xg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var C_="closure_uid_"+(1e9*Math.random()>>>0),OA=0;function T_(n,e,t){return n.call.apply(n.bind,arguments)}function kw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T_:kw).apply(null,arguments)}function Jg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ei(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function Wa(){this.s=this.s,this.o=this.o}Wa.prototype.s=!1,Wa.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ow(n){Object.prototype.hasOwnProperty.call(n,C_)&&n[C_]||(n[C_]=++OA)}(this)},Wa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function lp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Fw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Xg(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}fi.prototype.h=function(){this.defaultPrevented=!0};var BD=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",Qg,e),Ot.removeEventListener("test",Qg,e)}catch{}return n}();function em(n){return/^[\s\xa0]*$/.test(n)}var Lw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fs(n,e){return n<e?-1:n>e?1:0}function fh(){var n=Ot.navigator;return n&&(n=n.userAgent)?n:""}function zo(n){return-1!=fh().indexOf(n)}function S_(n){return S_[" "](n),n}S_[" "]=Qg;var gh,n,jD=zo("Opera"),ph=zo("Trident")||zo("MSIE"),Uw=zo("Edge"),dp=Uw||ph,Bw=zo("Gecko")&&!(-1!=fh().toLowerCase().indexOf("webkit")&&!zo("Edge"))&&!(zo("Trident")||zo("MSIE"))&&!zo("Edge"),$D=-1!=fh().toLowerCase().indexOf("webkit")&&!zo("Edge");function hp(){var n=Ot.document;return n?n.documentMode:void 0}e:{var mh="",jw=(n=fh(),Bw?/rv:([^\);]+)(\)|;)/.exec(n):Uw?/Edge\/([\d\.]+)/.exec(n):ph?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$D?/WebKit\/(\S+)/.exec(n):jD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(jw&&(mh=jw?jw[1]:""),ph){var fp=hp();if(null!=fp&&fp>parseFloat(mh)){gh=String(fp);break e}}gh=mh}var kA={};var Hw=Ot.document&&ph&&(hp()||parseInt(gh,10))||void 0;function Rl(n,e){if(fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Bw){e:{try{S_(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Za[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rl.X.h.call(this)}}ei(Rl,fi);var Za={2:"touch",3:"pen",4:"mouse"};Rl.prototype.h=function(){Rl.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qu="closure_listenable_"+(1e6*Math.random()|0),nm=0;function pp(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++nm,this.ba=this.ea=!1}function rm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function im(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function x_(n){const e={};for(const t in n)e[t]=n[t];return e}const Gw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zw(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Gw.length;u++)t=Gw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Xu(n){this.src=n,this.g={},this.h=0}function M_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Pw(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(rm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qw(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}Xu.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=qw(n,e,r,s);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new pp(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var R_="closure_lm_"+(1e6*Math.random()|0),N_={};function Ww(n,e,t,r,s){if(r&&r.once)return Kw(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ww(n,e[u],t,r,s);return null}return t=k_(t),n&&n[Qu]?n.N(e,t,Jr(r)?!!r.capture:!!r,s):Zw(n,e,t,!1,r,s)}function Zw(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Jr(s)?!!s.capture:!!s,m=gp(n);if(m||(n[R_]=m=new Xu(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function HD(){const e=GD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)BD||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(om(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Kw(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Kw(n,e[u],t,r,s);return null}return t=k_(t),n&&n[Qu]?n.O(e,t,Jr(r)?!!r.capture:!!r,s):Zw(n,e,t,!0,r,s)}function Yw(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Yw(n,e[u],t,r,s);else r=Jr(r)?!!r.capture:!!r,t=k_(t),n&&n[Qu]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qw(u=n.g[e],t,r,s))&&(rm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=gp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qw(e,t,r,s)),(t=-1<n?e[n]:null)&&sm(t))}function sm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Qu])M_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(om(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=gp(e))?(M_(t,n),0==t.h&&(t.src=null,e[R_]=null)):rm(n)}}}function om(n){return n in N_?N_[n]:N_[n]="on"+n}function GD(n,e){if(n.ba)n=!0;else{e=new Rl(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&sm(n),n=t.call(r,e)}return n}function gp(n){return(n=n[R_])instanceof Xu?n:null}var O_="__closure_events_fn_"+(1e9*Math.random()>>>0);function k_(n){return"function"==typeof n?n:(n[O_]||(n[O_]=function(e){return n.handleEvent(e)}),n[O_])}function Ur(){Wa.call(this),this.i=new Xu(this),this.P=this,this.I=null}function ti(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new fi(e,n);else if(e instanceof fi)e.target=e.target||n;else{var s=e;zw(e=new fi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=am(l,r,!0,e)&&s}if(s=am(l=e.g=n,r,!0,e)&&s,s=am(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=am(l=e.g=t[u],r,!1,e)&&s}function am(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&M_(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}ei(Ur,Wa),Ur.prototype[Qu]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){Yw(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rm(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var P_=Ot.JSON.stringify;function zD(){var n=_h;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var yh,F_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qD,n=>n.reset());class qD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function PA(n){Ot.setTimeout(()=>{throw n},0)}function L_(n,e){yh||function Nl(){var n=Ot.Promise.resolve(void 0);yh=function(){n.then(WD)}}(),Xw||(yh(),Xw=!0),_h.add(n,e)}var Xw=!1,_h=new class Qw{constructor(){this.h=this.g=null}add(e,t){const r=F_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function WD(){for(var n;n=zD();){try{n.h.call(n.g)}catch(t){PA(t)}var e=F_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Xw=!1}function um(n,e){Ur.call(this),this.h=n||1,this.g=e||Ot,this.j=hi(this.lb,this),this.l=Date.now()}function mp(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function V_(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function so(n){n.g=V_(()=>{n.g=null,n.i&&(n.i=!1,so(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ei(um,Ur),(at=um.prototype).ca=!1,at.R=null,at.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ti(this,"tick"),this.ca&&(mp(this),this.start()))}},at.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){um.X.M.call(this),mp(this),delete this.g};class yp extends Wa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:so(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(n){Wa.call(this),this.h=n,this.g={}}ei(yr,Wa);var Ju=[];function _p(n,e,t,r){Array.isArray(t)||(t&&(Ju[0]=t.toString()),t=Ju);for(var s=0;s<t.length;s++){var u=Ww(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ls(n){im(n.g,function(e,t){this.g.hasOwnProperty(t)&&sm(e)},n),n.g={}}function vh(){this.g=!0}function oo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function bh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return P_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}yr.prototype.M=function(){yr.X.M.call(this),ls(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vh.prototype.Aa=function(){this.g=!1},vh.prototype.info=function(){};var Ls={},Ol=null;function Ka(){return Ol=Ol||new Ur}function kl(n){fi.call(this,Ls.Pa,n)}function Dh(n){const e=Ka();ti(e,new kl(e))}function U_(n,e){fi.call(this,Ls.STAT_EVENT,n),this.stat=e}function pi(n){const e=Ka();ti(e,new U_(e,n))}function B_(n,e){fi.call(this,Ls.Qa,n),this.size=e}function Ch(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}Ls.Pa="serverreachability",ei(kl,fi),Ls.STAT_EVENT="statevent",ei(U_,fi),Ls.Qa="timingevent",ei(B_,fi);var vp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},j_={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function cm(){}function Jw(){}cm.prototype.h=null;var G_,wp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function lm(){fi.call(this,"d")}function H_(){fi.call(this,"c")}function Th(){}function Pl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new yr(this),this.O=dm,this.T=new um(n=dp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new eE}function eE(){this.i=null,this.g="",this.h=!1}ei(lm,fi),ei(H_,fi),ei(Th,cm),Th.prototype.g=function(){return new XMLHttpRequest},Th.prototype.i=function(){return{}},G_=new Th;var dm=45e3,Sh={},Ah={};function z_(n,e,t){n.K=1,n.v=Ip(Ya(e)),n.s=t,n.P=!0,hm(n,null)}function hm(n,e){n.F=Date.now(),Fl(n),n.A=Ya(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),oE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new eE,n.g=wE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new yp(hi(n.La,n,n.g),n.N)),_p(n.S,n.g,"readystatechange",n.ib),e=n.H?x_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Dh(),function wh(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");l=2<=N.length&&"type"==N[1]?l+(S+"=")+b+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function fm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function q_(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=tE(n,t),s==Ah){4==e&&(n.o=4,pi(14),r=!1),oo(n.j,n.m,null,"[Incomplete Response]");break}if(s==Sh){n.o=4,pi(15),oo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}oo(n.j,n.m,s,null),Z_(n,s)}fm(n)&&s!=Ah&&s!=Sh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Cm(e),e.K=!0,pi(11))):(oo(n.j,n.m,t,"[Invalid Chunked Response]"),ec(n),Ll(n))}function tE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ah:(t=Number(e.substring(t,r)),isNaN(t)?Sh:(r+=1)+t>e.length?Ah:(e=e.substr(r,t),n.C=r+t,e))}function Fl(n){n.V=Date.now()+n.O,W_(n,n.O)}function W_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ch(hi(n.gb,n),e)}function Ep(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function Ll(n){0==n.l.G||n.I||iv(n.l,n)}function ec(n){Ep(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mp(n.T),ls(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Z_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||or(t.h,n)))if(!n.J&&or(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ap(t),Im(t)}Ph(t),pi(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ch(hi(t.cb,t),6e3));if(1>=uE(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ic(t,11)}else if((n.J||t.g==n)&&Ap(t),!em(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const V=b[5];null!=V&&"number"==typeof V&&0<V&&(t.J=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const te=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.h;u.g||-1==te.indexOf("spdy")&&-1==te.indexOf("quic")&&-1==te.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(mm(u,u.h),u.h=null))}if(r.D){const xe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.za=xe,xn(r.F,r.D,xe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=av(r,r.H?r.ka:null,r.V),l.J){cE(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&(Ep(m),Fl(m)),r.g=l}else Dm(r);0<t.i.length&&Sp(t)}else"stop"!=b[0]&&"close"!=b[0]||ic(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?ic(t,7):Em(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Dh()}catch{}}function K_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function rE(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Xg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function nE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Xg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(at=Pl.prototype).setTimeout=function(n){this.O=n},at.ib=function(n){n=n.target;const e=this.L;e&&3==Xa(n)?e.l():this.La(n)},at.La=function(n){try{if(n==this.g)e:{const S=Xa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||dp||this.g&&(this.h.h||this.g.fa()||mE(this.g)))){this.I||4!=S||7==e||Dh(),Ep(this);var t=this.g.aa();this.Y=t;t:if(fm(this)){var r=mE(this.g);n="";var s=r.length,u=4==Xa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ec(this),Ll(this);var l="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function Eh(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!em(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,pi(12),ec(this),Ll(this);break e}oo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Z_(this,t)}this.P?(q_(this,S,l),dp&&this.i&&3==S&&(_p(this.S,this.T,"tick",this.hb),this.T.start())):(oo(this.j,this.m,l,null),Z_(this,l)),4==S&&ec(this),this.i&&!this.I&&(4==S?iv(this.l,this):(this.i=!1,Fl(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),ec(this),Ll(this)}}}catch{}},at.hb=function(){if(this.g){var n=Xa(this.g),e=this.g.fa();this.C<e.length&&(Ep(this),q_(this,n,e),this.i&&4!=n&&Fl(this))}},at.cancel=function(){this.I=!0,ec(this)},at.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Ih(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Dh(),pi(17)),ec(this),this.o=2,Ll(this)):W_(this,this.V-n)};var Y_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Vl){this.h=void 0!==e?e:n.h,xh(this,n.j),this.s=n.s,this.g=n.g,Mh(this,n.m),this.l=n.l,e=n.i;var t=new bp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Q_(this,t),this.o=n.o}else n&&(t=String(n).match(Y_))?(this.h=!!e,xh(this,t[1]||"",!0),this.s=Rh(t[2]||""),this.g=Rh(t[3]||"",!0),Mh(this,t[4]),this.l=Rh(t[5]||"",!0),Q_(this,t[6]||"",!0),this.o=Rh(t[7]||"")):(this.h=!!e,this.i=new bp(null,this.h))}function Ya(n){return new Vl(n)}function xh(n,e,t){n.j=t?Rh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Mh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Q_(n,e,t){e instanceof bp?(n.i=e,function FA(n,e){e&&!n.j&&(qo(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(nc(this,r),oE(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Nh(e,tc)),n.i=new bp(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function Ip(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Rh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Nh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,iE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function iE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Nh(e,X_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Nh(e,X_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Nh(t,"/"==t.charAt(0)?pm:sE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Nh(t,KD)),n.join("")};var X_=/[#\/\?@]/g,sE=/[#\?:]/g,pm=/[#\?]/g,tc=/[#\?@]/g,KD=/#/g;function bp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qo(n){n.g||(n.g=new Map,n.h=0,n.i&&function ZD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function nc(n,e){qo(n),e=rc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gm(n,e){return qo(n),e=rc(n,e),n.g.has(e)}function oE(n,e,t){nc(n,e),0<t.length&&(n.i=null,n.g.set(rc(n,e),lp(t)),n.h+=t.length)}function rc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aE(n){this.l=n||YD,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ga&&Ot.g.Ga()&&Ot.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=bp.prototype).add=function(n,e){qo(this),this.i=null,n=rc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){qo(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},at.oa=function(){qo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},at.W=function(n){qo(this);let e=[];if("string"==typeof n)gm(this,n)&&(e=e.concat(this.g.get(rc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return qo(this),this.i=null,gm(this,n=rc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var YD=10;function J_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uE(n){return n.h?1:n.g?n.g.size:0}function or(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mm(n,e){n.g?n.g.add(e):n.h=e}function cE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lp(n.i)}function ym(){}function QD(){this.g=new ym}function dE(n,e,t){const r=t||"";try{K_(n,function(s,u){let l=s;Jr(s)&&(l=P_(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Qa(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Dp(n){this.l=n.ac||null,this.j=n.jb||!1}function _m(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=vm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aE.prototype.cancel=function(){if(this.i=lE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ym.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},ym.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},ei(Dp,cm),Dp.prototype.g=function(){return new _m(this.l,this.j)},Dp.prototype.i=function(n){return function(){return n}}({}),ei(_m,Ur);var vm=0;function fE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Oh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,wm(n)}function wm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=_m.prototype).open=function(n,e){if(this.readyState!=vm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,wm(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oh(this)),this.readyState=vm},at.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,wm(this)),this.g&&(this.readyState=3,wm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ot.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},at.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Oh(this):wm(this),3==this.readyState&&fE(this)}},at.Va=function(n){this.g&&(this.response=this.responseText=n,Oh(this))},at.Ua=function(n){this.g&&(this.response=n,Oh(this))},at.ga=function(){this.g&&Oh(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_m.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pE=Ot.JSON.parse;function Ln(n){Ur.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ao,this.K=this.L=!1}ei(Ln,Ur);var ao="",XD=/^https?$/i,JD=["POST","PUT"];function Vs(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Us(n),Cp(n)}function Us(n){n.D||(n.D=!0,ti(n,"complete"),ti(n,"error"))}function ev(n){if(n.h&&typeof Yg<"u"&&(!n.C[1]||4!=Xa(n)||2!=n.aa()))if(n.v&&4==Xa(n))V_(n.Ha,0,n);else if(ti(n,"readystatechange"),4==Xa(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(Y_)[1]||null;if(!s&&Ot.self&&Ot.self.location){var u=Ot.self.location.protocol;s=u.substr(0,u.length-1)}r=!XD.test(s?s.toLowerCase():"")}t=r}if(t)ti(n,"complete"),ti(n,"success");else{n.m=6;try{var l=2<Xa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Us(n)}}finally{Cp(n)}}}function Cp(n,e){if(n.g){gE(n);const t=n.g,r=n.C[0]?Qg:null;n.g=null,n.C=null,e||ti(n,"ready");try{t.onreadystatechange=r}catch{}}}function gE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Xa(n){return n.g?n.g.readyState:0}function mE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ao:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function yE(n){let e="";return im(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Tp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=yE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function Ja(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _E(n){this.Ca=0,this.i=[],this.j=new vh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ja("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ja("baseRetryDelayMs",5e3,n),this.bb=Ja("retryDelaySeedMs",1e4,n),this.$a=Ja("forwardChannelMaxRetries",2,n),this.ta=Ja("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new aE(n&&n.concurrentRequestLimit),this.Fa=new QD,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Em(n){if(tv(n),3==n.G){var e=n.U++,t=Ya(n.F);xn(t,"SID",n.I),xn(t,"RID",e),xn(t,"TYPE","terminate"),kh(n,t),(e=new Pl(n,n.j,e,void 0)).K=2,e.v=Ip(Ya(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=wE(e.l,null),e.g.da(e.v)),e.F=Date.now(),Fl(e)}ov(n)}function Im(n){n.g&&(Cm(n),n.g.cancel(),n.g=null)}function tv(n){Im(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),Ap(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function Sp(n){J_(n.h)||n.m||(n.m=!0,L_(n.Ja,n),n.C=0)}function vE(n,e){var t;t=e?e.m:n.U++;const r=Ya(n.F);xn(r,"SID",n.I),xn(r,"RID",t),xn(r,"AID",n.T),kh(n,r),n.o&&n.s&&Tp(r,n.o,n.s),t=new Pl(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=nv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),mm(n.h,t),z_(t,r,e)}function kh(n,e){n.ia&&im(n.ia,function(t,r){xn(e,r,t)}),n.l&&K_({},function(t,r){xn(e,r,t)})}function nv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?hi(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].h;const S=s[w].g;if(b-=u,0>b)u=Math.max(0,s[w].h-100),m=!1;else try{dE(S,l,"req"+b+"_")}catch{r&&r(S)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Dm(n){n.g||n.u||(n.Z=1,L_(n.Ia,n),n.A=0)}function Ph(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ch(hi(n.Ia,n),sv(n,n.A)),n.A++,0))}function Cm(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function rv(n){n.g=new Pl(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ya(n.sa);xn(e,"RID","rpc"),xn(e,"SID",n.I),xn(e,"CI",n.L?"0":"1"),xn(e,"AID",n.T),xn(e,"TYPE","xmlhttp"),kh(n,e),n.o&&n.s&&Tp(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ip(Ya(e)),t.s=null,t.P=!0,hm(t,n)}function Ap(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function iv(n,e){var t=null;if(n.g==e){Ap(n),Cm(n),n.g=null;var r=2}else{if(!or(n.h,e))return;t=e.D,cE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ti(r=Ka(),new B_(r,t)),Sp(n)}else Dm(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function bm(n,e){return!(uE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ch(hi(n.Ja,n,e),sv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ph(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:ic(n,5);break;case 4:ic(n,10);break;case 3:ic(n,6);break;default:ic(n,2)}}function sv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ic(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=hi(n.kb,n);t||(t=new Vl("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||xh(t,"https"),Ip(t)),function hE(n,e){const t=new vh;if(Ot.Image){const r=new Image;r.onload=Jg(Qa,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Jg(Qa,t,r,"TestLoadImage: error",!1,e),r.onabort=Jg(Qa,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jg(Qa,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.l&&n.l.va(e),ov(n),tv(n)}function ov(n){if(n.G=0,n.la=[],n.l){const e=lE(n.h);(0!=e.length||0!=n.i.length)&&(Fw(n.la,e),Fw(n.la,n.i),n.h.i.length=0,lp(n.i),n.i.length=0),n.l.ua()}}function av(n,e,t){var r=t instanceof Vl?Ya(t):new Vl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Mh(r,r.m);else{var s=Ot.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Vl(null,void 0);r&&xh(u,r),e&&(u.g=e),s&&Mh(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&xn(r,t,e),xn(r,"VER",n.ma),kh(n,r),r}function wE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t&&n.Da&&!n.ra?new Dp({jb:!0}):n.ra)).Ka(n.H),e}function EE(){}function Tm(){if(ph&&!(10<=Number(Hw)))throw Error("Environmental error: no available transport.")}function ds(n,e){Ur.call(this),this.g=new _E(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!em(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!em(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fh(this)}function IE(n){lm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bE(){H_.call(this),this.status=1}function Fh(n){this.g=n}(at=Ln.prototype).Ka=function(n){this.L=n},at.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():G_.g(),this.C=function $_(n){return n.h||(n.h=n.i())}(this.u?this.u:G_),this.g.onreadystatechange=hi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Vs(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ot.FormData&&n instanceof Ot.FormData,!(0<=Pw(JD,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gE(this),0<this.B&&((this.K=function Wo(n){return ph&&function $w(){return function Vw(n){var e=kA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Lw(String(gh)).split("."),t=Lw("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Fs(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Fs(0==s[2].length,0==u[2].length)||Fs(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.qa,this)):this.A=V_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Vs(this,u)}},at.qa=function(){typeof Yg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ti(this,"complete"),ti(this,"abort"),Cp(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cp(this,!0)),Ln.X.M.call(this)},at.Ha=function(){this.s||(this.F||this.v||this.l?ev(this):this.fb())},at.fb=function(){ev(this)},at.aa=function(){try{return 2<Xa(this)?this.g.status:-1}catch{return-1}},at.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pE(e)}},at.Ea=function(){return this.m},at.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=_E.prototype).ma=8,at.G=1,at.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Pl(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=x_(u),zw(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=nv(this,s,e),xn(t=Ya(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),kh(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(yE(u)))+"&"+e:this.o&&Tp(t,this.o,u)),mm(this.h,s),this.Ya&&xn(t,"TYPE","init"),this.O?(xn(t,"$req",e),xn(t,"SID","null"),s.Z=!0,z_(s,t,null)):z_(s,t,e),this.G=2}}else 3==this.G&&(n?vE(this,n):0==this.i.length||J_(this.h)||vE(this))},at.Ia=function(){if(this.u=null,rv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ch(hi(this.eb,this),n)}},at.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pi(10),Im(this),rv(this))},at.cb=function(){null!=this.v&&(this.v=null,Im(this),Ph(this),pi(19))},at.kb=function(n){n?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},(at=EE.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Ra=function(){},Tm.prototype.g=function(n,e){return new ds(n,e)},ei(ds,Ur),ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;pi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=av(n,null,n.V),Sp(n)},ds.prototype.close=function(){Em(this.g)},ds.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=P_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Sp(e)},ds.prototype.M=function(){this.g.l=null,delete this.j,Em(this.g),delete this.g,ds.X.M.call(this)},ei(IE,lm),ei(bE,H_),ei(Fh,EE),Fh.prototype.xa=function(){ti(this.g,"a")},Fh.prototype.wa=function(n){ti(this.g,new IE(n))},Fh.prototype.va=function(n){ti(this.g,new bE)},Fh.prototype.ua=function(){ti(this.g,"b")},Tm.prototype.createWebChannel=Tm.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,vp.NO_ERROR=0,vp.TIMEOUT=8,vp.HTTP_ERROR=6,j_.COMPLETE="complete",Jw.EventType=wp,wp.OPEN="a",wp.CLOSE="b",wp.ERROR="c",wp.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.Oa,Ln.prototype.getLastErrorCode=Ln.prototype.Ea,Ln.prototype.getStatus=Ln.prototype.aa,Ln.prototype.getResponseJson=Ln.prototype.Sa,Ln.prototype.getResponseText=Ln.prototype.fa,Ln.prototype.send=Ln.prototype.da,Ln.prototype.setWithCredentials=Ln.prototype.Ka;var eC=Go.createWebChannelTransport=function(){return new Tm},tC=Go.getStatEventTarget=function(){return Ka()},uv=Go.ErrorCode=vp,nC=Go.EventType=j_,rC=Go.Event=Ls,DE=Go.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},iC=Go.FetchXmlHttpFactory=Dp,Sm=Go.WebChannel=Jw,sC=Go.XhrIo=Ln;const CE="@firebase/firestore";class Br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let Ul="9.16.0";const eu=new Ho.Yd("@firebase/firestore");function Am(){return eu.logLevel}function Ne(n,...e){if(eu.logLevel<=Ho.in.DEBUG){const t=e.map(xm);eu.debug(`Firestore (${Ul}): ${n}`,...t)}}function er(n,...e){if(eu.logLevel<=Ho.in.ERROR){const t=e.map(xm);eu.error(`Firestore (${Ul}): ${n}`,...t)}}function sc(n,...e){if(eu.logLevel<=Ho.in.WARN){const t=e.map(xm);eu.warn(`Firestore (${Ul}): ${n}`,...t)}}function xm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ke(n="Unexpected state"){const e=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function rt(n,e){n||Ke()}function $e(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class AE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Br.UNAUTHENTICATED))}shutdown(){}}class VA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xE{constructor(e){this.t=e,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let l=new Vn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,pe.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new AE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new Br(e)}}class ME{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Br.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class UA{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new ME(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.A=t.token,new vt(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function aC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Bl{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=aC(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function tu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function xp(n){return n+"\0"}class Lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Lt(0,0))}static max(){return new mt(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ke(),void 0===r?r=e.length-t:r>e.length-t&&Ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Lh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Lh{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const uC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends Lh{construct(e,t,r){return new Hn(e,t,r)}static isValidIdentifier(e){return uC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(tn.fromString(e))}static fromName(e){return new Ge(tn.fromString(e).popFirst(5))}static empty(){return new Ge(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new tn(e.slice()))}}class Mp{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Mm(n){return n.fields.find(e=>2===e.kind)}function jl(n){return n.fields.filter(e=>2!==e.kind)}Mp.UNKNOWN_ID=-1;class Rm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Np{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Np(0,gi.min())}}function RE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=mt.fromTimestamp(1e9===r?new Lt(t+1,0):new Lt(t,r));return new gi(s,Ge.empty(),e)}function NE(n){return new gi(n.readTime,n.key,-1)}class gi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gi(mt.min(),Ge.empty(),-1)}static max(){return new gi(mt.max(),Ge.empty(),-1)}}function Nm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const lv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function oc(n){return $l.apply(this,arguments)}function $l(){return $l=(0,pe.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==lv)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),$l.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(s=>s?re.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(S=>{l[b]=S,++m,m===u&&r(l)},S=>s(S))}})}static doWhile(e,t){return new re((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Om{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Vn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Vh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=fv(r.target.error);this.P.reject(new Vh(e,s))}}static open(e,t,r,s){try{return new Om(t,e.transaction(s,r))}catch(u){throw new Vh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OE(t)}}class uo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===uo.D((0,Ht.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Hl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ht.hl)())return!1;if(uo.N())return!0;const e=(0,Ht.z$)(),t=uo.D(e),r=0<t&&t<10,s=uo.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Vh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Ae(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Vh(e,m))},u.onupgradeneeded=l=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,pe.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Om.open(u.db,e,l?"readonly":"readwrite",r),b=s(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),re.reject(S))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,S="FirebaseError"!==b.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class lC{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Hl(this.q.delete())}}class Vh extends Ae{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nu(n){return"IndexedDbTransactionError"===n.name}class OE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hl(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Hl(this.store.add(e))}get(e){return Hl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Hl(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Hl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new re((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new re((r,s)=>{t.onerror=u=>{const l=fv(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new re((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new lC(m),b=t(m.primaryKey,m.value,w);if(b instanceof re){const S=b.catch(N=>(w.done(),re.reject(N)));r.push(S)}w.isDone?s():null===w.G?m.continue():m.continue(w.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hl(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=fv(r.target.error);t(s)}})}let hv=!1;function fv(n){const e=uo.D((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hv||(hv=!0,setTimeout(()=>{throw r},0)),r}}return n}class dC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){nu(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield oc(r)}yield t.nt(6e4)}))}}class jA{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return re.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ne("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(s,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=NE(u);Nm(l,r)>0&&(r=l)}),new gi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>r.writeSequenceNumber(s))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class $A{constructor(e,t,r,s,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}function pv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Op(n){return null==n}function Uh(n){return 0===n&&1/n==-1/0}function Bh(n){return"number"==typeof n&&Number.isInteger(n)&&!Uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const fC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ac(n){if(rt(!!n),"string"==typeof n){let e=0;const t=fC.exec(n);if(rt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zl(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function km(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function PE(n){const e=n.mapValue.fields.__previous_value__;return km(e)?PE(e):e}function kp(n){const e=ac(n.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}const js={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pm={nullValue:"NULL_VALUE"};function uc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?km(n)?4:VE(n)?9007199254740991:10:Ke()}function Ko(n,e){if(n===e)return!0;const t=uc(n);if(t!==uc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kp(n).isEqual(kp(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ac(r.timestampValue),l=ac(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,zl(n.bytesValue).isEqual(zl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ar(r.geoPointValue.latitude)===ar(s.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ar(r.integerValue)===ar(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=ar(r.doubleValue),l=ar(s.doubleValue);return u===l?Uh(u)===Uh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return tu(n.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(pv(u)!==pv(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Ko(u[m],l[m])))return!1;return!0}(n,e);default:return Ke()}var s}function jh(n,e){return void 0!==(n.values||[]).find(t=>Ko(t,e))}function cc(n,e){if(n===e)return 0;const t=uc(n),r=uc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=ar(s.integerValue||s.doubleValue),m=ar(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return gv(n.timestampValue,e.timestampValue);case 4:return gv(kp(n),kp(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(s,u){const l=zl(s),m=zl(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Ft(l[w],m[w]);if(0!==b)return b}return Ft(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Ft(ar(s.latitude),ar(u.latitude));return 0!==l?l:Ft(ar(s.longitude),ar(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=cc(l[w],m[w]);if(b)return b}return Ft(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===js.mapValue&&u===js.mapValue)return 0;if(s===js.mapValue)return 1;if(u===js.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const N=Ft(m[S],b[S]);if(0!==N)return N;const V=cc(l[m[S]],w[b[S]]);if(0!==V)return V}return Ft(m.length,b.length)}(n.mapValue,e.mapValue);default:throw Ke()}}function gv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=ac(n),r=ac(e),s=Ft(t.seconds,r.seconds);return 0!==s?s:Ft(t.nanos,r.nanos)}function $h(n){return Pp(n)}function Pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ac(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zl(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=Pp(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${Pp(r.fields[m])}`;return u+"}"}(n.mapValue):Ke();var e}function ql(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fm(n){return!!n&&"integerValue"in n}function Hh(n){return!!n&&"arrayValue"in n}function FE(n){return!!n&&"nullValue"in n}function LE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lm(n){return!!n&&"mapValue"in n}function Wl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UE(n){return"nullValue"in n?Pm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ql(Gl.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ke()}function pC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ql(Gl.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?js:Ke()}function BE(n,e){const t=cc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function jE(n,e){const t=cc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class lc{constructor(e,t){this.position=e,this.inclusive=t}}function $E(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):cc(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function HE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ko(n.position[t],e.position[t]))return!1;return!0}class GE{}class Xt extends GE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new wv(e,t,r):"array-contains"===t?new gC(e,r):"in"===t?new Um(e,r):"not-in"===t?new mC(e,r):"array-contains-any"===t?new KE(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new WE(e,r):new Ev(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cc(t,this.value)):null!==t&&uc(this.value)===uc(t)&&this.matchesComparison(cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class un extends GE{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new un(e,t)}matches(e){return Zl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Zl(n){return"and"===n.op}function mv(n){return"or"===n.op}function yv(n){return _v(n)&&Zl(n)}function _v(n){for(const e of n.filters)if(e instanceof un)return!1;return!0}function vv(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+$h(n.value);if(yv(n))return n.filters.map(e=>vv(e)).join(",");{const e=n.filters.map(t=>vv(t)).join(",");return`${n.op}(${e})`}}function zE(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&Ko(t.value,r.value)):n instanceof un?function(t,r){return r instanceof un&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&zE(u,r.filters[l]),!0)}(n,e):void Ke();var t,r}function qE(n,e){const t=n.filters.concat(e);return un.create(t,n.op)}function Vm(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${$h(e.value)}`:n instanceof un?function(e){return e.op.toString()+" {"+e.getFilters().map(Vm).join(" ,")+"}"}(n):"Filter";var e}class wv extends Xt{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class WE extends Xt{constructor(e,t){super(e,"in",t),this.keys=ZE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ev extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=ZE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ZE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class gC extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hh(t)&&jh(t.arrayValue,this.value)}}class Um extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jh(this.value.arrayValue,t)}}class mC extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jh(this.value.arrayValue,t)}}class KE extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jh(this.value.arrayValue,r))}}class co{constructor(e,t="asc"){this.field=e,this.dir=t}}function YE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class tr{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Iv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Iv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Iv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Iv(this.root,e,this.comparator,!0)}}class Iv{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??jr.RED,this.left=s??jr.EMPTY,this.right=u??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new jr(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return jr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(n,e,t,r,s){return this}insert(n,e,t){return new jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QE(this.data.getIterator())}getIteratorFrom(e){return new QE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class QE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dc(n){return n.hasNext()?n.getNext():void 0}class Ki{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new Ki([])}unionWith(e){let t=new cn(Hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ki(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(t)}setAll(e){let t=Hn.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Wl(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Lm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Lm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Zo(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new $r(Wl(this.value))}}function Bm(n){const e=[];return Zo(n.fields,(t,r)=>{const s=new Hn([t]);if(Lm(r)){const u=Bm(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Ki(e)}class Cn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Cn(e,0,mt.min(),mt.min(),mt.min(),$r.empty(),0)}static newFoundDocument(e,t,r,s){return new Cn(e,1,t,mt.min(),r,s,0)}static newNoDocument(e,t){return new Cn(e,2,t,mt.min(),mt.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,mt.min(),mt.min(),$r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class XE{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function jm(n,e=null,t=[],r=[],s=null,u=null,l=null){return new XE(n,e,t,r,s,u,l)}function hc(n){const e=$e(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Op(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$h(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$h(r)).join(",")),e.ft=t}return e.ft}function Fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HE(n.startAt,e.startAt)&&HE(n.endAt,e.endAt)}function $m(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Hm(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function JE(n,e,t){let r=Pm,s=!0;for(const u of Hm(n,e)){let l=Pm,m=!0;switch(u.op){case"<":case"<=":l=UE(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Pm}BE({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];BE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function bv(n,e,t){let r=js,s=!0;for(const u of Hm(n,e)){let l=js,m=!0;switch(u.op){case">=":case">":l=pC(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=js}jE({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];jE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class fc{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function Dv(n,e,t,r,s,u,l,m){return new fc(n,e,t,r,s,u,l,m)}function Gh(n){return new fc(n)}function eI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function tI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Gm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Cv(n){return null!==n.collectionGroup}function Kl(n){const e=$e(n);if(null===e.dt){e.dt=[];const t=Gm(e),r=tI(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new co(t)),e.dt.push(new co(Hn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new co(Hn.keyField(),u))}}}return e.dt}function mi(n){const e=$e(n);if(!e._t)if("F"===e.limitType)e._t=jm(e.path,e.collectionGroup,Kl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Kl(e))t.push(new co(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new lc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new lc(e.startAt.position,e.startAt.inclusive):null;e._t=jm(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function Tv(n,e){e.getFirstInequalityField(),Gm(n);const t=n.filters.concat([e]);return new fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zm(n,e,t){return new fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lp(n,e){return Fp(mi(n),mi(e))&&n.limitType===e.limitType}function nI(n){return`${hc(mi(n))}|lt:${n.limitType}`}function Sv(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Vm(r)).join(", ")}]`),Op(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$h(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$h(r)).join(",")),`Target(${t})`}(mi(n))}; limitType=${n.limitType})`}function Av(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Kl(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=$E(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,Kl(t),r)||t.endAt&&!function(s,u,l){const m=$E(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,Kl(t),r)));var t,r}function rI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iI(n){return(e,t)=>{let r=!1;for(const s of Kl(n)){const u=Vp(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Vp(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?cc(m,w):Ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}function xv(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function Mv(n){return{integerValue:""+n}}function Rv(n,e){return Bh(e)?Mv(e):xv(n,e)}class Up{constructor(){this._=void 0}}function sI(n,e,t){return n instanceof Bp?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof pc?uI(n,e):n instanceof Yl?Nv(n,e):function(r,s){const u=aI(r,s),l=qh(u)+qh(r.gt);return Fm(u)&&Fm(r.gt)?Mv(l):xv(r.yt,l)}(n,e)}function oI(n,e,t){return n instanceof pc?uI(n,e):n instanceof Yl?Nv(n,e):t}function aI(n,e){return n instanceof zh?Fm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bp extends Up{}class pc extends Up{constructor(e){super(),this.elements=e}}function uI(n,e){const t=cI(e);for(const r of n.elements)t.some(s=>Ko(s,r))||t.push(r);return{arrayValue:{values:t}}}class Yl extends Up{constructor(e){super(),this.elements=e}}function Nv(n,e){let t=cI(e);for(const r of n.elements)t=t.filter(s=>!Ko(s,r));return{arrayValue:{values:t}}}class zh extends Up{constructor(e,t){super(),this.yt=e,this.gt=t}}function qh(n){return ar(n.integerValue||n.doubleValue)}function cI(n){return Hh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ql{constructor(e,t){this.field=e,this.transform=t}}class yC{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class qm{}function lI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yc(n.key,Tn.none()):new Wh(n.key,n.data,Tn.none());{const t=n.data,r=$r.empty();let s=new cn(Hn.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new Qo(n.key,r,new Ki(s.toArray()),Tn.none())}}function _C(n,e,t){n instanceof Wh?function(r,s,u){const l=r.value.clone(),m=Zm(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Qo?function(r,s,u){if(!gc(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=Zm(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(Ov(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function mc(n,e,t,r){return n instanceof Wh?function(s,u,l,m){if(!gc(s.precondition,u))return l;const w=s.value.clone(),b=kv(s.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qo?function(s,u,l,m){if(!gc(s.precondition,u))return l;const w=kv(s.fieldTransforms,m,u),b=u.data;return b.setAll(Ov(s)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,gc(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Wm(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=aI(r.transform,s||null);null!=u&&(null===t&&(t=$r.empty()),t.set(r.field,u))}return t||null}function dI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&tu(t,r,(s,u)=>function Yo(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof pc&&r instanceof pc||t instanceof Yl&&r instanceof Yl?tu(t.elements,r.elements,Ko):t instanceof zh&&r instanceof zh?Ko(t.gt,r.gt):t instanceof Bp&&r instanceof Bp);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Wh extends qm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qo extends qm{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ov(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zm(n,e,t){const r=new Map;rt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,oI(l,m,t[s]))}return r}function kv(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,sI(u,l,e))}return r}class yc extends qm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jp extends qm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hI{constructor(e){this.count=e}}var nr,Jt;function fI(n){switch(n){default:return Ke();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function pI(n){if(void 0===n)return er("GRPC error has no .code"),ue.UNKNOWN;switch(n){case nr.OK:return ue.OK;case nr.CANCELLED:return ue.CANCELLED;case nr.UNKNOWN:return ue.UNKNOWN;case nr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case nr.INTERNAL:return ue.INTERNAL;case nr.UNAVAILABLE:return ue.UNAVAILABLE;case nr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case nr.NOT_FOUND:return ue.NOT_FOUND;case nr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case nr.ABORTED:return ue.ABORTED;case nr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case nr.DATA_LOSS:return ue.DATA_LOSS;default:return Ke()}}(Jt=nr||(nr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class _c{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return kE(this.inner)}size(){return this.innerSize}}const vC=new tr(Ge.comparator);function Mi(){return vC}const Km=new tr(Ge.comparator);function Zh(...n){let e=Km;for(const t of n)e=e.insert(t.key,t);return e}function gI(n){let e=Km;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lo(){return $p()}function Pv(){return $p()}function $p(){return new _c(n=>n.toString(),(n,e)=>n.isEqual(e))}const mI=new tr(Ge.comparator),yI=new cn(Ge.comparator);function zt(...n){let e=yI;for(const t of n)e=e.add(t);return e}const _I=new cn(Ft);function Ym(){return _I}class Sr{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Xo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sr(mt.min(),s,Ym(),Mi(),zt())}}class Xo{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xo(r,t,zt(),zt(),zt())}}class Qm{constructor(e,t,r,s){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=s}}class vI{constructor(e,t){this.targetId=e,this.Et=t}}class wC{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class EC{constructor(){this.At=0,this.Rt=Kh(),this.bt=Tr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=zt(),t=zt(),r=zt();return this.Rt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ke()}}),new Xo(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=Kh()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class wI{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Mi(),this.qt=Fv(),this.Ut=new cn(Ft)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,r=e.Et.count,s=this.Yt(t);if(s){const u=s.target;if($m(u))if(0===r){const l=new Ge(u.path);this.Qt(t,l,Cn.newNoDocument(l,mt.min()))}else rt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,l)=>{const m=this.Yt(l);if(m){if(u.current&&$m(m.target)){const w=new Ge(m.target.path);null!==this.Lt.get(w)||this.te(l,w)||this.Qt(l,w,Cn.newNoDocument(w,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=zt();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.Yt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const s=new Sr(e,t,this.Ut,this.Lt,r);return this.Lt=Mi(),this.qt=Fv(),this.Ut=new cn(Ft),s}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new EC,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new cn(Ft),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new EC),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Fv(){return new tr(Ge.comparator)}function Kh(){return new tr(Ge.comparator)}const IC={asc:"ASCENDING",desc:"DESCENDING"},Lv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class EI{constructor(e,t){this.databaseId=e,this.wt=t}}function Yh(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function II(n,e){return n.wt?e.toBase64():e.toUint8Array()}function DC(n,e){return Yh(n,e.toTimestamp())}function Gn(n){return rt(!!n),mt.fromTimestamp(function(e){const t=ac(e);return new Lt(t.seconds,t.nanos)}(n))}function Xm(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Vv(n){const e=tn.fromString(n);return rt(qv(e)),e}function vc(n,e){return Xm(n.databaseId,e.path)}function $s(n,e){const t=Vv(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(Bv(t))}function bI(n,e){return Xm(n.databaseId,e)}function Uv(n){const e=Vv(n);return 4===e.length?tn.emptyPath():Bv(e)}function Hp(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bv(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Xl(n,e,t){return{name:vc(n,e),fields:t.value.mapValue.fields}}function DI(n,e,t){const r=$s(n,e.name),s=Gn(e.updateTime),u=e.createTime?Gn(e.createTime):mt.min(),l=new $r({mapValue:{fields:e.fields}}),m=Cn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Jm(n,e){let t;if(e instanceof Wh)t={update:Xl(n,e.key,e.value)};else if(e instanceof yc)t={delete:vc(n,e.key)};else if(e instanceof Qo)t={update:Xl(n,e.key,e.data),updateMask:TC(e.fieldMask)};else{if(!(e instanceof jp))return Ke();t={verify:vc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Bp)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof pc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zh)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw Ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:DC(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ke()),t;var s}function $v(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Tn.updateTime(Gn(s.updateTime)):void 0!==s.exists?Tn.exists(s.exists):Tn.none():Tn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(rt("REQUEST_TIME"===l.setToServerValue),m=new Bp):"appendMissingElements"in l?m=new pc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Yl(l.removeAllFromArray.values||[]):"increment"in l?m=new zh(u,l.increment):Ke();const w=Hn.fromServerFormat(l.fieldPath);return new Ql(w,m)}(n,s)):[];var s;if(e.update){const s=$s(n,e.update.name),u=new $r({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ki((e.updateMask.fieldPaths||[]).map(b=>Hn.fromServerFormat(b)));return new Qo(s,u,l,t,r)}return new Wh(s,u,t,r)}if(e.delete){const s=$s(n,e.delete);return new yc(s,t)}if(e.verify){const s=$s(n,e.verify);return new jp(s,t)}return Ke()}function TI(n,e){return{documents:[bI(n,e.path)]}}function Hv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return zv(un.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Qh((S=b).field),direction:CC(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.wt||Op(b)?b:{value:b});var b,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function SI(n){let e=Uv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){rt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const N=Gv(S);return N instanceof un&&yv(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new co(Xh((N=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,Op(N)?null:N}(t.limit));let w=null;var S;t.startAt&&(w=new lc((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new lc(S.values||[],!S.before)}(t.endAt)),Dv(e,s,l,u,m,"F",w,b)}function Gv(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xh(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Xh(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xh(e.unaryFilter.field);return Xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xh(e.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(n):void 0!==n.fieldFilter?Xt.create(Xh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return un.create(e.compositeFilter.filters.map(t=>Gv(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ke()}}(e.compositeFilter.op))}(n):Ke();var e}function CC(n){return IC[n]}function xI(n){return Lv[n]}function MI(n){return bC[n]}function Qh(n){return{fieldPath:n.canonicalString()}}function Xh(n){return Hn.fromServerFormat(n.fieldPath)}function zv(n){return n instanceof Xt?function(e){if("=="===e.op){if(LE(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NAN"}};if(FE(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(LE(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NOT_NAN"}};if(FE(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qh(e.field),op:xI(e.op),value:e.value}}}(n):n instanceof un?function(e){const t=e.getFilters().map(r=>zv(r));return 1===t.length?t[0]:{compositeFilter:{op:MI(e.op),filters:t}}}(n):Ke()}function TC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wv(e)),e=RI(n.get(t),e);return Wv(e)}function RI(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Wv(n){return n+"\x01\x01"}function Jo(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Ke(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:Ke()}u=l+2}return new tn(r)}const NI=["userId","batchId"];function Zv(n,e){return[n,yi(e)]}function Kv(n,e,t){return[n,yi(e),t]}const GA={},zA=["prefixPath","collectionGroup","readTime","documentId"],qA=["prefixPath","collectionGroup","documentId"],WA=["collectionGroup","readTime","prefixPath","documentId"],ZA=["canonicalId","targetId"],KA=["targetId","path"],YA=["path","targetId"],QA=["collectionId","parent"],ey=["indexId","uid"],XA=["uid","sequenceNumber"],OI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ty=["indexId","uid","orderedDocumentKey"],kI=["userId","collectionPath","documentId"],PI=["userId","collectionPath","largestBatchId"],JA=["userId","collectionGroup","largestBatchId"],ny=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FI=[...ny,"documentOverlays"],LI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yv=LI,ex=[...Yv,"indexConfiguration","indexState","indexEntries"];class VI extends dv{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=$e(n);return uo.M(t.se,e)}class Qv{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&_C(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Pv();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=lI(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,(t,r)=>dI(t,r))&&tu(this.baseMutations,e.baseMutations,(t,r)=>dI(t,r))}}class Jh{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){rt(e.mutations.length===r.length);let s=mI;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new Jh(e,t,r,s)}}class Xv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jl{constructor(e,t,r,s,u=mt.min(),l=mt.min(),m=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class SC{constructor(e){this.ie=e}}function UI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ry(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vc(s=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Yh(s,u.version.toTimestamp()),createTime:Yh(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ed(e.version)};else{if(!e.isUnknownDocument())return Ke();r.unknownDocument={path:t.path.toArray(),version:ed(e.version)}}var s,u;return r}function ry(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ed(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ef(n){const e=new Lt(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function td(n,e){const t=(e.baseMutations||[]).map(u=>$v(n.ie,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>$v(n.ie,u)),s=Lt.fromMillis(e.localWriteTimeMs);return new Qv(e.batchId,s,t,r)}function tf(n){const e=ef(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ef(n.lastLimboFreeSnapshotVersion):mt.min();let r;var s;return void 0!==n.query.documents?(rt(1===(s=n.query).documents.length),r=mi(Gh(Uv(s.documents[0])))):r=mi(SI(n.query)),new Jl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function Jv(n,e){const t=ed(e.snapshotVersion),r=ed(e.lastLimboFreeSnapshotVersion);let s;s=$m(e.target)?TI(n.ie,e.target):Hv(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function BI(n){const e=SI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?zm(e,e.limit,"L"):e}function hs(n,e){return new Xv(e.largestBatchId,$v(n.ie,e.overlayMutation))}function jI(n,e){const t=e.path.lastSegment();return[n,yi(e.path.popLast()),t]}function iy(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ed(r.readTime),documentKey:yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class AC{getBundleMetadata(e,t){return xC(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:ef(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return xC(e).put({bundleId:(r=t).id,createTime:ed(Gn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fs(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:BI(s.bundledQuery),readTime:ef(s.readTime)};var s})}saveNamedQuery(e,t){return fs(e).put({name:(r=t).name,readTime:ed(Gn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xC(n){return Hr(n,"bundles")}function fs(n){return Hr(n,"namedQueries")}class sy{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new sy(e,t.uid||"")}getOverlay(e,t){return nd(e).get(jI(this.userId,t)).next(r=>r?hs(this.yt,r):null)}getOverlays(e,t){const r=lo();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new Xv(t,l);s.push(this.oe(e,m))}),re.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(yi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(nd(e).Y("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const s=lo(),u=yi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return nd(e).W("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=hs(this.yt,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=lo();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nd(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,b,S)=>{const N=hs(this.yt,b);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):S.done()}).next(()=>u)}oe(e,t){return nd(e).put(function(r,s,u){const[l,m,w]=jI(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Jm(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function nd(n){return Hr(n,"documentOverlays")}class rd{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Uh(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(zl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?VE(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Ke()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const s of Object.keys(r))this.de(s,t),this.ce(r[s],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const s of r)this.ce(s,t)}me(e,t){this.he(t,37),Ge.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function MC(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function oy(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=MC(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}rd.Ie=new rd;class $I{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const s=t.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const s=t.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}this.Pe()}Se(e){const t=this.De(e),r=oy(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}xe(e){const t=this.De(e),r=oy(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class HI{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class RC{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class nf{constructor(){this.$e=new $I,this.Be=new HI(this.$e),this.Le=new RC(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class wc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new wc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ec(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=e0(n.arrayValue,e.arrayValue),0!==t?t:(t=e0(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function e0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class NC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){rt(e.collectionGroup===this.collectionId);const t=Mm(e);if(void 0!==t&&!this.We(t))return!1;const r=jl(e);let s=0,u=0;for(;s<r.length&&this.We(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Qe){const l=r[s];if(!this.ze(this.Qe,l)||!this.He(this.Ke[u++],l))return!1;++s}for(;s<r.length;++s)if(u>=this.Ke.length||!this.He(this.Ke[u++],r[s]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ay(n){var e,t;if(rt(n instanceof Xt||n instanceof un),n instanceof Xt){if(n instanceof Um){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Xt.create(n.field,"==",u)))||[];return un.create(s,"or")}return n}const r=n.filters.map(s=>ay(s));return un.create(r,n.op)}function Ic(n){if(0===n.getFilters().length)return[];const e=t0(ay(n));return rt(ea(e)),uy(e)||Gp(e)?[e]:e.getFilters()}function uy(n){return n instanceof Xt}function Gp(n){return n instanceof un&&yv(n)}function ea(n){return uy(n)||Gp(n)||function(e){if(e instanceof un&&mv(e)){for(const t of e.getFilters())if(!uy(t)&&!Gp(t))return!1;return!0}return!1}(n)}function t0(n){if(rt(n instanceof Xt||n instanceof un),n instanceof Xt)return n;if(1===n.filters.length)return t0(n.filters[0]);const e=n.filters.map(r=>t0(r));let t=un.create(e,n.op);return t=cy(t),ea(t)?t:(rt(t instanceof un),rt(Zl(t)),rt(t.filters.length>1),t.filters.reduce((r,s)=>GI(r,s)))}function GI(n,e){let t;return rt(n instanceof Xt||n instanceof un),rt(e instanceof Xt||e instanceof un),t=n instanceof Xt?e instanceof Xt?un.create([n,e],"and"):zI(n,e):e instanceof Xt?zI(e,n):function(r,s){if(rt(r.filters.length>0&&s.filters.length>0),Zl(r)&&Zl(s))return qE(r,s.getFilters());const u=mv(r)?r:s,l=mv(r)?s:r,m=u.filters.map(w=>GI(w,l));return un.create(m,"or")}(n,e),cy(t)}function zI(n,e){if(Zl(e))return qE(e,n.getFilters());{const t=e.filters.map(r=>GI(n,r));return un.create(t,"or")}}function cy(n){if(rt(n instanceof Xt||n instanceof un),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return cy(e[0]);if(_v(n))return n;const t=e.map(s=>cy(s)),r=[];return t.forEach(s=>{s instanceof Xt?r.push(s):s instanceof un&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:un.create(r,n.op)}class OC{constructor(){this.Je=new n0}addToCollectionParentIndex(e,t){return this.Je.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(gi.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class n0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new cn(tn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new cn(tn.comparator)).toArray()}}const zp=new Uint8Array(0);class nx{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new n0,this.Xe=new _c(r=>hc(r),(r,s)=>Fp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:yi(s)};return r0(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[xp(t),""],!1,!0);return r0(e).W(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Jo(l.parent))}return r})}addFieldIndex(e,t){const r=Wp(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=ly(e);return u.next(m=>{l.put(iy(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Wp(e),s=ly(e),u=qp(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=qp(e);let s=!0;const u=new Map;return re.forEach(this.Ze(t),l=>this.tn(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=zt();const m=[];return re.forEach(u,(w,b)=>{var S;Ne("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${hc(t)}`);const N=function(ut,it){const bt=Mm(it);if(void 0===bt)return null;for(const Ut of Hm(ut,bt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(b,w),V=function(ut,it){const bt=new Map;for(const Ut of jl(it))for(const lr of Hm(ut,Ut.fieldPath))switch(lr.op){case"==":case"in":bt.set(Ut.fieldPath.canonicalString(),lr.value);break;case"not-in":case"!=":return bt.set(Ut.fieldPath.canonicalString(),lr.value),Array.from(bt.values())}return null}(b,w),K=function(ut,it){const bt=[];let Ut=!0;for(const lr of jl(it)){const au=0===lr.kind?JE(ut,lr.fieldPath,ut.startAt):bv(ut,lr.fieldPath,ut.startAt);bt.push(au.value),Ut&&(Ut=au.inclusive)}return new lc(bt,Ut)}(b,w),te=function(ut,it){const bt=[];let Ut=!0;for(const lr of jl(it)){const au=0===lr.kind?bv(ut,lr.fieldPath,ut.endAt):JE(ut,lr.fieldPath,ut.endAt);bt.push(au.value),Ut&&(Ut=au.inclusive)}return new lc(bt,Ut)}(b,w),xe=this.en(w,b,K),Me=this.en(w,b,te),Ct=this.nn(w,b,V),At=this.sn(w.indexId,N,xe,K.inclusive,Me,te.inclusive,Ct);return re.forEach(At,ut=>r.J(ut,t.limit).next(it=>{it.forEach(bt=>{const Ut=Ge.fromSegments(bt.documentKey);l.has(Ut)||(l=l.add(Ut),m.push(Ut))})}))}).next(()=>m)}return re.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Ic(un.create(e.filters,"and")).map(r=>jm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),S=[];for(let N=0;N<w;++N){const V=t?this.rn(t[N/b]):zp,K=this.on(e,V,r[N%b],s),te=this.un(e,V,u[N%b],l),xe=m.map(Me=>this.on(e,V,Me,!0));S.push(...this.createRange(K,te,xe))}return S}on(e,t,r,s){const u=new wc(e,Ge.empty(),t,r);return s?u:u.Ue()}un(e,t,r,s){const u=new wc(e,Ge.empty(),t,r);return s?u.Ue():u}tn(e,t){const r=new NC(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.je(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.Ze(t);return re.forEach(s,u=>this.tn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new cn(Hn.comparator),b=!1;for(const S of m.filters)for(const N of S.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const S of m.orderBy)S.field.isKeyField()||(w=w.add(S.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}cn(e,t){const r=new nf;for(const s of jl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.qe(s.kind);rd.Ie.ue(u,l)}return r.Fe()}rn(e){const t=new nf;return rd.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new nf;return rd.Ie.ue(ql(this.databaseId,t),r.qe(function(s){const u=jl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let s=[];s.push(new nf);let u=0;for(const l of jl(e)){const m=r[u++];for(const w of s)if(this.hn(t,l.fieldPath)&&Hh(m))s=this.ln(s,l,m);else{const b=w.qe(l.kind);rd.Ie.ue(m,b)}}return this.fn(s)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new nf;w.seed(m.Fe()),rd.Ie.ue(l,w.qe(t.kind)),u.push(w)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wp(e),s=ly(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return re.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(b,S){const N=S?new Np(S.sequenceNumber,new gi(ef(S.readTime),new Ge(Jo(S.documentKey)),S.largestBatchId)):Np.empty(),V=b.fields.map(([K,te])=>new Rm(Hn.fromServerFormat(K),te));return new Mp(b.indexId,b.collectionGroup,V,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Wp(e),u=ly(e);return this.dn(e).next(l=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,w=>u.put(iy(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?re.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),re.forEach(m,w=>this._n(e,s,w).next(b=>{const S=this.wn(u,w);return b.isEqual(S)?re.resolve():this.mn(e,u,w,b,S)}))))})}gn(e,t,r,s){return qp(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,s){return qp(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const s=qp(e);let u=new cn(Ec);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,m)=>{u=u.add(new wc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new cn(Ec);const s=this.cn(t,e);if(null==s)return r;const u=Mm(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Hh(l))for(const m of l.arrayValue.values||[])r=r.add(new wc(t.indexId,e.key,this.rn(m),s))}else r=r.add(new wc(t.indexId,e.key,zp,s));return r}mn(e,t,r,s,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,S,N){const V=m.getIterator(),K=w.getIterator();let te=dc(V),xe=dc(K);for(;te||xe;){let Me=!1,Ct=!1;if(te&&xe){const At=b(te,xe);At<0?Ct=!0:At>0&&(Me=!0)}else null!=te?Ct=!0:Me=!0;Me?(S(xe),xe=dc(K)):Ct?(N(te),te=dc(V)):(te=dc(V),xe=dc(K))}}(s,u,Ec,m=>{l.push(this.gn(e,t,r,m))},m=>{l.push(this.yn(e,t,r,m))}),re.waitFor(l)}dn(e){let t=1;return ly(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Ec(l,m)).filter((l,m,w)=>!m||0!==Ec(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=Ec(l,e),w=Ec(l,t);if(0===m)s[0]=e.Ue();else if(m>0&&w<0)s.push(l),s.push(l.Ue());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.pn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,zp,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,zp,[]]))}return u}pn(e,t){return Ec(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dy)}getMinOffset(e,t){return re.mapArray(this.Ze(t),r=>this.tn(e,r).next(s=>s||Ke())).next(dy)}}function r0(n){return Hr(n,"collectionParents")}function qp(n){return Hr(n,"indexEntries")}function Wp(n){return Hr(n,"indexConfiguration")}function ly(n){return Hr(n,"indexState")}function dy(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Nm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new gi(e.readTime,e.documentKey,t)}const s0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function o0(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:l},(S,N,V)=>(m++,V.delete()));u.push(w.next(()=>{rt(1===m)}));const b=[];for(const S of t.mutations){const N=Kv(e,S.key.path,t.batchId);u.push(s.delete(N)),b.push(S.key)}return re.waitFor(u).next(()=>b)}function Zp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ke();e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(41943040,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class Kp{constructor(e,t,r,s){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static re(e,t,r,s){rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Kp(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).Z({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=id(e),l=ho(e);return l.add({}).next(m=>{rt("number"==typeof m);const w=new Qv(m,t,r,s),b=function(V,K,te){const xe=te.baseMutations.map(Ct=>Jm(V.ie,Ct)),Me=te.mutations.map(Ct=>Jm(V.ie,Ct));return{userId:K,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:xe,mutations:Me}}(this.yt,this.userId,w),S=[];let N=new cn((V,K)=>Ft(V.canonicalString(),K.canonicalString()));for(const V of s){const K=Kv(this.userId,V.key.path,m);N=N.add(V.key.path.popLast()),S.push(l.put(b)),S.push(u.put(K,GA))}return N.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),re.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return ho(e).get(t).next(r=>r?(rt(r.userId===this.userId),td(this.yt,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ho(e).Z({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(rt(m.batchId>=r),u=td(this.yt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ho(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).W("userMutationsIndex",t).next(r=>r.map(s=>td(this.yt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zv(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return id(e).Z({range:s},(l,m,w)=>{const[b,S,N]=l,V=Jo(S);if(b===this.userId&&t.path.isEqual(V))return ho(e).get(N).next(K=>{if(!K)throw Ke();rt(K.userId===this.userId),u.push(td(this.yt,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Ft);const s=[];return t.forEach(u=>{const l=Zv(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=id(e).Z({range:m},(b,S,N)=>{const[V,K,te]=b,xe=Jo(K);V===this.userId&&u.path.isEqual(xe)?r=r.add(te):N.done()});s.push(w)}),re.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Zv(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new cn(Ft);return id(e).Z({range:l},(w,b,S)=>{const[N,V,K]=w,te=Jo(V);N===this.userId&&r.isPrefixOf(te)?te.length===s&&(m=m.add(K)):S.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(ho(e).get(u).next(l=>{if(null===l)throw Ke();rt(l.userId===this.userId),r.push(td(this.yt,l))}))}),re.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return o0(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return id(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=Jo(u[1]);s.push(w)}else m.done()}).next(()=>{rt(0===s.length)})})}containsKey(e,t){return Yp(e,this.userId,t)}Rn(e){return qI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Yp(n,e,t){const r=Zv(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return id(n).Z({range:u,X:!0},(m,w,b)=>{const[S,N,V]=m;S===e&&N===s&&(l=!0),b.done()}).next(()=>l)}function ho(n){return Hr(n,"mutations")}function id(n){return Hr(n,"documentMutations")}function qI(n){return Hr(n,"mutationQueues")}class sd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new sd(0)}static vn(){return new sd(-1)}}class rx{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new sd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mt.fromTimestamp(new Lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qp(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Qp(e).Z((l,m)=>{const w=tf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>re.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Qp(e).Z((r,s)=>{const u=tf(s);t(u)})}Vn(e){return kC(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}Sn(e,t){return kC(e).put("targetGlobalKey",t)}Dn(e,t){return Qp(e).put(Jv(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hc(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Qp(e).Z({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const b=tf(m);Fp(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=ru(e);return t.forEach(l=>{const m=yi(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),re.waitFor(s)}removeMatchingKeys(e,t,r){const s=ru(e);return re.forEach(t,u=>{const l=yi(u.path);return re.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ru(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ru(e);let u=zt();return s.Z({range:r,X:!0},(l,m,w)=>{const b=Jo(l[1]),S=new Ge(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=yi(t.path),s=IDBKeyRange.bound([r],[xp(r)],!1,!0);let u=0;return ru(e).Z({index:"documentTargetsIndex",X:!0,range:s},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}ne(e,t){return Qp(e).get(t).next(r=>r?tf(r):null)}}function Qp(n){return Hr(n,"targets")}function kC(n){return Hr(n,"targetGlobal")}function ru(n){return Hr(n,"targetDocuments")}function WI([n,e],[t,r]){const s=Ft(n,t);return 0===s?Ft(e,r):s}class PC{constructor(e){this.xn=e,this.buffer=new cn(WI),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();WI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nu(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield oc(r)}yield t.Fn(3e5)}))}}class ix{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Bs.at);const r=new PC(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(s0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s0):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,s,u,l,m,w,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),Am()<=Ho.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-S}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class sx{constructor(e,t){this.db=e,this.garbageCollector=new ix(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return a0(e,r)}removeReference(e,t,r){return a0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return a0(e,t)}Gn(e,t){return function(r,s){let u=!1;return qI(r).tt(l=>Yp(r,l,s).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const w=this.Gn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),ru(e).delete([0,yi(l.path)])))});s.push(w)}}).next(()=>re.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return a0(e,t)}Kn(e,t){const r=ru(e);let s,u=Bs.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==Bs.at&&t(new Ge(Jo(s)),u),u=b,s=w):u=Bs.at}).next(()=>{u!==Bs.at&&t(new Ge(Jo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function a0(n,e){return ru(n).put((r=n.currentSequenceNumber,{targetId:0,path:yi(e.path),sequenceNumber:r}));var r}class LC{constructor(){this.changes=new _c(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ox{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return od(e).put(r)}removeEntry(e,t,r){return od(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],ry(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rf(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rf(t))},(s,u)=>{r={document:this.jn(t,u),size:Zp(u)}}).next(()=>r)}getEntries(e,t){let r=Mi();return this.zn(e,t,(s,u)=>{const l=this.jn(s,u);r=r.insert(s,l)}).next(()=>r)}Hn(e,t){let r=Mi(),s=new tr(Ge.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),s=s.insert(u,Zp(l))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let s=new cn(u0);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(rf(s.first()),rf(s.last())),l=s.getIterator();let m=l.getNext();return od(e).Z({index:"documentKeyIndex",range:u},(w,b,S)=>{const N=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&u0(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?S.j(rf(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),ry(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return od(e).W(IDBKeyRange.bound(s,u,!0)).next(l=>{let m=Mi();for(const w of l){const b=this.jn(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Mi();const l=bc(t,r),m=bc(t,gi.max());return od(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,S)=>{const N=this.jn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new hy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return KI(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Qn(e,t){return KI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function tx(n,e){let t;if(e.document)t=DI(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=ef(e.noDocument.readTime);t=Cn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ke();{const r=Ge.fromSegments(e.unknownDocument.path),s=ef(e.unknownDocument.version);t=Cn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Lt(r[0],r[1]);return mt.fromTimestamp(s)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return Cn.newInvalidDocument(e)}}function ZI(n){return new ox(n)}class hy extends LC{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new _c(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new cn((u,l)=>Ft(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=UI(this.Yn.yt,l);s=s.add(u.path.popLast());const b=Zp(w);r+=b-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=UI(this.Yn.yt,l.convertToNoDocument(mt.min()));t.push(this.Yn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function KI(n){return Hr(n,"remoteDocumentGlobal")}function od(n){return Hr(n,"remoteDocumentsV14")}function rf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bc(n,e){const t=e.documentKey.path.toArray();return[n,ry(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function u0(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ft(t[u],r[u]),s)return s;return s=Ft(t.length,r.length),s||(s=Ft(t[t.length-2],r[r.length-2]),s||Ft(t[t.length-1],r[r.length-1]))}class c0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fy{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&mc(r.mutation,s,Ki.empty(),Lt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zt()){const s=lo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Zh();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=Mi();const l=$p(),m=$p();return t.forEach((w,b)=>{const S=r.get(b.key);s.has(b.key)&&(void 0===S||S.mutation instanceof Qo)?u=u.insert(b.key,b):void 0!==S?(l.set(b.key,S.mutation.getFieldMask()),mc(S.mutation,b,S.mutation.getFieldMask(),Lt.now())):l.set(b.key,Ki.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,S)=>l.set(b,S)),t.forEach((b,S)=>{var N;return m.set(b,new c0(S,null!==(N=l.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=$p();let s=new tr((l,m)=>l-m),u=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let S=r.get(w)||Ki.empty();S=m.applyToLocalView(b,S),r.set(w,S);const N=(s.get(m.batchId)||zt()).add(w);s=s.insert(m.batchId,N)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,S=w.value,N=Pv();S.forEach(V=>{if(!u.has(V)){const K=lI(t.get(V),r.get(V));null!==K&&N.set(V,K),u=u.add(V)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Cv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):re.resolve(lo());let m=-1,w=u;return l.next(b=>re.forEach(b,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?re.resolve():this.remoteDocumentCache.getEntry(e,S).next(V=>{w=w.insert(S,V)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,zt())).next(S=>({batchId:m,changes:gI(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=Zh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Zh();return this.indexManager.getCollectionParents(e,s).next(l=>re.forEach(l,m=>{const w=(b=t,S=m.child(s),new fc(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const b=w.getKey();null===s.get(b)&&(s=s.insert(b,Cn.newInvalidDocument(b)))});let l=Zh();return s.forEach((m,w)=>{const b=u.get(m);void 0!==b&&mc(b.mutation,w,Ki.empty(),Lt.now()),Av(t,w)&&(l=l.insert(m,w))}),l})}}class VC{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Gn(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:BI(r.bundledQuery),readTime:Gn(r.readTime)}),re.resolve();var r}}class l0{constructor(){this.overlays=new tr(Ge.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lo();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.oe(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=lo(),u=t.length+1,l=new Ge(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new tr((b,S)=>b-S);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=lo(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=lo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=s)););return re.resolve(m)}oe(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Xv(t,r));let u=this.es.get(t);void 0===u&&(u=zt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class Xp{constructor(){this.ns=new cn(ur.ss),this.rs=new cn(ur.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ur(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ur(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new tn([])),r=new ur(t,e),s=new ur(t,e+1),u=[];return this.rs.forEachInRange([r,s],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new tn([])),r=new ur(t,e),s=new ur(t,e+1);let u=zt();return this.rs.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new ur(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ur{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Ft(e._s,t._s)}static os(e,t){return Ft(e._s,t._s)||Ge.comparator(e.key,t.key)}}class ax{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new cn(ur.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const l=new Qv(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.gs=this.gs.add(new ur(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ur(t,0),s=new ur(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],l=>{const m=this.ys(l._s);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Ft);return t.forEach(s=>{const u=new ur(s,0),l=new ur(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const l=new ur(new Ge(u),0);let m=new cn(Ft);return this.gs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w._s)),!0)},l),re.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,s=>{const u=new ur(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ur(t,0),s=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ux{constructor(e){this.Es=e,this.docs=new tr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Mi();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Cn.newInvalidDocument(s))}),re.resolve(r)}getAllFromCollection(e,t,r){let s=Mi();const u=new Ge(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:w}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Nm(NE(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,t,r,s){Ke()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cx(this)}getSize(e){return re.resolve(this.size)}}class cx extends LC{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class lx{constructor(e){this.persistence=e,this.Rs=new _c(t=>hc(t),Fp),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Xp,this.targetCount=0,this.vs=sd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new sd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),re.waitFor(u).next(()=>s)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class d0{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Bs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new lx(this),this.indexManager=new OC,this.remoteDocumentCache=new ux(r=>this.referenceDelegate.xs(r)),this.yt=new SC(t),this.Ns=new VC(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new l0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new ax(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const s=new UC(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class UC extends dv{constructor(e){super(),this.currentSequenceNumber=e}}class py{constructor(e){this.persistence=e,this.Fs=new Xp,this.$s=null}static Bs(e){return new py(e)}get Ls(){if(this.$s)return this.$s;throw Ke()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const s=Ge.fromPath(r);return this.qs(e,s).next(u=>{u||t.removeEntry(s,mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class BC{constructor(e){this.yt=e}$(e,t,r,s){const u=new Om("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NI,{unique:!0}),m.createObjectStore("documentMutations"),YI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=re.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),YI(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NI,{unique:!0});const S=w.store("mutations"),N=b.map(V=>S.put(V));return re.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Us(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(l=l.next(()=>this.Gs(u))),r<8&&s>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.js(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:kI});w.createIndex("collectionPathOverlayIndex",PI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",JA,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:zA});w.createIndex("documentKeyIndex",qA),w.createIndex("collectionGroupIndex",WA)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:ey}).createIndex("sequenceNumberIndex",XA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:OI}).createIndex("documentKeyIndex",ty,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=Zp(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>re.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>re.forEach(m,w=>{rt(w.userId===u.userId);const b=td(this.yt,w);return o0(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((l,m)=>{const w=new tn(l),b=[0,yi(w)];u.push(t.get(b).next(S=>S?re.resolve():t.put({targetId:0,path:yi(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:QA});const r=t.store("collectionParents"),s=new n0,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:yi(w)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const w=new tn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,w],b)=>{const S=Jo(m);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=tf(s),l=Jv(this.yt,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Ge(tn.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):Ke()).path.toArray();var b;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(S))}).next(()=>re.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=ZI(this.yt),u=new d0(py.Bs,this.yt.ie);return r.W().next(l=>{const m=new Map;return l.forEach(w=>{var b;let S=null!==(b=m.get(w.userId))&&void 0!==b?b:zt();td(this.yt,w).keys().forEach(N=>S=S.add(N)),m.set(w.userId,S)}),re.forEach(m,(w,b)=>{const S=new Br(b),N=sy.re(this.yt,S),V=u.getIndexManager(S),K=Kp.re(S,this.yt,V,u.referenceDelegate);return new fy(s,K,N,V).recalculateAndSaveOverlaysForDocumentKeys(new VI(t,Bs.at),w).next()})})}}function YI(n){n.createObjectStore("targetDocuments",{keyPath:KA}).createIndex("documentTargetsIndex",YA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZA,{unique:!0}),n.createObjectStore("targetGlobal")}const gy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class my{constructor(e,t,r,s,u,l,m,w,b,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=b,this.Ys=S,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!my.C())throw new Ae(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sx(this,s),this.ii=t+"main",this.yt=new SC(w),this.ri=new uo(this.ii,this.Xs,new BC(this.yt)),this.Cs=new rx(this.referenceDelegate,this.yt),this.remoteDocumentCache=ZI(this.yt),this.Ns=new AC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ue.FAILED_PRECONDITION,gy);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Bs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,pe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(nu(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return sf(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return yy(e).delete(this.clientId)}yi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Hr(r,"clientMetadata");return s.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return re.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):sf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ae(ue.FAILED_PRECONDITION,gy);return!1}}return!(!this.networkEnabled||!this.inForeground)||yy(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new VI(t,Bs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>yy(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Kp.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nx(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return sy.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?ex:14===l?Yv:13===l?LI:12===l?FI:11===l?ny:void Ke();var l;let m;return this.ri.runTransaction(e,s,u,w=>(m=new VI(w,this.Ss?this.Ss.next():Bs.at),"readwrite-primary"===t?this.fi(m).next(b=>!!b||this.di(m)).next(b=>{if(!b)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ae(ue.FAILED_PRECONDITION,lv);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return sf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ue.FAILED_PRECONDITION,gy)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sf(e).put("owner",t)}static C(){return uo.C()}_i(e){const t=sf(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(er(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sf(n){return Hr(n,"owner")}function yy(n){return Hr(n,"clientMetadata")}function h0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _y{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=zt(),s=zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new _y(e,t.fromCache,r,s)}}class vy{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(eI(t))return re.resolve(null);let r=mi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=zm(t,null,"F"),r=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=zt(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Fi(t,m);return this.$i(t,b,l,w.readTime)?this.ki(e,zm(t,null,"F")):this.Bi(e,b,t,w)}))})))}Oi(e,t,r,s){return eI(t)||s.isEqual(mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,s)?this.Mi(e,t):(Am()<=Ho.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sv(t)),this.Bi(e,l,t,RE(s,-1)))})}Fi(e,t){let r=new cn(iI(e));return t.forEach((s,u)=>{Av(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return Am()<=Ho.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Sv(t)),this.Ni.getDocumentsMatchingQuery(e,t,gi.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class dx{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new tr(Ft),this.Ui=new _c(u=>hc(u),Fp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function f0(n,e,t,r){return new dx(n,e,t,r)}function wy(n,e){return p0.apply(this,arguments)}function p0(){return p0=(0,pe.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=zt();for(const b of s){l.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}for(const b of u){m.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(b=>({ji:b,removedBatchIds:l,addedBatchIds:m}))})})}),p0.apply(this,arguments)}function jC(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const S=w.batch,N=S.keys();let V=re.resolve();return N.forEach(K=>{V=V.next(()=>b.getEntry(m,K)).next(te=>{const xe=w.docVersions.get(K);rt(null!==xe),te.version.compareTo(xe)<0&&(S.applyToRemoteDocument(te,w),te.isValidDocument()&&(te.setReadTime(w.commitVersion),b.addEntry(te)))})}),V.next(()=>l.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=zt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function $C(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function hx(n,e){const t=$e(n),r=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const m=[];e.targetChanges.forEach((S,N)=>{const V=s.get(N);if(!V)return;m.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,N)));let K=V.withSequenceNumber(u.currentSequenceNumber);var te,xe,Me;e.targetMismatches.has(N)?K=K.withResumeToken(Tr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,r)),s=s.insert(N,K),xe=K,Me=S,(0===(te=V).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,K))});let w=Mi(),b=zt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(QI(u,l,e.documentUpdates).next(S=>{w=S.Wi,b=S.zi})),!r.isEqual(mt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return re.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.qi=s,u))}function QI(n,e,t){let r=zt(),s=zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Mi();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(mt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{Wi:l,zi:s}})}function HC(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function af(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,re.resolve(s)):t.Cs.allocateTargetId(r).next(l=>(s=new Jl(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.qi.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Jp(n,e,t){return XI.apply(this,arguments)}function XI(){return XI=(0,pe.Z)(function*(n,e,t){const r=$e(n),s=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!nu(l))throw l;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}),XI.apply(this,arguments)}function g0(n,e,t){const r=$e(n);let s=mt.min(),u=zt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const S=$e(m),N=S.Ui.get(b);return void 0!==N?re.resolve(S.qi.get(N)):S.Cs.getTargetData(w,b)}(r,l,mi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?s:mt.min(),t?u:zt())).next(m=>(JI(r,rI(e),m),{documents:m,Hi:u})))}function GC(n,e){const t=$e(n),r=$e(t.Cs),s=t.qi.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function zC(n,e){const t=$e(n),r=t.Ki.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,RE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(JI(t,e,s),s))}function JI(n,e,t){let r=n.Ki.get(e)||mt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function eb(){return eb=(0,pe.Z)(function*(n,e,t,r){const s=$e(n);let u=zt(),l=Mi();for(const b of t){const S=e.Ji(b.metadata.name);b.document&&(u=u.add(S));const N=e.Yi(b);N.setReadTime(e.Xi(b.metadata.readTime)),l=l.insert(S,N)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),w=yield af(s,(b=r,mi(Gh(tn.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>QI(b,m,l).next(S=>(m.apply(b),S)).next(S=>s.Cs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Cs.addMatchingKeys(b,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,S.Wi,S.zi)).next(()=>S.Wi)))}),eb.apply(this,arguments)}function px(n,e){return tb.apply(this,arguments)}function tb(){return tb=(0,pe.Z)(function*(n,e,t=zt()){const r=yield af(n,mi(BI(e.bundledQuery))),s=$e(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Gn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Tr.EMPTY_BYTE_STRING,l);return s.qi=s.qi.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),tb.apply(this,arguments)}function qC(n,e){return`firestore_clients_${n}_${e}`}function WC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function i(n,e){return`firestore_targets_${n}_${e}`}class o{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ae(s.error.code,s.error.message))),l?new o(e,t,s.state,u):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class a{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ae(r.error.code,r.error.message))),u?new a(e,r.state,s):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class c{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Ym();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=Bh(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new c(e,u):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class d{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new d(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class p{constructor(){this.activeTargetIds=Ym()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new tr(Ft),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=qC(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new p),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(qC(e.persistenceKey,s));if(u){const l=c.Zi(s,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(i(this.persistenceKey,e));if(r){const s=a.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(i(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let l=Bs.at;if(null!=u)try{const m=JSON.parse(u);rt("number"==typeof m),l=m}catch(m){er("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==Bs.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new o(this.currentUser,e,t,r),u=WC(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=WC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=i(this.persistenceKey,e),u=new a(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return c.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return o.Zi(new Br(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return a.Zi(s,t)}yr(e){return d.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Ym();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class E{constructor(){this.Lr=new p,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new p,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class I{Ur(e){}shutdown(){}}class T{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const M={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class G extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const l=this.ho(e,t);Ne("RestConnection","Sending: ",l,r);const m={};return this.lo(m,s,u),this.fo(e,l,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw sc("RestConnection",`${e} failed with error: `,w,"url: ",l,"request:",r),w})}_o(e,t,r,s,u,l){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${M[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,l)=>{const m=new sC;m.setWithCredentials(!0),m.listenOnce(nC.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case uv.NO_ERROR:const b=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(b)),u(b);break;case uv.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),l(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case uv.HTTP_ERROR:const S=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const V=N?.error;if(V&&V.status&&V.message){const K=function(te){const xe=te.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(xe)>=0?xe:ue.UNKNOWN}(V.status);l(new Ae(K,V.message))}else l(new Ae(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=eC(),l=tC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new iC({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=s.join("");Ne("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let S=!1,N=!1;const V=new P({Hr:te=>{N?Ne("Connection","Not sending because WebChannel is closed:",te):(S||(Ne("Connection","Opening WebChannel transport."),b.open(),S=!0),Ne("Connection","WebChannel sending:",te),b.send(te))},Jr:()=>b.close()}),K=(te,xe,Me)=>{te.listen(xe,Ct=>{try{Me(Ct)}catch(At){setTimeout(()=>{throw At},0)}})};return K(b,Sm.EventType.OPEN,()=>{N||Ne("Connection","WebChannel transport opened.")}),K(b,Sm.EventType.CLOSE,()=>{N||(N=!0,Ne("Connection","WebChannel transport closed"),V.io())}),K(b,Sm.EventType.ERROR,te=>{N||(N=!0,sc("Connection","WebChannel transport errored:",te),V.io(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))}),K(b,Sm.EventType.MESSAGE,te=>{var xe;if(!N){const Me=te.data[0];rt(!!Me);const At=Me.error||(null===(xe=Me[0])||void 0===xe?void 0:xe.error);if(At){Ne("Connection","WebChannel received error:",At);const ut=At.status;let it=function(Ut){const lr=nr[Ut];if(void 0!==lr)return pI(lr)}(ut),bt=At.message;void 0===it&&(it=ue.INTERNAL,bt="Unknown error status: "+ut+" with message "+At.message),N=!0,V.io(new Ae(it,bt)),b.close()}else Ne("Connection","WebChannel received:",Me),V.ro(Me)}}),K(l,rC.STAT_EVENT,te=>{te.stat===DE.PROXY?Ne("Connection","Detected buffering proxy"):te.stat===DE.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function X(){return typeof window<"u"?window:null}function me(){return typeof document<"u"?document:null}function Pe(n){return new EI(n,!0)}class ze{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class et{constructor(e,t,r,s,u,l,m,w){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ze(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,pe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class It extends et{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function jv(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Ke(),s=e.targetChange.targetIds||[],u=function(w,b){return w.wt?(rt(void 0===b||"string"==typeof b),Tr.fromBase64String(b||"")):(rt(void 0===b||b instanceof Uint8Array),Tr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?ue.UNKNOWN:pI(w.code);return new Ae(b,w.message||"")}(l);t=new wC(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=$s(n,r.document.name),u=Gn(r.document.updateTime),l=r.document.createTime?Gn(r.document.createTime):mt.min(),m=new $r({mapValue:{fields:r.document.fields}}),w=Cn.newFoundDocument(s,u,l,m);t=new Qm(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=$s(n,r.document),u=r.readTime?Gn(r.readTime):mt.min(),l=Cn.newNoDocument(s,u);t=new Qm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=$s(n,r.document);t=new Qm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Ke();{const r=e.filter,u=new hI(r.count||0);t=new vI(r.targetId,u)}}var w;return t}(this.yt,e),r=function(s){if(!("targetChange"in s))return mt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?Gn(u.readTime):mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Hp(this.yt),t.addTarget=function(s,u){let l;const m=u.target;return l=$m(m)?{documents:TI(s,m)}:{query:Hv(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=II(s,u.resumeToken):u.snapshotVersion.compareTo(mt.min())>0&&(l.readTime=Yh(s,u.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function AI(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ke()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Hp(this.yt),t.removeTarget=e,this.Bo(t)}}class Re extends et{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function HA(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,s){let u=Gn(r.updateTime?r.updateTime:s);return u.isEqual(mt.min())&&(u=Gn(s)),new yC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.Zo(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Hp(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jm(this.yt,r))};this.Bo(t)}}class Vt extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(ue.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ue.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class gx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(er(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class a1{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;ad(l)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(b){const S=$e(b);S._u.add(4),yield Ey(S),S.gu.set("Unknown"),S._u.delete(4),yield m0(S)}),function(b){return w.apply(this,arguments)})(l))}))}),this.gu=new gx(r,s)}}function m0(n){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,pe.Z)(function*(n){if(ad(n))for(const e of n.wu)yield e(!0)}),ZC.apply(this,arguments)}function Ey(n){return KC.apply(this,arguments)}function KC(){return KC=(0,pe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),KC.apply(this,arguments)}function nb(n,e){const t=$e(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),XC(t)?QC(t):by(t).ko()&&YC(t,e))}function y0(n,e){const t=$e(n),r=by(t);t.du.delete(e),r.ko()&&mx(t,e),0===t.du.size&&(r.ko()?r.Fo():ad(t)&&t.gu.set("Unknown"))}function YC(n,e){n.yu.Ot(e.targetId),by(n).zo(e)}function mx(n,e){n.yu.Ot(e),by(n).Ho(e)}function QC(n){n.yu=new wI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),by(n).start(),n.gu.uu()}function XC(n){return ad(n)&&!by(n).No()&&n.du.size>0}function ad(n){return 0===$e(n)._u.size}function yx(n){n.yu=void 0}function u1(n){return JC.apply(this,arguments)}function JC(){return JC=(0,pe.Z)(function*(n){n.du.forEach((e,t)=>{YC(n,e)})}),JC.apply(this,arguments)}function c1(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,pe.Z)(function*(n,e){yx(n),XC(n)?(n.gu.hu(e),QC(n)):n.gu.set("Unknown")}),eT.apply(this,arguments)}function l1(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,pe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof wC&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rb(n,r)}else if(e instanceof Qm?n.yu.Kt(e):e instanceof vI?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(mt.min()))try{const r=yield $C(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.yu.Zt(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.du.get(w);b&&s.du.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=s.du.get(m);if(!w)return;s.du.set(m,w.withResumeToken(Tr.EMPTY_BYTE_STRING,w.snapshotVersion)),mx(s,m);const b=new Jl(w.target,m,1,w.sequenceNumber);YC(s,b)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield rb(n,r)}var r}),tT.apply(this,arguments)}function rb(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,pe.Z)(function*(n,e,t){if(!nu(e))throw e;n._u.add(1),yield Ey(n),n.gu.set("Offline"),t||(t=()=>$C(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield m0(n)}))}),nT.apply(this,arguments)}function _x(n,e){return e().catch(t=>rb(n,t,e))}function Iy(n){return rT.apply(this,arguments)}function rT(){return rT=(0,pe.Z)(function*(n){const e=$e(n),t=uf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;d1(e);)try{const s=yield HC(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,h1(e,s)}catch(s){yield rb(e,s)}vx(e)&&wx(e)}),rT.apply(this,arguments)}function d1(n){return ad(n)&&n.fu.length<10}function h1(n,e){n.fu.push(e);const t=uf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function vx(n){return ad(n)&&!uf(n).No()&&n.fu.length>0}function wx(n){uf(n).start()}function f1(n){return iT.apply(this,arguments)}function iT(){return iT=(0,pe.Z)(function*(n){uf(n).eu()}),iT.apply(this,arguments)}function p1(n){return sT.apply(this,arguments)}function sT(){return sT=(0,pe.Z)(function*(n){const e=uf(n);for(const t of n.fu)e.Xo(t.mutations)}),sT.apply(this,arguments)}function g1(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,pe.Z)(function*(n,e,t){const r=n.fu.shift(),s=Jh.from(r,e,t);yield _x(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Iy(n)}),oT.apply(this,arguments)}function m1(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,pe.Z)(function*(n,e){var t;e&&uf(n).Yo&&(yield(t=(0,pe.Z)(function*(r,s){if(fI(u=s.code)&&u!==ue.ABORTED){const l=r.fu.shift();uf(r).Mo(),yield _x(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Iy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),vx(n)&&wx(n)}),aT.apply(this,arguments)}function Ex(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,pe.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=ad(t);t._u.add(3),yield Ey(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield m0(t)}),uT.apply(this,arguments)}function cT(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,pe.Z)(function*(n,e){const t=$e(n);e?(t._u.delete(2),yield m0(t)):e||(t._u.add(2),yield Ey(t),t.gu.set("Unknown"))}),lT.apply(this,arguments)}function by(n){return n.pu||(n.pu=function(e,t,r){const s=$e(e);return s.su(),new It(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:u1.bind(null,n),Zr:c1.bind(null,n),Wo:l1.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.pu.Mo(),XC(n)?QC(n):n.gu.set("Unknown")):(yield n.pu.stop(),yx(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function uf(n){return n.Iu||(n.Iu=function(e,t,r){const s=$e(e);return s.su(),new Re(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:f1.bind(null,n),Zr:m1.bind(null,n),tu:p1.bind(null,n),Zo:g1.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Mo(),yield Iy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class dT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new dT(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dy(n,e){if(er("AsyncQueue",`${e}: ${n}`),nu(n))return new Ae(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Cy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Zh(),this.sortedSet=new tr(this.comparator)}static emptySet(e){return new Cy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Cy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ix{constructor(){this.Tu=new tr(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ke():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ty{constructor(e,t,r,s,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Ty(e,t,Cy.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class y1{constructor(){this.Au=void 0,this.listeners=[]}}class _1{constructor(){this.queries=new _c(e=>nI(e),Lp),this.onlineState="Unknown",this.Ru=new Set}}function hT(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,pe.Z)(function*(n,e){const t=$e(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new y1),s)try{u.Au=yield t.onListen(r)}catch(l){const m=Dy(l,`Initialization of query '${Sv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&mT(t)}),fT.apply(this,arguments)}function pT(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,pe.Z)(function*(n,e){const t=$e(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),gT.apply(this,arguments)}function v1(n,e){const t=$e(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.Pu(s)&&(r=!0);l.Au=s}}r&&mT(t)}function w1(n,e,t){const r=$e(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function mT(n){n.Ru.forEach(e=>{e.next()})}class yT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Ty(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ty.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class E1{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class bx{constructor(e){this.yt=e}Ji(e){return $s(this.yt,e)}Yi(e){return e.metadata.exists?DI(this.yt,e.document,!1):Cn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Gn(e)}}class I1{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=tn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new bx(this.yt);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||zt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function fx(n,e,t,r){return eb.apply(this,arguments)}(e.localStore,new bx(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield px(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Dx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Cx{constructor(e){this.key=e}}class Tx{constructor(e){this.key=e}}class Sx{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=zt(),this.mutatedKeys=zt(),this.Gu=iI(e),this.Qu=new Cy(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new Ix,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,N)=>{const V=s.get(S),K=Av(this.query,N)?N:null,te=!!V&&this.mutatedKeys.has(V.key),xe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Me=!1;V&&K?V.data.isEqual(K.data)?te!==xe&&(r.track({type:3,doc:K}),Me=!0):this.Hu(V,K)||(r.track({type:2,doc:K}),Me=!0,(w&&this.Gu(K,w)>0||b&&this.Gu(K,b)<0)&&(m=!0)):!V&&K?(r.track({type:0,doc:K}),Me=!0):V&&!K&&(r.track({type:1,doc:V}),Me=!0,(w||b)&&(m=!0)),Me&&(K?(l=l.add(K),u=xe?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,S)=>function(N,V){const K=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return K(N)-K(V)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new Ty(this.query,e.Qu,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ix,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=zt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Tx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Cx(r))}),t}tc(e){this.qu=e.Hi,this.Ku=zt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ty.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class b1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class D1{constructor(e){this.key=e,this.nc=!1}}class C1{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new _c(m=>nI(m),Lp),this.rc=new Map,this.oc=new Set,this.uc=new tr(Ge.comparator),this.cc=new Map,this.ac=new Xp,this.hc={},this.lc=new Map,this.fc=sd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function T1(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,pe.Z)(function*(n,e){const t=jT(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const l=yield af(t.localStore,mi(e));t.isPrimaryClient&&nb(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield vT(t,e,r,"current"===m,l.resumeToken)}return s}),_T.apply(this,arguments)}function vT(n,e,t,r,s){return wT.apply(this,arguments)}function wT(){return wT=(0,pe.Z)(function*(n,e,t,r,s){n._c=(N,V,K)=>{return(te=(0,pe.Z)(function*(xe,Me,Ct,At){let ut=Me.view.Wu(Ct);ut.$i&&(ut=yield g0(xe.localStore,Me.query,!1).then(({documents:Ut})=>Me.view.Wu(Ut,ut)));const it=At&&At.targetChanges.get(Me.targetId),bt=Me.view.applyChanges(ut,xe.isPrimaryClient,it);return MT(xe,Me.targetId,bt.Xu),bt.snapshot}),function(xe,Me,Ct,At){return te.apply(this,arguments)})(n,N,V,K);var te};const u=yield g0(n.localStore,e,!0),l=new Sx(e,u.Hi),m=l.Wu(u.documents),w=Xo.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=l.applyChanges(m,n.isPrimaryClient,w);MT(n,t,b.Xu);const S=new b1(e,t,l);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),wT.apply(this,arguments)}function S1(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,pe.Z)(function*(n,e){const t=$e(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!Lp(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),y0(t.remoteStore,r.targetId),Sy(t,r.targetId)}).catch(oc))):(Sy(t,r.targetId),yield Jp(t.localStore,r.targetId,!0))}),ET.apply(this,arguments)}function IT(){return IT=(0,pe.Z)(function*(n,e,t){const r=$T(n);try{const s=yield function(u,l){const m=$e(u),w=Lt.now(),b=l.reduce((V,K)=>V.add(K.key),zt());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let K=Mi(),te=zt();return m.Gi.getEntries(V,b).next(xe=>{K=xe,K.forEach((Me,Ct)=>{Ct.isValidDocument()||(te=te.add(Me))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,K)).next(xe=>{S=xe;const Me=[];for(const Ct of l){const At=Wm(Ct,S.get(Ct.key).overlayedDocument);null!=At&&Me.push(new Qo(Ct.key,At,Bm(At.value.mapValue),Tn.exists(!0)))}return m.mutationQueue.addMutationBatch(V,w,Me,l)}).next(xe=>{N=xe;const Me=xe.applyToLocalDocumentSet(S,te);return m.documentOverlayCache.saveOverlays(V,xe.batchId,Me)})}).then(()=>({batchId:N.batchId,changes:gI(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.hc[u.currentUser.toKey()];w||(w=new tr(Ft)),w=w.insert(l,m),u.hc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield ud(r,s.changes),yield Iy(r.remoteStore)}catch(s){const u=Dy(s,"Failed to persist write");t.reject(u)}}),IT.apply(this,arguments)}function Ax(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,pe.Z)(function*(n,e){const t=$e(n);try{const r=yield hx(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.cc.get(u);l&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.nc=!0:s.modifiedDocuments.size>0?rt(l.nc):s.removedDocuments.size>0&&(rt(l.nc),l.nc=!1))}),yield ud(t,r,e)}catch(r){yield oc(r)}}),bT.apply(this,arguments)}function xx(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=$e(u);m.onlineState=l;let w=!1;m.queries.forEach((b,S)=>{for(const N of S.listeners)N.bu(l)&&(w=!0)}),w&&mT(m)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function x1(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=(0,pe.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let l=new tr(Ge.comparator);l=l.insert(u,Cn.newNoDocument(u,mt.min()));const m=zt().add(u),w=new Sr(mt.min(),new Map,new cn(Ft),l,m);yield Ax(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),RT(r)}else yield Jp(r.localStore,e,!1).then(()=>Sy(r,e,t)).catch(oc)}),DT.apply(this,arguments)}function M1(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,pe.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const s=yield jC(t.localStore,e);xT(t,r,null),AT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ud(t,s)}catch(s){yield oc(s)}}),CT.apply(this,arguments)}function R1(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,pe.Z)(function*(n,e,t){const r=$e(n);try{const s=yield function(u,l){const m=$e(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(S=>(rt(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);xT(r,e,t),AT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ud(r,s)}catch(s){yield oc(s)}}),TT.apply(this,arguments)}function ST(){return ST=(0,pe.Z)(function*(n,e){const t=$e(n);ad(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=$e(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=Dy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),ST.apply(this,arguments)}function AT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function xT(n,e,t){const r=$e(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function Sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Mx(n,r)})}function Mx(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(y0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),RT(n))}function MT(n,e,t){for(const r of t)r instanceof Cx?(n.ac.addReference(r.key,e),O1(n,r)):r instanceof Tx?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Mx(n,r.key)):Ke()}function O1(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.oc.add(r),RT(n))}function RT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ge(tn.fromString(e)),r=n.fc.next();n.cc.set(r,new D1(t)),n.uc=n.uc.insert(t,r),nb(n.remoteStore,new Jl(mi(Gh(t.path)),r,2,Bs.at))}}function ud(n,e,t){return NT.apply(this,arguments)}function NT(){return NT=(0,pe.Z)(function*(n,e,t){const r=$e(n),s=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{l.push(r._c(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const S=_y.Ci(w.targetId,b);u.push(S)}}))}),yield Promise.all(l),r.sc.Wo(s),yield(m=(0,pe.Z)(function*(w,b){const S=$e(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>re.forEach(b,V=>re.forEach(V.Si,K=>S.persistence.referenceDelegate.addReference(N,V.targetId,K)).next(()=>re.forEach(V.Di,K=>S.persistence.referenceDelegate.removeReference(N,V.targetId,K)))))}catch(N){if(!nu(N))throw N;Ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const V=N.targetId;if(!N.fromCache){const K=S.qi.get(V),xe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);S.qi=S.qi.insert(V,xe)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),NT.apply(this,arguments)}function k1(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,pe.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield wy(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Ae(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ud(t,r.ji)}var s}),OT.apply(this,arguments)}function P1(n,e){const t=$e(n),r=t.cc.get(e);if(r&&r.nc)return zt().add(r.key);{let s=zt();const u=t.rc.get(e);if(!u)return s;for(const l of u){const m=t.ic.get(l);s=s.unionWith(m.view.ju)}return s}}function F1(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,pe.Z)(function*(n,e){const t=$e(n),r=yield g0(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&MT(t,e.targetId,s.Xu),s}),kT.apply(this,arguments)}function L1(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,pe.Z)(function*(n,e){const t=$e(n);return zC(t.localStore,e).then(r=>ud(t,r))}),PT.apply(this,arguments)}function V1(n,e,t,r){return FT.apply(this,arguments)}function FT(){return FT=(0,pe.Z)(function*(n,e,t,r){const s=$e(n),u=yield function(l,m){const w=$e(l),b=$e(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Tn(S,m).next(N=>N?w.localDocuments.getDocuments(S,N):re.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Iy(s.remoteStore):"acknowledged"===t||"rejected"===t?(xT(s,e,r||null),AT(s,e),m=e,$e($e(s.localStore).mutationQueue).An(m)):Ke(),yield ud(s,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),FT.apply(this,arguments)}function LT(){return LT=(0,pe.Z)(function*(n,e){const t=$e(n);if(jT(t),$T(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield Rx(t,r.toArray());t.dc=!0,yield cT(t.remoteStore,!0);for(const u of s)nb(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Sy(t,l),Jp(t.localStore,l,!0))),y0(t.remoteStore,l)}),yield s,yield Rx(t,r),function(u){const l=$e(u);l.cc.forEach((m,w)=>{y0(l.remoteStore,w)}),l.ac.fs(),l.cc=new Map,l.uc=new tr(Ge.comparator)}(t),t.dc=!1,yield cT(t.remoteStore,!1)}}),LT.apply(this,arguments)}function Rx(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,pe.Z)(function*(n,e,t){const r=$e(n),s=[],u=[];for(const l of e){let m;const w=r.rc.get(l);if(w&&0!==w.length){m=yield af(r.localStore,mi(w[0]));for(const b of w){const S=r.ic.get(b),N=yield F1(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield GC(r.localStore,l);m=yield af(r.localStore,b),yield vT(r,Nx(b),l,!1,m.resumeToken)}s.push(m)}return r.sc.Wo(u),s}),VT.apply(this,arguments)}function Nx(n){return Dv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function B1(n){const e=$e(n);return $e($e(e.localStore).persistence).vi()}function j1(n,e,t,r){return UT.apply(this,arguments)}function UT(){return UT=(0,pe.Z)(function*(n,e,t,r){const s=$e(n);if(s.dc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield zC(s.localStore,rI(u[0])),m=Sr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Tr.EMPTY_BYTE_STRING);yield ud(s,l,m);break}case"rejected":yield Jp(s.localStore,e,!0),Sy(s,e,r);break;default:Ke()}}),UT.apply(this,arguments)}function $1(n,e,t){return BT.apply(this,arguments)}function BT(){return BT=(0,pe.Z)(function*(n,e,t){const r=jT(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Ne("SyncEngine","Adding an already active target "+s);continue}const u=yield GC(r.localStore,s),l=yield af(r.localStore,u);yield vT(r,Nx(u),l.targetId,!1,l.resumeToken),nb(r.remoteStore,l)}for(const s of t)r.rc.has(s)&&(yield Jp(r.localStore,s,!1).then(()=>{y0(r.remoteStore,s),Sy(r,s)}).catch(oc))}}),BT.apply(this,arguments)}function jT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ax.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x1.bind(null,e),e.sc.Wo=v1.bind(null,e.eventManager),e.sc.wc=w1.bind(null,e.eventManager),e}function $T(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R1.bind(null,e),e}class Ox{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.yt=Pe(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return f0(this.persistence,new vy,e.initialUser,this.yt)}yc(e){return new d0(py.Bs,this.yt)}gc(e){return new E}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kx extends Ox{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield $T(r.Ac.syncEngine),yield Iy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return f0(this.persistence,new vy,e.initialUser,this.yt)}Tc(e,t){return new FC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new jA(t,this.persistence);return new dC(e.asyncQueue,r)}yc(e){const t=h0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new my(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,X(),me(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new E}}class G1 extends kx{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof _&&(r.sharedClientState.syncEngine={Fr:V1.bind(null,s),$r:j1.bind(null,s),Br:$1.bind(null,s),vi:B1.bind(null,s),Mr:L1.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,pe.Z)(function*(l){yield function U1(n,e){return LT.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=X();if(!_.C(t))throw new Ae(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=h0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HT{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>xx(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=k1.bind(null,r.syncEngine),yield cT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _1}createDatastore(e){const t=Pe(e.databaseInfo.databaseId),r=new G(e.databaseInfo);return new Vt(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>xx(this.syncEngine,m,0),l=T.C()?new T:new I,new a1(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,b){const S=new C1(r,s,u,l,m,w);return b&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=$e(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Ey(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function GT(n,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Px(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Fx(n){if(!Ge.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Lx(n){if(Ge.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ib(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ke()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ib(n);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Vx(n,e){if(e<=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Ux=new Map;class Bx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Px("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cv;switch(t.type){case"gapi":return new UA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ux.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),Ux.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ni(this.firestore,e,this._query)}}class Dc extends Ni{constructor(e,t,r){super(e,t,Gh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ge(e))}withConverter(e){return new Dc(this.firestore,e,this._path)}}function $x(n,e,...t){if(n=(0,Ht.m9)(n),GT("collection","path",e),n instanceof _0){const r=tn.fromString(e,...t);return Lx(r),new Dc(n,null,r)}{if(!(n instanceof qn||n instanceof Dc))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return Lx(r),new Dc(n.firestore,null,r)}}function sb(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=Bl.R()),GT("doc","path",e),n instanceof _0){const r=tn.fromString(e,...t);return Fx(r),new qn(n,null,new Ge(r))}{if(!(n instanceof qn||n instanceof Dc))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return Fx(r),new qn(n.firestore,n instanceof Dc?n.converter:null,new Ge(r))}}function Hx(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof qn||n instanceof Dc)&&(e instanceof qn||e instanceof Dc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zT(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof Ni&&e instanceof Ni&&n.firestore===e.firestore&&Lp(n._query,e._query)&&n.converter===e.converter}function Gx(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class q1{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Vn,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new E1(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,pe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class K1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,pe.Z)(function*(u,l){const m=$e(u),w=Hp(m.yt)+"/documents",b={documents:l.map(K=>vc(m.yt,K))},S=yield m._o("BatchGetDocuments",w,b,l.length),N=new Map;S.forEach(K=>{const te=function CI(n,e){return"found"in e?function(t,r){rt(!!r.found);const s=$s(t,r.found.name),u=Gn(r.found.updateTime),l=r.found.createTime?Gn(r.found.createTime):mt.min(),m=new $r({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const s=$s(t,r.missing),u=Gn(r.readTime);return Cn.newNoDocument(s,u)}(n,e):Ke()}(m.yt,K);N.set(te.key.toString(),te)});const V=[];return l.forEach(K=>{const te=N.get(K.toString());rt(!!te),V.push(te)}),V}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new jp(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(s,u){const l=$e(s),m=Hp(l.yt)+"/documents",w={writes:u.map(b=>Jm(l.yt,b))};yield l.ao("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ke();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Tn.exists(!1):Tn.updateTime(t):Tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Ae(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tn.updateTime(t)}return Tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Y1{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new ze(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,pe.Z)(function*(){const t=new K1(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Op(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fI(t)}return!1}}class Q1{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Br.UNAUTHENTICATED,this.clientId=Bl.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,pe.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Dy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function zx(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,pe.Z)(function*(u){r.isEqual(u)||(yield wy(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),qT.apply(this,arguments)}function qx(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ZT(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>Ex(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>Ex(e.remoteStore,u)),n.onlineComponents=e}),WT.apply(this,arguments)}function ZT(n){return KT.apply(this,arguments)}function KT(){return KT=(0,pe.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield zx(n,new Ox)),n.offlineComponents}),KT.apply(this,arguments)}function ab(n){return YT.apply(this,arguments)}function YT(){return YT=(0,pe.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield qx(n,new HT)),n.onlineComponents}),YT.apply(this,arguments)}function Wx(n){return ZT(n).then(e=>e.persistence)}function ub(n){return ZT(n).then(e=>e.localStore)}function QT(n){return ab(n).then(e=>e.remoteStore)}function XT(n){return ab(n).then(e=>e.syncEngine)}function Ay(n){return JT.apply(this,arguments)}function JT(){return JT=(0,pe.Z)(function*(n){const e=yield ab(n),t=e.eventManager;return t.onListen=T1.bind(null,e.syncEngine),t.onUnlisten=S1.bind(null,e.syncEngine),t}),JT.apply(this,arguments)}function Kx(n,e,t={}){const r=new Vn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,l,m,w){const b=new ob({next:N=>{u.enqueueAndForget(()=>pT(s,S));const V=N.docs.has(l);!V&&N.fromCache?w.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new yT(Gh(l.path),b,{includeMetadataChanges:!0,Nu:!0});return hT(s,S)}(yield Ay(n),n.asyncQueue,e,t,r)})),r.promise}function Yx(n,e,t={}){const r=new Vn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,l,m,w){const b=new ob({next:N=>{u.enqueueAndForget(()=>pT(s,S)),N.fromCache&&"server"===m.source?w.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new yT(l,b,{includeMetadataChanges:!0,Nu:!0});return hT(s,S)}(yield Ay(n),n.asyncQueue,e,t,r)})),r.promise}class sO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ze(this,"async_queue_retry"),this.Wc=()=>{const t=me();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=me();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=me();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Vn;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!nu(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,er("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=dT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(s),s}zc(){this.Kc&&Ke()}verifyOperationInProgress(){}Xc(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function eS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class oO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends _0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new sO,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qx(this),this._firestoreClient.terminate()}}function Ar(n){return n._firestoreClient||Qx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Qx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $A(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Q1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Xx(n,e,t){const r=new Vn;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield zx(n,t),yield qx(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(l=u).name?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;sc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function Jx(n){if(n._initialized||n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cc(Tr.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cc(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._methodName=e}}class cb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const mO=/^__.*__$/;class yO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wh(e,this.data,t,this.fieldTransforms)}}class eM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class lb{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new lb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return fb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(tM(this.sa)&&mO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class _O{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Pe(e)}da(e,t,r,s=!1){return new lb({sa:e,methodName:t,fa:r,path:Hn.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function tg(n){const e=n._freezeSettings(),t=Pe(n._databaseId);return new _O(n._databaseId,!!e.ignoreUndefinedProperties,t)}function db(n,e,t,r,s,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,s);iS("Data must be an object, but it was:",l,r);const m=iM(r,l);let w,b;if(u.merge)w=new Ki(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const V=sS(e,N,t);if(!l.contains(V))throw new Ae(ue.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);oM(S,V)||S.push(V)}w=new Ki(S),b=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=l.fieldTransforms;return new yO(new $r(m),w,b)}class v0 extends eg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof v0}}function nM(n,e,t){return new lb({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class tS extends eg{_toFieldTransform(e){return new Ql(e.path,new Bp)}isEqual(e){return e instanceof tS}}class vO extends eg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nM(this,e,!0),r=this._a.map(u=>ng(u,t)),s=new pc(r);return new Ql(e.path,s)}isEqual(e){return this===e}}class wO extends eg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nM(this,e,!0),r=this._a.map(u=>ng(u,t)),s=new Yl(r);return new Ql(e.path,s)}isEqual(e){return this===e}}class EO extends eg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new zh(e.yt,Rv(e.yt,this.wa));return new Ql(e.path,t)}isEqual(e){return this===e}}function nS(n,e,t,r){const s=n.da(1,e,t);iS("Data must be an object, but it was:",s,r);const u=[],l=$r.empty();Zo(r,(w,b)=>{const S=hb(e,w,t);b=(0,Ht.m9)(b);const N=s.ca(S);if(b instanceof v0)u.push(S);else{const V=ng(b,N);null!=V&&(u.push(S),l.set(S,V))}});const m=new Ki(u);return new eM(l,m,s.fieldTransforms)}function rS(n,e,t,r,s,u){const l=n.da(1,e,t),m=[sS(e,r,t)],w=[s];if(u.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(sS(e,u[V])),w.push(u[V+1]);const b=[],S=$r.empty();for(let V=m.length-1;V>=0;--V)if(!oM(b,m[V])){const K=m[V];let te=w[V];te=(0,Ht.m9)(te);const xe=l.ca(K);if(te instanceof v0)b.push(K);else{const Me=ng(te,xe);null!=Me&&(b.push(K),S.set(K,Me))}}const N=new Ki(b);return new eM(S,N,l.fieldTransforms)}function rM(n,e,t,r=!1){return ng(t,n.da(r?4:3,e))}function ng(n,e){if(sM(n=(0,Ht.m9)(n)))return iS("Unsupported field value:",e,n),iM(n,e);if(n instanceof eg)return function(t,r){if(!tM(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=ng(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Rv(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Lt.fromDate(t);return{timestampValue:Yh(r.yt,s)}}if(t instanceof Lt){const s=new Lt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Yh(r.yt,s)}}if(t instanceof cb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cc)return{bytesValue:II(r.yt,t._byteString)};if(t instanceof qn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${ib(t)}`)}(n,e)}function iM(n,e){const t={};return kE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(n,(r,s)=>{const u=ng(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function sM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof cb||n instanceof Cc||n instanceof qn||n instanceof eg)}function iS(n,e,t){if(!sM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ib(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function sS(n,e,t){if((e=(0,Ht.m9)(e))instanceof cd)return e._internalPath;if("string"==typeof e)return hb(n,e);throw fb("Field path arguments must be of type string or ",n,!1,void 0,t)}const IO=new RegExp("[~\\*/\\[\\]]");function hb(n,e,t){if(e.search(IO)>=0)throw fb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cd(...e.split("."))._internalPath}catch{throw fb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fb(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Ae(ue.INVALID_ARGUMENT,m+n+w)}function oM(n,e){return n.some(t=>t.isEqual(e))}class w0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bO extends w0{data(){return super.data()}}function pb(n,e){return"string"==typeof e?hb(n,e):e instanceof cd?e._internalPath:e._delegate._internalPath}function aM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oS{}class E0 extends oS{}function cf(n,e,...t){let r=[];e instanceof oS&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof xy).length,l=s.filter(m=>m instanceof I0).length;if(u>1||u>0&&l>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class I0 extends E0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new I0(e,t,r)}_apply(e){const t=this._parse(e);return dM(e._query,t),new Ni(e.firestore,e.converter,Tv(e._query,t))}_parse(e){const t=tg(e.firestore);return function(s,u,l,m,w,b,S){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){lM(S,b);const V=[];for(const K of S)V.push(cM(m,s,K));N={arrayValue:{values:V}}}else N=cM(m,s,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||lM(S,b),N=rM(l,"where",S,"in"===b||"not-in"===b);return Xt.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class xy extends oS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)dM(u,m),u=Tv(u,m)}(e._query,t),new Ni(e.firestore,e.converter,Tv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aS extends E0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aS(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new co(s,u);return function(m,w){if(null===tI(m)){const b=Gm(m);null!==b&&hM(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ni(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new fc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class gb extends E0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new gb(e,t,r)}_apply(e){return new Ni(e.firestore,e.converter,zm(e._query,this._limit,this._limitType))}}class mb extends E0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mb(e,t,r)}_apply(e){const t=uM(e,this.type,this._docOrFields,this._inclusive);return new Ni(e.firestore,e.converter,(s=t,new fc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class yb extends E0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yb(e,t,r)}_apply(e){const t=uM(e,this.type,this._docOrFields,this._inclusive);return new Ni(e.firestore,e.converter,(s=t,new fc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function uM(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof w0)return function(s,u,l,m,w){if(!m)throw new Ae(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const S of Kl(s))if(S.field.isKeyField())b.push(ql(u,m.key));else{const N=m.data.field(S.field);if(km(N))throw new Ae(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const V=S.field.canonicalString();throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}b.push(N)}return new lc(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=tg(n.firestore);return function(u,l,m,w,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new Ae(ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let K=0;K<b.length;K++){const te=b[K];if(N[K].field.isKeyField()){if("string"!=typeof te)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof te}`);if(!Cv(u)&&-1!==te.indexOf("/"))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${te}' contains a slash.`);const xe=u.path.child(tn.fromString(te));if(!Ge.isDocumentKey(xe))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Me=new Ge(xe);V.push(ql(l,Me))}else{const xe=rM(m,w,te);V.push(xe)}}return new lc(V,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function cM(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cv(e)&&-1!==t.indexOf("/"))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Ge.isDocumentKey(r))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ql(n,new Ge(r))}if(t instanceof qn)return ql(n,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ib(t)}.`)}function lM(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dM(n,e){if(e.isInequality()){const r=Gm(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=tI(n);null!==u&&hM(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function hM(n,e,t){if(!t.isEqual(e))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class uS{convertValue(e,t="none"){switch(uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ke()}}convertObject(e,t){const r={};return Zo(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new cb(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=PE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(kp(e));default:return null}}convertTimestamp(e){const t=ac(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);rt(qv(r));const s=new Gl(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||er(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function _b(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class NO extends uS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ld extends w0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new b0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class b0 extends ld{data(e={}){return super.data(e)}}class lf{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new rg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new b0(this._firestore,this._userDataWriter,r.key,r,new rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new b0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new b0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:OO(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function OO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}function pM(n,e){return n instanceof ld&&e instanceof ld?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lf&&e instanceof lf&&n._firestore===e._firestore&&zT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class df extends uS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function gM(n,e,t){n=nn(n,qn);const r=nn(n.firestore,Wn),s=_b(n.converter,e,t);return My(r,[db(tg(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Tn.none())])}function mM(n,e,t,...r){n=nn(n,qn);const s=nn(n.firestore,Wn),u=tg(s);let l;return l="string"==typeof(e=(0,Ht.m9)(e))||e instanceof cd?rS(u,"updateDoc",n._key,e,t,r):nS(u,"updateDoc",n._key,e),My(s,[l.toMutation(n._key,Tn.exists(!0))])}function yM(n,...e){var t,r,s;n=(0,Ht.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||eS(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(eS(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let w,b,S;if(n instanceof qn)b=nn(n.firestore,Wn),S=Gh(n._key.path),w={next:N=>{e[l]&&e[l](cS(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=nn(n,Ni);b=nn(N.firestore,Wn),S=N._query;const V=new df(b);w={next:K=>{e[l]&&e[l](new lf(b,V,N,K))},error:e[l+1],complete:e[l+2]},aM(n._query)}return function(N,V,K,te){const xe=new ob(te),Me=new yT(V,xe,K);return N.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return hT(yield Ay(N),Me)})),()=>{xe.bc(),N.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return pT(yield Ay(N),Me)}))}}(Ar(b),S,m,w)}function My(n,e){return function(t,r){const s=new Vn;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function A1(n,e,t){return IT.apply(this,arguments)}(yield XT(t),r,s)})),s.promise}(Ar(n),e)}function cS(n,e,t){const r=t.docs.get(e._key),s=new df(n);return new ld(n,s,e._key,r,new rg(t.hasPendingWrites,t.fromCache),e.converter)}const HO={maxAttempts:5};class _M{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tg(e)}set(e,t,r){this._verifyNotCommitted();const s=hf(e,this._firestore),u=_b(s.converter,t,r),l=db(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Tn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=hf(e,this._firestore);let l;return l="string"==typeof(t=(0,Ht.m9)(t))||t instanceof cd?rS(this._dataReader,"WriteBatch.update",u._key,t,r,s):nS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hf(e,this._firestore);return this._mutations=this._mutations.concat(new yc(t._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hf(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new Ae(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class GO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tg(e)}get(e){const t=hf(e,this._firestore),r=new NO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Ke();const u=s[0];if(u.isFoundDocument())return new w0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new w0(this._firestore,r,t._key,null,t.converter);throw Ke()})}set(e,t,r){const s=hf(e,this._firestore),u=_b(s.converter,t,r),l=db(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=hf(e,this._firestore);let l;return l="string"==typeof(t=(0,Ht.m9)(t))||t instanceof cd?rS(this._dataReader,"Transaction.update",u._key,t,r,s):nS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=hf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hf(e,this._firestore),r=new df(this._firestore);return super.get(e).then(s=>new ld(this._firestore,r,t._key,s._document,new rg(!1,!1),t.converter))}}function lS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wM(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function EM(){if(!function hC(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ul=cs.SDK_VERSION,(0,cs._registerComponent)(new Ml.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Wn(new xE(t.getProvider("auth-internal")),new oC(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(CE,"3.8.1",n),(0,cs.registerVersion)(CE,"3.8.1","esm2017")}();class D0{constructor(e){this._delegate=e}static fromBase64String(e){return EM(),new D0(Cc.fromBase64String(e))}static fromUint8Array(e){return wM(),new D0(Cc.fromUint8Array(e))}toBase64(){return EM(),this._delegate.toBase64()}toUint8Array(){return wM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dS(n){return function JO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ek{enableIndexedDbPersistence(e,t){return function uO(n,e){Jx(n=nn(n,Wn));const t=Ar(n),r=n._freezeSettings(),s=new HT;return Xx(t,s,new kx(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cO(n){Jx(n=nn(n,Wn));const e=Ar(n),t=n._freezeSettings(),r=new HT;return Xx(e,r,new G1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lO(n){if(n._initialized&&!n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!uo.C())return Promise.resolve();const s=r+"main";yield uo.delete(s)}),function(r){return t.apply(this,arguments)})(h0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function jx(n,e,t,r={}){var s;const u=(n=nn(n,_0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&sc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Br.MOCK_USER;else{l=(0,Ht.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Br(w)}n._authCredentials=new VA(new AE(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function hO(n){return function X1(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield Wx(n),t=yield QT(n);return e.setNetworkEnabled(!0),function(r){const s=$e(r);return s._u.delete(0),m0(s)}(t)}))}(Ar(n=nn(n,Wn)))}(this._delegate)}disableNetwork(){return function fO(n){return function J1(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield Wx(n),t=yield QT(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(s){const u=$e(s);u._u.add(0),yield Ey(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Ar(n=nn(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Px("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dO(n){return function(e){const t=new Vn;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function N1(n,e){return ST.apply(this,arguments)}(yield XT(e),t)})),t.promise}(Ar(n=nn(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function $O(n,e){return function nO(n,e){const t=new ob(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Ay(n),s=t,$e(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Ay(n),s=t,void $e(r).Ru.delete(s);var r,s}))}}(Ar(n=nn(n,Wn)),eS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ry(this,$x(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,sb(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function z1(n,e){if(n=nn(n,_0),GT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ni(n,null,(t=e,new fc(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function zO(n,e,t){n=nn(n,Wn);const r=Object.assign(Object.assign({},HO),t);return function(s){if(s.maxAttempts<1)throw new Ae(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Vn;return s.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const w=yield function Zx(n){return ab(n).then(e=>e.datastore)}(s);new Y1(s.asyncQueue,w,l,u,m).run()})),m.promise}(Ar(n),s=>e(new GO(n,s)),r)}(this._delegate,t=>e(new bM(this,t)))}batch(){return Ar(this._delegate),new DM(new _M(this._delegate,e=>My(this._delegate,e)))}loadBundle(e){return function pO(n,e){const t=Ar(n=nn(n,Wn)),r=new oO;return function rO(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return Gx(w,b);if(w instanceof ArrayBuffer)return Gx(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new q1(w,l);var w}(t,Pe(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function H1(n,e,t){const r=$e(n);var s;(s=(0,pe.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(V,K){const te=$e(V),xe=Gn(K.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Me=>te.Ns.getBundleMetadata(Me,K.id)).then(Me=>!!Me&&Me.createTime.compareTo(xe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=w).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(Dx(w));const b=new I1(w,u.localStore,l.yt);let S=yield l.mc();for(;S;){const V=yield b.Fu(S);V&&m._updateProgress(V),S=yield l.mc()}const N=yield b.complete();return yield ud(u,N.Lu,void 0),yield function(V,K){const te=$e(V);return te.persistence.runTransaction("Save bundle","readwrite",xe=>te.Ns.saveBundleMetadata(xe,K))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return sc("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var V}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield XT(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function gO(n,e){return function iO(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const s=$e(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield ub(n),e)}))}(Ar(n=nn(n,Wn)),e).then(t=>t?new Ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class vb extends uS{constructor(e){super(),this.firestore=e}convertBytes(e){return new D0(new Cc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class bM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vb(e)}get(e){const t=sg(e);return this._delegate.get(t).then(r=>new C0(this._firestore,new ld(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=sg(e);return r?(lS("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=sg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=sg(e);return this._delegate.delete(t),this}}class DM{constructor(e){this._delegate=e}set(e,t,r){const s=sg(e);return r?(lS("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=sg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=sg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ig{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new b0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ig.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new ig(e,new vb(e),t),s.set(t,u)),u}}ig.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new qn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new ta(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ry(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ry(this.firestore,$x(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof qn&&Hx(this._delegate,e)}set(e,t){t=lS("DocumentReference.set",t);try{return t?gM(this._delegate,e,t):gM(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?mM(this._delegate,e):mM(this._delegate,e,t,...r)}catch(s){throw ps(s,"updateDoc()","DocumentReference.update()")}}delete(){return function BO(n){return My(nn(n.firestore,Wn),[new yc(n._key,Tn.none())])}(this._delegate)}onSnapshot(...e){const t=CM(e),r=TM(e,s=>new C0(this.firestore,new ld(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return yM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function PO(n){n=nn(n,qn);const e=nn(n.firestore,Wn),t=Ar(e),r=new df(e);return function eO(n,e){const t=new Vn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,l){try{const m=yield function(w,b){const S=$e(w);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Ae(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Dy(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield ub(n),e,t);var r})),t.promise}(t,n._key).then(s=>new ld(e,r,n._key,s,new rg(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function FO(n){n=nn(n,qn);const e=nn(n.firestore,Wn);return Kx(Ar(e),n._key,{source:"server"}).then(t=>cS(e,n,t))}(this._delegate):function kO(n){n=nn(n,qn);const e=nn(n.firestore,Wn);return Kx(Ar(e),n._key).then(t=>cS(e,n,t))}(this._delegate),t.then(r=>new C0(this.firestore,new ld(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?ig.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function CM(n){for(const e of n)if("object"==typeof e&&!dS(e))return e;return{}}function TM(n,e){var t,r;let s;return s=dS(n[0])?n[0]:dS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class C0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pM(this._delegate,e._delegate)}}class T0 extends C0{data(e){const t=this._delegate.data(e);return function SE(n,e){n||Ke()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vb(e)}where(e,t,r){try{return new gs(this.firestore,cf(this._delegate,function DO(n,e,t){const r=e,s=pb("where",n);return I0._create(s,r,t)}(e,t,r)))}catch(s){throw ps(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,cf(this._delegate,function CO(n,e="asc"){const t=e,r=pb("orderBy",n);return aS._create(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,cf(this._delegate,function TO(n){return Vx("limit",n),gb._create("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,cf(this._delegate,function SO(n){return Vx("limitToLast",n),gb._create("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,cf(this._delegate,function AO(...n){return mb._create("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,cf(this._delegate,function xO(...n){return mb._create("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,cf(this._delegate,function MO(...n){return yb._create("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,cf(this._delegate,function RO(...n){return yb._create("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return zT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function VO(n){n=nn(n,Ni);const e=nn(n.firestore,Wn),t=Ar(e),r=new df(e);return function tO(n,e){const t=new Vn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,l){try{const m=yield g0(s,u,!0),w=new Sx(u,m.Hi),b=w.Wu(m.documents),S=w.applyChanges(b,!1);l.resolve(S.snapshot)}catch(m){const w=Dy(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield ub(n),e,t);var r})),t.promise}(t,n._query).then(s=>new lf(e,r,n,s))}(this._delegate):"server"===e?.source?function UO(n){n=nn(n,Ni);const e=nn(n.firestore,Wn),t=Ar(e),r=new df(e);return Yx(t,n._query,{source:"server"}).then(s=>new lf(e,r,n,s))}(this._delegate):function LO(n){n=nn(n,Ni);const e=nn(n.firestore,Wn),t=Ar(e),r=new df(e);return aM(n._query),Yx(t,n._query).then(s=>new lf(e,r,n,s))}(this._delegate),t.then(r=>new hS(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CM(e),r=TM(e,s=>new hS(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return yM(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?ig.getInstance(this.firestore,e):null))}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new T0(this._firestore,r))})}isEqual(e){return pM(this._delegate,e._delegate)}}class Ry extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?sb(this._delegate):sb(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function jO(n,e){const t=nn(n.firestore,Wn),r=sb(n),s=_b(n.converter,e);return My(t,[db(tg(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return Hx(this._delegate,e._delegate)}withConverter(e){return new Ry(this.firestore,this._delegate.withConverter(e?ig.getInstance(this.firestore,e):null))}}function sg(n){return nn(n,qn)}class fS{constructor(...e){this._delegate=new cd(...e)}static documentId(){return new fS(Hn.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof cd&&this._delegate._internalPath.isEqual(e._internalPath)}}class og{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WO(){return new tS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new og(e)}static delete(){const e=function qO(){return new v0("deleteField")}();return e._methodName="FieldValue.delete",new og(e)}static arrayUnion(...e){const t=function ZO(...n){return new vO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new og(t)}static arrayRemove(...e){const t=function KO(...n){return new wO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new og(t)}static increment(e){const t=function YO(n){return new EO("increment",n)}(e);return t._methodName="FieldValue.increment",new og(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rk={Firestore:IM,GeoPoint:cb,Timestamp:Lt,Blob:D0,Transaction:bM,WriteBatch:DM,DocumentReference:ta,DocumentSnapshot:C0,Query:gs,QueryDocumentSnapshot:T0,QuerySnapshot:hS,CollectionReference:Ry,FieldPath:fS,FieldValue:og,setLogLevel:function tk(n){!function TE(n){eu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function sk(n){(function ik(n,e){n.INTERNAL.registerComponent(new Ml.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},rk)))})(n,(e,t)=>new IM(e,t,new ek)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(Kg.Z);var ok=k(6451),wb=k(5363),ak=k(6063);class uk extends Yn.x{constructor(e=1/0,t=1/0,r=ak.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var ck=k(3099);function SM(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,ck.B)({connector:()=>new uk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function AM(n,e){return(0,Na.m)(e)?jn(()=>n,e):jn(()=>n)}var pS=k(9468);k(259);const mS=new Map,MM={activated:!1,tokenObservers:[]},pk={initialized:!1,enabled:!1};function Oi(n){return mS.get(n)||Object.assign({},MM)}function Ib(){return pk}class wk{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function Ek(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function NM(n){if(!Oi(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function vS(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw ms.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw ms.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw ms.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),wS.apply(this,arguments)}function Ck(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const S0="firebase-app-check-store";let Cb=null;function kM(){return Cb||(Cb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ms.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(S0,{keyPath:"compositeKey"})}}catch(t){e(ms.create("storage-open",{originalErrorMessage:t?.message}))}}),Cb)}function ES(){return ES=(0,pe.Z)(function*(n,e){const r=(yield kM()).transaction(S0,"readwrite"),u=r.objectStore(S0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(ms.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),ES.apply(this,arguments)}const A0=new Ho.Yd("@firebase/app-check");function DS(n,e){return(0,Ht.hl)()?function xk(n,e){return function PM(n,e){return ES.apply(this,arguments)}(function LM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{A0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VM(){return Ib().enabled}function UM(){return TS.apply(this,arguments)}function TS(){return TS=(0,pe.Z)(function*(){const n=Ib();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TS.apply(this,arguments)}const Pk={error:"UNKNOWN_ERROR"};function Fk(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function Tb(n){return SS.apply(this,arguments)}function SS(){return SS=(0,pe.Z)(function*(n,e=!1){const t=n.app;NM(t);const r=Oi(t);let u,s=r.token;if(s&&!Ny(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(Ny(w)?s=w:yield DS(t,void 0))}if(!e&&s&&Ny(s))return{token:s.token};let m,l=!1;if(VM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vS(Ck(t,yield UM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield DS(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Oi(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?A0.warn(w.message):A0.error(w),u=w}return s?u?m=Ny(s)?{token:s.token,internalError:u}:$M(u):(m={token:s.token},r.token=s,yield DS(t,s)):m=$M(u),l&&jM(t,m),m}),SS.apply(this,arguments)}function xS(n,e){const t=Oi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function BM(n){const{app:e}=n,t=Oi(e);let r=t.tokenRefresher;r||(r=function Lk(n){const{app:e}=n;return new wk((0,pe.Z)(function*(){let r;if(r=Oi(e).token?yield Tb(n,!0):yield Tb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Oi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function jM(n,e){const t=Oi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ny(n){return n.expireTimeMillis-Date.now()>0}function $M(n){return{token:Fk(Pk),error:n}}class Vk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Oi(this.app);for(const t of e)xS(this.app,t.next);return Promise.resolve()}}const YM="app-check-internal";!function Xk(){(0,cs._registerComponent)(new Ml.wA("app-check",n=>function Uk(n,e){return new Vk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(YM).initialize()})),(0,cs._registerComponent)(new Ml.wA(YM,n=>function Bk(n){return{getToken:e=>Tb(n,e),addTokenListener:e=>function AS(n,e,t,r){const{app:s}=n,u=Oi(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Ny(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),BM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>BM(n))}(n,"INTERNAL",e),removeTokenListener:e=>xS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,cs.registerVersion)("@firebase/app-check","0.6.1")}();class Ab{constructor(){return(0,gn.vb)("app-check")}}typeof window<"u"&&window;var XM=k(9260);const JM=new h.OlP("angularfire2.auth.use-emulator"),kS=new h.OlP("angularfire2.auth.settings"),eR=new h.OlP("angularfire2.auth.tenant-id"),tR=new h.OlP("angularfire2.auth.langugage-code"),nR=new h.OlP("angularfire2.auth.use-device-language"),rR=new h.OlP("angularfire.auth.persistence"),iR=(n,e,t,r,s,u,l,m)=>(0,Vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[b,S]of Object.entries(l))w.settings[b]=S;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let sR=(()=>{class n{constructor(t,r,s,u,l,m,w,b,S,N,V,K){const te=new Yn.x,xe=Xe(void 0).pipe((0,wb.Q)(l.outsideAngular),jn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,750)))),(0,pt.U)(()=>(0,Vr.on)(t,u,r)),(0,pt.U)(Me=>iR(Me,u,m,b,S,N,w,V)),SM({bufferSize:1,refCount:!1}));if(Lc(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{xe.pipe(Fo()).subscribe();const Ct=xe.pipe(jn(it=>it.getRedirectResult().then(bt=>bt,()=>null)),gn.iC,SM({bufferSize:1,refCount:!1})),At=xe.pipe(jn(it=>new Xn.y(bt=>({unsubscribe:u.runOutsideAngular(()=>it.onAuthStateChanged(Ut=>bt.next(Ut),Ut=>bt.error(Ut),()=>bt.complete()))})))),ut=xe.pipe(jn(it=>new Xn.y(bt=>({unsubscribe:u.runOutsideAngular(()=>it.onIdTokenChanged(Ut=>bt.next(Ut),Ut=>bt.error(Ut),()=>bt.complete()))}))));this.authState=Ct.pipe(AM(At),(0,pS.R)(l.outsideAngular),(0,wb.Q)(l.insideAngular)),this.user=Ct.pipe(AM(ut),(0,pS.R)(l.outsideAngular),(0,wb.Q)(l.insideAngular)),this.idToken=this.user.pipe(jn(it=>it?(0,an.D)(it.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(jn(it=>it?(0,an.D)(it.getIdTokenResult()):Xe(null))),this.credential=(0,ok.T)(Ct,te,this.authState.pipe(Ms(it=>!it))).pipe((0,pt.U)(it=>it?.user?it:null),(0,pS.R)(l.outsideAngular),(0,wb.Q)(l.insideAngular))}return(0,Vr.pX)(this,xe,u,{spy:{apply:(Me,Ct,At)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&At.then(ut=>te.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vr.Dh),h.LFG(Vr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(gn.HU),h.LFG(JM,8),h.LFG(kS,8),h.LFG(eR,8),h.LFG(tR,8),h.LFG(nR,8),h.LFG(rR,8),h.LFG(Ab,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function oR(n,e){return function iP(n,e=ap.z){return new Xn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function PS(n,e){return oR(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function xb(n,e){return PS(n,e).pipe(ul(void 0),up(),(0,pt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(S=>S.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function aR(n,e,t){return xb(n,t).pipe(Hd((r,s)=>function oP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function aP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function cp(n,e=to.y){return n=n??D_,(0,Dn.e)((t,r)=>{let s,u=!0;t.subscribe((0,H.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,pt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function FS(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function uR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=xb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(ul(void 0),up(),Ms(([r,s])=>s.length>0||!r),(0,pt.U)(([r,s])=>s),gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uR(e);return aR(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return PS(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(gn.iC)}add(e){return this.ref.add(e)}doc(e){return new lR(this.ref.doc(e),this.afs)}}class lR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=fR(r,t);return new cR(s,u,this.afs)}snapshotChanges(){return function sP(n,e){return oR(n,e).pipe(ul(void 0),up(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(gn.iC)}}class uP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xb(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ms(t=>t.length>0),gn.iC):xb(this.query,this.afs.schedulers.outsideAngular).pipe(gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uR(e);return aR(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return PS(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),gn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(gn.iC)}}const dR=new h.OlP("angularfire2.enableFirestorePersistence"),hR=new h.OlP("angularfire2.firestore.persistenceSettings"),cP=new h.OlP("angularfire2.firestore.settings"),lP=new h.OlP("angularfire2.firestore.use-emulator");function fR(n,e=(t=>t)){return{query:e(n),ref:n}}let Mb=(()=>{class n{constructor(t,r,s,u,l,m,w,b,S,N,V,K,te,xe,Me,Ct,At){this.schedulers=w;const ut=(0,Vr.on)(t,m,r),it=S;N&&iR(ut,m,V,te,xe,Me,K,Ct),[this.firestore,this.persistenceEnabled$]=(0,Vr.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const bt=m.runOutsideAngular(()=>ut.firestore());if(u&&bt.settings(u),it&&bt.useEmulator(...it),s&&!Lc(l)){const Ut=()=>{try{return(0,an.D)(bt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(lr){return typeof console<"u"&&console.warn(lr),Xe(!1)}};return[bt,m.runOutsideAngular(Ut)]}return[bt,Xe(!1)]},[u,it,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=fR(s,r),m=this.schedulers.ngZone.run(()=>u);return new cR(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new uP(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new lR(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vr.Dh),h.LFG(Vr.xv,8),h.LFG(dR,8),h.LFG(cP,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(gn.HU),h.LFG(hR,8),h.LFG(lP,8),h.LFG(sR,8),h.LFG(JM,8),h.LFG(kS,8),h.LFG(eR,8),h.LFG(tR,8),h.LFG(nR,8),h.LFG(rR,8),h.LFG(Ab,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dP=(()=>{class n{constructor(){XM.Z.registerVersion("angularfire",gn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:dR,useValue:!0},{provide:hR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Mb]}),n})();class x0{constructor(e,t){t.setTitle("Pastaboys")}}x0.\u0275fac=function(e){return new(e||x0)(h.Y36(Mb),h.Y36(ji))},x0.\u0275cmp=h.Xpm({type:x0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&h._UZ(0,"router-outlet")},dependencies:[X0]});class iu{constructor(){this.order=[],this.note=[],this.subject=new Qn([]),this.noteSubject=new Qn([]),this.item=0,this.renderAmount=e=>this.order.findIndex(r=>r.id===e)}sendData(e){this.subject.next(e)}sendNote(e){this.noteSubject.next(e)}getNoteSubject(){return this.noteSubject.asObservable()}getSubject(){return this.subject.asObservable()}setNote(e,t,r){const s=this.note.some(l=>l.id===t),u=this.note.findIndex(l=>l.id===t);!1===s?this.note.push({text:e,id:t,name:r}):this.note[u].text=e,this.sendNote(this.note)}pushOrder(e,t,r,s,u){const l=this.order.some(w=>w.id===t),m=this.order.findIndex(w=>w.id===t);!1===l?this.order.push({price:e,id:t,name:r,amount:1,image:s}):this.order[m].amount=this.order[m].amount+1,this.sendData(this.order)}reduceOrder(e){const t=this.order.findIndex(r=>r.id===e);this.order[t].amount=this.order[t].amount-1,this.order=this.order.filter(r=>r.amount>0),this.sendData(this.order)}}iu.\u0275fac=function(e){return new(e||iu)},iu.\u0275prov=h.Yz7({token:iu,factory:iu.\u0275fac,providedIn:"root"});class ag{constructor(){this.items=[{id:1,name:"Carbonara",price:25e3,resep:"Pasta dengan saus creamy dari campuran susu, keju, dan kocokan telur ini memiliki rasa gurih manis yang pasti anda sukai.",image:"assets/img/carbo.png"},{id:2,name:"Chicken Mushroom",price:2e4,resep:"Chicken Mushroom dengan saus creamy dengan campuran jamur,susu,pake butter dan ayam filet yang sudah diolah ini memiliki rasa gurih yang pasti anda sukai.",image:"assets/img/chicken.png"},{id:3,name:"Yoghurt",price:8e3,resep:"Yogurt yang dibuat dari susu segar dan plain yogurt ini memiliki rasa creamy manis yang pasti anda sukai.",image:"assets/img/yoghurt.jpg"},{id:4,name:"Cookies",price:1e4,resep:"Cookies coklat kesukaan kamu.",image:"assets/img/cook.jpg"}]}getItems(){return this.items}}function hP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,u=h.oxw();return h.KtG(u.pushOrder(s.price,s.id,s.name,s.image))}),h._uU(1," Tambah "),h.qZA()}}function fP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",12)(1,"button",13),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,u=h.oxw();return h.KtG(u.getNote(s.id,s.name))}),h._uU(2," Catatan "),h.qZA(),h.TgZ(3,"div",14)(4,"button",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,u=h.oxw();return h.KtG(u.reduceOrder(s.id))}),h._UZ(5,"img",16),h.qZA(),h.TgZ(6,"div",17),h._uU(7),h.qZA(),h.TgZ(8,"button",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw().$implicit,u=h.oxw();return h.KtG(u.pushOrder(s.price,s.id,s.name,s.image))}),h._UZ(9,"img",18),h.qZA()()()}if(2&n){const t=h.oxw().$implicit,r=h.oxw();h.xp6(7),h.hij(" ",null==r.order[r.renderAmount(t.id)]?null:r.order[r.renderAmount(t.id)].amount," ")}}ag.\u0275fac=function(e){return new(e||ag)},ag.\u0275prov=h.Yz7({token:ag,factory:ag.\u0275fac,providedIn:"root"});const pP=function(n){return["/menu",n]};function gP(n,e){if(1&n&&(h.TgZ(0,"div",2)(1,"div",3)(2,"div",4),h._UZ(3,"img",5),h.TgZ(4,"p",6),h._uU(5),h.qZA(),h.TgZ(6,"p",7),h._uU(7),h.ALo(8,"currency"),h.qZA()(),h.TgZ(9,"div",8),h.YNc(10,hP,2,0,"button",9),h.YNc(11,fP,10,1,"div",10),h.qZA()()()),2&n){const t=e.$implicit,r=h.oxw();h.xp6(2),h.Q6J("routerLink",h.VKq(11,pP,t.id)),h.xp6(1),h.s9C("src",t.image,h.LSH),h.xp6(2),h.Oqu(t.name),h.xp6(2),h.hij(" ",h.gM2(8,6,t.price,"IDR","symbol","3.0")," "),h.xp6(3),h.Q6J("ngIf",(null==r.order[r.renderAmount(t.id)]?null:r.order[r.renderAmount(t.id)].amount)<1),h.xp6(1),h.Q6J("ngIf",(null==r.order[r.renderAmount(t.id)]?null:r.order[r.renderAmount(t.id)].amount)>0)}}class M0{constructor(e,t){this.itemService=e,this.orderItem=t,this.items=this.itemService.getItems(),this.order=[],this.renderAmount=r=>this.orderItem.renderAmount(r),this.subscription=t.getSubject().subscribe(r=>{this.order=r})}getNote(e,t){const r=this.orderItem.note.findIndex(l=>l.id===e);let s=this.orderItem.note[r]?.text,u=prompt("masukan catatan",s);this.orderItem.setNote(u,e,t)}pushOrder(e,t,r,s){this.orderItem.pushOrder(e,t,r,s)}reduceOrder(e){this.orderItem.reduceOrder(e)}}M0.\u0275fac=function(e){return new(e||M0)(h.Y36(ag),h.Y36(iu))},M0.\u0275cmp=h.Xpm({type:M0,selectors:[["app-cards"]],decls:2,vars:1,consts:[[1,"grid","mt-10","gap-4","gap-y-10","grid-cols-2","grid-rows-2"],["class","border-[#C5C5C5] border-[1px] rounded-2xl",4,"ngFor","ngForOf"],[1,"border-[#C5C5C5]","border-[1px]","rounded-2xl"],[1,"flex","flex-col","items-center","p-3"],[1,"cursor-pointer",3,"routerLink"],[1,"rounded-full","h-28","w-28","m-auto","mb-2",3,"src"],[1,"text-xs","font-bold"],[1,"text-xs","font-semibold"],[1,"mt-10","mb-0"],["class","border-[#28A748] border-2 h-5 text-xs text-[#28A748] px-7 rounded-lg",3,"click",4,"ngIf"],["class","flex justify-between items-center gap-1",4,"ngIf"],[1,"border-[#28A748]","border-2","h-5","text-xs","text-[#28A748]","px-7","rounded-lg",3,"click"],[1,"flex","justify-between","items-center","gap-1"],[1,"text-[10px]","border-black","border-[1px]","rounded-full","px-2","shadow-lg",3,"click"],[1,"flex","items-center","justify-center","gap-2","flex-shrink-0"],[1,"",3,"click"],["src","assets/img/min.svg"],[1,"text-xs","w-2","flex","justify-center"],["src","assets/img/plus.svg"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.YNc(1,gP,12,13,"div",1),h.qZA()),2&e&&(h.xp6(1),h.Q6J("ngForOf",t.items))},dependencies:[Ei,yn,qa,vo]});class Oy{constructor(e){this.orderItem=e,this.order=[],this.cont=0,this.amountTotal=()=>this.order.reduce((r,s)=>r+s.amount,0),this.totalAddition=()=>this.order.reduce((r,s)=>r+s.price*s.amount,0),this.subscription=e.getSubject().subscribe(t=>this.order=t)}ngOnChanges(e){}}Oy.\u0275fac=function(e){return new(e||Oy)(h.Y36(iu))},Oy.\u0275cmp=h.Xpm({type:Oy,selectors:[["app-checkout"]],features:[h.TTD],decls:9,vars:7,consts:[["routerLink","/payment",1,"fixed","w-4/5","xl:w-2/5","bottom-1","left-2/4","-translate-x-1/2","px-10","bg-blue-300","rounded-b-full","py-2"],[1,"flex","justify-between"],[1,"font-medium"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"p"),h._uU(4),h.qZA()(),h.TgZ(5,"div")(6,"p",2),h._uU(7),h.ALo(8,"currency"),h.qZA()()()()),2&e&&(h.xp6(4),h.hij("",t.amountTotal()," Item"),h.xp6(3),h.hij(" ",0===t.totalAddition()?"Rp0":h.gM2(8,2,t.totalAddition(),"IDR","symbol","3.0")," "))},dependencies:[qa,vo]});class ug{onKey(e){this.userInfo=e,this.sendData(this.userInfo)}constructor(){this.userInfo={name:"",address:"",number:""},this.subject=new Qn([])}sendData(e){this.subject.next(e)}getSubject(){return this.subject.asObservable()}}function mP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",7)(1,"div",8),h._UZ(2,"img",9),h.TgZ(3,"div",10)(4,"div",11)(5,"div")(6,"h1",4),h._uU(7),h.qZA(),h.TgZ(8,"p",5),h._uU(9),h.ALo(10,"currency"),h.qZA()()(),h.TgZ(11,"button",12),h._uU(12," Catatan "),h.qZA()()(),h.TgZ(13,"div",13)(14,"div",14)(15,"button",15),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.reduceOrder(u.id))}),h._UZ(16,"img",16),h.qZA(),h.TgZ(17,"div",17),h._uU(18),h.qZA(),h.TgZ(19,"button",15),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.addOrder(u.price,u.id,u.name,u.image))}),h._UZ(20,"img",18),h.qZA()()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.s9C("src",t.image,h.LSH),h.xp6(5),h.Oqu(t.name),h.xp6(2),h.hij(" ",h.gM2(10,4,t.price,"IDR","symbol","3.0")," "),h.xp6(9),h.Oqu(t.amount)}}ug.\u0275fac=function(e){return new(e||ug)},ug.\u0275prov=h.Yz7({token:ug,factory:ug.\u0275fac,providedIn:"root"});class R0{constructor(e){this.orderItem=e,this.order=[],this.menu=!1,this.subscription=this.orderItem.getSubject().subscribe(t=>{this.order=t})}addOrder(e,t,r,s){this.orderItem.pushOrder(e,t,r,s)}reduceOrder(e){this.orderItem.reduceOrder(e)}setSwitch(){this.menu=!0,console.log(this.menu)}ngOnInit(){this.order=this.order.filter(e=>e.amount>0)}}R0.\u0275fac=function(e){return new(e||R0)(h.Y36(iu))},R0.\u0275cmp=h.Xpm({type:R0,selectors:[["app-list"]],inputs:{menu:"menu"},decls:12,vars:1,consts:[[1,"bg-[#F5F5F5]","py-2","mt-8","xl:rounded-lg"],["class","flex gap-4 mt-2 mb-3 justify-between items-end lg:w-10/12 m-auto px-7",4,"ngFor","ngForOf"],[1,"w-full","h-[1px]","bg-[#BCBCBC]","bg-opacity-80"],[1,"flex","items-center","justify-between","mt-1","lg:w-10/12","m-auto","px-7"],[1,"font-semibold","text-sm"],[1,"text-xs"],["routerLink","/menu",1,"border-[#28A748]","border-2","h-5","text-xs","text-[#28A748]","px-7","rounded-lg"],[1,"flex","gap-4","mt-2","mb-3","justify-between","items-end","lg:w-10/12","m-auto","px-7"],[1,"flex","gap-4"],["alt","",1,"w-20","h-20","rounded-2xl",3,"src"],[1,"flex","flex-col","gap-7"],[1,"flex","justify-between"],[1,"w-14","text-[10px]","border-black","border-[1px]","rounded-full","px-2","shadow-lg"],[1,"flex","flex-col","gap-14","items-end"],[1,"flex","items-center","justify-center","gap-2","flex-shrink-0"],[1,"",3,"click"],["src","assets/img/min.svg"],[1,"text-xs","w-2","flex","justify-center"],["src","assets/img/plus.svg"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.YNc(1,mP,21,9,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div")(5,"h1",4),h._uU(6,"Ada lagi pesanannya?"),h.qZA(),h.TgZ(7,"p",5),h._uU(8,"Masih bisa nambah menu lain, ya"),h.qZA()(),h.TgZ(9,"div")(10,"button",6),h._uU(11," Tambah "),h.qZA()()()()),2&e&&(h.xp6(1),h.Q6J("ngForOf",t.order))},dependencies:[Ei,qa,vo]});let pR=(()=>{class n{get nativeWindow(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_P=(()=>{class n{constructor(t,r,s){this.element=t,this._window=r,this._zone=s,this.onlyGrow=!1,this.useImportant=!1,this.resized=new h.vpe,this.autosize=!0,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound())}set minRows(t){this._minRows=+t,this.textAreaEl&&(this.textAreaEl.rows=this._minRows)}set _autosize(t){this.autosize="boolean"!=typeof t||t}onInput(t){this.adjust()}ngOnDestroy(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)}ngAfterContentChecked(){this.adjust()}ngOnChanges(t){this.adjust(!0)}_findNestedTextArea(){this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(()=>{this._findNestedTextArea()},100))}_onTextAreaFound(){this._addWindowResizeHandler(),setTimeout(()=>{this.adjust()})}_addWindowResizeHandler(){this._windowResizeHandler=function vP(n,e){let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>{n(...r)},e)}}(()=>{this._zone.run(()=>{this.adjust()})},200),this._zone.runOutsideAngular(()=>{this._window.nativeWindow.addEventListener("resize",this._windowResizeHandler,!1)})}adjust(t=!1){if(this.autosize&&!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){const r=this.textAreaEl.value;if(!1===t&&r===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=r,this._oldWidth=this.textAreaEl.offsetWidth;const s=this.textAreaEl.cloneNode(!0),u=this.textAreaEl.parentNode;s.style.width=this.textAreaEl.offsetWidth+"px",s.style.visibility="hidden",s.style.position="absolute",s.textContent=r,u.appendChild(s),s.style["overflow-y"]="hidden",s.style.height="auto";let l=s.scrollHeight,m=this._window.nativeWindow.getComputedStyle(s,null);l+=parseInt(m.getPropertyValue("border-top-width")),l+=parseInt(m.getPropertyValue("border-bottom-width")),"content-box"===m.getPropertyValue("box-sizing")&&(l-=parseInt(m.getPropertyValue("padding-top")),l-=parseInt(m.getPropertyValue("padding-bottom")));const w=this.textAreaEl.offsetHeight;if(!1===this.onlyGrow||l>w){const S=this._getLineHeight(),N=l/S;if(this._minRows&&this._minRows>=N)l=this._minRows*S;else if(this.maxRows&&this.maxRows<=N){const te=this.maxRows*S;l=this.onlyGrow?Math.max(te,w):te,this.textAreaEl.style["overflow-y"]="auto"}else this.textAreaEl.style["overflow-y"]="hidden";this.textAreaEl.style.setProperty("height",l+"px",this.useImportant?"important":""),this.resized.emit(l)}u.removeChild(s)}}_getLineHeight(){let t=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(t)&&this._window.nativeWindow.getComputedStyle){const r=this._window.nativeWindow.getComputedStyle(this.textAreaEl);t=parseInt(r.lineHeight,10)}if(isNaN(t)){const r=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");t=Math.floor(1.5*parseInt(r.replace("px",""),10))}return t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(pR),h.Y36(h.R0b))},n.\u0275dir=h.lG2({type:n,selectors:[["","autosize",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onInput(u.target)})},inputs:{minRows:"minRows",_autosize:["autosize","_autosize"],maxRows:"maxRows",onlyGrow:"onlyGrow",useImportant:"useImportant"},outputs:{resized:"resized"},features:[h.TTD]}),n})(),wP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[pR],imports:[[]]}),n})(),gR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),cg=(()=>{class n extends gR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Tc=new h.OlP("NgValueAccessor"),bP={provide:Tc,useExisting:(0,h.Gpc)(()=>Rb),multi:!0},CP=new h.OlP("CompositionEventMode");let Rb=(()=>{class n extends gR{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function DP(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(CP,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([bP]),h.qOj]}),n})();function ff(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Yi=new h.OlP("NgValidators"),pf=new h.OlP("NgAsyncValidators");function wR(n){return ff(n.value)?{required:!0}:null}function Nb(n){return null}function TR(n){return null!=n}function SR(n){return(0,h.QGY)(n)?(0,an.D)(n):n}function AR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function xR(n,e){return e.map(t=>t(n))}function MR(n){return n.map(e=>function AP(n){return!n.validate}(e)?e:t=>e.validate(t))}function LS(n){return null!=n?function RR(n){if(!n)return null;const e=n.filter(TR);return 0==e.length?null:function(t){return AR(xR(t,e))}}(MR(n)):null}function VS(n){return null!=n?function NR(n){if(!n)return null;const e=n.filter(TR);return 0==e.length?null:function(t){return function EP(...n){const e=(0,Fn.jO)(n),{args:t,keys:r}=Po(n),s=new Xn.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let S=0;S<l;S++){let N=!1;(0,gr.Xf)(t[S]).subscribe((0,H.x)(u,V=>{N||(N=!0,b--),m[S]=V},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?F(r,m):m),u.complete())}))}});return e?s.pipe(x(e)):s}(xR(t,e).map(SR)).pipe((0,pt.U)(AR))}}(MR(n)):null}function OR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function US(n){return n?Array.isArray(n)?n:[n]:[]}function Ob(n,e){return Array.isArray(n)?n.includes(e):n===e}function FR(n,e){const t=US(e);return US(n).forEach(s=>{Ob(t,s)||t.push(s)}),t}function LR(n,e){return US(e).filter(t=>!Ob(n,t))}class VR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ys extends VR{get formDirective(){return null}get path(){return null}}class gf extends VR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class UR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let BR=(()=>{class n extends UR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gf,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),jR=(()=>{class n extends UR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ys,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const N0="VALID",Pb="INVALID",ky="PENDING",O0="DISABLED";function HS(n){return(Fb(n)?n.validators:n)||null}function GS(n,e){return(Fb(e)?e.asyncValidators:n)||null}function Fb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class zR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===N0}get invalid(){return this.status===Pb}get pending(){return this.status==ky}get disabled(){return this.status===O0}get enabled(){return this.status!==O0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(LR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(LR(e,this._rawAsyncValidators))}hasValidator(e){return Ob(this._rawValidators,e)}hasAsyncValidator(e){return Ob(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ky,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=O0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=N0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===N0||this.status===ky)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?O0:N0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ky,this._hasOwnPendingAsyncValidator=!0;const t=SR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?O0:this.errors?Pb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ky)?ky:this._anyControlsHaveStatus(Pb)?Pb:N0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function PP(n){return Array.isArray(n)?LS(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function FP(n){return Array.isArray(n)?VS(n):n||null}(this._rawAsyncValidators)}}class zS extends zR{constructor(e,t,r){super(HS(t),GS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function GR(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function HR(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const k0=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>qS}),qS="always";function P0(n,e,t=qS){WS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function UP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qR(n,e)})}(n,e),function jP(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function BP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function VP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ub(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WS(n,e){const t=function kR(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(OR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function PR(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(OR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Ub(e._rawValidators,s),Ub(e._rawAsyncValidators,s)}function qR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const qP={provide:ys,useExisting:(0,h.Gpc)(()=>jb)},F0=(()=>Promise.resolve())();let jb=(()=>{class n extends ys{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new zS({},LS(t),VS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){F0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),P0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){F0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){F0.then(()=>{const r=this._findContainer(t.path),s=new zS({});(function WR(n,e){WS(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){F0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){F0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function ZR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Yi,10),h.Y36(pf,10),h.Y36(k0,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([qP]),h.qOj]}),n})();function KR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function YR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const QR=class extends zR{constructor(e=null,t,r){super(HS(t),GS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=YR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){YR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},KP={provide:gf,useExisting:(0,h.Gpc)(()=>QS)},eN=(()=>Promise.resolve())();let QS=(()=>{class n extends gf{constructor(t,r,s,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new QR,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function YS(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Rb?t=u:function GP(n){return Object.getPrototypeOf(n.constructor)===cg}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function KS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){P0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){eN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,h.D6c)(r);eN.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Lb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ys,9),h.Y36(Yi,10),h.Y36(pf,10),h.Y36(Tc,10),h.Y36(h.sBO,8),h.Y36(k0,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([KP]),h.qOj,h.TTD]}),n})(),tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const YP={provide:Tc,useExisting:(0,h.Gpc)(()=>XS),multi:!0};let XS=(()=>{class n extends cg{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([YP]),h.qOj]}),n})(),nN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();let lg=(()=>{class n{constructor(){this._validator=Nb}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Nb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const fF={provide:Yi,useExisting:(0,h.Gpc)(()=>$b),multi:!0};let $b=(()=>{class n extends lg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>wR}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([fF]),h.qOj]}),n})();const mF={provide:Yi,useExisting:(0,h.Gpc)(()=>iA),multi:!0};let iA=(()=>{class n extends lg{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function dN(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function bR(n){return e=>ff(e.value)||!function yR(n){return null!=n&&"number"==typeof n.length}(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[h._Bn([mF]),h.qOj]}),n})(),vF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[nN]}),n})(),EF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:k0,useValue:t.callSetDisabledState??qS}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vF]}),n})();class L0{constructor(e){this.userInput=e,this.userInfo={name:"",address:"",number:""},this.userInput.getSubject().subscribe(t=>{this.userInfo.name=t.name,this.userInfo.address=t.address,this.userInfo.number=t.number})}onKey(){this.userInput.onKey(this.userInfo)}ngOnInit(){}}L0.\u0275fac=function(e){return new(e||L0)(h.Y36(ug))},L0.\u0275cmp=h.Xpm({type:L0,selectors:[["app-input"]],decls:15,vars:4,consts:[[1,"flex","gap-8","bg-[#F5F5F5]","p-5","justify-center","mt-4","xl:rounded-lg"],[1,"flex","flex-col","gap-4"],[1,"text-[#BCBCBC]","text-xs"],["form","ngForm"],["required","","minlength","5","type","text","name","name",1,"focus:outline-none","border","pl-3","text-xs","rounded-3xl","shadow-[0_4px_4px_rgba(0,0,0,0.25),0_4px_4px_rgba(0,0,0,0.3)]",3,"ngModel","keyup","ngModelChange"],["box","ngModel"],["required","","name","number","type","number",1,"focus:outline-none","border","text-xs","pl-3","rounded-3xl","shadow-[0_4px_4px_rgba(0,0,0,0.25),0_4px_4px_rgba(0,0,0,0.3)]",3,"ngModel","ngModelChange","keyup"],["required","","autosize","","type","text","name","address",1,"resize-none","focus:outline-none","border","pl-3","pr-3","text-xs","rounded-3xl","shadow-[0_4px_4px_rgba(0,0,0,0.25),0_4px_4px_rgba(0,0,0,0.3)]",3,"ngModel","minRows","ngModelChange","keyup"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"p",2),h._uU(3,"Nama"),h.qZA(),h.TgZ(4,"p",2),h._uU(5,"Nomor Whatsapp (Wa)"),h.qZA(),h.TgZ(6,"p",2),h._uU(7,"Alamat"),h.qZA()(),h.TgZ(8,"form",null,3)(10,"div",1)(11,"input",4,5),h.NdJ("keyup",function(){return t.onKey()})("ngModelChange",function(s){return t.userInfo.name=s}),h.qZA(),h.TgZ(13,"input",6),h.NdJ("ngModelChange",function(s){return t.userInfo.number=s})("keyup",function(){return t.onKey()}),h.qZA(),h.TgZ(14,"textarea",7),h.NdJ("ngModelChange",function(s){return t.userInfo.address=s})("keyup",function(){return t.onKey()}),h.qZA()()()()),2&e&&(h.xp6(11),h.Q6J("ngModel",t.userInfo.name),h.xp6(2),h.Q6J("ngModel",t.userInfo.number),h.xp6(1),h.Q6J("ngModel",t.userInfo.address)("minRows",1.1))},dependencies:[_P,tN,Rb,XS,BR,jR,$b,iA,QS,jb]});class V0{}V0.\u0275fac=function(e){return new(e||V0)},V0.\u0275cmp=h.Xpm({type:V0,selectors:[["app-head"]],decls:19,vars:0,consts:[[1,"flex","items-center","justify-start","gap-2","ml-6"],["routerLink","/menu","src","assets/img/arrow.svg","alt",""],["src","assets/img/pastaboys.png","alt","",1,"h-10"],[1,"w-full","h-[1px]","bg-[#BCBCBC]"],[1,"max-[360px]:flex-wrap","flex","mt-5","gap-2","ml-4","justify-center"],[1,"flex","items-start","gap-2"],["src","assets/img/clock.svg","alt","",1,"w-9"],[1,"w-44"],[1,"font-semibold","text-sm"],[1,"text-xs","font-medium"],["src","assets/img/location.svg","alt","",1,"w-9"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._UZ(1,"img",1)(2,"img",2),h.qZA(),h._UZ(3,"div",3),h.TgZ(4,"div",4)(5,"div",5),h._UZ(6,"img",6),h.TgZ(7,"div",7)(8,"h2",8),h._uU(9,"Pesan antar"),h.qZA(),h.TgZ(10,"p",9),h._uU(11," Sistem Pre Order hingga hari jumat dan diantar hari sabtu "),h.qZA()()(),h.TgZ(12,"div",5),h._UZ(13,"img",10),h.TgZ(14,"div",7)(15,"h2",8),h._uU(16,"Alamat"),h.qZA(),h.TgZ(17,"p",9),h._uU(18,"Khusus daerah Malang"),h.qZA()()()())},dependencies:[qa]});class U0{constructor(){this.order=[],this.totalAddition=()=>this.order.reduce((t,r)=>t+r.price*r.amount,0)}}U0.\u0275fac=function(e){return new(e||U0)},U0.\u0275cmp=h.Xpm({type:U0,selectors:[["app-ringkasan"]],inputs:{order:"order"},decls:32,vars:12,consts:[[1,"m-10","bg-[#F5F5F5]","rounded-xl"],[1,"p-5"],[1,"font-semibold","text-sm"],[1,"p-2"],[1,"flex","justify-between","mt-2","text-xs"],[1,"w-full","h-[1px]","bg-black","bg-opacity-80"],[1,"p-7"],[1,"text-xs"],[1,"text-xs","px-7","pb-7","pt-2"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),h._uU(3,"Ringkasan pembayaran"),h.qZA(),h.TgZ(4,"div",3)(5,"div",4)(6,"p"),h._uU(7,"Harga"),h.qZA(),h.TgZ(8,"p"),h._uU(9),h.ALo(10,"currency"),h.qZA()(),h.TgZ(11,"div",4)(12,"p"),h._uU(13,"Ongkir"),h.qZA(),h.TgZ(14,"p"),h._uU(15,"Gratis"),h.qZA()(),h.TgZ(16,"div",4)(17,"p"),h._uU(18,"Biaya layanan & lainnya."),h.qZA(),h.TgZ(19,"p"),h._uU(20,"0"),h.qZA()()()(),h._UZ(21,"div",5),h.TgZ(22,"div",6)(23,"div",4)(24,"p",7),h._uU(25,"Total Pembayaran"),h.qZA(),h.TgZ(26,"p"),h._uU(27),h.ALo(28,"currency"),h.qZA()()(),h._UZ(29,"div",5),h.TgZ(30,"p",8),h._uU(31,"Mohon diperiksa kembali*"),h.qZA()()),2&e&&(h.xp6(9),h.hij(" ",0===t.totalAddition()?"Rp0":h.gM2(10,2,t.totalAddition(),"IDR","symbol","3.0")," "),h.xp6(18),h.hij(" ",0===t.totalAddition()?"Rp0":h.gM2(28,7,t.totalAddition(),"IDR","symbol","3.0")," "))},dependencies:[vo]});class Py{constructor(e,t,r,s){this.orderItem=e,this.userInput=t,this.afs=r,this._router=s,this.order=[],this.finalOrder={name:"",number:"",address:"",note:[],order:[]},this.switchView=new h.vpe,this.itemsCollection=this.afs.collection("order"),this.subscription=this.orderItem.getSubject().subscribe(u=>{this.order=u,this.finalOrder.order=u}),this.subscription=this.userInput.getSubject().subscribe(u=>{this.finalOrder.name=u.name,this.finalOrder.address=u.address,this.finalOrder.number=u.number}),this.subscription=this.orderItem.getNoteSubject().subscribe(u=>{this.finalOrder.note=u})}setSwitch(){this.switchView.emit(!0)}confirm(){confirm("Selesaikan pesanan?")&&this.log()}log(){console.log(this.finalOrder);const e=Object.values(this.finalOrder).some(r=>void 0===r||""===r||0===r.length),t=Object.values(this.finalOrder).findIndex(r=>void 0===r||""===r||0===r.length);e?alert("mohon isi semua input :D "+t):(this.itemsCollection.add(this.finalOrder),this._router.navigate(["order"]))}}function IF(n,e){if(1&n&&(h.TgZ(0,"li"),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.hij(" ",t.name," ")}}function bF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",2)(1,"h1",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addItem())}),h._uU(2,"Menu"),h.qZA(),h.TgZ(3,"h2"),h._uU(4,"Choose your delicious meal"),h.qZA(),h.TgZ(5,"ul"),h.YNc(6,IF,2,1,"li",4),h.ALo(7,"async"),h.qZA(),h.TgZ(8,"div",5),h._UZ(9,"app-cards")(10,"app-checkout"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(6),h.Q6J("ngForOf",h.lcZ(7,1,t.items))}}function DF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",6)(1,"app-payment",7),h.NdJ("switchView",function(s){h.CHM(t);const u=h.oxw();return h.KtG(u.switchView(s))}),h.qZA()()}}Py.\u0275fac=function(e){return new(e||Py)(h.Y36(iu),h.Y36(ug),h.Y36(Mb),h.Y36(Zi))},Py.\u0275cmp=h.Xpm({type:Py,selectors:[["app-payment"]],outputs:{switchView:"switchView"},decls:8,vars:1,consts:[[1,"xl:w-2/5","xl:shadow-md","m-auto"],[3,"setSwitchView"],[3,"order"],[1,"flex","justify-center","items-center","mt-8"],[1,"bg-[#E28F42]","mb-2","py-2","px-3","w-72","rounded-3xl","text-lg","text-white","font-semibold","border-white","border-[1px]","drop-shadow-[0_4px_4px_rgba(0,0,0,0.3)]",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._UZ(1,"app-head")(2,"app-input"),h.TgZ(3,"app-list",1),h.NdJ("setSwitchView",function(){return t.setSwitch()}),h.qZA(),h._UZ(4,"app-ringkasan",2),h.TgZ(5,"div",3)(6,"button",4),h.NdJ("click",function(){return t.confirm()}),h._uU(7," Pesan "),h.qZA()()()),2&e&&(h.xp6(4),h.Q6J("order",t.order))},dependencies:[R0,L0,V0,U0]});class B0{addHello(e){this.order=e}switchView(e){this.menu=e}constructor(e,t){this.itemOrder=e,this.afs=t,this.menu=!0,this.current="hello",this.order=[],this.datas=[],this.itemsCollection=t.collection("items"),this.items=this.itemsCollection.valueChanges(),this.deletee=t.doc("items/n9AqpviQGInJPPmaJ1us")}addItem(){this.deletee.delete()}}B0.\u0275fac=function(e){return new(e||B0)(h.Y36(iu),h.Y36(Mb))},B0.\u0275cmp=h.Xpm({type:B0,selectors:[["app-menu"]],decls:2,vars:2,consts:[["class","xl:w-2/5 xl:m-auto ml-9 mr-9 mt-2 h-screen",4,"ngIf"],["class","xl:w-2/5 xl:m-auto mt-5 h-screen",4,"ngIf"],[1,"xl:w-2/5","xl:m-auto","ml-9","mr-9","mt-2","h-screen"],[1,"text-xl","font-semibold",3,"click"],[4,"ngFor","ngForOf"],[1,"flex","flex-col"],[1,"xl:w-2/5","xl:m-auto","mt-5","h-screen"],[3,"switchView"]],template:function(e,t){1&e&&(h.YNc(0,bF,11,3,"div",0),h.YNc(1,DF,2,0,"div",1)),2&e&&(h.Q6J("ngIf",t.menu),h.xp6(1),h.Q6J("ngIf",!1===t.menu))},dependencies:[Ei,yn,M0,Oy,Py,zs]});class j0{}j0.\u0275fac=function(e){return new(e||j0)},j0.\u0275cmp=h.Xpm({type:j0,selectors:[["app-welcome"]],decls:11,vars:0,consts:[[1,"bg-cover","h-screen","relative","top-0","left-0",2,"background-image","url(assets/img/marbel.png)"],["src","assets/img/rect.png",1,"relative","top-0","left-0","h-screen","w-screen"],["src","assets/img/pasta.png",1,"absolute","top-0","left-0","w-screen","lg:h-screen"],[1,"flex","flex-col","gap-12","items-center","absolute","mr-auto","ml-auto","top-44","left-0","right-0"],["src","assets/img/pastaWelcome.png"],[1,"flex","flex-col","items-center"],[1,"text-3xl","text-white","font-bold"],["src","assets/img/pastaboys.png",1,"w-36"],["routerLink","/menu",1,"bg-[#606767]","w-48","h-12","text-white","text-xl","font-bold","rounded-full"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._UZ(1,"img",1)(2,"img",2),h.TgZ(3,"div",3),h._UZ(4,"img",4),h.TgZ(5,"div",5)(6,"p",6),h._uU(7,"Selamat Datang"),h.qZA(),h._UZ(8,"img",7),h.qZA(),h.TgZ(9,"button",8),h._uU(10," Get a meal "),h.qZA()()())},dependencies:[qa]});class $0{}$0.\u0275fac=function(e){return new(e||$0)},$0.\u0275cmp=h.Xpm({type:$0,selectors:[["app-page-not-found"]],decls:2,vars:0,template:function(e,t){1&e&&(h.TgZ(0,"p"),h._uU(1,"page-not-found works!"),h.qZA())}});const vN="firebasestorage.googleapis.com",wN="storageBucket";class cr extends Ht.ZR{constructor(e,t,r=0){super(sA(e),`Firebase Storage: ${t} (${sA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function sA(n){return"storage/"+n}function oA(){return new cr("unknown","An unknown error occurred, please check the error payload for server response.")}function EN(){return new cr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function IN(){return new cr("canceled","User canceled the upload/download.")}function bN(){return new cr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Fy(n){return new cr("invalid-argument",n)}function DN(){return new cr("app-deleted","The Firebase app was deleted.")}function CN(n){return new cr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function H0(n,e){return new cr("invalid-format","String does not match format '"+n+"': "+e)}function G0(n){throw new cr("internal-error","Internal error: "+n)}class Qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Qi.makeFromUrl(e,t)}catch{return new Qi(e,"")}if(""===r.path)return r;throw function PF(n){return new cr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function b(it){it.path_=decodeURIComponent(it.path)}const N=t.replace(/[.]/g,"\\."),ut=[{regex:m,indices:{bucket:1,path:3},postModify:function u(it){"/"===it.path.charAt(it.path.length-1)&&(it.path_=it.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===vN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let it=0;it<ut.length;it++){const bt=ut[it],Ut=bt.regex.exec(e);if(Ut){let au=Ut[bt.indices.path];au||(au=""),r=new Qi(Ut[bt.indices.bucket],au),bt.postModify(r);break}}if(null==r)throw function kF(n){return new cr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class BF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Hb(n){return"string"==typeof n||n instanceof String}function TN(n){return aA()&&n instanceof Blob}function aA(){return typeof Blob<"u"&&!(0,Ht.UG)()}function uA(n,e,t,r){if(r<e)throw Fy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Fy(`Invalid value for '${n}'. Expected ${t} or less.`)}function dd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function SN(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var mf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(mf||(mf={})),mf))();function AN(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class qF{constructor(e,t,r,s,u,l,m,w,b,S,N,V=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=w,this.timeout_=b,this.progressCallback_=S,this.connectionFactory_=N,this.retry=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,te)=>{this.resolve_=K,this.reject_=te,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,l=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function HF(n){return void 0!==n}(w)?u():u(w)}catch(w){l(w)}else if(null!==m){const w=oA();w.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,w):w)}else l(s.canceled?this.appDelete_?DN():IN():EN())};this.canceled_?t(0,new Gb(!1,null,!0)):this.backoffId_=function jF(n,e,t){let r=1,s=null,u=null,l=!1,m=0;function w(){return 2===m}let b=!1;function S(...Me){b||(b=!0,e.apply(null,Me))}function N(Me){s=setTimeout(()=>{s=null,n(K,w())},Me)}function V(){u&&clearTimeout(u)}function K(Me,...Ct){if(b)return void V();if(Me)return V(),void S.call(null,Me,...Ct);if(w()||l)return V(),void S.call(null,Me,...Ct);let ut;r<64&&(r*=2),1===m?(m=2,ut=0):ut=1e3*(r+Math.random()),N(ut)}let te=!1;function xe(Me){te||(te=!0,V(),!b&&(null!==s?(Me||(m=2),clearTimeout(s),N(0)):Me||(m=1)))}return N(0),u=setTimeout(()=>{l=!0,xe(!0)},t),xe}((r,s)=>{if(s)return void r(!1,new Gb(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===mf.NO_ERROR,w=u.getStatus();if(!m||AN(w,this.additionalRetryCodes_)&&this.retry){const S=u.getErrorCode()===mf.ABORT;return void r(!1,new Gb(!1,null,S))}const b=-1!==this.successCodes_.indexOf(w);r(!0,new Gb(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function $F(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Gb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function JF(...n){const e=function XF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(aA())return new Blob(n);throw new cr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cA{constructor(e,t){this.data=e,this.contentType=t||null}}function lA(n,e){switch(n){case fo.RAW:return new cA(xN(e));case fo.BASE64:case fo.BASE64URL:return new cA(MN(n,e));case fo.DATA_URL:return new cA(function rL(n){const e=new RN(n);return e.base64?MN(fo.BASE64,e.rest):function nL(n){let e;try{e=decodeURIComponent(n)}catch{throw H0(fo.DATA_URL,"Malformed data URL.")}return xN(e)}(e.rest)}(e),function iL(n){return new RN(n).contentType}(e))}throw oA()}function xN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function MN(n,e){switch(n){case fo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw H0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw H0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function tL(n){if(typeof atob>"u")throw function UF(n){return new cr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:H0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class RN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw H0(fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function sL(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Sc{constructor(e,t){let r=0,s="";TN(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(TN(this.data_)){const s=function eL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Sc(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Sc(r,!0)}}static getBlob(...e){if(aA()){const t=e.map(r=>r instanceof Sc?r.data_:r);return new Sc(JF.apply(null,t))}{const t=e.map(l=>Hb(l)?lA(fo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)s[u++]=l[m]}),new Sc(s,!0)}}uploadData(){return this.data_}}function dA(n){let e;try{e=JSON.parse(n)}catch{return null}return function zF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function NN(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function uL(n,e){return e}class _s{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||uL}}let zb=null;function z0(){if(zb)return zb;const n=[];n.push(new _s("bucket")),n.push(new _s("generation")),n.push(new _s("metageneration")),n.push(new _s("name","fullPath",!0));const t=new _s("name");t.xform=function e(u,l){return function cL(n){return!Hb(n)||n.length<2?n:NN(n)}(l)},n.push(t);const s=new _s("size");return s.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(s),n.push(new _s("timeCreated")),n.push(new _s("updated")),n.push(new _s("md5Hash",null,!0)),n.push(new _s("cacheControl",null,!0)),n.push(new _s("contentDisposition",null,!0)),n.push(new _s("contentEncoding",null,!0)),n.push(new _s("contentLanguage",null,!0)),n.push(new _s("contentType",null,!0)),n.push(new _s("metadata","customMetadata",!0)),zb=n,zb}function ON(n,e,t){const r=dA(e);return null===r?null:function dL(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function lL(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Qi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function hA(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const kN="prefixes";class Ac{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xc(n){if(!n)throw oA()}function qb(n,e){return function t(r,s){const u=ON(n,s,e);return xc(null!==u),u}}function Ly(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function NF(){return new cr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function RF(){return new cr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function MF(n){return new cr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function OF(n){return new cr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function q0(n){const e=Ly(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function xF(n){return new cr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function FN(n,e,t){const s=dd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Ac(s,"GET",qb(n,t),l);return m.errorHandler=q0(e),m}function yL(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=dd(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,S=new Ac(m,"GET",function gL(n,e){return function t(r,s){const u=function pL(n,e,t){const r=dA(t);return null===r?null:function fL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[kN])for(const s of t[kN]){const u=s.replace(/\/$/,""),l=n._makeStorageReference(new Qi(e,u));r.prefixes.push(l)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new Qi(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return xc(null!==u),u}}(n,e.bucket),b);return S.urlParams=u,S.errorHandler=Ly(e),S}function VN(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function EL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Wb{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function fA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xc(!1)}return xc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const CL={STATE_CHANGED:"state_changed"},vs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pA(n){switch(n){case"running":case"pausing":case"canceling":return vs.RUNNING;case"paused":return vs.PAUSED;case"success":return vs.SUCCESS;case"canceled":return vs.CANCELED;default:return vs.ERROR}}class TL{constructor(e,t,r){if(function GF(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Vy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class SL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw G0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw G0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw G0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw G0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw G0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class AL extends SL{initXhr(){this.xhr_.responseType="text"}}function su(){return new AL}class $N{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=z0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(AN(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=EN()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function IL(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l=VN(e,r,s),m={name:l.fullPath},w=dd(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},N=hA(l,t),te=new Ac(w,"POST",function K(xe){let Me;fA(xe);try{Me=xe.getResponseHeader("X-Goog-Upload-URL")}catch{xc(!1)}return xc(Hb(Me)),Me},n.maxUploadRetryTime);return te.urlParams=m,te.headers=S,te.body=N,te.errorHandler=Ly(e),te}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,su,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function bL(n,e,t,r){const w=new Ac(t,"POST",function u(b){const S=fA(b,["active","final"]);let N=null;try{N=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xc(!1)}N||xc(!1);const V=Number(N);return xc(!isNaN(V)),new Wb(V,r.size(),"final"===S)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=Ly(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,su,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Wb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let l;try{l=function DL(n,e,t,r,s,u,l,m){const w=new Wb(0,0);if(l?(w.current=l.current,w.total=l.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function LF(){return new cr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=w.total-w.current;let S=b;s>0&&(S=Math.min(S,s));const N=w.current;let K="";K=0===S?"finalize":b===S?"upload, finalize":"upload";const te={"X-Goog-Upload-Command":K,"X-Goog-Upload-Offset":`${w.current}`},xe=r.slice(N,N+S);if(null===xe)throw bN();const ut=new Ac(t,"POST",function Me(it,bt){const Ut=fA(it,["active","final"]),lr=w.current+S,au=r.size();let yA;return yA="final"===Ut?qb(e,u)(it,bt):null,new Wb(lr,au,"final"===Ut,yA)},e.maxUploadRetryTime);return ut.headers=te,ut.body=xe.uploadData(),ut.progressCallback=m||null,ut.errorHandler=Ly(n),ut}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(l,su,s,u,!1);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=FN(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,su,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function UN(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let ut="";for(let it=0;it<2;it++)ut+=Math.random().toString().slice(2);return ut}();l["Content-Type"]="multipart/related; boundary="+w;const b=VN(e,r,s),S=hA(b,t),K=Sc.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+w+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===K)throw bN();const te={name:b.fullPath},xe=dd(u,n.host,n._protocol),Ct=n.maxUploadRetryTime,At=new Ac(xe,"POST",qb(n,t),Ct);return At.urlParams=te,At.headers=l,At.body=K.uploadData(),At.errorHandler=Ly(e),At}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,su,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=IN(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=pA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new TL(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(pA(this._state)){case vs.SUCCESS:Vy(this._resolve.bind(null,this.snapshot))();break;case vs.CANCELED:case vs.ERROR:Vy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(pA(this._state)){case vs.RUNNING:case vs.PAUSED:e.next&&Vy(e.next.bind(e,this.snapshot))();break;case vs.SUCCESS:e.complete&&Vy(e.complete.bind(e))();break;default:e.error&&Vy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class dg{constructor(e,t){this._service=e,this._location=t instanceof Qi?t:Qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new dg(e,t)}get root(){const e=new Qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NN(this._location.path)}get storage(){return this._service}get parent(){const e=function oL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Qi(this._location.bucket,e);return new dg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw CN(e)}}function GN(n,e,t){return gA.apply(this,arguments)}function gA(){return gA=(0,pe.Z)(function*(n,e,t){const s=yield zN(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield GN(n,e,s.nextPageToken))}),gA.apply(this,arguments)}function zN(n,e){null!=e&&"number"==typeof e.maxResults&&uA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=yL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,su)}function BL(n){n._throwIfRoot("getDownloadURL");const e=function _L(n,e,t){const s=dd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Ac(s,"GET",function mL(n,e){return function t(r,s){const u=ON(n,s,e);return xc(null!==u),function hL(n,e,t,r){const s=dA(e);if(null===s||!Hb(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(b=>{const N=n.fullPath;return dd("/b/"+l(n.bucket)+"/o/"+l(N),t,r)+SN({alt:"media",token:b})})[0]}(u,s,n.host,n._protocol)}}(n,t),l);return m.errorHandler=q0(e),m}(n.storage,n._location,z0());return n.storage.makeRequestWithTokens(e,su).then(t=>{if(null===t)throw function VF(){return new cr("no-download-url","The given file does not have any download URLs.")}();return t})}function qN(n,e){const t=function aL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Qi(n._location.bucket,t);return new dg(n.storage,r)}function WN(n,e){if(n instanceof mA){const t=n;if(null==t._bucket)throw function FF(){return new cr("no-default-bucket","No default bucket found. Did you set the '"+wN+"' property when initializing the app?")}();const r=new dg(t,t._bucket);return null!=e?WN(r,e):r}return void 0!==e?qN(n,e):n}function GL(n,e){if(e&&function $L(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof mA)return function HL(n,e){return new dg(n,e)}(n,e);throw Fy("To use ref(service, url), the first argument must be a Storage instance.")}return WN(n,e)}function ZN(n,e){const t=e?.[wN];return null==t?null:Qi.makeFromBucketSpec(t,n)}class mA{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=vN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Qi.makeFromBucketSpec(s,this._host):ZN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Qi.makeFromBucketSpec(this._url,e):ZN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dg(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new BF(DN());{const l=function QF(n,e,t,r,s,u,l=!0){const m=SN(n.urlParams),w=n.url+m,b=Object.assign({},n.headers);return function KF(n,e){e&&(n["X-Firebase-GMPID"]=e)}(b,e),function WF(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(b,t),function ZF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(b,u),function YF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(b,r),new qF(w,n.method,b,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const KN="@firebase/storage";function XN(n,e){return GL(n=(0,Ht.m9)(n),e)}function eV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new mA(t,r,s,e,cs.SDK_VERSION)}!function tV(){(0,cs._registerComponent)(new Ml.wA("storage",eV,"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(KN,"0.10.1",""),(0,cs.registerVersion)(KN,"0.10.1","esm2017")}();class Zb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class e1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Zb(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?l=>t(new Zb(l,this,this._ref)):{next:t.next?l=>t.next(new Zb(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class t1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new hd(e,this._service))}get items(){return this._delegate.items.map(e=>new hd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class hd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function JL(n,e){return qN(n,e)}(this._delegate,e);return new hd(t,this.storage)}get root(){return new hd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new hd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new e1(function qL(n,e,t){return function PL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new $N(n,new Sc(e),t)}(n=(0,Ht.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=fo.RAW,r){this._throwIfRoot("putString");const s=lA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new e1(new $N(this._delegate,new Sc(s.data,!0),u),this)}listAll(){return function YL(n){return function LL(n){const e={prefixes:[],items:[]};return GN(n,e).then(()=>e)}(n=(0,Ht.m9)(n))}(this._delegate).then(e=>new t1(e,this.storage))}list(e){return function KL(n,e){return zN(n=(0,Ht.m9)(n),e)}(this._delegate,e||void 0).then(t=>new t1(t,this.storage))}getMetadata(){return function WL(n){return function VL(n){n._throwIfRoot("getMetadata");const e=FN(n.storage,n._location,z0());return n.storage.makeRequestWithTokens(e,su)}(n=(0,Ht.m9)(n))}(this._delegate)}updateMetadata(e){return function ZL(n,e){return function UL(n,e){n._throwIfRoot("updateMetadata");const t=function vL(n,e,t,r){const u=dd(e.fullServerUrl(),n.host,n._protocol),m=hA(t,r),b=n.maxOperationRetryTime,S=new Ac(u,"PATCH",qb(n,r),b);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=m,S.errorHandler=q0(e),S}(n.storage,n._location,e,z0());return n.storage.makeRequestWithTokens(t,su)}(n=(0,Ht.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function QL(n){return BL(n=(0,Ht.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function XL(n){return function jL(n){n._throwIfRoot("deleteObject");const e=function wL(n,e){const r=dd(e.fullServerUrl(),n.host,n._protocol),m=new Ac(r,"DELETE",function l(w,b){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=q0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,su)}(n=(0,Ht.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw CN(e)}}class n1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(r1(e))throw Fy("ref() expected a child path but got a URL, use refFromURL instead.");return new hd(XN(this._delegate,e),this)}refFromURL(e){if(!r1(e))throw Fy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qi.makeFromUrl(e,this._delegate.host)}catch{throw Fy("refFromUrl() expected a valid full URL but got an invalid one.")}return new hd(XN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function JN(n,e,t,r={}){!function zL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Ht.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function r1(n){return/^[A-Za-z]+:\/\//.test(n)}function sV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new n1(t,r)}function i1(n){const e=function aV(n){return new Xn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function CF(n,e=ap.z){return(0,Dn.e)((t,r)=>{let s=null,u=null,l=null;const m=()=>{if(s){s.unsubscribe(),s=null;const b=u;u=null,r.next(b)}};function w(){const b=l+n,S=e.now();if(S<b)return s=this.schedule(void 0,b-S),void r.add(s);m()}t.subscribe((0,H.x)(r,b=>{u=b,l=e.now(),s||(s=e.schedule(w,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Kb(n){return{getDownloadURL:()=>Xe(void 0).pipe(gn.fc,jn(()=>n.getDownloadURL()),gn.iC),getMetadata:()=>Xe(void 0).pipe(gn.fc,jn(()=>n.getMetadata()),gn.iC),delete:()=>(0,an.D)(n.delete()),child:e=>Kb(n.child(e)),updateMetadata:e=>(0,an.D)(n.updateMetadata(e)),put:(e,t)=>i1(n.put(e,t)),putString:(e,t,r)=>i1(n.putString(e,t,r)),list:e=>(0,an.D)(n.list(e)),listAll:()=>(0,an.D)(n.listAll())}}!function oV(n){const e={TaskState:vs,TaskEvent:CL,StringFormat:fo,Storage:n1,Reference:hd};n.INTERNAL.registerComponent(new Ml.wA("storage-compat",sV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.1")}(Kg.Z);const uV=new h.OlP("angularfire2.storageBucket"),cV=new h.OlP("angularfire2.storage.maxUploadRetryTime"),lV=new h.OlP("angularfire2.storage.maxOperationRetryTime"),dV=new h.OlP("angularfire2.storage.use-emulator");let hV=(()=>{class n{constructor(t,r,s,u,l,m,w,b,S,N){const V=(0,Vr.on)(t,l,r);this.storage=(0,Vr.cc)(`${V.name}.storage.${s}`,"AngularFireStorage",V.name,()=>{const K=l.runOutsideAngular(()=>V.storage(s||void 0)),te=S;return te&&K.useEmulator(...te),w&&K.setMaxUploadRetryTime(w),b&&K.setMaxOperationRetryTime(b),K},[w,b])}ref(t){return Kb(this.storage.ref(t))}refFromURL(t){return Kb(this.storage.refFromURL(t))}upload(t,r,s){return Kb(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vr.Dh),h.LFG(Vr.xv,8),h.LFG(uV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(gn.HU),h.LFG(cV,8),h.LFG(lV,8),h.LFG(dV,8),h.LFG(Ab,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),pV=(()=>{class n{constructor(){XM.Z.registerVersion("angularfire",gn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[hV],imports:[fV]}),n})();const ou=void 0,yV=["id",[["AM","PM"],ou,ou],ou,[["M","S","S","R","K","J","S"],["Min","Sen","Sel","Rab","Kam","Jum","Sab"],["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],["Min","Sen","Sel","Rab","Kam","Jum","Sab"]],ou,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]],ou,[["SM","M"],ou,["Sebelum Masehi","Masehi"]],0,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE, dd MMMM y"],["HH.mm","HH.mm.ss","HH.mm.ss z","HH.mm.ss zzzz"],["{1} {0}",ou,ou,ou],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN","."],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"IDR","Rp","Rupiah Indonesia",{AUD:["AU$","$"],BYN:[ou,"\u0440."],IDR:["Rp"],INR:["Rs","\u20b9"],JPY:["JP\xa5","\xa5"],PHP:[ou,"\u20b1"],THB:["\u0e3f"],TWD:["NT$"],USD:["US$","$"],XXX:[]},"ltr",function mV(n){return 5}];class W0{constructor(e,t,r){this.router=e,this.itemService=t,this.orderItem=r,this.id$=this.router.paramMap.pipe((0,pt.U)(s=>s.get("id"))),this.id=0,this.items=[],this.order=[],this.renderAmount=s=>this.orderItem.renderAmount(s),this.subscription=this.orderItem.getSubject().subscribe(s=>{this.order=s})}pushOrder(e,t,r,s){this.orderItem.pushOrder(e,t,r,s)}reduceOrder(e){this.orderItem.reduceOrder(e)}ngOnInit(){this.id$.subscribe(e=>{this.id=Number(e)}),this.items=this.itemService.getItems().filter(e=>e.id===this.id)}}W0.\u0275fac=function(e){return new(e||W0)(h.Y36(ce),h.Y36(ag),h.Y36(iu))},W0.\u0275cmp=h.Xpm({type:W0,selectors:[["app-detail"]],decls:24,vars:10,consts:[[1,"xl:w-2/6","m-auto"],[1,"relative"],[1,"rounded-b-lg","h-80","w-full","max-w-full",3,"src"],["routerLink","/menu","src","assets/img/back.svg","alt","",1,"absolute","bottom-2","left-2","bg-white","px-2","py-1.5","rounded-full"],[1,"flex","justify-between","p-8"],[1,""],[1,"font-medium","text-2xl"],[1,"font-bold","text-2xl"],[1,"flex","items-center","justify-center","gap-2","flex-shrink-0"],[1,"",3,"click"],["src","assets/img/min.svg"],[1,"text-xs","w-2","flex","justify-center"],["src","assets/img/plus.svg"],[1,"p-8"],[1,"text-lg","font-medium"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"img",2)(3,"img",3),h.qZA(),h.TgZ(4,"div",4)(5,"div",5)(6,"h1",6),h._uU(7),h.qZA(),h.TgZ(8,"h2",7),h._uU(9),h.ALo(10,"currency"),h.qZA()(),h.TgZ(11,"div",8)(12,"button",9),h.NdJ("click",function(){return t.reduceOrder(t.id)}),h._UZ(13,"img",10),h.qZA(),h.TgZ(14,"div",11),h._uU(15),h.qZA(),h.TgZ(16,"button",9),h.NdJ("click",function(){return t.pushOrder(t.items[0].price,t.items[0].id,t.items[0].name,t.items[0].image)}),h._UZ(17,"img",12),h.qZA()()(),h.TgZ(18,"div",13)(19,"h1",14),h._uU(20,"Resep"),h.qZA(),h.TgZ(21,"p"),h._uU(22),h.qZA()(),h._UZ(23,"app-checkout"),h.qZA()),2&e&&(h.xp6(2),h.s9C("src",t.items[0].image,h.LSH),h.xp6(5),h.Oqu(t.items[0].name),h.xp6(2),h.hij(" ",h.gM2(10,5,t.items[0].price,"IDR","symbol","3.0")," "),h.xp6(6),h.hij(" ",(null==t.order[t.renderAmount(t.id)]?null:t.order[t.renderAmount(t.id)].amount)<1?"0":null==t.order[t.renderAmount(t.id)]?null:t.order[t.renderAmount(t.id)].amount," "),h.xp6(7),h.Oqu(t.items[0].resep))},dependencies:[qa,Oy,vo]}),function Rn(n,e,t){(0,h.dwT)(n,e,t)}(yV,"id");class Uy{}Uy.\u0275fac=function(e){return new(e||Uy)},Uy.\u0275mod=h.oAB({type:Uy,bootstrap:[x0]}),Uy.\u0275inj=h.cJS({providers:[{provide:h.soG,useValue:"id-ID"},{provide:tt,useClass:we},{provide:kS,useValue:{appVerificationDisabledForTesting:!0}}],imports:[kd,hh,wP,dP,pV,EF,Vr.hO.initializeApp({apiKey:"AIzaSyB01Q_AMKzUa9udcV0N9N96315BgxVmIfc",authDomain:"pastaboysorder.firebaseapp.com",projectId:"pastaboysorder",storageBucket:"pastaboysorder.appspot.com",messagingSenderId:"688589310816",appId:"1:688589310816:web:3e6b47fa89e852f9d52c05",measurementId:"G-XRQD79SDW9"}),op.forRoot([{path:"menu",component:B0},{path:"menu/:id",component:W0},{path:"payment",component:Py},{path:"order",component:j0},{path:"",redirectTo:"/order",pathMatch:"full"},{path:"**",component:$0}])]}),nl().bootstrapModule(Uy).catch(n=>console.error(n))},9751:(st,Ee,k)=>{k.d(Ee,{y:()=>de});var h=k(2961),Q=k(727),O=k(8822),se=k(9635),oe=k(2416),ae=k(576),fe=k(2806);let de=(()=>{class Z{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const He=new Z;return He.source=this,He.operator=Ie,He}subscribe(Ie,He,tt){const he=function $(Z){return Z&&Z instanceof h.Lv||function j(Z){return Z&&(0,ae.m)(Z.next)&&(0,ae.m)(Z.error)&&(0,ae.m)(Z.complete)}(Z)&&(0,Q.Nn)(Z)}(Ie)?Ie:new h.Hp(Ie,He,tt);return(0,fe.x)(()=>{const{operator:be,source:we}=this;he.add(be?be.call(he,we):we?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(He){Ie.error(He)}}forEach(Ie,He){return new(He=le(He))((tt,he)=>{const be=new h.Hp({next:we=>{try{Ie(we)}catch(Fe){he(Fe),be.unsubscribe()}},error:he,complete:tt});this.subscribe(be)})}_subscribe(Ie){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Ie)}[O.L](){return this}pipe(...Ie){return(0,se.U)(Ie)(this)}toPromise(Ie){return new(Ie=le(Ie))((He,tt)=>{let he;this.subscribe(be=>he=be,be=>tt(be),()=>He(he))})}}return Z.create=Ue=>new Z(Ue),Z})();function le(Z){var Ue;return null!==(Ue=Z??oe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(st,Ee,k)=>{k.d(Ee,{x:()=>fe});var h=k(9751),Q=k(727);const se=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=k(8737),ae=k(2806);let fe=(()=>{class le extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Z=new de(this,this);return Z.operator=$,Z}_throwIfClosed(){if(this.closed)throw new se}next($){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next($)}})}error($){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Z}=this;for(;Z.length;)Z.shift().error($)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Z,isStopped:Ue,observers:Ie}=this;return Z||Ue?Q.Lc:(this.currentObservers=null,Ie.push($),new Q.w0(()=>{this.currentObservers=null,(0,oe.P)(Ie,$)}))}_checkFinalizedStatuses($){const{hasError:Z,thrownError:Ue,isStopped:Ie}=this;Z?$.error(Ue):Ie&&$.complete()}asObservable(){const $=new h.y;return $.source=this,$}}return le.create=(j,$)=>new de(j,$),le})();class de extends fe{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Z||Z.call($,j)}error(j){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Z||Z.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,Z;return null!==(Z=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==Z?Z:Q.Lc}}},2961:(st,Ee,k)=>{k.d(Ee,{Hp:()=>tt,Lv:()=>Z});var h=k(576),Q=k(727),O=k(2416),se=k(7849);function oe(){}const ae=le("C",void 0,void 0);function le(Te,_e,Se){return{kind:Te,value:_e,error:Se}}var j=k(3410),$=k(2806);class Z extends Q.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Q.Nn)(_e)&&_e.add(this)):this.destination=Fe}static create(_e,Se,Le){return new tt(_e,Se,Le)}next(_e){this.isStopped?we(function de(Te){return le("N",Te,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?we(function fe(Te){return le("E",void 0,Te)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?we(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Ie(Te,_e){return Ue.call(Te,_e)}class He{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Se}=this;if(Se.next)try{Se.next(_e)}catch(Le){he(Le)}}error(_e){const{partialObserver:Se}=this;if(Se.error)try{Se.error(_e)}catch(Le){he(Le)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Se){he(Se)}}}class tt extends Z{constructor(_e,Se,Le){let Oe;if(super(),(0,h.m)(_e)||!_e)Oe={next:_e??void 0,error:Se??void 0,complete:Le??void 0};else{let U;this&&O.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),Oe={next:_e.next&&Ie(_e.next,U),error:_e.error&&Ie(_e.error,U),complete:_e.complete&&Ie(_e.complete,U)}):Oe=_e}this.destination=new He(Oe)}}function he(Te){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Te):(0,se.h)(Te)}function we(Te,_e){const{onStoppedNotification:Se}=O.v;Se&&j.z.setTimeout(()=>Se(Te,_e))}const Fe={closed:!0,next:oe,error:function be(Te){throw Te},complete:oe}},727:(st,Ee,k)=>{k.d(Ee,{Lc:()=>ae,w0:()=>oe,Nn:()=>fe});var h=k(576);const O=(0,k(3888).d)(le=>function($){le(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Z,Ue)=>`${Ue+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var se=k(8737);class oe{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ie of $)Ie.remove(this);else $.remove(this);const{initialTeardown:Z}=this;if((0,h.m)(Z))try{Z()}catch(Ie){j=Ie instanceof O?Ie.errors:[Ie]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Ie of Ue)try{de(Ie)}catch(He){j=j??[],He instanceof O?j=[...j,...He.errors]:j.push(He)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)de(j);else{if(j instanceof oe){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,se.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,se.P)($,j),j instanceof oe&&j._removeParent(this)}}oe.EMPTY=(()=>{const le=new oe;return le.closed=!0,le})();const ae=oe.EMPTY;function fe(le){return le instanceof oe||le&&"closed"in le&&(0,h.m)(le.remove)&&(0,h.m)(le.add)&&(0,h.m)(le.unsubscribe)}function de(le){(0,h.m)(le)?le():le.unsubscribe()}},2416:(st,Ee,k)=>{k.d(Ee,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,Ee,k)=>{k.d(Ee,{E:()=>Q});const Q=new(k(9751).y)(oe=>oe.complete())},8996:(st,Ee,k)=>{k.d(Ee,{D:()=>_e});var h=k(8421),Q=k(5363),O=k(9468),ae=k(9751),de=k(2202),le=k(576),j=k(9672);function Z(Se,Le){if(!Se)throw new Error("Iterable cannot be null");return new ae.y(Oe=>{(0,j.f)(Oe,Le,()=>{const U=Se[Symbol.asyncIterator]();(0,j.f)(Oe,Le,()=>{U.next().then(ye=>{ye.done?Oe.complete():Oe.next(ye.value)})},0,!0)})})}var Ue=k(3670),Ie=k(8239),He=k(1144),tt=k(6495),he=k(2206),be=k(4532),we=k(3260);function _e(Se,Le){return Le?function Te(Se,Le){if(null!=Se){if((0,Ue.c)(Se))return function se(Se,Le){return(0,h.Xf)(Se).pipe((0,O.R)(Le),(0,Q.Q)(Le))}(Se,Le);if((0,He.z)(Se))return function fe(Se,Le){return new ae.y(Oe=>{let U=0;return Le.schedule(function(){U===Se.length?Oe.complete():(Oe.next(Se[U++]),Oe.closed||this.schedule())})})}(Se,Le);if((0,Ie.t)(Se))return function oe(Se,Le){return(0,h.Xf)(Se).pipe((0,O.R)(Le),(0,Q.Q)(Le))}(Se,Le);if((0,he.D)(Se))return Z(Se,Le);if((0,tt.T)(Se))return function $(Se,Le){return new ae.y(Oe=>{let U;return(0,j.f)(Oe,Le,()=>{U=Se[de.h](),(0,j.f)(Oe,Le,()=>{let ye,q;try{({value:ye,done:q}=U.next())}catch(Y){return void Oe.error(Y)}q?Oe.complete():Oe.next(ye)},0,!0)}),()=>(0,le.m)(U?.return)&&U.return()})}(Se,Le);if((0,we.L)(Se))return function Fe(Se,Le){return Z((0,we.Q)(Se),Le)}(Se,Le)}throw(0,be.z)(Se)}(Se,Le):(0,h.Xf)(Se)}},8421:(st,Ee,k)=>{k.d(Ee,{Xf:()=>Ue});var h=k(655),Q=k(1144),O=k(8239),se=k(9751),oe=k(3670),ae=k(2206),fe=k(4532),de=k(6495),le=k(3260),j=k(576),$=k(7849),Z=k(8822);function Ue(Te){if(Te instanceof se.y)return Te;if(null!=Te){if((0,oe.c)(Te))return function Ie(Te){return new se.y(_e=>{const Se=Te[Z.L]();if((0,j.m)(Se.subscribe))return Se.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,Q.z)(Te))return function He(Te){return new se.y(_e=>{for(let Se=0;Se<Te.length&&!_e.closed;Se++)_e.next(Te[Se]);_e.complete()})}(Te);if((0,O.t)(Te))return function tt(Te){return new se.y(_e=>{Te.then(Se=>{_e.closed||(_e.next(Se),_e.complete())},Se=>_e.error(Se)).then(null,$.h)})}(Te);if((0,ae.D)(Te))return be(Te);if((0,de.T)(Te))return function he(Te){return new se.y(_e=>{for(const Se of Te)if(_e.next(Se),_e.closed)return;_e.complete()})}(Te);if((0,le.L)(Te))return function we(Te){return be((0,le.Q)(Te))}(Te)}throw(0,fe.z)(Te)}function be(Te){return new se.y(_e=>{(function Fe(Te,_e){var Se,Le,Oe,U;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Se=(0,h.KL)(Te);!(Le=yield Se.next()).done;)if(_e.next(Le.value),_e.closed)return}catch(ye){Oe={error:ye}}finally{try{Le&&!Le.done&&(U=Se.return)&&(yield U.call(Se))}finally{if(Oe)throw Oe.error}}_e.complete()})})(Te,_e).catch(Se=>_e.error(Se))})}},6451:(st,Ee,k)=>{k.d(Ee,{T:()=>ae});var h=k(8189),Q=k(8421),O=k(515),se=k(7669),oe=k(8996);function ae(...fe){const de=(0,se.yG)(fe),le=(0,se._6)(fe,1/0),j=fe;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,h.J)(le)((0,oe.D)(j,de)):O.E}},5403:(st,Ee,k)=>{k.d(Ee,{x:()=>Q});var h=k(2961);function Q(se,oe,ae,fe,de){return new O(se,oe,ae,fe,de)}class O extends h.Lv{constructor(oe,ae,fe,de,le,j){super(oe),this.onFinalize=le,this.shouldUnsubscribe=j,this._next=ae?function($){try{ae($)}catch(Z){oe.error(Z)}}:super._next,this._error=de?function($){try{de($)}catch(Z){oe.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch($){oe.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(st,Ee,k)=>{k.d(Ee,{U:()=>O});var h=k(4482),Q=k(5403);function O(se,oe){return(0,h.e)((ae,fe)=>{let de=0;ae.subscribe((0,Q.x)(fe,le=>{fe.next(se.call(oe,le,de++))}))})}},8189:(st,Ee,k)=>{k.d(Ee,{J:()=>O});var h=k(5577),Q=k(4671);function O(se=1/0){return(0,h.z)(Q.y,se)}},5577:(st,Ee,k)=>{k.d(Ee,{z:()=>de});var h=k(4004),Q=k(8421),O=k(4482),se=k(9672),oe=k(5403),fe=k(576);function de(le,j,$=1/0){return(0,fe.m)(j)?de((Z,Ue)=>(0,h.U)((Ie,He)=>j(Z,Ie,Ue,He))((0,Q.Xf)(le(Z,Ue))),$):("number"==typeof j&&($=j),(0,O.e)((Z,Ue)=>function ae(le,j,$,Z,Ue,Ie,He,tt){const he=[];let be=0,we=0,Fe=!1;const Te=()=>{Fe&&!he.length&&!be&&j.complete()},_e=Le=>be<Z?Se(Le):he.push(Le),Se=Le=>{Ie&&j.next(Le),be++;let Oe=!1;(0,Q.Xf)($(Le,we++)).subscribe((0,oe.x)(j,U=>{Ue?.(U),Ie?_e(U):j.next(U)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(be--;he.length&&be<Z;){const U=he.shift();He?(0,se.f)(j,He,()=>Se(U)):Se(U)}Te()}catch(U){j.error(U)}}))};return le.subscribe((0,oe.x)(j,_e,()=>{Fe=!0,Te()})),()=>{tt?.()}}(Z,Ue,le,$)))}},5363:(st,Ee,k)=>{k.d(Ee,{Q:()=>se});var h=k(9672),Q=k(4482),O=k(5403);function se(oe,ae=0){return(0,Q.e)((fe,de)=>{fe.subscribe((0,O.x)(de,le=>(0,h.f)(de,oe,()=>de.next(le),ae),()=>(0,h.f)(de,oe,()=>de.complete(),ae),le=>(0,h.f)(de,oe,()=>de.error(le),ae)))})}},3099:(st,Ee,k)=>{k.d(Ee,{B:()=>oe});var h=k(8421),Q=k(7579),O=k(2961),se=k(4482);function oe(fe={}){const{connector:de=(()=>new Q.x),resetOnError:le=!0,resetOnComplete:j=!0,resetOnRefCountZero:$=!0}=fe;return Z=>{let Ue,Ie,He,tt=0,he=!1,be=!1;const we=()=>{Ie?.unsubscribe(),Ie=void 0},Fe=()=>{we(),Ue=He=void 0,he=be=!1},Te=()=>{const _e=Ue;Fe(),_e?.unsubscribe()};return(0,se.e)((_e,Se)=>{tt++,!be&&!he&&we();const Le=He=He??de();Se.add(()=>{tt--,0===tt&&!be&&!he&&(Ie=ae(Te,$))}),Le.subscribe(Se),!Ue&&tt>0&&(Ue=new O.Hp({next:Oe=>Le.next(Oe),error:Oe=>{be=!0,we(),Ie=ae(Fe,le,Oe),Le.error(Oe)},complete:()=>{he=!0,we(),Ie=ae(Fe,j),Le.complete()}}),(0,h.Xf)(_e).subscribe(Ue))})(Z)}}function ae(fe,de,...le){if(!0===de)return void fe();if(!1===de)return;const j=new O.Hp({next:()=>{j.unsubscribe(),fe()}});return(0,h.Xf)(de(...le)).subscribe(j)}},9468:(st,Ee,k)=>{k.d(Ee,{R:()=>Q});var h=k(4482);function Q(O,se=0){return(0,h.e)((oe,ae)=>{ae.add(O.schedule(()=>oe.subscribe(ae),se))})}},8505:(st,Ee,k)=>{k.d(Ee,{b:()=>oe});var h=k(576),Q=k(4482),O=k(5403),se=k(4671);function oe(ae,fe,de){const le=(0,h.m)(ae)||fe||de?{next:ae,error:fe,complete:de}:ae;return le?(0,Q.e)((j,$)=>{var Z;null===(Z=le.subscribe)||void 0===Z||Z.call(le);let Ue=!0;j.subscribe((0,O.x)($,Ie=>{var He;null===(He=le.next)||void 0===He||He.call(le,Ie),$.next(Ie)},()=>{var Ie;Ue=!1,null===(Ie=le.complete)||void 0===Ie||Ie.call(le),$.complete()},Ie=>{var He;Ue=!1,null===(He=le.error)||void 0===He||He.call(le,Ie),$.error(Ie)},()=>{var Ie,He;Ue&&(null===(Ie=le.unsubscribe)||void 0===Ie||Ie.call(le)),null===(He=le.finalize)||void 0===He||He.call(le)}))}):se.y}},4408:(st,Ee,k)=>{k.d(Ee,{o:()=>oe});var h=k(727);class Q extends h.w0{constructor(fe,de){super()}schedule(fe,de=0){return this}}const O={setInterval(ae,fe,...de){const{delegate:le}=O;return le?.setInterval?le.setInterval(ae,fe,...de):setInterval(ae,fe,...de)},clearInterval(ae){const{delegate:fe}=O;return(fe?.clearInterval||clearInterval)(ae)},delegate:void 0};var se=k(8737);class oe extends Q{constructor(fe,de){super(fe,de),this.scheduler=fe,this.work=de,this.pending=!1}schedule(fe,de=0){var le;if(this.closed)return this;this.state=fe;const j=this.id,$=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId($,j,de)),this.pending=!0,this.delay=de,this.id=null!==(le=this.id)&&void 0!==le?le:this.requestAsyncId($,this.id,de),this}requestAsyncId(fe,de,le=0){return O.setInterval(fe.flush.bind(fe,this),le)}recycleAsyncId(fe,de,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return de;null!=de&&O.clearInterval(de)}execute(fe,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(fe,de);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,de){let j,le=!1;try{this.work(fe)}catch($){le=!0,j=$||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:fe,scheduler:de}=this,{actions:le}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(le,this),null!=fe&&(this.id=this.recycleAsyncId(de,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,Ee,k)=>{k.d(Ee,{v:()=>O});var h=k(6063);class Q{constructor(oe,ae=Q.now){this.schedulerActionCtor=oe,this.now=ae}schedule(oe,ae=0,fe){return new this.schedulerActionCtor(this,oe).schedule(fe,ae)}}Q.now=h.l.now;class O extends Q{constructor(oe,ae=Q.now){super(oe,ae),this.actions=[],this._active=!1}flush(oe){const{actions:ae}=this;if(this._active)return void ae.push(oe);let fe;this._active=!0;do{if(fe=oe.execute(oe.state,oe.delay))break}while(oe=ae.shift());if(this._active=!1,fe){for(;oe=ae.shift();)oe.unsubscribe();throw fe}}}},4986:(st,Ee,k)=>{k.d(Ee,{z:()=>O});var h=k(4408);const O=new(k(7565).v)(h.o)},6063:(st,Ee,k)=>{k.d(Ee,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(st,Ee,k)=>{k.d(Ee,{z:()=>h});const h={setTimeout(Q,O,...se){const{delegate:oe}=h;return oe?.setTimeout?oe.setTimeout(Q,O,...se):setTimeout(Q,O,...se)},clearTimeout(Q){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(st,Ee,k)=>{k.d(Ee,{h:()=>Q});const Q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,Ee,k)=>{k.d(Ee,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,Ee,k)=>{k.d(Ee,{_6:()=>ae,jO:()=>se,yG:()=>oe});var h=k(576);function O(fe){return fe[fe.length-1]}function se(fe){return(0,h.m)(O(fe))?fe.pop():void 0}function oe(fe){return function Q(fe){return fe&&(0,h.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function ae(fe,de){return"number"==typeof O(fe)?fe.pop():de}},8737:(st,Ee,k)=>{function h(Q,O){if(Q){const se=Q.indexOf(O);0<=se&&Q.splice(se,1)}}k.d(Ee,{P:()=>h})},3888:(st,Ee,k)=>{function h(Q){const se=Q(oe=>{Error.call(oe),oe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(Ee,{d:()=>h})},2806:(st,Ee,k)=>{k.d(Ee,{O:()=>se,x:()=>O});var h=k(2416);let Q=null;function O(oe){if(h.v.useDeprecatedSynchronousErrorHandling){const ae=!Q;if(ae&&(Q={errorThrown:!1,error:null}),oe(),ae){const{errorThrown:fe,error:de}=Q;if(Q=null,fe)throw de}}else oe()}function se(oe){h.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=oe)}},9672:(st,Ee,k)=>{function h(Q,O,se,oe=0,ae=!1){const fe=O.schedule(function(){se(),ae?Q.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(Q.add(fe),!ae)return fe}k.d(Ee,{f:()=>h})},4671:(st,Ee,k)=>{function h(Q){return Q}k.d(Ee,{y:()=>h})},1144:(st,Ee,k)=>{k.d(Ee,{z:()=>h});const h=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(st,Ee,k)=>{k.d(Ee,{D:()=>Q});var h=k(576);function Q(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(st,Ee,k)=>{function h(Q){return"function"==typeof Q}k.d(Ee,{m:()=>h})},3670:(st,Ee,k)=>{k.d(Ee,{c:()=>O});var h=k(8822),Q=k(576);function O(se){return(0,Q.m)(se[h.L])}},6495:(st,Ee,k)=>{k.d(Ee,{T:()=>O});var h=k(2202),Q=k(576);function O(se){return(0,Q.m)(se?.[h.h])}},8239:(st,Ee,k)=>{k.d(Ee,{t:()=>Q});var h=k(576);function Q(O){return(0,h.m)(O?.then)}},3260:(st,Ee,k)=>{k.d(Ee,{L:()=>se,Q:()=>O});var h=k(655),Q=k(576);function O(oe){return(0,h.FC)(this,arguments,function*(){const fe=oe.getReader();try{for(;;){const{value:de,done:le}=yield(0,h.qq)(fe.read());if(le)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(de)}}finally{fe.releaseLock()}})}function se(oe){return(0,Q.m)(oe?.getReader)}},4482:(st,Ee,k)=>{k.d(Ee,{A:()=>Q,e:()=>O});var h=k(576);function Q(se){return(0,h.m)(se?.lift)}function O(se){return oe=>{if(Q(oe))return oe.lift(function(ae){try{return se(ae,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(st,Ee,k)=>{k.d(Ee,{U:()=>O,z:()=>Q});var h=k(4671);function Q(...se){return O(se)}function O(se){return 0===se.length?h.y:1===se.length?se[0]:function(ae){return se.reduce((fe,de)=>de(fe),ae)}}},7849:(st,Ee,k)=>{k.d(Ee,{h:()=>O});var h=k(2416),Q=k(3410);function O(se){Q.z.setTimeout(()=>{const{onUnhandledError:oe}=h.v;if(!oe)throw se;oe(se)})}},4532:(st,Ee,k)=>{function h(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ee,{z:()=>h})},655:(st,Ee,k)=>{function se(q,Y){var ie={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&Y.indexOf(ne)<0&&(ie[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(ne=Object.getOwnPropertySymbols(q);Ve<ne.length;Ve++)Y.indexOf(ne[Ve])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Ve])&&(ie[ne[Ve]]=q[ne[Ve]])}return ie}function de(q,Y,ie,ne){return new(ie||(ie=Promise))(function(ke,ot){function en(Bt){try{Rt(ne.next(Bt))}catch(lt){ot(lt)}}function ln(Bt){try{Rt(ne.throw(Bt))}catch(lt){ot(lt)}}function Rt(Bt){Bt.done?ke(Bt.value):function Ve(ke){return ke instanceof ie?ke:new ie(function(ot){ot(ke)})}(Bt.value).then(en,ln)}Rt((ne=ne.apply(q,Y||[])).next())})}function he(q){return this instanceof he?(this.v=q,this):new he(q)}function be(q,Y,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,ne=ie.apply(q,Y||[]),ke=[];return Ve={},ot("next"),ot("throw"),ot("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function ot(Qt){ne[Qt]&&(Ve[Qt]=function(_r){return new Promise(function(xr,ht){ke.push([Qt,_r,xr,ht])>1||en(Qt,_r)})})}function en(Qt,_r){try{!function ln(Qt){Qt.value instanceof he?Promise.resolve(Qt.value.v).then(Rt,Bt):lt(ke[0][2],Qt)}(ne[Qt](_r))}catch(xr){lt(ke[0][3],xr)}}function Rt(Qt){en("next",Qt)}function Bt(Qt){en("throw",Qt)}function lt(Qt,_r){Qt(_r),ke.shift(),ke.length&&en(ke[0][0],ke[0][1])}}function Fe(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,Y=q[Symbol.asyncIterator];return Y?Y.call(q):(q=function Z(q){var Y="function"==typeof Symbol&&Symbol.iterator,ie=Y&&q[Y],ne=0;if(ie)return ie.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(ke){ie[ke]=q[ke]&&function(ot){return new Promise(function(en,ln){!function Ve(ke,ot,en,ln){Promise.resolve(ln).then(function(Rt){ke({value:Rt,done:en})},ot)}(en,ln,(ot=q[ke](ot)).done,ot.value)})}}}k.d(Ee,{FC:()=>be,KL:()=>Fe,_T:()=>se,mG:()=>de,qq:()=>he})},4650:(st,Ee,k)=>{k.d(Ee,{$8M:()=>rl,$WT:()=>Rn,$Z:()=>b_,AFp:()=>kI,ALo:()=>oI,AaK:()=>de,CHM:()=>Bc,CRH:()=>Pv,CZH:()=>ty,CqO:()=>Ep,D6c:()=>af,EJc:()=>Xv,EpF:()=>tE,F4k:()=>W_,FYo:()=>lw,FiY:()=>pt,GfV:()=>p_,Gpc:()=>$,JOm:()=>os,KtG:()=>Td,LFG:()=>je,LSH:()=>Wi,Lbi:()=>LI,Lck:()=>tr,MMx:()=>dc,NdJ:()=>Ll,OlP:()=>on,Oqu:()=>Dm,P3R:()=>ep,PXZ:()=>cy,Q6J:()=>Th,QGY:()=>Fl,Qsj:()=>lD,R0b:()=>fs,RDi:()=>io,Rgc:()=>gc,SBq:()=>ah,Sil:()=>ry,Suo:()=>lo,TTD:()=>da,TgZ:()=>dm,VKq:()=>mi,X6Q:()=>sd,XFs:()=>dt,Xpm:()=>ia,Xts:()=>Dl,Y36:()=>dh,YKP:()=>YE,YNc:()=>lm,Yjl:()=>oa,Yz7:()=>ht,Z0I:()=>Mr,ZZ4:()=>vy,_Bn:()=>KE,_UZ:()=>Ah,_Vd:()=>Yu,_c5:()=>QI,_uU:()=>nv,aQg:()=>wy,c2e:()=>Hr,cJS:()=>ni,cg1:()=>cv,dDg:()=>Ec,dqk:()=>Tt,dwT:()=>AE,eFA:()=>r0,ekj:()=>Ln,eoX:()=>e0,f3M:()=>We,g9A:()=>FI,gM2:()=>Nv,h0i:()=>co,hGG:()=>HC,hij:()=>Ph,iGM:()=>Zh,ifc:()=>qt,ip1:()=>OI,jDz:()=>$r,kL8:()=>xE,lG2:()=>sa,lcZ:()=>pc,lqb:()=>Cl,lri:()=>nf,n5z:()=>kd,oAB:()=>In,oxw:()=>Y_,q4F:()=>dw,qLn:()=>np,qOj:()=>om,qZA:()=>Sh,rWj:()=>wc,s9C:()=>xh,sBO:()=>WI,sIi:()=>_h,s_b:()=>Wm,soG:()=>Jh,tb:()=>Yv,tp0:()=>C,uIk:()=>vh,vHH:()=>he,vpe:()=>Yo,wAp:()=>vt,xp6:()=>Iw,z2F:()=>Yp,zSh:()=>u_,zs3:()=>uh});var h=k(7579),Q=k(727),O=k(9751),se=k(6451),oe=k(3099);function ae(i){for(let o in i)if(i[o]===ae)return o;throw Error("Could not find renamed property on target object.")}function fe(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=ae({__forward_ref__:ae});function $(i){return i.__forward_ref__=$,i.toString=function(){return de(this())},i}function Z(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}function Ie(i){return i&&!!i.\u0275providers}const tt="https://g.co/ng/security#xss";class he extends Error{constructor(o,a){super(function be(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function we(i){return"string"==typeof i?i:null==i?"":String(i)}function Le(i,o){throw new he(-201,!1)}function Bt(i,o){null==i&&function lt(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function ht(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ni(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gr(i){return Rr(i,Nr)||Rr(i,dn)}function Mr(i){return null!==Gr(i)}function Rr(i,o){return i.hasOwnProperty(o)?i[o]:null}function _i(i){return i&&(i.hasOwnProperty(Hs)||i.hasOwnProperty(zr))?i[Hs]:null}const Nr=ae({\u0275prov:ae}),Hs=ae({\u0275inj:ae}),dn=ae({ngInjectableDef:ae}),zr=ae({ngInjectorDef:ae});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Xi;function vn(i){const o=Xi;return Xi=i,o}function Or(i,o,a){const c=Gr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&dt.Optional?null:void 0!==o?o:void Le(de(i))}const Tt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Sn={},wn="__NG_DI_FLAG__",wi="ngTempTokenPath",na=/\n/gm,es="__source";let Zt;function wr(i){const o=Zt;return Zt=i,o}function ki(i,o=dt.Default){if(void 0===Zt)throw new he(-203,!1);return null===Zt?Or(i,void 0,o):Zt.get(i,o&dt.Optional?null:void 0,o)}function je(i,o=dt.Default){return(function vi(){return Xi}()||ki)(Z(i),o)}function We(i,o=dt.Default){return je(i,wt(o))}function wt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Dt(i){const o=[];for(let a=0;a<i.length;a++){const c=Z(i[a]);if(Array.isArray(c)){if(0===c.length)throw new he(900,!1);let d,p=dt.Default;for(let _=0;_<c.length;_++){const E=c[_],I=B(E);"number"==typeof I?-1===I?d=E.token:p|=I:d=E}o.push(je(d,p))}else o.push(je(c))}return o}function kt(i,o){return i[wn]=o,i.prototype[wn]=o,i}function B(i){return i[wn]}function ge(i){return{toString:i}.toString()}var J=(()=>((J=J||{})[J.OnPush=0]="OnPush",J[J.Default=1]="Default",J))(),qt=(()=>{return(i=qt||(qt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",qt;var i})();const En={},gt=[],rr=ae({\u0275cmp:ae}),$t=ae({\u0275dir:ae}),Zn=ae({\u0275pipe:ae}),go=ae({\u0275mod:ae}),Er=ae({\u0275fac:ae}),ra=ae({__NG_ELEMENT_ID__:ae});let yf=0;function ia(i){return ge(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===J.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||gt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qt.Emulated,id:"c"+yf++,styles:i.styles||gt,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=i.dependencies,_=i.features;return d.inputs=Rc(i.inputs,c),d.outputs=Rc(i.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(Mc).filter(fd):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(Mn).filter(fd):null,d})}function Mc(i){return Kt(i)||Kn(i)}function fd(i){return null!==i}function In(i){return ge(()=>({type:i.type,bootstrap:i.bootstrap||gt,declarations:i.declarations||gt,imports:i.imports||gt,exports:i.exports||gt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Rc(i,o){if(null==i)return En;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const sa=ia;function oa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Kt(i){return i[rr]||null}function Kn(i){return i[$t]||null}function Mn(i){return i[Zn]||null}function Rn(i){const o=Kt(i)||Kn(i)||Mn(i);return null!==o&&o.standalone}function Ir(i,o){const a=i[go]||null;if(!a&&!0===o)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function Wr(i){return Array.isArray(i)&&"object"==typeof i[1]}function bi(i){return Array.isArray(i)&&!0===i[1]}function ua(i){return 0!=(4&i.flags)}function Di(i){return i.componentOffset>-1}function Nc(i){return 1==(1&i.flags)}function Zr(i){return null!==i.template}function ca(i){return 0!=(256&i[2])}function Zs(i,o){return i.hasOwnProperty(Er)?i[Er]:null}class bs{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function da(){return Ks}function Ks(i){return i.type.prototype.ngOnChanges&&(i.setInput=hu),du}function du(){const i=ha(this),o=i?.current;if(o){const a=i.previous;if(a===En)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function hu(i,o,a,c){const d=this.declaredInputs[a],p=ha(i)||function fu(i,o){return i[Ys]=o}(i,{previous:En,current:null}),_=p.current||(p.current={}),E=p.previous,I=E[d];_[d]=new bs(I&&I.currentValue,o,E===En),i[c]=o}da.ngInherit=!0;const Ys="__ngSimpleChanges__";function ha(i){return i[Ys]||null}function kn(i){for(;Array.isArray(i);)i=i[0];return i}function Qs(i,o){return kn(o[i])}function hr(i,o){return kn(o[i.index])}function Io(i,o){return i.data[o]}function Ds(i,o){return i[o]}function ir(i,o){const a=o[i];return Wr(a)?a:a[0]}function ga(i){return 64==(64&i[2])}function Vi(i,o){return null==o?null:i[o]}function ma(i){i[18]=0}function ya(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const St={lFrame:By(null),bindingsEnabled:!0};function _u(){return St.bindingsEnabled}function De(){return St.lFrame.lView}function Yt(){return St.lFrame.tView}function Bc(i){return St.lFrame.contextLView=i,i[8]}function Td(i){return St.lFrame.contextLView=null,i}function fr(){let i=bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function bo(){return St.lFrame.currentTNode}function ii(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function wu(){return St.lFrame.isParent}function bn(){const i=St.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function ns(){return St.lFrame.bindingIndex++}function Gc(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ad(o)}function Ad(i){St.lFrame.currentDirectiveIndex=i}function xd(){return St.lFrame.currentQueryIndex}function zc(i){St.lFrame.currentQueryIndex=i}function Md(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Ef(i,o,a){if(a&dt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&dt.Host||(d=Md(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const c=St.lFrame=If();return c.currentTNode=o,c.lView=i,!0}function Eu(i){const o=If(),a=i[1];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function If(){const i=St.lFrame,o=null===i?null:i.child;return null===o?By(i):o}function By(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function pg(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Iu=pg;function gg(){const i=pg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kr(){return St.lFrame.selectedIndex}function va(i){St.lFrame.selectedIndex=i}function pn(){const i=St.lFrame;return Io(i.tView,i.selectedIndex)}function Cs(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function oi(i,o,a){Zc(i,o,3,a)}function bu(i,o,a,c){(3&i[2])===a&&Zc(i,o,a,c)}function Ti(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Zc(i,o,a,c){const p=c??-1,_=o.length-1;let E=0;for(let I=void 0!==c?65535&i[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(Rd(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function Rd(i,o,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class wa{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function _n(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],_=a[c++],E=a[c++];i.setAttribute(o,_,E,p)}else{const p=d,_=a[++c];xo(p)?i.setProperty(o,p,_):i.setAttribute(o,p,_),c++}}return c}function Ao(i){return 3===i||4===i||6===i}function xo(i){return 64===i.charCodeAt(0)}function Ss(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Du(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Du(i,o,a,c,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function Od(i){return-1!==i}function Cu(i){return 32767&i}function Mo(i,o){let a=function Tu(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let rs=!0;function Js(i){const o=rs;return rs=i,o}let Su=0;const Yr={};function Ro(i,o){const a=Au(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,xs(c.data,i),xs(o,null),xs(c.blueprint,null));const d=xu(i,o),p=i.injectorIndex;if(Od(d)){const _=Cu(d),E=Mo(d,o),I=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[_+T]|I[_+T]}return o[p+8]=d,p}function xs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Au(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function xu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Tf(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Jc(i,o,a){!function Xc(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ra)&&(c=a[ra]),null==c&&(c=a[ra]=Su++);const d=255&c;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function No(i,o,a){if(a&dt.Optional||void 0!==i)return i;Le()}function el(i,o,a,c){if(a&dt.Optional&&void 0===c&&(c=null),!(a&(dt.Self|dt.Host))){const d=i[9],p=vn(void 0);try{return d?d.get(o,c,a&dt.Optional):Or(o,c,a&dt.Optional)}finally{vn(p)}}return No(c,0,a)}function tl(i,o,a,c=dt.Default,d){if(null!==i){if(1024&o[2]){const _=function Fd(i,o,a,c,d){let p=i,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=is(p,_,a,c|dt.Self,Yr);if(E!==Yr)return E;let I=p.parent;if(!I){const T=_[21];if(T){const M=T.get(a,Yr,c);if(M!==Yr)return M}I=Tf(_),_=_[15]}p=I}return d}(i,o,a,c,Yr);if(_!==Yr)return _}const p=is(i,o,a,c,Yr);if(p!==Yr)return p}return el(o,a,c,d)}function is(i,o,a,c,d){const p=function Nu(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ra)?i[ra]:void 0;return"number"==typeof o?o>=0?255&o:Cf:o}(a);if("function"==typeof p){if(!Ef(o,i,c))return c&dt.Host?No(d,0,c):el(o,a,c,d);try{const _=p(c);if(null!=_||c&dt.Optional)return _;Le()}finally{Iu()}}else if("number"==typeof p){let _=null,E=Au(i,o),I=-1,T=c&dt.Host?o[16][6]:null;for((-1===E||c&dt.SkipSelf)&&(I=-1===E?xu(i,o):o[E+8],-1!==I&&Ai(c,!1)?(_=o[1],E=Cu(I),o=Mo(I,o)):E=-1);-1!==E;){const M=o[1];if(nl(p,E,M.data)){const P=Ru(E,o,a,_,c,T);if(P!==Yr)return P}I=o[E+8],-1!==I&&Ai(c,o[1].data[E+8]===T)&&nl(p,E,o)?(_=M,E=Cu(I),o=Mo(I,o)):E=-1}}return d}function Ru(i,o,a,c,d,p){const _=o[1],E=_.data[i+8],M=Da(E,_,a,null==c?Di(E)&&rs:c!=_&&0!=(3&E.type),d&dt.Host&&p===E);return null!==M?Si(o,_,M,E):Yr}function Da(i,o,a,c,d){const p=i.providerIndexes,_=o.data,E=1048575&p,I=i.directiveStart,M=p>>20,G=d?E+M:i.directiveEnd;for(let X=c?E:E+M;X<G;X++){const me=_[X];if(X<I&&a===me||X>=I&&me.type===a)return X}if(d){const X=_[I];if(X&&Zr(X)&&X.type===a)return I}return null}function Si(i,o,a,c){let d=i[a];const p=o.data;if(function ai(i){return i instanceof wa}(d)){const _=d;_.resolving&&function Te(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():we(i)}(p[a]));const E=Js(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?vn(_.injectImpl):null;Ef(i,c,dt.Default);try{d=i[a]=_.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Df(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const _=Ks(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==I&&vn(I),Js(E),_.resolving=!1,Iu()}}return d}function nl(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Ai(i,o){return!(i&dt.Self||i&dt.Host&&o)}class ui{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return tl(this._tNode,this._lView,o,wt(c),a)}}function Cf(){return new ui(fr(),De())}function kd(i){return ge(()=>{const o=i.prototype.constructor,a=o[Er]||Pd(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[Er]||Pd(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Pd(i){return Ue(i)?()=>{const o=Pd(Z(i));return o&&o()}:Zs(i)}function Tf(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function rl(i){return function Mu(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(Ao(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(fr(),i)}const Ca="__parameters__";function Oo(i,o,a){return ge(()=>{const c=function Af(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(I,T,M){const P=I.hasOwnProperty(Ca)?I[Ca]:Object.defineProperty(I,Ca,{value:[]})[Ca];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(_),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class on{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ht({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $i(i,o){i.forEach(a=>Array.isArray(a)?$i(a,o):o(a))}function ku(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function xa(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Fn(i,o,a){let c=Yn(i,o);return c>=0?i[1|c]=a:(c=~c,function kf(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Xe(i,o){const a=Yn(i,o);if(a>=0)return i[1|a]}function Yn(i,o){return function Ud(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:c=p+1}return~(d<<a)}(i,o,1)}const pt=kt(Oo("Optional"),8),C=kt(Oo("SkipSelf"),4);var os=(()=>((os=os||{})[os.Important=1]="Important",os[os.DashCase=2]="DashCase",os))();const Bu=new Map;let wg=0;const Lf="__ngContext__";function Dr(i,o){Wr(o)?(i[Lf]=o[20],function Y0(i){Bu.set(i[20],i)}(o)):i[Lf]=o}function jf(i,o){return undefined(i,o)}function us(i){const o=i[3];return bi(o)?o[3]:o}function fl(i){return gl(i[13])}function pl(i){return gl(i[4])}function gl(i){for(;null!==i&&!bi(i);)i=i[4];return i}function Fa(i,o,a,c,d){if(null!=c){let p,_=!1;bi(c)?p=c:Wr(c)&&(_=!0,c=c[0]);const E=kn(c);0===i&&null!==a?null==d?Rs(o,a,E):Va(o,a,E,d||null,!0):1===i&&null!==a?Va(o,a,E,d||null,!0):2===i?function ja(i,o,a){const c=yl(i,o);c&&function Ua(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=p&&function qf(i,o,a,c,d){const p=a[7];p!==kn(a)&&Fa(o,i,c,p,d);for(let E=10;E<a.length;E++){const I=a[E];qu(I[1],I,i,o,c,p)}}(o,i,p,a,d)}}function ml(i,o,a){return i.createElement(o,a)}function La(i,o){const a=i[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,ya(d,-1)),a.splice(c,1)}function $u(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&La(d,c),o>0&&(i[a-1][4]=c[4]);const p=xa(i,10+o);!function Qd(i,o){qu(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Dg(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&qu(i,o,a,3,null,null),function Hf(i){let o=i[13];if(!o)return ro(i[1],i);for(;o;){let a=null;if(Wr(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)Wr(o)&&ro(o[1],o),o=o[3];null===o&&(o=i),Wr(o)&&ro(o[1],o),a=o&&o[4]}o=a}}(o)}}function ro(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Q0(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof wa)){const p=a[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function Xd(i,o){const a=i.cleanup,c=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+3];_>=0?c[d=_]():c[d=-_].unsubscribe(),p+=2}else{const _=c[d=a[p+1]];a[p].call(_)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&bi(o[3])){a!==o[3]&&La(a,o);const c=o[19];null!==c&&c.detachView(i)}!function Lo(i){Bu.delete(i[20])}(o)}}function Cg(i,o,a){return function Tg(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===qt.None||p===qt.Emulated)return null}return hr(c,a)}}(i,o.parent,a)}function Va(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Rs(i,o,a){i.appendChild(o,a)}function Hu(i,o,a,c,d){null!==c?Va(i,o,a,c,d):Rs(i,o,a)}function yl(i,o){return i.parentNode(o)}let Kf,vl,Jd=function Gf(i,o,a){return 40&i.type?hr(i,a):null};function zu(i,o,a,c){const d=Cg(i,c,o),p=o[11],E=function Ba(i,o,a){return Jd(i,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Hu(p,d,a[I],E,!1);else Hu(p,d,a,E,!1)}function Ns(i,o){if(null!==o){const a=o.type;if(3&a)return hr(o,i);if(4&a)return Cr(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Ns(i,c);{const d=i[o.index];return bi(d)?Cr(-1,d):kn(d)}}if(32&a)return jf(o,i)()||kn(i[o.index]);{const c=Ag(i,o);return null!==c?Array.isArray(c)?c[0]:Ns(us(i[16]),c):Ns(i,o.next)}}return null}function Ag(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Cr(i,o){const a=10+i+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Ns(c,d)}return o[7]}function _l(i,o,a,c,d,p,_){for(;null!=a;){const E=c[a.index],I=a.type;if(_&&0===o&&(E&&Dr(kn(E),c),a.flags|=2),32!=(32&a.flags))if(8&I)_l(i,o,a.child,c,d,p,!1),Fa(o,i,d,E,p);else if(32&I){const T=jf(a,c);let M;for(;M=T();)Fa(o,i,d,M,p);Fa(o,i,d,E,p)}else 16&I?xi(i,o,c,a,d,p):Fa(o,i,d,E,p);a=_?a.projectionNext:a.next}}function qu(i,o,a,c,d,p){_l(a,c,i.firstChild,o,d,p,!1)}function xi(i,o,a,c,d,p){const _=a[16],I=_[6].projection[c.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Fa(o,i,d,I[T],p);else _l(i,o,I,_[3],d,p,!0)}function Os(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function th(i,o,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&_n(i,o,c),null!==d&&Os(i,o,d),null!==p&&function eh(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function io(i){Kf=i}function Ng(i){return function wl(){if(void 0===vl&&(vl=null,Tt.trustedTypes))try{vl=Tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return vl}()?.createScriptURL(i)||i}class Qy{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tt})`}}function v(i){return i instanceof Qy?i.changingThisBreaksApplicationSecurity:i}function A(i,o){const a=function R(i){return i instanceof Qy&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${tt})`)}return a===o}const rh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var mr=(()=>((mr=mr||{})[mr.NONE=0]="NONE",mr[mr.HTML=1]="HTML",mr[mr.STYLE=2]="STYLE",mr[mr.SCRIPT=3]="SCRIPT",mr[mr.URL=4]="URL",mr[mr.RESOURCE_URL=5]="RESOURCE_URL",mr))();function Wi(i){const o=jo();return o?o.sanitize(mr.URL,i)||"":A(i,"URL")?v(i):function El(i){return(i=String(i)).match(rh)?i:"unsafe:"+i}(we(i))}function i_(i){const o=jo();if(o)return Ng(o.sanitize(mr.RESOURCE_URL,i)||"");if(A(i,"ResourceURL"))return Ng(v(i));throw new he(904,!1)}function ep(i,o,a){return function tw(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?i_:Wi}(o,a)(i)}function jo(){const i=De();return i&&i[12]}const Dl=new on("ENVIRONMENT_INITIALIZER"),nw=new on("INJECTOR",-1),rw=new on("INJECTOR_DEF_TYPES");class oh{get(o,a=Sn){if(a===Sn){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return a}}function nD(...i){return{\u0275providers:iw(0,i),\u0275fromNgModule:!0}}function iw(i,...o){const a=[],c=new Set;let d;return $i(o,p=>{const _=p;s_(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&sw(d,a),a}function sw(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];o_(d,p=>{o.push(p)})}}function s_(i,o,a,c){if(!(i=Z(i)))return!1;let d=null,p=_i(i);const _=!p&&Kt(i);if(p||_){if(_&&!_.standalone)return!1;d=i}else{const I=i.ngModule;if(p=_i(I),!p)return!1;d=I}const E=c.has(d);if(_){if(E)return!1;if(c.add(d),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of I)s_(T,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;c.add(d);try{$i(p.imports,M=>{s_(M,o,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&sw(T,o)}if(!E){const T=Zs(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:gt},{provide:rw,useValue:d,multi:!0},{provide:Dl,useValue:()=>je(d),multi:!0})}const I=p.providers;null==I||E||o_(I,M=>{o.push(M)})}}return d!==i&&void 0!==i.providers}function o_(i,o){for(let a of i)Ie(a)&&(a=a.\u0275providers),Array.isArray(a)?o_(a,o):o(a)}const bA=ae({provide:String,useValue:ae});function a_(i){return null!==i&&"object"==typeof i&&bA in i}function ks(i){return"function"==typeof i}const u_=new on("Set Injector scope."),Lg={},iD={};let c_;function Vg(){return void 0===c_&&(c_=new oh),c_}class Cl{}class ow extends Cl{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,h_(o,_=>this.processProvider(_)),this.records.set(nw,Tl(void 0,this)),d.has("environment")&&this.records.set(Cl,Tl(void 0,this));const p=this.records.get(u_);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(rw.multi,gt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=wr(this),c=vn(void 0);try{return o()}finally{wr(a),vn(c)}}get(o,a=Sn,c=dt.Default){this.assertNotDestroyed(),c=wt(c);const d=wr(this),p=vn(void 0);try{if(!(c&dt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function oD(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(o)&&Gr(o);E=I&&this.injectableDefInScope(I)?Tl(l_(o),Lg):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&dt.Self?Vg():this.parent).get(o,a=c&dt.Optional&&a===Sn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[wi]=_[wi]||[]).unshift(de(o)),d)throw _;return function L(i,o,a,c){const d=i[wi];throw o[es]&&d.unshift(o[es]),i.message=function W(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=de(o);if(Array.isArray(o))d=o.map(de).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):de(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(na,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[wi]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{vn(p),wr(d)}}resolveInjectorInitializers(){const o=wr(this),a=vn(void 0);try{const c=this.get(Dl.multi,gt,dt.Self);for(const d of c)d()}finally{wr(o),vn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(de(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(o){let a=ks(o=Z(o))?o:Z(o&&o.provide);const c=function sD(i){return a_(i)?Tl(void 0,i.useValue):Tl(Ug(i),Lg)}(o);if(ks(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Tl(void 0,Lg,!0),d.factory=()=>Dt(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Lg&&(a.value=iD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Bg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Z(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function l_(i){const o=Gr(i),a=null!==o?o.factory:Zs(i);if(null!==a)return a;if(i instanceof on)throw new he(204,!1);if(i instanceof Function)return function aw(i){const o=i.length;if(o>0)throw function ko(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new he(204,!1);const a=function po(i){const o=i&&(i[Nr]||i[dn]);if(o){const a=function ws(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new he(204,!1)}function Ug(i,o,a){let c;if(ks(i)){const d=Z(i);return Zs(d)||l_(d)}if(a_(i))c=()=>Z(i.useValue);else if(function tp(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Dt(i.deps||[]));else if(function Fg(i){return!(!i||!i.useExisting)}(i))c=()=>je(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function d_(i){return!!i.deps}(i))return Zs(d)||l_(d);c=()=>new d(...Dt(i.deps))}return c}function Tl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function h_(i,o){for(const a of i)Array.isArray(a)?h_(a,o):a&&Ie(a)?h_(a.\u0275providers,o):o(a)}class aD{}class uw{}class $g{resolveComponentFactory(o){throw function jg(i){const o=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Yu=(()=>{class i{}return i.NULL=new $g,i})();function cw(){return $o(fr(),De())}function $o(i,o){return new ah(hr(i,o))}let ah=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=cw,i})();function cD(i){return i instanceof ah?i.nativeElement:i}class lw{}let lD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function dD(){const i=De(),a=ir(fr().index,i);return(Wr(a)?a:i)[11]}(),i})(),hD=(()=>{class i{}return i.\u0275prov=ht({token:i,providedIn:"root",factory:()=>null}),i})();class p_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const dw=new p_("15.1.0"),g_={};function y_(i){return i.ngOriginalError}class np{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&y_(o);for(;a&&y_(a);)a=y_(a);return a||null}}function za(i){return i instanceof Function?i():i}function Hg(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const yw="ng-template";function _w(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Hg(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Al(i){return 4===i.type&&i.value!==yw}function __(i,o,a){return o===(4!==i.type||a?i.value:yw)}function vD(i,o,a){let c=4;const d=i.attrs||[],p=function ww(i){for(let o=0;o<i.length;o++)if(Ao(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!_)if(4&c){if(c=2|1&c,""!==I&&!__(i,I,a)||""===I&&1===o.length){if(Ps(c))return!1;_=!0}}else{const T=8&c?I:o[++E];if(8&c&&null!==i.attrs){if(!_w(i.attrs,T,a)){if(Ps(c))return!1;_=!0}continue}const P=Gg(8&c?"class":I,d,Al(i),a);if(-1===P){if(Ps(c))return!1;_=!0;continue}if(""!==T){let G;G=P>p?"":d[P+1].toLowerCase();const X=8&c?G:null;if(X&&-1!==Hg(X,T,0)||2&c&&T!==G){if(Ps(c))return!1;_=!0}}}}else{if(!_&&!Ps(c)&&!Ps(I))return!1;if(_&&Ps(I))continue;_=!1,c=I|1&c}}return Ps(c)||_}function Ps(i){return 0==(1&i)}function Gg(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function wD(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function rp(i,o,a=!1){for(let c=0;c<o.length;c++)if(vD(i,o[c],a))return!0;return!1}function Ew(i,o){return i?":not("+o.trim()+")":o}function ID(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Ps(_)&&(o+=Ew(p,d),d=""),c=_,p=p||!Ps(c);a++}return""!==d&&(o+=Ew(p,d)),o}const jt={};function Iw(i){v_(Yt(),De(),Kr()+i,!1)}function v_(i,o,a,c){if(!c)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&oi(o,p,a)}else{const p=i.preOrderHooks;null!==p&&bu(o,p,0,a)}va(a)}function w_(i,o=null,a=null,c){const d=SD(i,o,a,c);return d.resolveInjectorInitializers(),d}function SD(i,o=null,a=null,c,d=new Set){const p=[a||gt,nD(i)];return c=c||("object"==typeof i?void 0:de(i)),new ow(p,o||Vg(),c||null,d)}let uh=(()=>{class i{static create(a,c){if(Array.isArray(a))return w_({name:""},c,a,"");{const d=a.name??"";return w_({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Sn,i.NULL=new oh,i.\u0275prov=ht({token:i,providedIn:"any",factory:()=>je(nw)}),i.__NG_ELEMENT_ID__=-1,i})();function dh(i,o=dt.Default){const a=De();return null===a?je(i,o):tl(fr(),a,Z(i),o)}function b_(){throw new Error("invalid")}function PD(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const _=i.data[p];zc(a[c]),_.contentQueries(2,o[p],p)}}}function ap(i,o,a,c,d,p,_,E,I,T,M){const P=o.blueprint.slice();return P[0]=d,P[2]=76|c,(null!==M||i&&1024&i[2])&&(P[2]|=1024),ma(P),P[3]=P[15]=i,P[8]=a,P[10]=_||i&&i[10],P[11]=E||i&&i[11],P[12]=I||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=p,P[20]=function qd(){return wg++}(),P[21]=M,P[16]=2==o.type?i[16]:P,P}function gn(i,o,a,c,d){let p=i.data[o];if(null===p)p=function up(i,o,a,c,d){const p=bo(),_=wu(),I=i.data[o]=function at(i,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,o,a,c,d),function fg(){return St.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const _=function vu(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ii(p,!0),p}function cp(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function D_(i,o,a){Eu(o);try{const c=i.viewQuery;null!==c&&fp(1,c,a);const d=i.template;null!==d&&LD(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&PD(i,o),i.staticViewQueries&&fp(2,i.viewQuery,a);const p=i.components;null!==p&&function hh(i,o){for(let a=0;a<o.length;a++)Bw(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,gg()}}function Vr(i,o,a,c){const d=o[2];if(128!=(128&d)){Eu(o);try{ma(o),function $c(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&LD(i,o,a,2,c);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&oi(o,T,null)}else{const T=i.preOrderHooks;null!==T&&bu(o,T,0,null),Ti(o,0)}if(function ph(i){for(let o=fl(i);null!==o;o=pl(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c];512&d[2]||ya(d[3],1),d[2]|=512}}}(o),function jD(i){for(let o=fl(i);null!==o;o=pl(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];ga(c)&&Vr(d,c,d.template,c[8])}}(o),null!==i.contentQueries&&PD(i,o),_){const T=i.contentCheckHooks;null!==T&&oi(o,T)}else{const T=i.contentHooks;null!==T&&bu(o,T,1),Ti(o,1)}!function kD(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)va(~d);else{const p=d,_=a[++c],E=a[++c];Gc(_,p),E(2,o[p])}}}finally{va(-1)}}(i,o);const E=i.components;null!==E&&function FD(i,o){for(let a=0;a<o.length;a++)Uw(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&fp(2,I,c),_){const T=i.viewCheckHooks;null!==T&&oi(o,T)}else{const T=i.viewHooks;null!==T&&bu(o,T,2),Ti(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,ya(o[3],-1))}finally{gg()}}}function LD(i,o,a,c,d){const p=Kr(),_=2&c;try{va(-1),_&&o.length>22&&v_(i,o,22,!1),a(c,d)}finally{va(p)}}function Kg(i,o,a){if(ua(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function pe(i,o,a){_u()&&(function ei(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;Di(a)&&function Lw(i,o,a){const c=hr(o,i),d=Ml(a),p=i[10],_=hp(i,ap(i,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=_}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||Ro(a,o),Dr(c,o);const _=a.initialInputs;for(let E=d;E<p;E++){const I=i.data[E],T=Si(o,i,E,a);Dr(T,o),null!==_&&zo(0,E-d,T,I,0,_),Zr(I)&&(ir(a.index,o)[8]=Si(o,i,E,a))}}(i,o,a,hr(a,o)),64==(64&a.flags)&&Wa(i,o,a))}function cs(i,o,a=hr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?a(o,i):i[_];i[d++]=E}}}function Ml(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Ho(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Ho(i,o,a,c,d,p,_,E,I,T){const M=22+c,P=M+d,G=function Ht(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:jt);return a}(M,P),X="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:X,incompleteFirstPass:!1}}function Go(i,o,a,c){const d=$w(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&tm(i).push(c,d.length-1))}function Yg(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?Ot(a,o,d,p):c.hasOwnProperty(d)&&Ot(a,o,c[d],p)}return a}function Ot(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Jr(i,o,a,c,d,p,_,E){const I=hr(o,a);let M,T=o.inputs;!E&&null!=T&&(M=T[c])?(Rl(i,a,M,c,d),Di(o)&&Ow(a,o.index)):3&o.type&&(c=function Xg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,o.value||"",c):d,p.setProperty(I,c,d))}function Ow(i,o){const a=ir(o,i);16&a[2]||(a[2]|=32)}function T_(i,o,a,c){let d=!1;if(_u()){const p=null===c?null:{"":-1},_=function Pw(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const _=a[p];if(rp(o,_.selectors,!1))if(c||(c=[]),Zr(_))if(null!==_.findHostDirectiveDefs){const E=[];d=d||new Map,_.findHostDirectiveDefs(_,E,d),c.unshift(...E,_),lp(i,o,E.length)}else c.unshift(_),lp(i,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(i,a);let E,I;null===_?E=I=null:[E,I]=_,null!==E&&(d=!0,kw(i,o,a,E,p,I)),p&&function Fw(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new he(-301,!1);c.push(o[d],p)}}}(a,c,p)}return a.mergedAttrs=Ss(a.mergedAttrs,a.attrs),d}function kw(i,o,a,c,d,p){for(let T=0;T<c.length;T++)Jc(Ro(a,o),i,c[T].type);!function BD(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const M=c[T];M.providersResolver&&M.providersResolver(M)}let _=!1,E=!1,I=cp(i,o,c.length,null);for(let T=0;T<c.length;T++){const M=c[T];a.mergedAttrs=Ss(a.mergedAttrs,M.hostAttrs),em(i,a,o,I,M),fi(I,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const P=M.type.prototype;!_&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!E&&(P.ngOnChanges||P.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),I++}!function Qg(i,o,a){const d=o.directiveEnd,p=i.data,_=o.attrs,E=[];let I=null,T=null;for(let M=o.directiveStart;M<d;M++){const P=p[M],G=a?a.get(P):null,me=G?G.outputs:null;I=Yg(P.inputs,M,I,G?G.inputs:null),T=Yg(P.outputs,M,T,me);const Pe=null===I||null===_||Al(o)?null:S_(I,M,_);E.push(Pe)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=I,o.outputs=T}(i,a,p)}function Wa(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,_=function _a(){return St.lFrame.currentDirectiveIndex}();try{va(p);for(let E=c;E<d;E++){const I=i.data[E],T=o[E];Ad(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&UD(I,T)}}finally{va(-1),Ad(_)}}function UD(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function lp(i,o,a){o.componentOffset=a,(i.components||(i.components=[])).push(o.index)}function fi(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Zr(o)&&(a[""]=i)}}function em(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=Zs(d.type)),_=new wa(p,Zr(d),dh);i.blueprint[c]=_,a[c]=_,function hi(i,o,a,c,d){const p=d.hostBindings;if(p){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const E=~o.index;(function Jg(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=E&&_.push(E),_.push(a,c,p)}}(i,o,c,cp(i,a,d.hostVars,jt),d)}function Fs(i,o,a,c,d,p){const _=hr(i,o);!function fh(i,o,a,c,d,p,_){if(null==p)i.removeAttribute(o,d,a);else{const E=null==_?we(p):_(p,c||"",d);i.setAttribute(o,d,E,a)}}(o[11],_,p,i.value,a,c,d)}function zo(i,o,a,c,d,p){const _=p[o];if(null!==_){const E=c.setInput;for(let I=0;I<_.length;){const T=_[I++],M=_[I++],P=_[I++];null!==E?c.setInput(a,P,T,M):a[M]=P}}}function S_(i,o,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const _=i[p];for(let E=0;E<_.length;E+=2)if(_[E]===o){c.push(p,_[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Vw(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function Uw(i,o){const a=ir(o,i);if(ga(a)){const c=a[1];48&a[2]?Vr(c,a,c.template,a[8]):a[5]>0&&dp(a)}}function dp(i){for(let c=fl(i);null!==c;c=pl(c))for(let d=10;d<c.length;d++){const p=c[d];if(ga(p))if(512&p[2]){const _=p[1];Vr(_,p,_.template,p[8])}else p[5]>0&&dp(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=ir(a[c],i);ga(d)&&d[5]>0&&dp(d)}}function Bw(i,o){const a=ir(o,i),c=a[1];(function $D(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),D_(c,a,a[8])}function hp(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function gh(i){for(;i;){i[2]|=32;const o=us(i);if(ca(i)&&!o)return i;i=o}return null}function mh(i,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{Vr(i,o,i.template,a)}catch(_){throw c&&Hw(o,_),_}finally{d.end&&d.end()}}function fp(i,o,a){zc(0),o(i,a)}function $w(i){return i[7]||(i[7]=[])}function tm(i){return i.cleanup||(i.cleanup=[])}function Hw(i,o){const a=i[9],c=a?a.get(np,null):null;c&&c.handleError(o)}function Rl(i,o,a,c,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=o[_],T=i.data[_];null!==T.setInput?T.setInput(I,d,c,E):I[E]=d}}function Qu(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=le(d,E):2==p&&(c=le(c,E+": "+o[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function nm(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(kn(p)),bi(p))for(let E=10;E<p.length;E++){const I=p[E],T=I[1].firstChild;null!==T&&nm(I[1],I,T,c)}const _=a.type;if(8&_)nm(i,o,a.child,c);else if(32&_){const E=jf(a,o);let I;for(;I=E();)c.push(I)}else if(16&_){const E=Ag(o,a);if(Array.isArray(E))c.push(...E);else{const I=us(o[16]);nm(I[1],I,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class pp{get rootNodes(){const o=this._lView,a=o[1];return nm(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(bi(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&($u(o,c),xa(a,c))}this._attachedToViewContainer=!1}Dg(this._lView[1],this._lView)}onDestroy(o){Go(this._lView[1],this._lView,null,o)}markForCheck(){gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){mh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $f(i,o){qu(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=o}}class rm extends pp{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;mh(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class im extends Yu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Kt(o);return new Xu(a,this.ngModule)}}function x_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class zw{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=wt(c);const d=this.injector.get(o,g_,c);return d!==g_||a===g_?d:this.parentInjector.get(o,a,c)}}class Xu extends uw{get inputs(){return x_(this.componentDef.inputs)}get outputs(){return x_(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function bD(i){return i.map(ID).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof Cl?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new zw(o,p):o,E=_.get(lw,null);if(null===E)throw new he(407,!1);const I=_.get(hD,null),T=E.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=c?function VD(i,o,a){return i.selectRootElement(o,a===qt.ShadowDom)}(T,c,this.componentDef.encapsulation):ml(T,M,function Gw(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),G=this.componentDef.onPush?288:272,X=Ho(0,null,null,1,0,null,null,null,null,null),me=ap(null,X,null,G,null,null,E,T,I,_,null);let Pe,ze;Eu(me);try{const et=this.componentDef;let It,Re=null;et.findHostDirectiveDefs?(It=[],Re=new Map,et.findHostDirectiveDefs(et,It,Re),It.push(et)):It=[et];const Vt=function R_(i,o){const a=i[1];return i[22]=o,gn(a,22,2,"#host",null)}(me,P),Un=function N_(i,o,a,c,d,p,_,E){const I=d[1];!function Ww(i,o,a,c){for(const d of i)o.mergedAttrs=Ss(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Qu(o,o.mergedAttrs,!0),null!==a&&th(c,a,o))}(c,i,o,_);const T=p.createRenderer(o,a),M=ap(d,Ml(a),null,a.onPush?32:16,d[i.index],i,p,T,E||null,null,null);return I.firstCreatePass&&lp(I,i,c.length-1),hp(d,M),d[i.index]=M}(Vt,P,et,It,me,E,T);ze=Io(X,22),P&&function HD(i,o,a,c){if(c)_n(i,a,["ng-version",dw.full]);else{const{attrs:d,classes:p}=function zg(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!Ps(d))break;d=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&_n(i,a,d),p&&p.length>0&&Os(i,a,p.join(" "))}}(T,et,P,c),void 0!==a&&function Kw(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(ze,this.ngContentSelectors,a),Pe=function Zw(i,o,a,c,d,p){const _=fr(),E=d[1],I=hr(_,d);kw(E,d,_,a,null,c);for(let M=0;M<a.length;M++)Dr(Si(d,E,_.directiveStart+M,_),d);Wa(E,d,_),I&&Dr(I,d);const T=Si(d,E,_.directiveStart+_.componentOffset,_);if(i[8]=d[8]=T,null!==p)for(const M of p)M(T,o);return Kg(E,_,i),T}(Un,et,It,Re,me,[Yw]),D_(X,me,null)}finally{gg()}return new M_(this.componentType,Pe,$o(ze,me),me,ze)}}class M_ extends aD{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new rm(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;Rl(p[1],p,d,o,a),Ow(p,this._tNode.index)}}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Yw(){const i=fr();Cs(De()[1],i)}function om(i){let o=function sm(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(Zr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new he(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const _=i;_.inputs=gp(i.inputs),_.declaredInputs=gp(i.declaredInputs),_.outputs=gp(i.outputs);const E=d.hostBindings;E&&Ur(i,E);const I=d.viewQuery,T=d.contentQueries;if(I&&O_(i,I),T&&k_(i,T),fe(i.inputs,d.inputs),fe(i.declaredInputs,d.declaredInputs),fe(i.outputs,d.outputs),Zr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===om&&(a=!1)}}o=Object.getPrototypeOf(o)}!function GD(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Ss(d.hostAttrs,a=Ss(a,d.hostAttrs))}}(c)}function gp(i){return i===En?{}:i===gt?[]:i}function O_(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function k_(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function Ur(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let yh=null;function Nl(){if(!yh){const i=Tt.Symbol;if(i&&i.iterator)yh=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(yh=c)}}}return yh}function _h(i){return!!mp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Nl()in i)}function mp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function so(i,o,a){return i[o]=a}function yr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Ju(i,o,a,c){const d=yr(i,o,a);return yr(i,o+1,c)||d}function vh(i,o,a,c){const d=De();return yr(d,ns(),o)&&(Yt(),Fs(pn(),d,i,o,a,c)),vh}function Eh(i,o,a,c){return yr(i,ns(),a)?o+we(a)+c:jt}function lm(i,o,a,c,d,p,_,E){const I=De(),T=Yt(),M=i+22,P=T.firstCreatePass?function wp(i,o,a,c,d,p,_,E,I){const T=o.consts,M=gn(o,i,4,_||null,Vi(T,E));T_(o,a,M,Vi(T,I)),Cs(o,M);const P=M.tViews=Ho(2,M,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),P.queries=o.queries.embeddedTView(M)),M}(M,T,I,o,a,c,d,p,_):T.data[M];ii(P,!1);const G=I[11].createComment("");zu(T,I,G,P),Dr(G,I),hp(I,I[M]=Vw(G,I,G,P)),Nc(P)&&pe(T,I,P),null!=_&&cs(I,P,E)}function Th(i,o,a){const c=De();return yr(c,ns(),o)&&Jr(Yt(),pn(),c,i,o,c[11],a,!1),Th}function Pl(i,o,a,c,d){const _=d?"class":"style";Rl(i,a,o.inputs[_],_,c)}function dm(i,o,a,c){const d=De(),p=Yt(),_=22+i,E=d[11],I=d[_]=ml(E,o,function mg(){return St.lFrame.currentNamespace}()),T=p.firstCreatePass?function eE(i,o,a,c,d,p,_){const E=o.consts,T=gn(o,i,2,d,Vi(E,p));return T_(o,a,T,Vi(E,_)),null!==T.attrs&&Qu(T,T.attrs,!1),null!==T.mergedAttrs&&Qu(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,d,0,o,a,c):p.data[_];return ii(T,!0),th(E,I,T),32!=(32&T.flags)&&zu(p,d,I,T),0===function yu(){return St.lFrame.elementDepthCount}()&&Dr(I,d),function Uc(){St.lFrame.elementDepthCount++}(),Nc(T)&&(pe(p,d,T),Kg(p,T,d)),null!==c&&cs(d,T),dm}function Sh(){let i=fr();wu()?function Do(){St.lFrame.isParent=!1}():(i=i.parent,ii(i,!1));const o=i;!function Dd(){St.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(Cs(a,i),ua(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Yc(i){return 0!=(8&i.flags)}(o)&&Pl(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Nd(i){return 0!=(16&i.flags)}(o)&&Pl(a,o,De(),o.stylesWithoutHost,!1),Sh}function Ah(i,o,a,c){return dm(i,o,a,c),Sh(),Ah}function tE(){return De()}function Fl(i){return!!i&&"function"==typeof i.then}function W_(i){return!!i&&"function"==typeof i.subscribe}const Ep=W_;function Ll(i,o,a,c){const d=De(),p=Yt(),_=fr();return function nE(i,o,a,c,d,p,_){const E=Nc(c),T=i.firstCreatePass&&tm(i),M=o[8],P=$w(o);let G=!0;if(3&c.type||_){const Pe=hr(c,o),ze=_?_(Pe):Pe,et=P.length,It=_?Vt=>_(kn(Vt[c.index])):c.index;let Re=null;if(!_&&E&&(Re=function Z_(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===c){const E=o[7],I=d[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,c.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=p,Re.__ngLastListenerFn__=p,G=!1;else{p=K_(c,o,M,p,!1);const Vt=a.listen(ze,d,p);P.push(p,Vt),T&&T.push(d,It,et,et+1)}}else p=K_(c,o,M,p,!1);const X=c.outputs;let me;if(G&&null!==X&&(me=X[d])){const Pe=me.length;if(Pe)for(let ze=0;ze<Pe;ze+=2){const Un=o[me[ze]][me[ze+1]].subscribe(p),zn=P.length;P.push(p,Un),T&&T.push(d,c.index,zn,-(zn+1))}}}(p,d,d[11],_,i,o,c),Ll}function rE(i,o,a,c){try{return!1!==a(c)}catch(d){return Hw(i,d),!1}}function K_(i,o,a,c,d){return function p(_){if(_===Function)return c;gh(i.componentOffset>-1?ir(i.index,o):o);let I=rE(o,0,c,_),T=p.__ngNextListenerFn__;for(;T;)I=rE(o,0,T,_)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Y_(i=1){return function jy(i){return(St.lFrame.contextLView=function qc(i,o){for(;i>0;)o=o[15],i--;return o}(i,St.lFrame.contextLView))[8]}(i)}function xh(i,o,a){return Mh(i,"",o,"",a),xh}function Mh(i,o,a,c,d){const p=De(),_=Eh(p,o,a,c);return _!==jt&&Jr(Yt(),pn(),p,i,_,p[11],d,!1),Mh}function pm(i,o){return i<<17|o<<2}function tc(i){return i>>17&32767}function qo(i){return 2|i}function nc(i){return(131068&i)>>2}function gm(i,o){return-131069&i|o<<2}function rc(i){return 1|i}function J_(i,o,a,c,d){const p=i[a+1],_=null===o;let E=c?tc(p):nc(p),I=!1;for(;0!==E&&(!1===I||_);){const M=i[E+1];uE(i[E],o)&&(I=!0,i[E+1]=c?rc(M):qo(M)),E=c?tc(M):nc(M)}I&&(i[a+1]=c?qo(p):rc(p))}function uE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Yn(i,o)>=0}function Ln(i,o){return function Vs(i,o,a,c){const d=De(),p=Yt(),_=function si(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function Cp(i,o,a,c){const d=i.data;if(null===d[a+1]){const p=d[Kr()],_=function ev(i,o){return o>=i.expandoStartIndex}(i,a);(function kh(i,o){return 0!=(i.flags&(o?8:16))})(p,c)&&null===o&&!_&&(o=!1),o=function gE(i,o,a,c){const d=function Xs(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Ja(a=Tp(null,i,o,a,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Tp(d,i,o,a,c),null===p){let I=function Xa(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==nc(c))return i[tc(c)]}(i,o,c);void 0!==I&&Array.isArray(I)&&(I=Tp(null,i,o,I[1],c),I=Ja(I,o.attrs,c),function mE(i,o,a,c){i[tc(a?o.classBindings:o.styleBindings)]=c}(i,o,c,I))}else p=function yE(i,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Ja(c,i[p].hostAttrs,a);return Ja(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function aE(i,o,a,c,d,p){let _=p?o.classBindings:o.styleBindings,E=tc(_),I=nc(_);i[c]=a;let M,T=!1;if(Array.isArray(a)?(M=a[1],(null===M||Yn(a,M)>0)&&(T=!0)):M=a,d)if(0!==I){const G=tc(i[E+1]);i[c+1]=pm(G,E),0!==G&&(i[G+1]=gm(i[G+1],c)),i[E+1]=function bp(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=pm(E,0),0!==E&&(i[E+1]=gm(i[E+1],c)),E=c;else i[c+1]=pm(I,0),0===E?E=c:i[I+1]=gm(i[I+1],c),I=c;T&&(i[c+1]=qo(i[c+1])),J_(i,M,c,!0),J_(i,M,c,!1),function YD(i,o,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Yn(p,o)>=0&&(a[c+1]=rc(a[c+1]))}(o,M,i,c,p),_=pm(E,I),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,c)}}(p,i,_,c),o!==jt&&yr(d,_,o)&&function tv(i,o,a,c,d,p,_,E){if(!(3&o.type))return;const I=i.data,T=I[E+1],M=function oE(i){return 1==(1&i)}(T)?Sp(I,o,a,d,nc(T),_):void 0;bm(M)||(bm(p)||function KD(i){return 2==(2&i)}(T)&&(p=Sp(I,null,a,d,E,_)),function Bo(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:os.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=os.Important),i.setStyle(a,c,d,p))}}(c,_,Qs(Kr(),a),d,p))}(p,p.data[Kr()],d,d[11],i,d[_+1]=function vE(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=de(v(i)))),i}(o,a),c,_)}(i,o,null,!0),Ln}function Tp(i,o,a,c,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],c=Ja(c,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Ja(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Fn(i,_,!!a||o[++p]))}return void 0===i?null:i}function Sp(i,o,a,c,d,p){const _=null===o;let E;for(;d>0;){const I=i[d],T=Array.isArray(I),M=T?I[1]:I,P=null===M;let G=a[d+1];G===jt&&(G=P?gt:void 0);let X=P?Xe(G,c):M===c?G:void 0;if(T&&!bm(X)&&(X=Xe(I,c)),bm(X)&&(E=X,_))return E;const me=i[d+1];d=_?tc(me):nc(me)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=Xe(I,c))}return E}function bm(i){return void 0!==i}function nv(i,o=""){const a=De(),c=Yt(),d=i+22,p=c.firstCreatePass?gn(c,d,1,o,null):c.data[d],_=a[d]=function Yd(i,o){return i.createText(o)}(a[11],o);zu(c,a,_,p),ii(p,!1)}function Dm(i){return Ph("",i,""),Dm}function Ph(i,o,a){const c=De(),d=Eh(c,i,o,a);return d!==jt&&function Za(i,o,a){const c=Qs(o,i);!function Ig(i,o,a){i.setValue(o,a)}(i[11],c,a)}(c,Kr(),d),Ph}const $e=void 0;var Ae=["en",[["a","p"],["AM","PM"],$e],[["AM","PM"],$e,$e],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$e,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$e,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$e,"{1} 'at' {0}",$e],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ue(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Vn={};function AE(i,o,a){"string"!=typeof o&&(a=o,o=i[vt.LocaleId]),o=o.toLowerCase().replace(/_/g,"-"),Vn[o]=i,a&&(Vn[o][vt.ExtraData]=a)}function cv(i){const o=function oC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ME(o);if(a)return a;const c=o.split("-")[0];if(a=ME(c),a)return a;if("en"===c)return Ae;throw new he(701,!1)}function xE(i){return cv(i)[vt.PluralCase]}function ME(i){return i in Vn||(Vn[i]=Tt.ng&&Tt.ng.common&&Tt.ng.common.locales&&Tt.ng.common.locales[i]),Vn[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Bl="en-US";let Lh=Bl;function Vm(i,o,a,c,d){if(i=Z(i),Array.isArray(i))for(let p=0;p<i.length;p++)Vm(i[p],o,a,c,d);else{const p=Yt(),_=De();let E=ks(i)?i:Z(i.provide),I=Ug(i);const T=fr(),M=1048575&T.providerIndexes,P=T.directiveStart,G=T.providerIndexes>>20;if(ks(i)||!i.multi){const X=new wa(I,d,dh),me=Ev(E,o,d?M:M+G,P);-1===me?(Jc(Ro(T,_),p,E),wv(p,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(X),_.push(X)):(a[me]=X,_[me]=X)}else{const X=Ev(E,o,M+G,P),me=Ev(E,o,M,M+G),ze=me>=0&&a[me];if(d&&!ze||!d&&!(X>=0&&a[X])){Jc(Ro(T,_),p,E);const et=function mC(i,o,a,c,d){const p=new wa(i,a,dh);return p.multi=[],p.index=o,p.componentProviders=0,WE(p,d,c&&!a),p}(d?gC:ZE,a.length,d,c,I);!d&&ze&&(a[me].providerFactory=et),wv(p,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(et),_.push(et)}else wv(p,i,X>-1?X:me,WE(a[d?me:X],I,!d&&c));!d&&c&&ze&&a[me].componentProviders++}}}function wv(i,o,a,c){const d=ks(o),p=function rD(i){return!!i.useClass}(o);if(d||p){const I=(p?Z(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,I]):T[M+1].push(c,I)}else T.push(a,I)}}}function WE(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Ev(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function ZE(i,o,a,c){return Um(this.multi,[])}function gC(i,o,a,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Si(a,a[1],this.providerFactory.index,c);p=E.slice(0,_),Um(d,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],Um(d,p);return p}function Um(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function KE(i,o=[]){return a=>{a.providersResolver=(c,d)=>function qE(i,o,a){const c=Yt();if(c.firstCreatePass){const d=Zr(i);Vm(a,c.data,c.blueprint,d,!0),Vm(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class co{}class YE{}function tr(i,o){return new jr(i,o??null)}class jr extends co{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new im(this);const c=Ir(o);this._bootstrapComponents=za(c.bootstrap),this._r3Injector=SD(o,a,[{provide:co,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class cn extends YE{constructor(o){super(),this.moduleType=o}create(o){return new jr(this.moduleType,o)}}class QE extends co{constructor(o,a,c){super(),this.componentFactoryResolver=new im(this),this.instance=null;const d=new ow([...o,{provide:co,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],a||Vg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function dc(i,o,a=null){return new QE(i,o,a).injector}let Ki=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=iw(0,a.type),d=c.length>0?dc([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=ht({token:i,providedIn:"environment",factory:()=>new i(je(Cl))}),i})();function $r(i){i.getStandaloneInjector=o=>o.get(Ki).getOrCreateStandaloneInjector(i)}function mi(i,o,a,c){return xv(De(),bn(),i,o,a,c)}function Vp(i,o){const a=i[o];return a===jt?void 0:a}function xv(i,o,a,c,d,p){const _=o+a;return yr(i,_,d)?so(i,_+1,p?c.call(p,d):c(d)):Vp(i,_+1)}function Up(i,o,a,c,d,p,_,E,I){const T=o+a;return function ls(i,o,a,c,d,p){const _=Ju(i,o,a,c);return Ju(i,o+2,d,p)||_}(i,T,d,p,_,E)?so(i,T+4,I?c.call(I,d,p,_,E):c(d,p,_,E)):Vp(i,T+4)}function oI(i,o){const a=Yt();let c;const d=i+22;a.firstCreatePass?(c=function aI(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=Zs(c.type)),_=vn(dh);try{const E=Js(!1),I=p();return Js(E),function H_(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,De(),d,I),I}finally{vn(_)}}function pc(i,o,a){const c=i+22,d=De(),p=Ds(d,c);return qh(d,c)?xv(d,bn(),o,p.transform,a,p):p.transform(a)}function Nv(i,o,a,c,d,p){const _=i+22,E=De(),I=Ds(E,_);return qh(E,_)?Up(E,bn(),o,I.transform,a,c,d,p,I):I.transform(a,c,d,p)}function qh(i,o){return i[1].data[o].pure}function Ql(i){return o=>{setTimeout(i,void 0,o)}}const Yo=class cI extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),_=c;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),p=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(p=Ql(p),d&&(d=Ql(d)),_&&(_=Ql(_)));const E=super.subscribe({next:d,error:p,complete:_});return o instanceof Q.w0&&o.add(E),E}};function yC(){return this._results[Nl()]()}class Tn{get changes(){return this._changes||(this._changes=new Yo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Nl(),c=Tn.prototype;c[a]||(c[a]=yC)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Qr(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Vd(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gc=(()=>{class i{}return i.__NG_ELEMENT_ID__=_C,i})();const qm=gc,lI=class extends qm{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=ap(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),D_(c,d,o),new pp(d)}};function _C(){return mc(fr(),De())}function mc(i,o){return 4&i.type?new lI(o,i,$o(i,o)):null}let Wm=(()=>{class i{}return i.__NG_ELEMENT_ID__=dI,i})();function dI(){return kv(fr(),De())}const Wh=Wm,Qo=class extends Wh{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return $o(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){const o=xu(this._hostTNode,this._hostLView);if(Od(o)){const a=Mo(o,this._hostLView),c=Cu(o);return new ui(a[1].data[c+8],a)}return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Ov(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(o,a,c,d,p){const _=o&&!function Ou(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const P=a||{};E=P.index,c=P.injector,d=P.projectableNodes,p=P.environmentInjector||P.ngModuleRef}const I=_?o:new Xu(Kt(o)),T=c||this.parentInjector;if(!p&&null==I.ngModule){const G=(_?T:this.parentInjector).get(Cl,null);G&&(p=G)}const M=I.create(T,d,void 0,p);return this.insert(M.hostView,E),M}insert(o,a){const c=o._lView,d=c[1];if(function gu(i){return bi(i[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const P=c[3],G=new Qo(P,P[6],P[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function Zy(i,o,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=o),c<p-10?(o[4]=a[d],ku(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Ky(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(d,c,_,p);const E=Cr(p,_),I=c[11],T=yl(I,_[7]);return null!==T&&function Wy(i,o,a,c,d,p){c[0]=d,c[6]=o,qu(i,c,a,1,d,p)}(d,_[6],I,c,T,E),o.attachToViewContainerRef(),ku(Zm(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Ov(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=$u(this._lContainer,a);c&&(xa(Zm(this._lContainer),a),Dg(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=$u(this._lContainer,a);return c&&null!=xa(Zm(this._lContainer),a)?new pp(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Ov(i){return i[8]}function Zm(i){return i[8]||(i[8]=[])}function kv(i,o){let a;const c=o[i.index];if(bi(c))a=c;else{let d;if(8&i.type)d=kn(c);else{const p=o[11];d=p.createComment("");const _=hr(i,o);Va(p,yl(p,_),d,function Sg(i,o){return i.nextSibling(o)}(p,_),!1)}o[i.index]=a=Vw(c,o,d,i),hp(o,a)}return new Qo(a,i,o)}class yc{constructor(o){this.queryList=o,this.matches=null}clone(){return new yc(this.queryList)}setDirty(){this.queryList.setDirty()}}class jp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new jp(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==_I(o,a).matches&&this.queries[a].setDirty()}}class hI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class nr{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new nr(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Jt{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Jt(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,fI(a,p)),this.matchTNodeWithReadOption(o,a,Da(a,o,p,!1,!1))}else c===gc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Da(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ah||d===Wm||d===gc&&4&a.type)this.addMatch(a.index,-2);else{const p=Da(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function fI(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function _c(i,o,a,c){return-1===a?function pI(i,o){return 11&i.type?$o(i,o):4&i.type?mc(i,o):null}(o,i):-2===a?function vC(i,o,a){return a===ah?$o(o,i):a===gc?mc(o,i):a===Wm?kv(o,i):void 0}(i,o,c):Si(i,i[1],a,o)}function Mi(i,o,a,c){const d=o[19].queries[c];if(null===d.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:_c(o,p[T],_[I+1],a.metadata.read))}d.matches=E}return d.matches}function Km(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=Mi(i,o,d,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(_[E/2]);else{const T=p[E+1],M=o[-I];for(let P=10;P<M.length;P++){const G=M[P];G[17]===G[3]&&Km(G[1],G,T,c)}if(null!==M[9]){const P=M[9];for(let G=0;G<P.length;G++){const X=P[G];Km(X[1],X,T,c)}}}}}return c}function Zh(i){const o=De(),a=Yt(),c=xd();zc(c+1);const d=_I(a,c);if(i.dirty&&function pa(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Km(a,o,c,[]):Mi(a,o,d,c);i.reset(p,cD),i.notifyOnChanges()}return!0}return!1}function lo(i,o,a,c){const d=Yt();if(d.firstCreatePass){const p=fr();(function yI(i,o,a){null===i.queries&&(i.queries=new nr),i.queries.track(new Jt(o,a))})(d,new hI(o,a,c),p.index),function zt(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function mI(i,o,a){const c=new Tn(4==(4&a));Go(i,o,c,c.destroy),null===o[19]&&(o[19]=new jp),o[19].queries.push(new yc(c))}(d,De(),a)}function Pv(){return function $p(i,o){return i[19].queries[o].queryList}(De(),xd())}function _I(i,o){return i.queries.getByIndex(o)}function ey(...i){}const OI=new on("Application Initializer");let ty=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ey,this.reject=ey,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Fl(p))a.push(p);else if(Ep(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(je(OI,8))},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const kI=new on("AppId",{providedIn:"root",factory:function PI(){return`${ny()}${ny()}${ny()}`}});function ny(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FI=new on("Platform Initializer"),LI=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yv=new on("appBootstrapListener");let Hr=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Jh=new on("LocaleId",{providedIn:"root",factory:()=>We(Jh,dt.Optional|dt.SkipSelf)||function Qv(){return typeof $localize<"u"&&$localize.locale||Bl}()}),Xv=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class UI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let ry=(()=>{class i{compileModuleSync(a){return new cn(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=za(Ir(a).declarations).reduce((_,E)=>{const I=Kt(E);return I&&_.push(new Xu(I)),_},[]);return new UI(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const jI=(()=>Promise.resolve(0))();function iy(i){typeof Zone>"u"?jI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class fs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yo(!1),this.onMicrotaskEmpty=new Yo(!1),this.onStable=new Yo(!1),this.onError=new Yo(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function AC(){let i=Tt.requestAnimationFrame,o=Tt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function MC(i){const o=()=>{!function rd(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Tt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,oy(i),i.isCheckStableRunning=!0,nd(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),oy(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,_,E)=>{try{return $I(i),a.invokeTask(d,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),HI(i)}},onInvoke:(a,c,d,p,_,E,I)=>{try{return $I(i),a.invoke(d,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),HI(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,oy(i),nd(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fs.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(fs.isInAngularZone())throw new he(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,sy,ey,ey);try{return p.runTask(_,a,c)}finally{p.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const sy={};function nd(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function oy(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function $I(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function HI(i){i._nesting--,nd(i)}class RC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yo,this.onMicrotaskEmpty=new Yo,this.onStable=new Yo,this.onError=new Yo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const nf=new on(""),wc=new on("");let ay,Ec=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ay||(function NC(i){ay=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fs.assertNotInAngularZone(),iy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iy(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(je(fs),je(e0),je(wc))},i.\u0275prov=ht({token:i,factory:i.\u0275fac}),i})(),e0=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return ay?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ic=null;const uy=new on("AllowMultipleToken"),Gp=new on("PlatformDestroyListeners");class cy{constructor(o,a){this.name=o,this.token=a}}function r0(i,o,a=[]){const c=`Platform: ${o}`,d=new on(c);return(p=[])=>{let _=dy();if(!_||_.injector.get(uy,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function OC(i){if(Ic&&!Ic.get(uy,!1))throw new he(400,!1);Ic=i;const o=i.get(s0);(function zp(i){const o=i.get(FI,null);o&&o.forEach(a=>a())})(i)}(function Wp(i=[],o){return uh.create({name:o,providers:[{provide:u_,useValue:"platform"},{provide:Gp,useValue:new Set([()=>Ic=null])},...i]})}(E,c))}return function qp(i){const o=dy();if(!o)throw new he(401,!1);return o}()}}function dy(){return Ic?.get(s0)??null}let s0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function o0(i,o){let a;return a="noop"===i?new RC:("zone.js"===i?void 0:i)||new fs(o),a}(c?.ngZone,function Ri(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:fs,useValue:d}];return d.run(()=>{const _=uh.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(_),I=E.injector.get(np,null);if(!I)throw new he(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:M=>{I.handleError(M)}});E.onDestroy(()=>{ho(this._modules,E),T.unsubscribe()})}),function Zp(i,o,a){try{const c=a();return Fl(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(I,d,()=>{const T=E.injector.get(ty);return T.runInitializers(),T.donePromise.then(()=>(function tn(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(Lh=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Jh,Bl)||Bl),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=Kp({},c);return function t0(i,o,a){const c=new cn(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Yp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new he(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Gp,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(je(uh))},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Kp(i,o){return Array.isArray(o)?o.reduce(Kp,i):{...i,...o}}let Yp=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new O.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{fs.assertNotInAngularZone(),iy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(p,_.pipe((0,oe.B)()))}bootstrap(a,c){const d=a instanceof uw;if(!this._injector.get(ty).done)throw!d&&Rn(a),new he(405,false);let _;_=d?a:this._injector.get(Yu).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function zI(i){return i.isBoundToModule}(_)?void 0:this._injector.get(co),T=_.create(uh.NULL,[],c||_.selector,E),M=T.location.nativeElement,P=T.injector.get(nf,null);return P?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),ho(this.components,T),P?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ho(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Yv,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ho(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new he(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(je(fs),je(Cl),je(np))},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ho(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function sd(){return!1}let WI=(()=>{class i{}return i.__NG_ELEMENT_ID__=PC,i})();function PC(i){return function FC(i,o,a){if(Di(i)&&!a){const c=ir(i.index,o);return new pp(c,c)}return 47&i.type?new pp(o[16],o):null}(fr(),De(),16==(16&i))}class d0{constructor(){}supports(o){return _h(o)}create(o){return new py(o)}}const UC=(i,o)=>o;class py{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||UC}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const _=!c||a&&a.currentIndex<my(c,d,p)?a:c,E=my(_,d,p),I=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=E-d,M=I-d;if(T!=M){for(let G=0;G<T;G++){const X=G<p.length?p[G]:p[G]=0,me=X+G;M<=me&&me<T&&(p[G]=X+1)}p[_.previousIndex]=M-T}}E!==I&&o(_,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!_h(o))throw new he(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),c=!0),a=a._next}else d=0,function um(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Nl()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new BC(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new gy),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gy),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class BC{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class gy{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new YI,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function my(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class sf{constructor(){}supports(o){return o instanceof Map||mp(o)}create(){return new yy}}class yy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||mp(o)))throw new he(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new h0(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class h0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _y(){return new vy([new d0])}let vy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||_y()),deps:[[i,new C,new pt]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new he(901,!1)}}return i.\u0275prov=ht({token:i,providedIn:"root",factory:_y}),i})();function f0(){return new wy([new sf])}let wy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||f0()),deps:[[i,new C,new pt]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new he(901,!1)}}return i.\u0275prov=ht({token:i,providedIn:"root",factory:f0}),i})();const QI=r0(null,"core",[]);let HC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(je(Yp))},i.\u0275mod=In({type:i}),i.\u0275inj=ni({}),i})();function af(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(st,Ee,k)=>{k.d(Ee,{Z:()=>He});var h=k(2090),Q=k(4859),O=k(9681),se=k(1877);class oe{constructor(he,be){this._delegate=he,this.firebase=be,(0,O._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,be=O._DEFAULT_ENTRY_NAME){var we;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(he);return!Fe.isInitialized()&&"EXPLICIT"===(null===(we=Fe.getComponent())||void 0===we?void 0:we.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:be})}_removeServiceInstance(he,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(be)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function le(){const tt=function de(tt){const he={},be={__esModule:!0,initializeApp:function Te(Oe,U={}){const ye=O.initializeApp(Oe,U);if((0,h.r3)(he,ye.name))return he[ye.name];const q=new tt(ye,be);return he[ye.name]=q,q},app:Fe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Se(Oe){const U=Oe.name,ye=U.replace("-compat","");if(O._registerComponent(Oe)&&"PUBLIC"===Oe.type){const q=(Y=Fe())=>{if("function"!=typeof Y[ye])throw fe.create("invalid-app-argument",{appName:U});return Y[ye]()};void 0!==Oe.serviceProps&&(0,h.ZB)(q,Oe.serviceProps),be[ye]=q,tt.prototype[ye]=function(...Y){return this._getService.bind(this,U).apply(this,Oe.multipleInstances?Y:[])}}return"PUBLIC"===Oe.type?be[ye]:null},removeApp:function we(Oe){delete he[Oe]},useAsService:function Le(Oe,U){return"serverAuth"===U?null:U},modularAPIs:O}};function Fe(Oe){if(!(0,h.r3)(he,Oe=Oe||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Oe});return he[Oe]}return be.default=be,Object.defineProperty(be,"apps",{get:function _e(){return Object.keys(he).map(Oe=>he[Oe])}}),Fe.App=tt,be}(oe);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function he(be){(0,h.ZB)(tt,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),tt}(),$=new se.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=j;!function Ie(tt){(0,O.registerVersion)("@firebase/app-compat","0.2.1",tt)}()},9681:(st,Ee,k)=>{k.r(Ee),k.d(Ee,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>po,_DEFAULT_ENTRY_NAME:()=>ln,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>_r,_apps:()=>Bt,_clearComponents:()=>ni,_components:()=>lt,_getProvider:()=>ht,_registerComponent:()=>xr,_removeServiceInstance:()=>mn,deleteApp:()=>Hs,getApp:()=>_i,getApps:()=>Nr,initializeApp:()=>ws,onLog:()=>dt,registerVersion:()=>zr,setLogLevel:()=>Xi});var h=k(5861),Q=k(4859),O=k(1877),se=k(2090),oe=k(8766);class ae{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function fe(je){return"VERSION"===je.getComponent()?.type}(We)){const wt=We.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(We=>We).join(" ")}}const de="@firebase/app",j=new O.Yd("@firebase/app"),ln="[DEFAULT]",Rt={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,lt=new Map;function Qt(je,ve){try{je.container.addComponent(ve)}catch(We){j.debug(`Component ${ve.name} failed to register with FirebaseApp ${je.name}`,We)}}function _r(je,ve){je.container.addOrOverwriteComponent(ve)}function xr(je){const ve=je.name;if(lt.has(ve))return j.debug(`There were multiple attempts to register component ${ve}.`),!1;lt.set(ve,je);for(const We of Bt.values())Qt(We,je);return!0}function ht(je,ve){const We=je.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),je.container.getProvider(ve)}function mn(je,ve,We=ln){ht(je,ve).clearInstance(We)}function ni(){lt.clear()}const Mr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Rr{constructor(ve,We,wt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}const po="9.16.0";function ws(je,ve={}){let We=je;"object"!=typeof ve&&(ve={name:ve});const wt=Object.assign({name:ln,automaticDataCollectionEnabled:!1},ve),Dt=wt.name;if("string"!=typeof Dt||!Dt)throw Mr.create("bad-app-name",{appName:String(Dt)});if(We||(We=(0,se.aH)()),!We)throw Mr.create("no-options");const kt=Bt.get(Dt);if(kt){if((0,se.vZ)(We,kt.options)&&(0,se.vZ)(wt,kt.config))return kt;throw Mr.create("duplicate-app",{appName:Dt})}const B=new Q.H0(Dt);for(const W of lt.values())B.addComponent(W);const L=new Rr(We,wt,B);return Bt.set(Dt,L),L}function _i(je=ln){const ve=Bt.get(je);if(!ve&&je===ln)return ws();if(!ve)throw Mr.create("no-app",{appName:je});return ve}function Nr(){return Array.from(Bt.values())}function Hs(je){return dn.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(je){const ve=je.name;Bt.has(ve)&&(Bt.delete(ve),yield Promise.all(je.container.getProviders().map(We=>We.delete())),je.isDeleted=!0)})).apply(this,arguments)}function zr(je,ve,We){var wt;let Dt=null!==(wt=Rt[je])&&void 0!==wt?wt:je;We&&(Dt+=`-${We}`);const kt=Dt.match(/\s|\//),B=ve.match(/\s|\//);if(kt||B){const L=[`Unable to register library "${Dt}" with version "${ve}":`];return kt&&L.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),kt&&B&&L.push("and"),B&&L.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void j.warn(L.join(" "))}xr(new Q.wA(`${Dt}-version`,()=>({library:Dt,version:ve}),"VERSION"))}function dt(je,ve){if(null!==je&&"function"!=typeof je)throw Mr.create("invalid-log-argument");(0,O.Am)(je,ve)}function Xi(je){(0,O.Ub)(je)}const Or="firebase-heartbeat-store";let Es=null;function Tt(){return Es||(Es=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(je,ve)=>{0===ve&&je.createObjectStore(Or)}}).catch(je=>{throw Mr.create("idb-open",{originalErrorMessage:je.message})})),Es}function _t(){return(_t=(0,h.Z)(function*(je){try{return(yield Tt()).transaction(Or).objectStore(Or).get(wn(je))}catch(ve){if(ve instanceof se.ZR)j.warn(ve.message);else{const We=Mr.create("idb-get",{originalErrorMessage:ve?.message});j.warn(We.message)}}})).apply(this,arguments)}function Ji(je,ve){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(je,ve){try{const wt=(yield Tt()).transaction(Or,"readwrite");return yield wt.objectStore(Or).put(ve,wn(je)),wt.done}catch(We){if(We instanceof se.ZR)j.warn(We.message);else{const wt=Mr.create("idb-set",{originalErrorMessage:We?.message});j.warn(wt.message)}}})).apply(this,arguments)}function wn(je){return`${je.name}!${je.options.appId}`}class na{constructor(ve){this.container=ve,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new Zt(We),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var ve=this;return(0,h.Z)(function*(){const wt=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=rn();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!ve._heartbeatsCache.heartbeats.some(kt=>kt.date===Dt))return ve._heartbeatsCache.heartbeats.push({date:Dt,agent:wt}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(kt=>{const B=new Date(kt.date).valueOf();return Date.now()-B<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,h.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const We=rn(),{heartbeatsToSend:wt,unsentEntries:Dt}=function es(je,ve=1024){const We=[];let wt=je.slice();for(const Dt of je){const kt=We.find(B=>B.agent===Dt.agent);if(kt){if(kt.dates.push(Dt.date),wr(We)>ve){kt.dates.pop();break}}else if(We.push({agent:Dt.agent,dates:[Dt.date]}),wr(We)>ve){We.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:We,unsentEntries:wt}}(ve._heartbeatsCache.heartbeats),kt=(0,se.L)(JSON.stringify({version:2,heartbeats:wt}));return ve._heartbeatsCache.lastSentHeartbeatDate=We,Dt.length>0?(ve._heartbeatsCache.heartbeats=Dt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),kt})()}}function rn(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,h.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function ft(je){return _t.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var We=this;return(0,h.Z)(function*(){var wt;if(yield We._canUseIndexedDBPromise){const kt=yield We.read();return Ji(We.app,{lastSentHeartbeatDate:null!==(wt=ve.lastSentHeartbeatDate)&&void 0!==wt?wt:kt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var We=this;return(0,h.Z)(function*(){var wt;if(yield We._canUseIndexedDBPromise){const kt=yield We.read();return Ji(We.app,{lastSentHeartbeatDate:null!==(wt=ve.lastSentHeartbeatDate)&&void 0!==wt?wt:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...ve.heartbeats]})}})()}}function wr(je){return(0,se.L)(JSON.stringify({version:2,heartbeats:je})).length}!function ki(je){xr(new Q.wA("platform-logger",ve=>new ae(ve),"PRIVATE")),xr(new Q.wA("heartbeat",ve=>new na(ve),"PRIVATE")),zr(de,"0.9.1",je),zr(de,"0.9.1","esm2017"),zr("fire-js","")}("")},4859:(st,Ee,k)=>{k.d(Ee,{H0:()=>de,wA:()=>O});var h=k(5861),Q=k(2090);class O{constructor(j,$,Z){this.name=j,this.instanceFactory=$,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const se="[DEFAULT]";class oe{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const Z=new Q.BH;if(this.instancesDeferred.set($,Z),this.isInitialized($)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:$});Ue&&Z.resolve(Ue)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const Z=this.normalizeInstanceIdentifier(j?.identifier),Ue=null!==($=j?.optional)&&void 0!==$&&$;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Ie){if(Ue)return null;throw Ie}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function fe(le){return"EAGER"===le.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[$,Z]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier($);try{const Ie=this.getOrInitializeService({instanceIdentifier:Ue});Z.resolve(Ie)}catch{}}}}clearInstance(j=se){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,h.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...$.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=se){return this.instances.has(j)}getOptions(j=se){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,Z=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Z,options:$});for(const[Ie,He]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Ie)&&He.resolve(Ue);return Ue}onInit(j,$){var Z;const Ue=this.normalizeInstanceIdentifier($),Ie=null!==(Z=this.onInitCallbacks.get(Ue))&&void 0!==Z?Z:new Set;Ie.add(j),this.onInitCallbacks.set(Ue,Ie);const He=this.instances.get(Ue);return He&&j(He,Ue),()=>{Ie.delete(j)}}invokeOnInitCallbacks(j,$){const Z=this.onInitCallbacks.get($);if(Z)for(const Ue of Z)try{Ue(j,$)}catch{}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let Z=this.instances.get(j);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(le=j,le===se?void 0:le),options:$}),this.instances.set(j,Z),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(Z,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Z)}catch{}var le;return Z||null}normalizeInstanceIdentifier(j=se){return this.component?this.component.multipleInstances?j:se:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new oe(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(st,Ee,k)=>{k.d(Ee,{Am:()=>le,Ub:()=>de,Yd:()=>fe,in:()=>Q});const h=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},se=Q.INFO,oe={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ae=(j,$,...Z)=>{if($<j.logLevel)return;const Ue=(new Date).toISOString(),Ie=oe[$];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ie](`[${Ue}]  ${j.name}:`,...Z)};class fe{constructor($){this.name=$,this._logLevel=se,this._logHandler=ae,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Q))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...$),this._logHandler(this,Q.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...$),this._logHandler(this,Q.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...$),this._logHandler(this,Q.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...$),this._logHandler(this,Q.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...$),this._logHandler(this,Q.ERROR,...$)}}function de(j){h.forEach($=>{$.setLogLevel(j)})}function le(j,$){for(const Z of h){let Ue=null;$&&$.level&&(Ue=O[$.level]),Z.userLogHandler=null===j?null:(Ie,He,...tt)=>{const he=tt.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");He>=(Ue??Ie.logLevel)&&j({level:Q[He].toLowerCase(),message:he,args:tt,type:Ie.name})}}}},259:(st,Ee,k)=>{k.d(Ee,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=k(9681);(0,h.registerVersion)("firebase","9.16.0","app")},9260:(st,Ee,k)=>{k.d(Ee,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.16.0","app-compat")},750:(st,Ee,k)=>{k.r(Ee);var h=k(5861),Q=k(3942),O=k(2090),se=k(9681),oe=k(1877),ae=k(655),fe=k(4859);const He=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),we=new oe.Yd("@firebase/auth");function Fe(y,...f){we.logLevel<=oe.in.ERROR&&we.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Te(y,...f){throw Oe(y,...f)}function _e(y,...f){return Oe(y,...f)}function Se(y,f,g){const v=Object.assign(Object.assign({},tt()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Le(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(y,"argument-error"),Se(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return he.create(y,...f)}function U(y,f,...g){if(!y)throw Oe(f,...g)}function ye(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Fe(f),new Error(f)}function q(y,f){y||ye(f)}const Y=new Map;function ie(y){q(y instanceof Function,"Expected a class definition");let f=Y.get(y);return f?(q(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Y.set(y,f),f)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ot(){return"http:"===en()||"https:"===en()}function en(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Bt{constructor(f,g){this.shortDelay=f,this.longDelay=g,q(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ln(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lt(y,f){q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Qt{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _r={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new Bt(3e4,6e4);function ht(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function mn(y,f,g,v){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(y,f,g,v,A={}){return Gr(y,A,(0,h.Z)(function*(){let R={},z={};v&&("GET"===f?z=v:R={body:JSON.stringify(v)});const ce=(0,O.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Be=yield y._getAdditionalHeaders();return Be["Content-Type"]="application/json",y.languageCode&&(Be["X-Firebase-Locale"]=y.languageCode),Qt.fetch()(ws(y,y.config.apiHost,g,ce),Object.assign({method:f,headers:Be,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Gr(y,f,g){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},_r),f);try{const A=new _i(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw Nr(y,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const ce=R.ok?z.errorMessage:z.error.message,[Be,Ze]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw Nr(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Be)throw Nr(y,"email-already-in-use",z);if("USER_DISABLED"===Be)throw Nr(y,"user-disabled",z);const yt=v[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Se(y,yt,Ze);Te(y,yt)}}catch(A){if(A instanceof O.ZR)throw A;Te(y,"network-request-failed")}})).apply(this,arguments)}function Rr(y,f,g,v){return po.apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(y,f,g,v,A={}){const R=yield mn(y,f,g,v,A);return"mfaPendingCredential"in R&&Te(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function ws(y,f,g,v){const A=`${f}${g}?${v}`;return y.config.emulator?lt(y.config,A):`${y.config.apiScheme}://${A}`}class _i{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nr(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const A=_e(y,f,v);return A.customData._tokenResponse=g,A}function dn(){return(dn=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function zr(y,f){return dt.apply(this,arguments)}function dt(){return(dt=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xi(y,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function vn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Tt(){return(Tt=(0,h.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),A=_t(v);U(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,z=R?.sign_in_provider;return{claims:A,token:v,authTime:vn(ft(A.auth_time)),issuedAtTime:vn(ft(A.iat)),expirationTime:vn(ft(A.exp)),signInProvider:z||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function _t(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(Fe("Failed to decode base64 JWT payload"),null)}catch(A){return Fe("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Sn(y,f){return wn.apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&wi(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function wi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class vr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class na{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(y){return es.apply(this,arguments)}function es(){return(es=(0,h.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),A=yield Sn(y,Xi(g,{idToken:v}));U(A?.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const z=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?je(R.providerUserInfo):[],ce=ki(y.providerData,z),yt=!!y.isAnonymous&&!(y.email&&R.passwordHash||ce?.length),ct={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ce,metadata:new na(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(y,ct)})).apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(y){const f=(0,O.m9)(y);yield rn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ki(y,f){return[...y.filter(v=>!f.some(A=>A.providerId===v.providerId)),...f]}function je(y){return y.map(f=>{var{providerId:g}=f,v=(0,ae._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function We(){return(We=(0,h.Z)(function*(y,f){const g=yield Gr(y,{},(0,h.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,z=ws(y,A,"/v1/token",`key=${R}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Qt.fetch()(z,{method:"POST",headers:ce,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class wt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Ji(y){const f=_t(y);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,h.Z)(function*(){return U(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:z}=yield function ve(y,f){return We.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(A,R,Number(z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:A,expirationTime:R}=g,z=new wt;return v&&(U("string"==typeof v,"internal-error",{appName:f}),z.refreshToken=v),A&&(U("string"==typeof A,"internal-error",{appName:f}),z.accessToken=A),R&&(U("number"==typeof R,"internal-error",{appName:f}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new wt,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Dt(y,f){U("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class kt{constructor(f){var{uid:g,auth:v,stsTokenManager:A}=f,R=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new na(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const v=yield Sn(g,g.stsTokenManager.getToken(g.auth,f));return U(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function Es(y){return Tt.apply(this,arguments)}(this,f)}reload(){return function Zt(y){return wr.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new kt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,h.Z)(function*(){let A=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield rn(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield Sn(f,function Hs(y,f){return dn.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,A,R,z,ce,Be,Ze,yt;const ct=null!==(v=g.displayName)&&void 0!==v?v:void 0,$n=null!==(A=g.email)&&void 0!==A?A:void 0,qi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Zu=null!==(z=g.photoURL)&&void 0!==z?z:void 0,rh=null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,El=null!==(Be=g._redirectEventId)&&void 0!==Be?Be:void 0,di=null!==(Ze=g.createdAt)&&void 0!==Ze?Ze:void 0,Ku=null!==(yt=g.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:ih,emailVerified:Il,isAnonymous:sh,providerData:Qf,stsTokenManager:kg}=g;U(ih&&kg,f,"internal-error");const Jy=wt.fromJSON(this.name,kg);U("string"==typeof ih,f,"internal-error"),Dt(ct,f.name),Dt($n,f.name),U("boolean"==typeof Il,f,"internal-error"),U("boolean"==typeof sh,f,"internal-error"),Dt(qi,f.name),Dt(Zu,f.name),Dt(rh,f.name),Dt(El,f.name),Dt(di,f.name),Dt(Ku,f.name);const bl=new kt({uid:ih,auth:f,email:$n,emailVerified:Il,displayName:ct,isAnonymous:sh,photoURL:Zu,phoneNumber:qi,tenantId:rh,stsTokenManager:Jy,createdAt:di,lastLoginAt:Ku});return Qf&&Array.isArray(Qf)&&(bl.providerData=Qf.map(Ga=>Object.assign({},Ga))),El&&(bl._redirectEventId=El),bl}static _fromIdTokenResponse(f,g,v=!1){return(0,h.Z)(function*(){const A=new wt;A.updateFromServerResponse(g);const R=new kt({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:v});return yield rn(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,v){var A=this;return(0,h.Z)(function*(){A.storage[g]=v})()}_get(g){var v=this;return(0,h.Z)(function*(){const A=v.storage[g];return void 0===A?null:A})()}_remove(g){var v=this;return(0,h.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function W(y,f,g){return`firebase:${y}:${f}:${g}`}class ge{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:A,name:R}=this.auth;this.fullUserKey=W(this.userKey,A.apiKey,R),this.fullPersistenceKey=W("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?kt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,h.Z)(function*(){if(!g.length)return new ge(ie(L),f,v);const A=(yield Promise.all(g.map(function(){var Ze=(0,h.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=A[0]||ie(L);const z=W(v,f.config.apiKey,f.name);let ce=null;for(const Ze of g)try{const yt=yield Ze._get(z);if(yt){const ct=kt._fromJSON(f,yt);Ze!==R&&(ce=ct),R=Ze;break}}catch{}const Be=A.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&Be.length?(R=Be[0],ce&&(yield R._set(z,ce.toJSON())),yield Promise.all(g.map(function(){var Ze=(0,h.Z)(function*(yt){if(yt!==R)try{yield yt._remove(z)}catch{}});return function(yt){return Ze.apply(this,arguments)}}())),new ge(R,f,v)):new ge(R,f,v)})()}}function J(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(En(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Je(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(rr(f))return"Blackberry";if($t(f))return"Webos";if(Pt(f))return"Safari";if((f.includes("chrome/")||qt(f))&&!f.includes("edge/"))return"Chrome";if(gt(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function Je(y=(0,O.z$)()){return/firefox\//i.test(y)}function Pt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function qt(y=(0,O.z$)()){return/crios\//i.test(y)}function En(y=(0,O.z$)()){return/iemobile/i.test(y)}function gt(y=(0,O.z$)()){return/android/i.test(y)}function rr(y=(0,O.z$)()){return/blackberry/i.test(y)}function $t(y=(0,O.z$)()){return/webos/i.test(y)}function Zn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function yf(y=(0,O.z$)()){return Zn(y)||gt(y)||$t(y)||rr(y)||/windows phone/i.test(y)||En(y)}function uu(y,f=[]){let g;switch(y){case"Browser":g=J((0,O.z$)());break;case"Worker":g=`${J((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${v}`}class Mc{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=R=>new Promise((z,ce)=>{try{z(f(R))}catch(Be){ce(Be)}});v.onAbort=g,this.queue.push(v);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const A of g.queue)yield A(f),A.onAbort&&v.push(A.onAbort)}catch(A){v.reverse();for(const R of v)try{R()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class fd{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pd(this),this.idTokenSubscription=new pd(this),this.beforeStateQueue=new Mc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,R;if(!v._deleted&&(v.persistenceManager=yield ge.create(v,f),!v._deleted)){if(null!==(A=v._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var v;const A=yield g.assertedPersistence.getCurrentUser();let R=A,z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ce=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Be=R?._redirectEventId,Ze=yield g.tryRedirectSignIn(f);(!ce||ce===Be)&&Ze?.user&&(R=Ze.user,z=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ce){R=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ce))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield rn(f)}catch(v){if("auth/network-request-failed"!==v?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Rt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&U(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,h.Z)(function*(){if(!v._deleted)return f&&U(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,h.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,h.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&ie(f)||g._popupRedirectResolver;U(v,g,"argument-error"),g.redirectPersistenceManager=yield ge.create(g,[ie(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var v,A;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=uu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function In(y){return(0,O.m9)(y)}class pd{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function sa(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Kt(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Mn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ye("not implemented")}_getIdTokenResponse(f){return ye("not implemented")}_linkToIdToken(f,g){return ye("not implemented")}_getReauthenticationResolver(f){return ye("not implemented")}}function Rn(y,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:resetPassword",ht(y,f))})).apply(this,arguments)}function Pi(y,f){return qe.apply(this,arguments)}function qe(){return(qe=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function xt(y,f){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:update",ht(y,f))})).apply(this,arguments)}function Ei(){return(Ei=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPassword",ht(y,f))})).apply(this,arguments)}function Nn(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:sendOobCode",ht(y,f))})).apply(this,arguments)}function yn(y,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(y,f){return Nn(y,f)})).apply(this,arguments)}function Gs(y,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,h.Z)(function*(y,f){return Nn(y,f)})).apply(this,arguments)}function cu(y,f){return yo.apply(this,arguments)}function yo(){return(yo=(0,h.Z)(function*(y,f){return Nn(y,f)})).apply(this,arguments)}function _f(y,f){return Li.apply(this,arguments)}function Li(){return(Li=(0,h.Z)(function*(y,f){return Nn(y,f)})).apply(this,arguments)}function _o(){return(_o=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",ht(y,f))})).apply(this,arguments)}function Ii(){return(Ii=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",ht(y,f))})).apply(this,arguments)}class Is extends Mn{constructor(f,g,v,A=null){super("password",v),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new Is(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new Is(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function qr(y,f){return Ei.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function dr(y,f){return _o.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,h.Z)(function*(){switch(v.signInMethod){case"password":return Pi(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function aa(y,f){return Ii.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function On(y,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithIdp",ht(y,f))})).apply(this,arguments)}class ri extends Mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ri(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A}=g,R=(0,ae._T)(g,["providerId","signInMethod"]);if(!v||!A)return null;const z=new ri(v,A);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(f){return On(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,On(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,On(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function gd(y,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:sendVerificationCode",ht(y,f))})).apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,f))})).apply(this,arguments)}function md(){return(md=(0,h.Z)(function*(y,f){const g=yield Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,f));if(g.temporaryProof)throw Nr(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Wr={USER_NOT_FOUND:"user-not-found"};function ua(){return(ua=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wr)})).apply(this,arguments)}class Di extends Mn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Di({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Di({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function qs(y,f){return kr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function br(y,f){return md.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function bi(y,f){return ua.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}=f;return v||g||A||R?new Di({verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}):null}}class ca{constructor(f){var g,v,A,R,z,ce;const Be=(0,O.zd)((0,O.pd)(f)),Ze=null!==(g=Be.apiKey)&&void 0!==g?g:null,yt=null!==(v=Be.oobCode)&&void 0!==v?v:null,ct=function Nc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Be.mode)&&void 0!==A?A:null);U(Ze&&yt&&ct,"argument-error"),this.apiKey=Ze,this.operation=ct,this.code=yt,this.continueUrl=null!==(R=Be.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Be.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ce=Be.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const g=function Zr(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new ca(g)}catch{return null}}}let Oc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return Is._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const A=ca.parseLink(v);return U(A,"argument-error"),Is._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ts{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ws extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class la extends Ws{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return U("providerId"in g&&"signInMethod"in g,"argument-error"),ri._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),ri._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return la.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return la.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:R,nonce:z,providerId:ce}=f;if(!v&&!A&&!g&&!R||!ce)return null;try{return new la(ce)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:R})}catch{return null}}}let yd=(()=>{class y extends Ws{constructor(){super("facebook.com")}static credential(g){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),vo=(()=>{class y extends Ws{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A}=g;if(!v&&!A)return null;try{return y.credential(v,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),kc=(()=>{class y extends Ws{constructor(){super("github.com")}static credential(g){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Pc extends Mn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return On(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,On(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,On(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A,pendingToken:R}=g;return v&&A&&R&&v===A?new Pc(v,R):null}static _create(f,g){return new Pc(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ci extends ts{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ci.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ci.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Pc.fromJSON(f);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Pc._create(v,g)}catch{return null}}}let vd=(()=>{class y extends Ws{constructor(){super("twitter.com")}static credential(g,v){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=g;if(!v||!A)return null;try{return y.credential(v,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Fc(y,f){return wd.apply(this,arguments)}function wd(){return(wd=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signUp",ht(y,f))})).apply(this,arguments)}class Pr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,A=!1){return(0,h.Z)(function*(){const R=yield kt._fromIdTokenResponse(f,v,A),z=Ed(v);return new Pr({user:R,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const A=Ed(v);return new Pr({user:f,providerId:A,_tokenResponse:v,operationType:g})})()}}function Ed(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function wf(){return(wf=(0,h.Z)(function*(y){var f;const g=In(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Pr({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Fc(g,{returnSecureToken:!0}),A=yield Pr._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Id extends O.ZR{constructor(f,g,v,A){var R;super(g.code,g.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,A){return new Id(f,g,v,A)}}function Zs(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Id._fromErrorAndOperation(y,R,f,v):R})}function bs(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Ks(){return(Ks=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);yield Ys(!0,g,f);const{providerUserInfo:v}=yield zr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=bs(v||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function du(y,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(y,f,g=!1){const v=yield Sn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return Pr._forOperation(y,"link",v)})).apply(this,arguments)}function Ys(y,f,g){return ha.apply(this,arguments)}function ha(){return(ha=(0,h.Z)(function*(y,f,g){yield rn(f);const A=!1===y?"provider-already-linked":"no-such-provider";U(bs(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function fu(y,f){return wo.apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(y,f,g=!1){const{auth:v}=y,A="reauthenticate";try{const R=yield Sn(y,Zs(v,A,f,y),g);U(R.idToken,v,"internal-error");const z=_t(R.idToken);U(z,v,"internal-error");const{sub:ce}=z;return U(y.uid===ce,v,"user-mismatch"),Pr._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===R?.code&&Te(v,"user-mismatch"),R}})).apply(this,arguments)}function pu(y,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(y,f,g=!1){const v="signIn",A=yield Zs(y,v,f),R=yield Pr._fromIdTokenResponse(y,v,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function An(y,f){return fa.apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(y,f){return pu(In(y),f)})).apply(this,arguments)}function kn(y,f){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Ys(!1,g,f.providerId),du(g,f)})).apply(this,arguments)}function Qs(y,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(y,f){return fu((0,O.m9)(y),f)})).apply(this,arguments)}function bd(y,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,h.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithCustomToken",ht(y,f))})).apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(y,f){const g=In(y),v=yield bd(g,{token:f,returnSecureToken:!0}),A=yield Pr._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class pa{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?ga._fromServerResponse(f,g):Te(f,"internal-error")}}class ga extends pa{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new ga(g)}}function gu(y,f,g){var v;U((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ma(){return(ma=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&gu(v,A,g),yield Gs(v,A)})).apply(this,arguments)}function St(){return(St=(0,h.Z)(function*(y,f,g){yield Rn((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Vc(){return(Vc=(0,h.Z)(function*(y,f){yield xt((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function yu(y,f){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield Rn(g,{oobCode:f}),A=v.requestType;switch(U(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(v.mfaInfo,g,"internal-error");default:U(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=pa._fromServerResponse(In(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function _u(){return(_u=(0,h.Z)(function*(y,f){const{data:g}=yield yu((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(y,f,g){const v=In(y),A=yield Fc(v,{returnSecureToken:!0,email:f,password:g}),R=yield Pr._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Bc(){return(Bc=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};U(g.handleCodeInApp,v,"argument-error"),g&&gu(v,A,g),yield cu(v,A)})).apply(this,arguments)}function bo(){return(bo=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=Oc.credentialWithLink(f,g||ke());return U(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),An(v,A)})).apply(this,arguments)}function vu(y,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:createAuthUri",ht(y,f))})).apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(y,f){const v={identifier:f,continueUri:ot()?ke():"http://localhost"},{signinMethods:A}=yield vu((0,O.m9)(y),v);return A||[]})).apply(this,arguments)}function Sd(){return(Sd=(0,h.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&gu(g.auth,A,f);const{email:R}=yield yn(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&gu(v.auth,R,g);const{email:z}=yield _f(v.auth,R);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ui(y,f){return $c.apply(this,arguments)}function $c(){return($c=(0,h.Z)(function*(y,f){return mn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield Sn(v,Ui(v.auth,R));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const ce=v.providerData.find(({providerId:Be})=>"password"===Be);ce&&(ce.displayName=v.displayName,ce.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function Gc(y,f,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const z=yield Sn(y,Pi(v,R));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Xs{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class xd extends Xs{constructor(f,g,v,A){super(f,g,v),this.username=A}}class zc extends Xs{constructor(f,g){super(f,"facebook.com",g)}}class Md extends xd{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Ef extends Xs{constructor(f,g){super(f,"google.com",g)}}class Eu extends xd{constructor(f,g,v){super(f,"twitter.com",g,v)}}function If(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ad(y){var f,g;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const z=null===(g=null===(f=_t(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Xs(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new zc(R,A);case"github.com":return new Md(R,A);case"google.com":return new Ef(R,A);case"twitter.com":return new Eu(R,A,y.screenName||null);case"custom":case"anonymous":return new Xs(R,null);default:return new Xs(R,v,A)}}(g)}class To{constructor(f,g,v){this.type=f,this.credential=g,this.auth=v}static _fromIdtoken(f,g){return new To("enroll",f,g)}static _fromMfaPendingCredential(f){return new To("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return To._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(v=f.multiFactorSession)&&void 0!==v&&v.idToken)return To._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Wc{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=In(f),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(ce=>pa._fromServerResponse(v,ce));U(A.mfaPendingCredential,v,"internal-error");const z=To._fromMfaPendingCredential(A.mfaPendingCredential);return new Wc(z,R,function(){var ce=(0,h.Z)(function*(Be){const Ze=yield Be._process(v,z);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(g.operationType){case"signIn":const ct=yield Pr._fromIdTokenResponse(v,g.operationType,yt);return yield v._updateCurrentUser(ct.user),ct;case"reauthenticate":return U(g.user,v,"internal-error"),Pr._forOperation(g.user,g.operationType,yt);default:Te(v,"internal-error")}});return function(Be){return ce.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function bf(y,f){return mn(y,"POST","/v2/accounts/mfaEnrollment:start",ht(y,f))}class Cs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>pa._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Cs(f)}getSession(){var f=this;return(0,h.Z)(function*(){return To._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var v=this;return(0,h.Z)(function*(){const A=f,R=yield v.getSession(),z=yield Sn(v.user,A._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const v="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),R=yield Sn(g.user,function Df(y,f){return mn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ht(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z?.code)throw z}})()}}const oi=new WeakMap,Ti="__sak";class Zc{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ti,"1"),this.storage.removeItem(Ti),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kc=(()=>{class y extends Zc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rd(){const y=(0,O.z$)();return Pt(y)||Zn(y)}()&&function ia(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=yf(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),R=this.localCache[v];A!==R&&g(v,R,A)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((ce,Be,Ze)=>{this.notifyListeners(ce,Ze)});const A=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(g.newValue!==ce)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!v)return}const R=()=>{const ce=this.storage.getItem(A);!v&&this.localCache[A]===ce||this.notifyListeners(A,ce)},z=this.storage.getItem(A);!function ra(){return(0,O.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var A=()=>super._set,R=this;return(0,h.Z)(function*(){yield A().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,A=this;return(0,h.Z)(function*(){const R=yield v().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,A=this;return(0,h.Z)(function*(){yield v().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Bi=(()=>{class y extends Zc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Nd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,h.Z)(function*(){const A=g,{eventId:R,eventType:z,data:ce}=A.data,Be=v.handlersMap[z];if(!Be?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const Ze=Array.from(Be).map(function(){var ct=(0,h.Z)(function*($n){return $n(A.origin,ce)});return function($n){return ct.apply(this,arguments)}}()),yt=yield function Yc(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:yt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ts(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Qc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var A=this;return(0,h.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,ce;return new Promise((Be,Ze)=>{const yt=Ts("",20);R.port1.start();const ct=setTimeout(()=>{Ze(new Error("unsupported_event"))},v);ce={messageChannel:R,onMessage($n){const qi=$n;if(qi.data.eventId===yt)switch(qi.data.status){case"ack":clearTimeout(ct),z=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Be(qi.data.response);break;default:clearTimeout(ct),clearTimeout(z),Ze(new Error("invalid_response"))}}},A.handlers.add(ce),R.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:f,eventId:yt,data:g},[R.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function _n(){return window}function xo(){return typeof _n().WorkerGlobalScope<"u"&&"function"==typeof _n().importScripts}function Du(){return(Du=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tu="firebaseLocalStorageDb",rs="firebaseLocalStorage",Js="fbase_key";class As{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ia(y,f){return y.transaction([rs],f?"readwrite":"readonly").objectStore(rs)}function Su(){const y=indexedDB.open(Tu,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(rs,{keyPath:Js})}catch(A){g(A)}}),y.addEventListener("success",(0,h.Z)(function*(){const v=y.result;v.objectStoreNames.contains(rs)?f(v):(v.close(),yield function ba(){const y=indexedDB.deleteDatabase(Tu);return new As(y).toPromise()}(),f(yield Su()))}))})}function Yr(y,f,g){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,h.Z)(function*(y,f,g){const v=Ia(y,!0).put({[Js]:f,value:g});return new As(v).toPromise()})).apply(this,arguments)}function xs(){return(xs=(0,h.Z)(function*(y,f){const g=Ia(y,!1).get(f),v=yield new As(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Au(y,f){const g=Ia(y,!0).delete(f);return new As(g).toPromise()}const No=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Su()),g.db})()}_withRetries(g){var v=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(A++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return xo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=Nd._getInstance(function Cu(){return xo()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,h.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,h.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var v,A;if(g.activeServiceWorker=yield function Ss(){return Du.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Qc(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);R&&null!==(v=R[0])&&void 0!==v&&v.fulfilled&&null!==(A=R[0])&&void 0!==A&&A.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,h.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Od(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Su();return yield Yr(g,Ti,"1"),yield Au(g,Ti),!0}catch{}return!1})()}_withPendingWrite(g){var v=this;return(0,h.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(R=>Yr(R,g,v)),A.localCache[g]=v,A.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,h.Z)(function*(){const A=yield v._withRetries(R=>function Ro(y,f){return xs.apply(this,arguments)}(R,g));return v.localCache[g]=A,A})()}_remove(g){var v=this;return(0,h.Z)(function*(){return v._withPendingWrite((0,h.Z)(function*(){return yield v._withRetries(A=>Au(A,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const v=yield g._withRetries(z=>{const ce=Ia(z,!1).getAll();return new As(ce).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:z,value:ce}of v)R.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(ce)&&(g.notifyListeners(z,ce),A.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!R.has(z)&&(g.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function el(y,f){return mn(y,"POST","/v2/accounts/mfaSignIn:start",ht(y,f))}function Ru(){return(Ru=(0,h.Z)(function*(y){return(yield mn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Si(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=A=>{const R=_e("internal-error");R.customData=A,g(R)},v.type="text/javascript",v.charset="UTF-8",function Da(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function Nu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ui=1e12;class Cf{constructor(f){this.auth=f,this.counter=ui,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new kd(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||ui;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ui))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var v;return null===(v=g._widgets.get(f||ui))||void 0===v||v.execute(),""})()}}class kd{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;U(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Pd(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fd=Nu("rcb"),Tf=new Bt(3e4,6e4);class ji{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=_n().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return U(function Ca(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(_n().grecaptcha):new Promise((v,A)=>{const R=_n().setTimeout(()=>{A(_e(f,"network-request-failed"))},Tf.get());_n()[Fd]=()=>{_n().clearTimeout(R),delete _n()[Fd];const ce=_n().grecaptcha;if(!ce)return void A(_e(f,"internal-error"));const Be=ce.render;ce.render=(Ze,yt)=>{const ct=Be(Ze,yt);return this.counter++,ct},this.hostLanguage=g,v(ce)},Si(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Fd,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=_n().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ta{load(f){return(0,h.Z)(function*(){return new Cf(f)})()}clearedOneInstance(){}}const Sf="recaptcha",Af={theme:"light",type:"image"};class Oo{constructor(f,g=Object.assign({},Af),v){this.parameters=g,this.type=Sf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(v),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;U(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ta:new ji,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const z=ce=>{ce&&(f.tokenChangeListeners.delete(z),R(ce))};f.tokenChangeListeners.add(z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=_n()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){U(ot()&&!xo(),f.auth,"internal-error"),yield function eo(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function is(y){return Ru.apply(this,arguments)}(f.auth);U(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ld{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Di._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Sa(){return(Sa=(0,h.Z)(function*(y,f,g){const v=In(y),A=yield il(v,f,(0,O.m9)(g));return new Ld(A,R=>An(v,R))})).apply(this,arguments)}function Mf(){return(Mf=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield Ys(!1,v,"phone");const A=yield il(v.auth,f,(0,O.m9)(g));return new Ld(A,R=>kn(v,R))})).apply(this,arguments)}function Rf(){return(Rf=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=yield il(v.auth,f,(0,O.m9)(g));return new Ld(A,R=>Qs(v,R))})).apply(this,arguments)}function il(y,f,g){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,h.Z)(function*(y,f,g){var v;const A=yield g.verify();try{let R;if(U("string"==typeof A,y,"argument-error"),U(g.type===Sf,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const z=R.session;if("phoneNumber"in R)return U("enroll"===z.type,y,"internal-error"),(yield bf(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{U("signin"===z.type,y,"internal-error");const ce=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return U(ce,y,"missing-multi-factor-info"),(yield el(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield gd(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return z}}finally{g._reset()}})).apply(this,arguments)}function Of(){return(Of=(0,h.Z)(function*(y,f){yield du((0,O.m9)(y),f)})).apply(this,arguments)}let ol=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=In(g)}verifyPhoneNumber(g,v){return il(this.auth,g,(0,O.m9)(v))}static credential(g,v){return Di._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:A}=g;return v&&A?Di._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function fn(y,f){return f?ie(f):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Aa extends Mn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return On(f,this._buildIdpRequest())}_linkToIdToken(f,g){return On(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return On(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Ou(y){return pu(y.auth,new Aa(y),y.bypassAuthState)}function Vd(y){const{auth:f,user:g}=y;return U(g,f,"internal-error"),fu(g,new Aa(y),y.bypassAuthState)}function Qr(y){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return U(g,f,"internal-error"),du(g,new Aa(y),y.bypassAuthState)})).apply(this,arguments)}class ku{constructor(f,g,v,A,R=!1){this.auth=f,this.resolver=v,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(v,A){f.pendingPromise={resolve:v,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:R,tenantId:z,error:ce,type:Be}=f;if(ce)return void g.reject(ce);const Ze={auth:g.auth,requestUri:v,sessionId:A,tenantId:z||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Be)(Ze))}catch(yt){g.reject(yt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ou;case"linkViaPopup":case"linkViaRedirect":return Qr;case"reauthViaPopup":case"reauthViaRedirect":return Vd;default:Te(this.auth,"internal-error")}}resolve(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xa=new Bt(2e3,1e4);function Pu(){return(Pu=(0,h.Z)(function*(y,f,g){const v=In(y);Le(y,f,ts);const A=fn(v,g);return new Xe(v,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function kf(){return(kf=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Le(v.auth,f,ts);const A=fn(v.auth,g);return new Xe(v.auth,"reauthViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}function Fn(){return(Fn=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Le(v.auth,f,ts);const A=fn(v.auth,g);return new Xe(v.auth,"linkViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}let Xe=(()=>{class y extends ku{constructor(g,v,A,R,z){super(g,v,R,z),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const v=yield g.execute();return U(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,h.Z)(function*(){q(1===g.filter.length,"Popup operations only handle one event");const v=Ts();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,A;this.pollId=null!==(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,xa.get())};g()}}return y.currentPopupAction=null,y})();const Qn=new Map;class Ud extends ku{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let v=Qn.get(g.auth._key());if(!v){try{const R=(yield function Fu(y,f){return Xn.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(A){v=()=>Promise.reject(A)}Qn.set(g.auth._key(),v)}return g.bypassAuthState||Qn.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const A=yield v.auth._redirectUserForId(f.eventId);if(A)return v.user=A,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Xn(){return(Xn=(0,h.Z)(function*(y,f){const g=Ma(f),v=Po(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(g));return yield v._remove(g),A})).apply(this,arguments)}function al(y,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,h.Z)(function*(y,f){return Po(y)._set(Ma(f),"true")})).apply(this,arguments)}function Bd(y,f){Qn.set(y._key(),f)}function Po(y){return ie(y._redirectPersistence)}function Ma(y){return W("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,h.Z)(function*(y,f,g){const v=In(y);Le(y,f,ts),yield v._initializationPromise;const A=fn(v,g);return yield al(A,v),A._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Le(v.auth,f,ts),yield v.auth._initializationPromise;const A=fn(v.auth,g);yield al(A,v.auth);const R=yield Et(v);return A._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Ce(){return(Ce=(0,h.Z)(function*(y,f,g){const v=(0,O.m9)(y);Le(v.auth,f,ts),yield v.auth._initializationPromise;const A=fn(v.auth,g);yield Ys(!1,v,f.providerId),yield al(A,v.auth);const R=yield Et(v);return A._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function nt(){return(nt=(0,h.Z)(function*(y,f){return yield In(y)._initializationPromise,Qe(y,f,!1)})).apply(this,arguments)}function Qe(y,f){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*(y,f,g=!1){const v=In(y),A=fn(v,f),z=yield new Ud(v,A,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,f)),z})).apply(this,arguments)}function Et(y){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(y){const f=Ts(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Ra{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Jn(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hi(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Hi(f)){const A=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Na(f))}saveEventToCache(f){this.cachedEventUids.add(Na(f)),this.lastProcessedEventTime=Date.now()}}function Na(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Hi({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function Gi(y){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(y,f={}){return mn(y,"GET","/v1/projects",f)})).apply(this,arguments)}const jd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yg=/^https?/;function Lu(){return(Lu=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Gi(y);for(const g of f)try{if(ul(g))return}catch{}Te(y,"unauthorized-domain")})).apply(this,arguments)}function ul(y){const f=ke(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!yg.test(g))return!1;if(jd.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const Ms=new Bt(3e4,6e4);function Lr(){const y=_n().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Oa=null;function Z0(y){return Oa=Oa||function $d(y){return new Promise((f,g)=>{var v,A,R;function z(){Lr(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Lr(),g(_e(y,"network-request-failed"))},timeout:Ms.get()})}if(null!==(A=null===(v=_n().gapi)||void 0===v?void 0:v.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(R=_n().gapi)||void 0===R||!R.load){const ce=Nu("iframefcb");return _n()[ce]=()=>{gapi.load?z():g(_e(y,"network-request-failed"))},Si(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Be=>g(Be))}z()}}).catch(f=>{throw Oa=null,f})}(y),Oa}const Fo=new Bt(5e3,15e3),ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hd(y){const f=y.config;U(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?lt(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},A=K0.get(y.config.apiHost);A&&(v.eid=A);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function Gd(){return Gd=(0,h.Z)(function*(y){const f=yield Z0(y),g=_n().gapi;return U(g,y,"internal-error"),f.open({where:document.body,url:Hd(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ka,dontclear:!0},v=>new Promise(function(){var A=(0,h.Z)(function*(R,z){yield v.restyle({setHideOnLeave:!1});const ce=_e(y,"network-request-failed"),Be=_n().setTimeout(()=>{z(ce)},Fo.get());function Ze(){_n().clearTimeout(Be),R(v)}v.ping(Ze).then(Ze,()=>{z(ce)})});return function(R,z){return A.apply(this,arguments)}}()))}),Gd.apply(this,arguments)}const vg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class os{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bu(y,f,g,v,A,R){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:se.SDK_VERSION,eventId:A};if(f instanceof ts){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Be,Ze]of Object.entries(R||{}))z[Be]=Ze}if(f instanceof Ws){const Be=f.getScopes().filter(Ze=>""!==Ze);Be.length>0&&(z.scopes=Be.join(","))}y.tenantId&&(z.tid=y.tenantId);const ce=z;for(const Be of Object.keys(ce))void 0===ce[Be]&&delete ce[Be];return`${function wg({config:y}){return y.emulator?lt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ce).slice(1)}`}const qd="webStorageSupport",sr=class Y0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bi,this._completeRedirectFn=Qe,this._overrideRedirectResult=Bd}_openPopup(f,g,v,A){var R=this;return(0,h.Z)(function*(){var z;q(null===(z=R.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ce=Bu(f,g,v,ke(),A);return function Uu(y,f,g,v=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let ce="";const Be=Object.assign(Object.assign({},vg),{width:v.toString(),height:A.toString(),top:R,left:z}),Ze=(0,O.z$)().toLowerCase();g&&(ce=qt(Ze)?"_blank":g),Je(Ze)&&(f=f||"http://localhost",Be.scrollbars="yes");const yt=Object.entries(Be).reduce(($n,[qi,Zu])=>`${$n}${qi}=${Zu},`,"");if(function Er(y=(0,O.z$)()){var f;return Zn(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ze)&&"_self"!==ce)return function Gy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",ce),new os(null);const ct=window.open(f||"",ce,yt);U(ct,y,"popup-blocked");try{ct.focus()}catch{}return new os(ct)}(f,ce,Ts())})()}_openRedirect(f,g,v,A){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function Ao(y){_n().location.href=y}(Bu(f,g,v,ke(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(q(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const v=yield function _g(y){return Gd.apply(this,arguments)}(f),A=new Ra(f);return v.register("authEvent",R=>(U(R?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=v,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(qd,{type:qd},A=>{var R;const z=null===(R=A?.[0])||void 0===R?void 0:R[qd];void 0!==z&&g(!!z),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function jn(y){return Lu.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return yf()||Pt()||Zn()}};class Lo{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return ye("unexpected MultiFactorSessionType")}}}class ju extends Lo{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ju(f)}_finalizeEnroll(f,g,v){return function mg(y,f){return mn(y,"POST","/v2/accounts/mfaEnrollment:finalize",ht(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function tl(y,f){return mn(y,"POST","/v2/accounts/mfaSignIn:finalize",ht(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ci=(()=>{class y{constructor(){}static assertion(g){return ju._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var cl="@firebase/auth";class Lf{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{f(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zi(){return window}function Bf(){return(Bf=(0,h.Z)(function*(y,f,g){var v;const{BuildInfo:A}=zi();q(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Kd(f.sessionId),z={};return Zn()?z.ibi=A.packageName:gt()?z.apn=A.packageName:Te(y,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=R,Bu(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(y){const{BuildInfo:f}=zi(),g={};Zn()?g.iosBundleId=f.packageName:gt()?g.androidPackageName=f.packageName:Te(y,"operation-not-supported-in-this-environment"),yield Gi(y,g)})).apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(y,f,g){const{cordova:v}=zi();let A=()=>{};try{yield new Promise((R,z)=>{let ce=null;function Be(){var ct;R();const $n=null===(ct=v.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof $n&&$n(),"function"==typeof g?.close&&g.close()}function Ze(){ce||(ce=window.setTimeout(()=>{z(_e(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Ze()}f.addPassiveListener(Be),document.addEventListener("resume",Ze,!1),gt()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{f.removePassiveListener(Be),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",yt,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function Kd(y){return fl.apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(y){const f=pl(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pl(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}(0,O.Pz)("authIdTokenMaxAge"),function ll(y){(0,se._registerComponent)(new fe.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:R,authDomain:z}=v.options;return((ce,Be)=>{U(R&&!R.includes(":"),"invalid-api-key",{appName:ce.name}),U(!z?.includes(":"),"argument-error",{appName:ce.name});const Ze={apiKey:R,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uu(y)},yt=new fd(ce,Be,Ze);return function Ve(y,f){const g=f?.persistence||[],v=(Array.isArray(g)?g:[g]).map(ie);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,f?.popupRedirectResolver)}(yt,g),yt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new fe.wA("auth-internal",f=>{const g=In(f.getProvider("auth").getImmediate());return new Lf(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(cl,"0.21.1",function Dr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(cl,"0.21.1","esm2017")}("Browser");class Fa extends Ra{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function bg(y){return ml.apply(this,arguments)}function ml(){return(ml=(0,h.Z)(function*(y){const f=yield $f()._get(Hf(y));return f&&(yield $f()._remove(Hf(y))),f})).apply(this,arguments)}function Wy(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function $f(){return ie(Kc)}function Hf(y){return W("authEvent",y.config.apiKey,y.name)}function La(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}const ro=class Dg{constructor(){this._redirectPersistence=Bi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qe,this._overrideRedirectResult=Bd}_initialize(f){var g=this;return(0,h.Z)(function*(){const v=f._key();let A=g.eventManagers.get(v);return A||(A=new Fa(f),g.eventManagers.set(v,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,A){var R=this;return(0,h.Z)(function*(){!function Eg(y){var f,g,v,A,R,z,ce,Be,Ze,yt;const ct=zi();U("function"==typeof(null===(f=ct?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=ct?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(R=null===(A=null===(v=ct?.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Be=null===(ce=null===(z=ct?.cordova)||void 0===z?void 0:z.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Be?void 0:Be.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(yt=null===(Ze=ct?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield R._initialize(f);yield z.initialized(),z.resetRedirect(),function Pf(){Qn.clear()}(),yield R._originValidation(f);const ce=function Yd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Wy(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(f,v,A);yield function Ig(y,f){return $f()._set(Hf(y),f)}(f,ce);const Be=yield function Uo(y,f,g){return Bf.apply(this,arguments)}(f,ce,g),Ze=yield function jf(y){const{cordova:f}=zi();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let A=null;v?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function go(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Be);return function Zd(y,f,g){return us.apply(this,arguments)}(f,z,Ze)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function hl(y){return Pa.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:A,BuildInfo:R}=zi(),z=setTimeout((0,h.Z)(function*(){yield bg(f),g.onEvent(Xd())}),500),ce=function(){var yt=(0,h.Z)(function*(ct){clearTimeout(z);const $n=yield bg(f);let qi=null;$n&&ct?.url&&(qi=function Qd(y,f){var g,v;const A=function Ky(y){const f=La(y),g=f.link?decodeURIComponent(f.link):void 0,v=La(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return La(A).link||A||v||g||y}(f);if(A.includes("/__/auth/callback")){const R=La(A),z=R.firebaseError?function Zy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ce=null===(v=null===(g=z?.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Be=ce?_e(ce):null;return Be?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}($n,ct.url)),g.onEvent(qi||Xd())});return function($n){return yt.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,ce);const Be=A,Ze=`${R.packageName.toLowerCase()}://`;zi().handleOpenURL=function(){var yt=(0,h.Z)(function*(ct){if(ct.toLowerCase().startsWith(Ze)&&ce({url:ct}),"function"==typeof Be)try{Be(ct)}catch($n){console.error($n)}});return function(ct){return yt.apply(this,arguments)}}()}};function Xd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Rs(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ua(y=(0,O.z$)()){return!("file:"!==Rs()&&"ionic:"!==Rs()&&"capacitor:"!==Rs()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gf(){try{const y=self.localStorage,f=Ts();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ba(y=(0,O.z$)()){return function yl(){return(0,O.w1)()&&11===document?.documentMode}()||function Sg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Jd()&&(0,O.hl)()}return!1}function Jd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gu(){return(function Hu(){return"http:"===Rs()||"https:"===Rs()}()||(0,O.ru)()||Ua())&&!function Yy(){return(0,O.b$)()||(0,O.UG)()}()&&Gf()&&!Jd()}function zf(){return Ua()&&typeof document<"u"}function Ns(){return(Ns=(0,h.Z)(function*(){return!!zf()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Cr={LOCAL:"local",NONE:"none",SESSION:"session"},ja=U,_l="persistence";function $a(y){return xi.apply(this,arguments)}function xi(){return(xi=(0,h.Z)(function*(y){yield y._initializationPromise;const f=Bo(),g=W(_l,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Bo(){var y;try{return(null===(y=function Ag(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const eh=U;class Os{constructor(){this.browserResolver=ie(sr),this.cordovaResolver=ie(ro),this.underlyingResolver=null,this._redirectPersistence=Bi,this._completeRedirectFn=Qe,this._overrideRedirectResult=Bd}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,A){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,A)})()}_openRedirect(f,g,v,A){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return zf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return eh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function zu(){return Ns.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function th(y){return y.unwrap()}function Wf(y){return xg(y)}function xg(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ol.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=vo;break;case"facebook.com":v=yd;break;case"github.com":v=kc;break;case"twitter.com":v=vd;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:ce,nonce:Be}=f;return R||z||A||ce?ce?g.startsWith("saml.")?Pc._create(g,ce):ri._fromParams({providerId:g,signInMethod:g,pendingToken:ce,idToken:A,accessToken:R}):new la(g).credential({idToken:A,accessToken:R,rawNonce:Be}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function li(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Ha(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Kf(y,function pr(y,f){var g;const v=(0,O.m9)(y),A=f;return U(f.customData.operationType,v,"argument-error"),U(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Wc._fromError(v,A)}(y,f));else if(v){const A=xg(f),R=f;A&&(R.credential=A,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Wf(g),additionalUserInfo:If(g),user:io.getOrCreate(A)}})}function Mg(y,f){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>li(y,g.confirm(v))}})).apply(this,arguments)}class Kf{constructor(f,g){this.resolver=g,this.auth=function nh(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return li(th(this.auth),this.resolver.resolveSignIn(f))}}class io{constructor(f){this._delegate=f,this.multiFactor=function bu(y){const f=(0,O.m9)(y);return oi.has(f)||oi.set(f,Cs._fromUser(f)),oi.get(f)}(f)}static getOrCreate(f){return io.USER_MAP.has(f)||io.USER_MAP.set(f,new io(f)),io.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return li(g.auth,kn(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,h.Z)(function*(){return Mg(v.auth,function xf(y,f,g){return Mf.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return li(g.auth,function an(y,f,g){return Fn.apply(this,arguments)}(g._delegate,f,Os))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield $a(In(g.auth)),function H(y,f,g){return function ee(y,f,g){return Ce.apply(this,arguments)}(y,f,g)}(g._delegate,f,Os)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return li(g.auth,Qs(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Mg(this.auth,function $y(y,f,g){return Rf.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return li(this.auth,function Hy(y,f,g){return kf.apply(this,arguments)}(this._delegate,f,Os))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield $a(In(g.auth)),function C(y,f,g){return function x(y,f,g){return F.apply(this,arguments)}(y,f,g)}(g._delegate,f,Os)})()}sendEmailVerification(f){return function jc(y,f){return Sd.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function da(y,f){return Ks.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function fg(y,f){return Gc((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Hc(y,f){return Gc((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function sl(y,f){return Of.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ns(y,f){return si.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Co(y,f,g){return bn.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}io.USER_MAP=new WeakMap;const Wu=U;let vl=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Wu(A,"invalid-api-key",{appName:g.name}),Wu(A,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?Os:void 0;this._delegate=v.initialize({options:{persistence:Rg(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Rc(y,f,g){const v=In(y);U(v._canInitEmulator,v,"emulator-config-failed"),U(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const A=!!g?.disableWarnings,R=sa(f),{host:z,port:ce}=function oa(y){const f=sa(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const R=A[1];return{host:R,port:Kt(v.substr(R.length+1))}}{const[R,z]=v.split(":");return{host:R,port:Kt(z)}}}(f);v.config.emulator={url:`${R}//${z}${null===ce?"":`:${ce}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Kn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function mu(y,f){return Vc.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return yu(this._delegate,g)}confirmPasswordReset(g,v){return function ya(y,f,g){return St.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var A=this;return(0,h.Z)(function*(){return li(A._delegate,function Pn(y,f,g){return Cd.apply(this,arguments)}(A._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function wu(y,f){return Do.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Td(y,f){return"EMAIL_SIGNIN"===ca.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){Wu(Gu(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Ye(y,f){return nt.apply(this,arguments)}(g._delegate,Os);return v?li(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Q0(y,f){In(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,A){const{next:R,error:z,complete:ce}=wl(g,v,A);return this._delegate.onAuthStateChanged(R,z,ce)}onIdTokenChanged(g,v,A){const{next:R,error:z,complete:ce}=wl(g,v,A);return this._delegate.onIdTokenChanged(R,z,ce)}sendSignInLinkToEmail(g,v){return function Yt(y,f,g){return Bc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function Vi(y,f,g){return ma.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,h.Z)(function*(){let A;switch(function qu(y,f){ja(Object.values(Cr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?ja(f!==Cr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?ja(f===Cr.NONE,y,"unsupported-persistence-type"):Jd()?ja(f===Cr.NONE||f===Cr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):ja(f===Cr.NONE||Gf(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Cr.SESSION:A=Bi;break;case Cr.LOCAL:A=(yield ie(No)._isAvailable())?No:Kc;break;case Cr.NONE:A=L;break;default:return Te("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return li(this._delegate,function Lc(y){return wf.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return li(this._delegate,An(this._delegate,g))}signInWithCustomToken(g){return li(this._delegate,function Ds(y,f){return ir.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return li(this._delegate,function De(y,f,g){return An((0,O.m9)(y),Oc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return li(this._delegate,function fr(y,f,g){return bo.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Mg(this._delegate,function on(y,f,g){return Sa.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,h.Z)(function*(){return Wu(Gu(),v._delegate,"operation-not-supported-in-this-environment"),li(v._delegate,function ko(y,f,g){return Pu.apply(this,arguments)}(v._delegate,g,Os))})()}signInWithRedirect(g){var v=this;return(0,h.Z)(function*(){return Wu(Gu(),v._delegate,"operation-not-supported-in-this-environment"),yield $a(v._delegate),function to(y,f,g){return function pt(y,f,g){return D.apply(this,arguments)}(y,f,g)}(v._delegate,g,Os)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Dd(y,f){return _u.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Cr,y})();function wl(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const A=v;return{next:z=>A(z&&io.getOrCreate(z)),error:f,complete:g}}function Rg(y,f){const g=function qf(y,f){const g=Bo();if(!g)return[];const v=W(_l,y,f);switch(g.getItem(v)){case Cr.NONE:return[L];case Cr.LOCAL:return[No,Bi];case Cr.SESSION:return[Bi];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(No)&&g.push(No),typeof window<"u")for(const v of[Kc,Bi])g.includes(v)||g.push(v);return g.includes(L)||g.push(L),g}class Yf{constructor(){this.providerId="phone",this._delegate=new ol(th(Q.Z.auth()))}static credential(f,g){return ol.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Yf.PHONE_SIGN_IN_METHOD=ol.PHONE_SIGN_IN_METHOD,Yf.PROVIDER_ID=ol.PROVIDER_ID;const Ng=U;class Qy{constructor(f,g,v=Q.Z.app()){var A;Ng(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Oo(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Og(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new vl(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Oc,FacebookAuthProvider:yd,GithubAuthProvider:kc,GoogleAuthProvider:vo,OAuthProvider:la,SAMLAuthProvider:Ci,PhoneAuthProvider:Yf,PhoneMultiFactorGenerator:ci,RecaptchaVerifier:Qy,TwitterAuthProvider:vd,Auth:vl,AuthCredential:Mn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.1")}(Q.Z)},8766:(st,Ee,k)=>{k.d(Ee,{Lj:()=>Te,X3:()=>Fe});var h=k(5861);let O,se;const fe=new WeakMap,de=new WeakMap,le=new WeakMap,j=new WeakMap,$=new WeakMap;let Ie={get(U,ye,q){if(U instanceof IDBTransaction){if("done"===ye)return de.get(U);if("objectStoreNames"===ye)return U.objectStoreNames||le.get(U);if("store"===ye)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return be(U[ye])},set:(U,ye,q)=>(U[ye]=q,!0),has:(U,ye)=>U instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in U};function he(U){return"function"==typeof U?function tt(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ye){return U.apply(we(this),ye),be(fe.get(this))}:function(...ye){return be(U.apply(we(this),ye))}:function(ye,...q){const Y=U.call(we(this),ye,...q);return le.set(Y,ye.sort?ye.sort():[ye]),be(Y)}}(U):(U instanceof IDBTransaction&&function Ue(U){if(de.has(U))return;const ye=new Promise((q,Y)=>{const ie=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Ve),U.removeEventListener("abort",Ve)},ne=()=>{q(),ie()},Ve=()=>{Y(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",ne),U.addEventListener("error",Ve),U.addEventListener("abort",Ve)});de.set(U,ye)}(U),((U,ye)=>ye.some(q=>U instanceof q))(U,function oe(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Ie):U)}function be(U){if(U instanceof IDBRequest)return function Z(U){const ye=new Promise((q,Y)=>{const ie=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Ve)},ne=()=>{q(be(U.result)),ie()},Ve=()=>{Y(U.error),ie()};U.addEventListener("success",ne),U.addEventListener("error",Ve)});return ye.then(q=>{q instanceof IDBCursor&&fe.set(q,U)}).catch(()=>{}),$.set(ye,U),ye}(U);if(j.has(U))return j.get(U);const ye=he(U);return ye!==U&&(j.set(U,ye),$.set(ye,U)),ye}const we=U=>$.get(U);function Fe(U,ye,{blocked:q,upgrade:Y,blocking:ie,terminated:ne}={}){const Ve=indexedDB.open(U,ye),ke=be(Ve);return Y&&Ve.addEventListener("upgradeneeded",ot=>{Y(be(Ve.result),ot.oldVersion,ot.newVersion,be(Ve.transaction))}),q&&Ve.addEventListener("blocked",()=>q()),ke.then(ot=>{ne&&ot.addEventListener("close",()=>ne()),ie&&ot.addEventListener("versionchange",()=>ie())}).catch(()=>{}),ke}function Te(U,{blocked:ye}={}){const q=indexedDB.deleteDatabase(U);return ye&&q.addEventListener("blocked",()=>ye()),be(q).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Le=new Map;function Oe(U,ye){if(!(U instanceof IDBDatabase)||ye in U||"string"!=typeof ye)return;if(Le.get(ye))return Le.get(ye);const q=ye.replace(/FromIndex$/,""),Y=ye!==q,ie=Se.includes(q);if(!(q in(Y?IDBIndex:IDBObjectStore).prototype)||!ie&&!_e.includes(q))return;const ne=function(){var Ve=(0,h.Z)(function*(ke,...ot){const en=this.transaction(ke,ie?"readwrite":"readonly");let ln=en.store;return Y&&(ln=ln.index(ot.shift())),(yield Promise.all([ln[q](...ot),ie&&en.done]))[0]});return function(ot){return Ve.apply(this,arguments)}}();return Le.set(ye,ne),ne}!function He(U){Ie=U(Ie)}(U=>({...U,get:(ye,q,Y)=>Oe(ye,q)||U.get(ye,q,Y),has:(ye,q)=>!!Oe(ye,q)||U.has(ye,q)}))},5861:(st,Ee,k)=>{function h(O,se,oe,ae,fe,de,le){try{var j=O[de](le),$=j.value}catch(Z){return void oe(Z)}j.done?se($):Promise.resolve($).then(ae,fe)}function Q(O){return function(){var se=this,oe=arguments;return new Promise(function(ae,fe){var de=O.apply(se,oe);function le($){h(de,ae,fe,le,j,"next",$)}function j($){h(de,ae,fe,le,j,"throw",$)}le(void 0)})}}k.d(Ee,{Z:()=>Q})}},st=>{st(st.s=2262)}]);