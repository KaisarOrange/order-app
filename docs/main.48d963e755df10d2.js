"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{2011:(st,Ie,P)=>{P.d(Ie,{Dh:()=>de,GT:()=>ae,cc:()=>Ee,hO:()=>Ve,on:()=>$,pX:()=>oe,xv:()=>le});var g=P(4650),Q=P(9260),N=P(2122);st=P.hmd(st);const se=["ngOnDestroy"],oe=(be,we,Le,Ce={})=>new Proxy(be,{get:(_e,Se)=>Le.runOutsideAngular(()=>{var Fe;if(be[Se])return!(null===(Fe=Ce?.spy)||void 0===Fe)&&Fe.get&&Ce.spy.get(Se,be[Se]),be[Se];if(se.indexOf(Se)>-1)return()=>{};const Ne=we.toPromise().then(V=>{const ye=V&&V[Se];return"function"==typeof ye?ye.bind(V):ye&&ye.then?ye.then(q=>Le.run(()=>q)):Le.run(()=>ye)});return new Proxy(()=>{},{get:(V,ye)=>Ne[ye],apply:(V,ye,q)=>Ne.then(Y=>{var ie;const ne=Y&&Y(...q);return!(null===(ie=Ce?.spy)||void 0===ie)&&ie.apply&&Ce.spy.apply(Se,q,ne),ne})})})}),ae=(be,we)=>{we.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(Ce=>{Object.defineProperty(be.prototype,Ce,Object.getOwnPropertyDescriptor(Le.prototype||Le,Ce))})})};class fe{constructor(we){return we}}const de=new g.OlP("angularfire2.app.options"),le=new g.OlP("angularfire2.app.name");function $(be,we,Le){const _e="object"==typeof Le&&Le||{};_e.name=_e.name||"string"==typeof Le&&Le||"[DEFAULT]";const Fe=Q.Z.apps.filter(Ne=>Ne&&Ne.name===_e.name)[0]||we.runOutsideAngular(()=>Q.Z.initializeApp(be,_e));try{JSON.stringify(be)!==JSON.stringify(Fe.options)&&j("error",`${Fe.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Fe)}const j=(be,...we)=>{(0,g.X6Q)()&&typeof console<"u"&&console[be](...we)},Z={provide:fe,useFactory:$,deps:[de,g.R0b,[new g.FiY,le]]};let Ve=(()=>{class be{constructor(Le){Q.Z.registerVersion("angularfire",N.q4.full,"core"),Q.Z.registerVersion("angularfire",N.q4.full,"app-compat"),Q.Z.registerVersion("angular",g.q4F.full,Le.toString())}static initializeApp(Le,Ce){return{ngModule:be,providers:[{provide:de,useValue:Le},{provide:le,useValue:Ce}]}}}return be.\u0275fac=function(Le){return new(Le||be)(g.LFG(g.Lbi))},be.\u0275mod=g.oAB({type:be}),be.\u0275inj=g.cJS({providers:[Z]}),be})();function Ee(be,we,Le,Ce,_e){const[,Se,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===be)||[];if(Se)return function He(be,we){try{return be.toString()===we.toString()}catch{return be===we}}(_e,Fe)||(he("error",`${we} was already initialized on the ${Le} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:Fe})),Se;{const Ne=Ce();return globalThis.\u0275AngularfireInstanceCache.push([be,Ne,_e]),Ne}}const tt=!!st.hot,he=(be,...we)=>{(0,g.X6Q)()&&typeof console<"u"&&console[be](...we)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(st,Ie,P)=>{P.d(Ie,{q4:()=>Mu,iC:()=>Sa,fc:()=>xf,HU:()=>Pu,vb:()=>Xe,JM:()=>Un});var g=P(4650),Q=P(259),N=P(5861),se=P(9681),oe=P(2090),ae=P(4859),fe=P(1877),de=P(8766);const le="@firebase/installations",$="0.6.1",Z=`w:${$}`,Ve="FIS_v2",we=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(b){return b instanceof oe.ZR&&b.code.includes("request-failed")}function Ce({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function _e(b){return{token:b.token,requestStatus:2,expiresIn:Y(b.expiresIn),creationTime:Date.now()}}function Se(b,T){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,N.Z)(function*(b,T){const L=(yield T.json()).error;return we.create("request-failed",{requestName:b,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ne({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function V(b,{refreshToken:T}){const x=Ne(b);return x.append("Authorization",function ie(b){return`${Ve} ${b}`}(T)),x}function ye(b){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function Y(b){return Number(b.replace("s","000"))}function ne(b,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:x}){const L=Ce(b),H=Ne(b),ee=T.getImmediate({optional:!0});if(ee){const Qe=yield ee.getHeartbeatsHeader();Qe&&H.append("x-firebase-client",Qe)}const Ye={method:"POST",headers:H,body:JSON.stringify({fid:x,authVersion:Ve,appId:b.appId,sdkVersion:Z})},nt=yield ye(()=>fetch(L,Ye));if(nt.ok){const Qe=yield nt.json();return{fid:Qe.fid||x,registrationStatus:2,refreshToken:Qe.refreshToken,authToken:_e(Qe.authToken)}}throw yield Se("Create Installation",nt)})).apply(this,arguments)}function Pe(b){return new Promise(T=>{setTimeout(T,b)})}const en=/^[cdef][\w-]{21}$/;function Mt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function Bt(b){return function ot(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return en.test(x)?x:""}catch{return""}}function lt(b){return`${b.appName}!${b.appId}`}const Qt=new Map;function yr(b,T){const x=lt(b);mn(x,T),function ni(b,T){const x=function Rr(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=b=>{mn(b.data.key,b.data.fid)}),zr}();x&&x.postMessage({key:b,fid:T}),function Mr(){0===Qt.size&&zr&&(zr.close(),zr=null)}()}(x,T)}function mn(b,T){const x=Qt.get(b);if(x)for(const L of x)L(T)}let zr=null;const _i="firebase-installations-store";let kr=null;function $s(){return kr||(kr=(0,de.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(_i)}})),kr}function dn(b,T){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,N.Z)(function*(b,T){const x=lt(b),H=(yield $s()).transaction(_i,"readwrite"),ee=H.objectStore(_i),Te=yield ee.get(x);return yield ee.put(T,x),yield H.done,(!Te||Te.fid!==T.fid)&&yr(b,T.fid),T})).apply(this,arguments)}function dt(b){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,N.Z)(function*(b){const T=lt(b),L=(yield $s()).transaction(_i,"readwrite");yield L.objectStore(_i).delete(T),yield L.done})).apply(this,arguments)}function vi(b,T){return vn.apply(this,arguments)}function vn(){return(vn=(0,N.Z)(function*(b,T){const x=lt(b),H=(yield $s()).transaction(_i,"readwrite"),ee=H.objectStore(_i),Te=yield ee.get(x),Ye=T(Te);return void 0===Ye?yield ee.delete(x):yield ee.put(Ye,x),yield H.done,Ye&&(!Te||Te.fid!==Ye.fid)&&yr(b,Ye.fid),Ye})).apply(this,arguments)}function Nr(b){return vs.apply(this,arguments)}function vs(){return(vs=(0,N.Z)(function*(b){let T;const x=yield vi(b.appConfig,L=>{const H=Ct(L),ee=ft(b,H);return T=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function Ct(b){return _r(b||{fid:Mt(),registrationStatus:0})}function ft(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(we.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function _t(b,T){return Qi.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Sn(b)}:{installationEntry:T}}function Qi(){return(Qi=(0,N.Z)(function*(b,T){try{const x=yield ne(b,T);return dn(b.appConfig,x)}catch(x){throw Le(x)&&409===x.customData.serverCode?yield dt(b.appConfig):yield dn(b.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Sn(b){return wn.apply(this,arguments)}function wn(){return(wn=(0,N.Z)(function*(b){let T=yield wi(b.appConfig);for(;1===T.registrationStatus;)yield Pe(100),T=yield wi(b.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield Nr(b);return L||x}return T})).apply(this,arguments)}function wi(b){return vi(b,T=>{if(!T)throw we.create("installation-not-found");return _r(T)})}function _r(b){return function Jo(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function rn(b,T){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:T},x){const L=Zt(b,x),H=V(b,x),ee=T.getImmediate({optional:!0});if(ee){const Qe=yield ee.getHeartbeatsHeader();Qe&&H.append("x-firebase-client",Qe)}const Ye={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Z,appId:b.appId}})},nt=yield ye(()=>fetch(L,Ye));if(nt.ok)return _e(yield nt.json());throw yield Se("Generate Auth Token",nt)})).apply(this,arguments)}function Zt(b,{fid:T}){return`${Ce(b)}/${T}/authTokens:generate`}function vr(b){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,N.Z)(function*(b,T=!1){let x;const L=yield vi(b.appConfig,ee=>{if(!Pt(ee))throw we.create("not-registered");const Te=ee.authToken;if(!T&&B(Te))return ee;if(1===Te.requestStatus)return x=$e(b,T),ee;{if(!navigator.onLine)throw we.create("app-offline");const Ye=W(ee);return x=wt(b,Ye),Ye}});return x?yield x:L.authToken})).apply(this,arguments)}function $e(b,T){return ve.apply(this,arguments)}function ve(){return(ve=(0,N.Z)(function*(b,T){let x=yield We(b.appConfig);for(;1===x.authToken.requestStatus;)yield Pe(100),x=yield We(b.appConfig);const L=x.authToken;return 0===L.requestStatus?vr(b,T):L})).apply(this,arguments)}function We(b){return vi(b,T=>{if(!Pt(T))throw we.create("not-registered");return function ge(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function wt(b,T){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,N.Z)(function*(b,T){try{const x=yield rn(b,T),L=Object.assign(Object.assign({},T),{authToken:x});return yield dn(b.appConfig,L),x}catch(x){if(!Le(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield dn(b.appConfig,L)}else yield dt(b.appConfig);throw x}})).apply(this,arguments)}function Pt(b){return void 0!==b&&2===b.registrationStatus}function B(b){return 2===b.requestStatus&&!function F(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function W(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function Je(){return(Je=(0,N.Z)(function*(b){const T=b,{installationEntry:x,registrationPromise:L}=yield Nr(T);return L?L.catch(console.error):vr(T).catch(console.error),x.fid})).apply(this,arguments)}function qt(){return(qt=(0,N.Z)(function*(b,T=!1){const x=b;return yield In(x),(yield vr(x,T)).token})).apply(this,arguments)}function In(b){return pt.apply(this,arguments)}function pt(){return(pt=(0,N.Z)(function*(b){const{registrationPromise:T}=yield Nr(b);T&&(yield T)})).apply(this,arguments)}function ou(b){return we.create("missing-app-config-values",{valueName:b})}const Sc="installations",En=b=>{const T=b.getProvider("app").getImmediate(),x=function ta(b){if(!b||!b.options)throw ou("App Configuration");if(!b.name)throw ou("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!b.options[x])throw ou(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},dd=b=>{const T=b.getProvider("app").getImmediate(),x=(0,se._getProvider)(T,Sc).getImmediate();return{getId:()=>function J(b){return Je.apply(this,arguments)}(x),getToken:H=>function Ot(b){return qt.apply(this,arguments)}(x,H)}};(function Ac(){(0,se._registerComponent)(new ae.wA(Sc,En,"PUBLIC")),(0,se._registerComponent)(new ae.wA("installations-internal",dd,"PRIVATE"))})(),(0,se.registerVersion)(le,$),(0,se.registerVersion)(le,$,"esm2017");const na="@firebase/remote-config",Mn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ia{constructor(T,x,L,H){this.client=T,this.storage=x,this.storageCache=L,this.logger=H}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,H=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${H}.`),H}fetch(T){var x=this;return(0,N.Z)(function*(){const[L,H]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(H&&x.isCachedDataFresh(T.cacheMaxAgeMillis,L))return H;T.eTag=H&&H.eTag;const ee=yield x.client.fetch(T),Te=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Te.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Te),ee})()}}function Ei(b=navigator){return b.languages&&b.languages[0]||b.language}class ws{constructor(T,x,L,H,ee,Te){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=L,this.projectId=H,this.apiKey=ee,this.appId=Te}fetch(T){var x=this;return(0,N.Z)(function*(){const[L,H]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},nt={sdk_version:x.sdkVersion,app_instance_id:L,app_instance_id_token:H,app_id:x.appId,language_code:Ei()},Qe={method:"POST",headers:Ye,body:JSON.stringify(nt)},kt=fetch(Te,Qe),It=new Promise((Qn,zi)=>{T.signal.addEventListener(()=>{const Dn=new Error("The operation was aborted.");Dn.name="AbortError",zi(Dn)})});let br;try{yield Promise.race([kt,It]),br=yield kt}catch(Qn){let zi="fetch-client-network";throw"AbortError"===Qn?.name&&(zi="fetch-timeout"),Mn.create(zi,{originalErrorMessage:Qn?.message})}let Vn=br.status;const xa=br.headers.get("ETag")||void 0;let Ra,Hi;if(200===br.status){let Qn;try{Qn=yield br.json()}catch(zi){throw Mn.create("fetch-client-parse",{originalErrorMessage:zi?.message})}Ra=Qn.entries,Hi=Qn.state}if("INSTANCE_STATE_UNSPECIFIED"===Hi?Vn=500:"NO_CHANGE"===Hi?Vn=304:("NO_TEMPLATE"===Hi||"EMPTY_CONFIG"===Hi)&&(Ra={}),304!==Vn&&200!==Vn)throw Mn.create("fetch-status",{httpStatus:Vn});return{status:Vn,eTag:xa,config:Ra}})()}}class ig{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,N.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:L}){var H=this;return(0,N.Z)(function*(){yield function Nn(b,T){return new Promise((x,L)=>{const H=Math.max(T-Date.now(),0),ee=setTimeout(x,H);b.addEventListener(()=>{clearTimeout(ee),L(Mn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const ee=yield H.client.fetch(T);return yield H.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function sn(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ee))throw ee;const Te={throttleEndTimeMillis:Date.now()+(0,oe.$s)(L),backoffCount:L+1};return yield H.storage.setThrottleMetadata(Te),H.attemptFetch(T,Te)}})()}}class Hs{constructor(T,x,L,H,ee){this.app=T,this._client=x,this._storageCache=L,this._storage=H,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function zs(b,T){const x=b.target.error||void 0;return Mn.create(T,{originalErrorMessage:x&&x?.message})}const Pr="app_namespace_store";class bi{constructor(T,x,L,H=function Wr(){return new Promise((b,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=L=>{T(zs(L,"storage-open"))},x.onsuccess=L=>{b(L.target.result)},x.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Pr,{keyPath:"compositeKey"})}}catch(x){T(Mn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=L,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,N.Z)(function*(){const L=yield x.openDbPromise;return new Promise((H,ee)=>{const Ye=L.transaction([Pr],"readonly").objectStore(Pr),nt=x.createCompositeKey(T);try{const Qe=Ye.get(nt);Qe.onerror=kt=>{ee(zs(kt,"storage-get"))},Qe.onsuccess=kt=>{const It=kt.target.result;H(It?It.value:void 0)}}catch(Qe){ee(Mn.create("storage-get",{originalErrorMessage:Qe?.message}))}})})()}set(T,x){var L=this;return(0,N.Z)(function*(){const H=yield L.openDbPromise;return new Promise((ee,Te)=>{const nt=H.transaction([Pr],"readwrite").objectStore(Pr),Qe=L.createCompositeKey(T);try{const kt=nt.put({compositeKey:Qe,value:x});kt.onerror=It=>{Te(zs(It,"storage-set"))},kt.onsuccess=()=>{ee()}}catch(kt){Te(Mn.create("storage-set",{originalErrorMessage:kt?.message}))}})})()}delete(T){var x=this;return(0,N.Z)(function*(){const L=yield x.openDbPromise;return new Promise((H,ee)=>{const Ye=L.transaction([Pr],"readwrite").objectStore(Pr),nt=x.createCompositeKey(T);try{const Qe=Ye.delete(nt);Qe.onerror=kt=>{ee(zs(kt,"storage-delete"))},Qe.onsuccess=()=>{H()}}catch(Qe){ee(Mn.create("storage-delete",{originalErrorMessage:Qe?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class sa{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const x=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),H=T.storage.getActiveConfig(),ee=yield x;ee&&(T.lastFetchStatus=ee);const Te=yield L;Te&&(T.lastSuccessfulFetchTimestampMillis=Te);const Ye=yield H;Ye&&(T.activeConfig=Ye)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function oa(){return ff.apply(this,arguments)}function ff(){return(ff=(0,N.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Di(){(0,se._registerComponent)(new ae.wA("remote-config",function b(T,{instanceIdentifier:x}){const L=T.getProvider("app").getImmediate(),H=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mn.create("registration-window");if(!(0,oe.hl)())throw Mn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Te,appId:Ye}=L.options;if(!ee)throw Mn.create("registration-project-id");if(!Te)throw Mn.create("registration-api-key");if(!Ye)throw Mn.create("registration-app-id");const nt=new bi(Ye,L.name,x=x||"firebase"),Qe=new sa(nt),kt=new fe.Yd(na);kt.logLevel=fe.in.ERROR;const It=new ws(H,se.SDK_VERSION,x,ee,Te,Ye),br=new ig(It,nt),Vn=new ia(br,nt,Qe,kt),xa=new Hs(L,Vn,Qe,nt,kt);return function yn(b){const T=(0,oe.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(xa),xa},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(na,"0.4.1"),(0,se.registerVersion)(na,"0.4.1","esm2017")}();const Rc="/firebase-messaging-sw.js",Ji="/firebase-cloud-messaging-push-scope",Gs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pd="google.c.a.c_id",yo="google.c.a.c_l",Mc="google.c.a.ts",gd="google.c.a.e";var uu=(()=>{return(b=uu||(uu={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",uu;var b})();function Ti(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function md(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),H=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)H[ee]=L.charCodeAt(ee);return H}const Nc="fcm_token_details_db",Or="fcm_token_object_Store";function _d(b){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Nc))return null;let T=null;return(yield(0,de.X3)(Nc,5,{upgrade:(L=(0,N.Z)(function*(H,ee,Te,Ye){var nt;if(ee<2||!H.objectStoreNames.contains(Or))return;const Qe=Ye.objectStore(Or),kt=yield Qe.index("fcmSenderId").get(b);if(yield Qe.clear(),kt)if(2===ee){const It=kt;if(!It.auth||!It.p256dh||!It.endpoint)return;T={token:It.fcmToken,createTime:null!==(nt=It.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:Ti(It.vapidKey)}}}else if(3===ee){const It=kt;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Ti(It.auth),p256dh:Ti(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Ti(It.vapidKey)}}}else if(4===ee){const It=kt;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Ti(It.auth),p256dh:Ti(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Ti(It.vapidKey)}}}}),function(ee,Te,Ye,nt){return L.apply(this,arguments)})})).close(),yield(0,de.Lj)(Nc),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),pf(T)?T:null;var L}),Pc.apply(this,arguments)}function pf(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Is="firebase-messaging-store";let ua=null;function Ws(){return ua||(ua=(0,de.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Is)}})),ua}function cu(b){return lu.apply(this,arguments)}function lu(){return(lu=(0,N.Z)(function*(b){const T=hu(b),L=yield(yield Ws()).transaction(Is).objectStore(Is).get(T);if(L)return L;{const H=yield _d(b.appConfig.senderId);if(H)return yield Zs(b,H),H}})).apply(this,arguments)}function Zs(b,T){return ca.apply(this,arguments)}function ca(){return(ca=(0,N.Z)(function*(b,T){const x=hu(b),H=(yield Ws()).transaction(Is,"readwrite");return yield H.objectStore(Is).put(T,x),yield H.done,T})).apply(this,arguments)}function du(b){return _o.apply(this,arguments)}function _o(){return(_o=(0,N.Z)(function*(b){const T=hu(b),L=(yield Ws()).transaction(Is,"readwrite");yield L.objectStore(Is).delete(T),yield L.done})).apply(this,arguments)}function hu({appConfig:b}){return b.appId}const An=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function la(b,T){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,N.Z)(function*(b,T){const x=yield Es(b),L=da(T),H={method:"POST",headers:x,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(wo(b.appConfig),H)).json()}catch(Te){throw An.create("token-subscribe-failed",{errorInfo:Te?.toString()})}if(ee.error)throw An.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw An.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function vo(b,T){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,N.Z)(function*(b,T){const x=yield Es(b),L=da(T.subscriptionOptions),H={method:"PATCH",headers:x,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${wo(b.appConfig)}/${T.token}`,H)).json()}catch(Te){throw An.create("token-update-failed",{errorInfo:Te?.toString()})}if(ee.error)throw An.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw An.create("token-update-no-token");return ee.token})).apply(this,arguments)}function hr(b,T){return wd.apply(this,arguments)}function wd(){return(wd=(0,N.Z)(function*(b,T){const L={method:"DELETE",headers:yield Es(b)};try{const ee=yield(yield fetch(`${wo(b.appConfig)}/${T}`,L)).json();if(ee.error)throw An.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(H){throw An.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function wo({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Es(b){return nr.apply(this,arguments)}function nr(){return(nr=(0,N.Z)(function*({appConfig:b,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function da({p256dh:b,auth:T,endpoint:x,vapidKey:L}){const H={web:{endpoint:x,auth:T,p256dh:b}};return L!==Gs&&(H.web.applicationPubKey=L),H}const ha=6048e5;function fu(b){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,N.Z)(function*(b){const T=yield Lc(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Ti(T.getKey("auth")),p256dh:Ti(T.getKey("p256dh"))},L=yield cu(b.firebaseDependencies);if(L){if(mu(L.subscriptionOptions,x))return Date.now()>=L.createTime+ha?St(b,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield hr(b.firebaseDependencies,L.token)}catch(H){console.warn(H)}return Oc(b.firebaseDependencies,x)}return Oc(b.firebaseDependencies,x)})).apply(this,arguments)}function fa(b){return pa.apply(this,arguments)}function pa(){return(pa=(0,N.Z)(function*(b){const T=yield cu(b.firebaseDependencies);T&&(yield hr(b.firebaseDependencies,T.token),yield du(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function St(b,T){return pu.apply(this,arguments)}function pu(){return(pu=(0,N.Z)(function*(b,T){try{const x=yield vo(b.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield Zs(b.firebaseDependencies,L),x}catch(x){throw yield fa(b),x}})).apply(this,arguments)}function Oc(b,T){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(b,T){const L={token:yield la(b,T),createTime:Date.now(),subscriptionOptions:T};return yield Zs(b,L),L.token})).apply(this,arguments)}function Lc(b,T){return Id.apply(this,arguments)}function Id(){return(Id=(0,N.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:md(T)})})).apply(this,arguments)}function mu(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function On(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Ed(b,T){if(!T.notification)return;b.notification={};const x=T.notification.title;x&&(b.notification.title=x);const L=T.notification.body;L&&(b.notification.body=L);const H=T.notification.image;H&&(b.notification.image=H);const ee=T.notification.icon;ee&&(b.notification.icon=ee)}(T,b),function De(b,T){T.data&&(b.data=T.data)}(T,b),function Yt(b,T){var x,L,H,ee,Te;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Ye=null!==(H=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==H?H:null===(ee=T.notification)||void 0===ee?void 0:ee.click_action;Ye&&(b.fcmOptions.link=Ye);const nt=null===(Te=T.fcmOptions)||void 0===Te?void 0:Te.analytics_label;nt&&(b.fcmOptions.analyticsLabel=nt)}(T,b),T}function Fc(b){return"object"==typeof b&&!!b&&pd in b}function bd(b,T){const x=[];for(let L=0;L<b.length;L++)x.push(b.charAt(L)),L<T.length&&x.push(T.charAt(L));return x.join("")}function Io(b){return An.create("missing-app-config-values",{valueName:b})}bd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),bd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yu{constructor(T,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function fr(b){if(!b||!b.options)throw Io("App Configuration Object");if(!b.name)throw Io("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const L of T)if(!x[L])throw Io(L);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:H,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function ii(b){return _u.apply(this,arguments)}function _u(){return(_u=(0,N.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Rc,{scope:Ji}),b.swRegistration.update().catch(()=>{})}catch(T){throw An.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Eo(b,T){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,N.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield ii(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Dd(b,T){return bo.apply(this,arguments)}function bo(){return(bo=(0,N.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Gs)})).apply(this,arguments)}function Vi(){return(Vi=(0,N.Z)(function*(b,T){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield Dd(b,T?.vapidKey),yield Eo(b,T?.serviceWorkerRegistration),fu(b)})).apply(this,arguments)}function Vc(b,T,x){return es.apply(this,arguments)}function es(){return(es=(0,N.Z)(function*(b,T,x){const L=si(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[pd],message_name:x[yo],message_time:x[Mc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function si(b){switch(b){case uu.NOTIFICATION_CLICKED:return"notification_open";case uu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bc(){return(Bc=(0,N.Z)(function*(b,T){const x=T.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===uu.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(On(x)):b.onMessageHandler.next(On(x)));const L=x.data;Fc(L)&&"1"===L[gd]&&(yield Vc(b,x.messageType,L))})).apply(this,arguments)}const $c="@firebase/messaging",Td=b=>{const T=new yu(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function sg(b,T){return Bc.apply(this,arguments)}(T,x)),T},Ys=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:L=>function bn(b,T){return Vi.apply(this,arguments)}(T,L)}};function jc(){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,N.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cd(){(0,se._registerComponent)(new ae.wA("messaging",Td,"PUBLIC")),(0,se._registerComponent)(new ae.wA("messaging-internal",Ys,"PRIVATE")),(0,se.registerVersion)($c,"0.12.1"),(0,se.registerVersion)($c,"0.12.1","esm2017")}();const Hc="analytics",Kr="firebase_id",Do="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zc="https://www.googletagmanager.com/gtag/js",pr=new fe.Yd("@firebase/analytics");function yf(b){return Promise.all(b.map(T=>T.catch(x=>x)))}function ug(b,T){const x=document.createElement("script");x.src=`${zc}?l=${b}&id=${T}`,x.async=!0,document.head.appendChild(x)}function bs(b,T,x,L,H,ee){return oi.apply(this,arguments)}function oi(){return(oi=(0,N.Z)(function*(b,T,x,L,H,ee){const Te=L[H];try{if(Te)yield T[Te];else{const nt=(yield yf(x)).find(Qe=>Qe.measurementId===H);nt&&(yield T[nt.appId])}}catch(Ye){pr.error(Ye)}b("config",H,ee)})).apply(this,arguments)}function Iu(b,T,x,L,H){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,N.Z)(function*(b,T,x,L,H){try{let ee=[];if(H&&H.send_to){let Te=H.send_to;Array.isArray(Te)||(Te=[Te]);const Ye=yield yf(x);for(const nt of Te){const Qe=Ye.find(It=>It.measurementId===nt),kt=Qe&&T[Qe.appId];if(!kt){ee=[];break}ee.push(kt)}}0===ee.length&&(ee=Object.values(T)),yield Promise.all(ee),b("event",L,H||{})}catch(ee){pr.error(ee)}})).apply(this,arguments)}function To(b){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(zc)&&x.src.includes(b))return x;return null}const ai=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wc=new class Bi{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function xd(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ds(b){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,N.Z)(function*(b){var T;const{appId:x,apiKey:L}=b,H={method:"GET",headers:xd(L)},ee=Do.replace("{app-id}",x),Te=yield fetch(ee,H);if(200!==Te.status&&304!==Te.status){let Ye="";try{const nt=yield Te.json();null!==(T=nt.error)&&void 0!==T&&T.message&&(Ye=nt.error.message)}catch{}throw ai.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:Ye})}return Te.json()})).apply(this,arguments)}function _n(b){return Co.apply(this,arguments)}function Co(){return(Co=(0,N.Z)(function*(b,T=Wc,x){const{appId:L,apiKey:H,measurementId:ee}=b.options;if(!L)throw ai.create("no-app-id");if(!H){if(ee)return{measurementId:ee,appId:L};throw ai.create("no-api-key")}const Te=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new bu;return setTimeout((0,N.Z)(function*(){Ye.abort()}),void 0!==x?x:6e4),So({appId:L,apiKey:H,measurementId:ee},Te,Ye,T)})).apply(this,arguments)}function So(b,T,x){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,N.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:x},L,H=Wc){var ee;const{appId:Te,measurementId:Ye}=b;try{yield Eu(L,T)}catch(nt){if(Ye)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${nt?.message}]`),{appId:Te,measurementId:Ye};throw nt}try{const nt=yield Ds(b);return H.deleteThrottleMetadata(Te),nt}catch(nt){const Qe=nt;if(!Rd(Qe)){if(H.deleteThrottleMetadata(Te),Ye)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Qe?.message}]`),{appId:Te,measurementId:Ye};throw nt}const kt=503===Number(null===(ee=Qe?.customData)||void 0===ee?void 0:ee.httpStatus)?(0,oe.$s)(x,H.intervalMillis,30):(0,oe.$s)(x,H.intervalMillis),It={throttleEndTimeMillis:Date.now()+kt,backoffCount:x+1};return H.setThrottleMetadata(Te,It),pr.debug(`Calling attemptFetch again in ${kt} millis`),So(b,It,L,H)}})).apply(this,arguments)}function Eu(b,T){return new Promise((x,L)=>{const H=Math.max(T-Date.now(),0),ee=setTimeout(x,H);b.addEventListener(()=>{clearTimeout(ee),L(ai.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Rd(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class bu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Du,Ss;function ts(){return(ts=(0,N.Z)(function*(b,T,x,L,H){if(H&&H.global)b("event",x,L);else{const ee=yield T;b("event",x,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function Cu(b){Ss=b}function Su(b){Du=b}function Yc(){return Au.apply(this,arguments)}function Au(){return(Au=(0,N.Z)(function*(){if(!(0,oe.hl)())return pr.warn(ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(b){return pr.warn(ai.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Qc(){return(Qc=(0,N.Z)(function*(b,T,x,L,H,ee,Te){var Ye;const nt=_n(b);nt.then(Vn=>{x[Vn.measurementId]=Vn.appId,b.options.measurementId&&Vn.measurementId!==b.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vn=>pr.error(Vn)),T.push(nt);const Qe=Yc().then(Vn=>{if(Vn)return L.getId()}),[kt,It]=yield Promise.all([nt,Qe]);To(ee)||ug(ee,kt.measurementId),Ss&&(H("consent","default",Ss),Cu(void 0)),H("js",new Date);const br=null!==(Ye=Te?.config)&&void 0!==Ye?Ye:{};return br.origin="firebase",br.update=!0,null!=It&&(br[Kr]=It),H("config",kt.measurementId,br),Du&&(H("set",Du),Su(void 0)),kt.measurementId})).apply(this,arguments)}class Xc{constructor(T){this.app=T}_delete(){return delete ns[this.app.options.appId],Promise.resolve()}}let ns={},xu=[];const Ia={};let Jc,Ai,Si="dataLayer",ui=!1;function kd(b,T,x){!function Md(){const b=[];if((0,oe.ru)()&&b.push("This is a browser extension environment."),(0,oe.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((L,H)=>`(${H+1}) ${L}`).join(" "),x=ai.create("invalid-analytics-context",{errorInfo:T});pr.warn(x.message)}}();const L=b.options.appId;if(!L)throw ai.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw ai.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ns[L])throw ai.create("already-exists",{id:L});if(!ui){!function _f(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Si);const{wrappedGtag:ee,gtagCore:Te}=function Ad(b,T,x,L,H){let ee=function(...Te){window[L].push(arguments)};return window[H]&&"function"==typeof window[H]&&(ee=window[H]),window[H]=function Gc(b,T,x,L){function ee(){return(ee=(0,N.Z)(function*(Te,Ye,nt){try{"event"===Te?yield Iu(b,T,x,Ye,nt):"config"===Te?yield bs(b,T,x,L,Ye,nt):"consent"===Te?b("consent","update",nt):b("set",Ye)}catch(Qe){pr.error(Qe)}})).apply(this,arguments)}return function H(Te,Ye,nt){return ee.apply(this,arguments)}}(ee,b,T,x),{gtagCore:ee,wrappedGtag:window[H]}}(ns,xu,Ia,Si,"gtag");Ai=ee,Jc=Te,ui=!0}return ns[L]=function Ro(b,T,x,L,H,ee,Te){return Qc.apply(this,arguments)}(b,xu,Ia,T,Jc,Si,x),new Xc(b)}function el(){return $i.apply(this,arguments)}function $i(){return($i=(0,N.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const on="@firebase/analytics";!function bf(){(0,se._registerComponent)(new ae.wA(Hc,(T,{options:x})=>kd(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new ae.wA("analytics-internal",function b(T){try{const x=T.getProvider(Hc).getImmediate();return{logEvent:(L,H,ee)=>function Xs(b,T,x,L){b=(0,oe.m9)(b),function Ao(b,T,x,L,H){return ts.apply(this,arguments)}(Ai,ns[b.app.options.appId],T,x,L).catch(H=>pr.error(H))}(x,L,H,ee)}}catch(x){throw ai.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(on,"0.9.1"),(0,se.registerVersion)(on,"0.9.1","esm2017")}();var Df=P(4408),Tf=P(7565);const Cf=new class tl extends Tf.v{}(class Ny extends Df.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,x,L):(T.flush(this),0)}});var Sf=P(4986),rl=P(8505),fn=P(5363),Ta=P(9468);const Mu=new g.GfV("7.5.0"),Od="__angularfire_symbol__analyticsIsSupportedValue",Qr="__angularfire_symbol__analyticsIsSupported",ji="__angularfire_symbol__remoteConfigIsSupportedValue",ku="__angularfire_symbol__remoteConfigIsSupported",Ca="__angularfire_symbol__messagingIsSupportedValue",ko="__angularfire_symbol__messagingIsSupported";function Un(b,T,x){if(T){if(1===T.length)return T[0];const ee=T.filter(Te=>Te.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Qr]||(globalThis[Qr]=el().then(b=>globalThis[Od]=b).catch(()=>globalThis[Od]=!1)),globalThis[ko]||(globalThis[ko]=jc().then(b=>globalThis[Ca]=b).catch(()=>globalThis[Ca]=!1)),globalThis[ku]||(globalThis[ku]=oa().then(b=>globalThis[ji]=b).catch(()=>globalThis[ji]=!1));const Xe=(b,T)=>{const x=T?[T]:(0,Q.C6)(),L=[];return x.forEach(H=>{H.container.getProvider(b).instances.forEach(Te=>{L.includes(Te)||L.push(Te)})}),L};function Yn(){}class rr{constructor(T,x=Cf){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,L){const H=this.zone;return this.delegate.schedule(function(Te){H.runGuarded(()=>{T.apply(this,[Te])})},x,L)}}class Ld{constructor(T){this.zone=T,this.task=null}call(T,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yn,{},Yn,Yn)),x.pipe((0,rl.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pu=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new rr(Zone.current)),this.insideAngular=x.run(()=>new rr(Zone.current,Sf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(g.LFG(g.R0b))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ir(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function xf(b){return b.pipe((0,fn.Q)(ir().outsideAngular))}function Sa(b){return ir(),function Aa(b){return function(x){return(x=x.lift(new Ld(b.ngZone))).pipe((0,Ta.R)(b.outsideAngular),(0,fn.Q)(b.insideAngular))}}(ir())(b)}},2090:(st,Ie,P)=>{P.d(Ie,{$s:()=>We,BH:()=>_e,G6:()=>ot,L:()=>de,LL:()=>Qt,Pz:()=>Ce,Sg:()=>Se,UG:()=>V,US:()=>ae,ZB:()=>j,ZR:()=>lt,aH:()=>Le,b$:()=>Y,eu:()=>ln,hl:()=>en,jU:()=>ye,m9:()=>Pt,ne:()=>vs,pd:()=>vn,r3:()=>_s,ru:()=>q,tV:()=>le,uI:()=>Ne,vZ:()=>dn,w1:()=>ne,xO:()=>Yi,xb:()=>kr,z$:()=>Fe,zI:()=>Mt,zd:()=>vi});const se=function(B){const F=[];let W=0;for(let ge=0;ge<B.length;ge++){let J=B.charCodeAt(ge);J<128?F[W++]=J:J<2048?(F[W++]=J>>6|192,F[W++]=63&J|128):55296==(64512&J)&&ge+1<B.length&&56320==(64512&B.charCodeAt(ge+1))?(J=65536+((1023&J)<<10)+(1023&B.charCodeAt(++ge)),F[W++]=J>>18|240,F[W++]=J>>12&63|128,F[W++]=J>>6&63|128,F[W++]=63&J|128):(F[W++]=J>>12|224,F[W++]=J>>6&63|128,F[W++]=63&J|128)}return F},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let J=0;J<B.length;J+=3){const Je=B[J],Ot=J+1<B.length,qt=Ot?B[J+1]:0,In=J+2<B.length,pt=In?B[J+2]:0;let Zn=(15&qt)<<2|pt>>6,fo=63&pt;In||(fo=64,Ot||(Zn=64)),ge.push(W[Je>>2],W[(3&Je)<<4|qt>>4],W[Zn],W[fo])}return ge.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(se(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let W=0,ge=0;for(;W<B.length;){const J=B[W++];if(J<128)F[ge++]=String.fromCharCode(J);else if(J>191&&J<224){const Je=B[W++];F[ge++]=String.fromCharCode((31&J)<<6|63&Je)}else if(J>239&&J<365){const In=((7&J)<<18|(63&B[W++])<<12|(63&B[W++])<<6|63&B[W++])-65536;F[ge++]=String.fromCharCode(55296+(In>>10)),F[ge++]=String.fromCharCode(56320+(1023&In))}else{const Je=B[W++],Ot=B[W++];F[ge++]=String.fromCharCode((15&J)<<12|(63&Je)<<6|63&Ot)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const W=F?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let J=0;J<B.length;){const Je=W[B.charAt(J++)],qt=J<B.length?W[B.charAt(J)]:0;++J;const pt=J<B.length?W[B.charAt(J)]:64;++J;const jt=J<B.length?W[B.charAt(J)]:64;if(++J,null==Je||null==qt||null==pt||null==jt)throw Error();ge.push(Je<<2|qt>>4),64!==pt&&(ge.push(qt<<4&240|pt>>2),64!==jt&&ge.push(pt<<6&192|jt))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},de=function(B){return function(B){const F=se(B);return ae.encodeByteArray(F,!0)}(B).replace(/\./g,"")},le=function(B){try{return ae.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function j(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const W in F)!F.hasOwnProperty(W)||!Z(W)||(B[W]=j(B[W],F[W]));return B}function Z(B){return"__proto__"!==B}const he=()=>{try{return function Ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&le(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Le=()=>{var B;return null===(B=he())||void 0===B?void 0:B.config},Ce=B=>{var F;return null===(F=he())||void 0===F?void 0:F[`_${B}`]};class _e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,W)=>{this.resolve=F,this.reject=W})}wrapCallback(F){return(W,ge)=>{W?this.reject(W):this.resolve(ge),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(W):F(W,ge))}}}function Se(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=F||"demo-project",J=B.iat||0,Je=B.sub||B.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ot=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:J,exp:J+3600,auth_time:J,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},B);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(Ot)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function V(){var B;const F=null===(B=he())||void 0===B?void 0:B.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function q(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ne(){const B=Fe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function ot(){return!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function en(){try{return"object"==typeof indexedDB}catch{return!1}}function ln(){return new Promise((B,F)=>{try{let W=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ge);J.onsuccess=()=>{J.result.close(),W||self.indexedDB.deleteDatabase(ge),B(!0)},J.onupgradeneeded=()=>{W=!1},J.onerror=()=>{var Je;F((null===(Je=J.error)||void 0===Je?void 0:Je.message)||"")}}catch(W){F(W)}})}function Mt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class lt extends Error{constructor(F,W,ge){super(W),this.code=F,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}}class Qt{constructor(F,W,ge){this.service=F,this.serviceName=W,this.errors=ge}create(F,...W){const ge=W[0]||{},J=`${this.service}/${F}`,Je=this.errors[F],Ot=Je?function yr(B,F){return B.replace(xr,(W,ge)=>{const J=F[ge];return null!=J?String(J):`<${ge}?>`})}(Je,ge):"Error";return new lt(J,`${this.serviceName}: ${Ot} (${J}).`,ge)}}const xr=/\{\$([^}]+)}/g;function _s(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function kr(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function dn(B,F){if(B===F)return!0;const W=Object.keys(B),ge=Object.keys(F);for(const J of W){if(!ge.includes(J))return!1;const Je=B[J],Ot=F[J];if(Gr(Je)&&Gr(Ot)){if(!dn(Je,Ot))return!1}else if(Je!==Ot)return!1}for(const J of ge)if(!W.includes(J))return!1;return!0}function Gr(B){return null!==B&&"object"==typeof B}function Yi(B){const F=[];for(const[W,ge]of Object.entries(B))Array.isArray(ge)?ge.forEach(J=>{F.push(encodeURIComponent(W)+"="+encodeURIComponent(J))}):F.push(encodeURIComponent(W)+"="+encodeURIComponent(ge));return F.length?"&"+F.join("&"):""}function vi(B){const F={};return B.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[J,Je]=ge.split("=");F[decodeURIComponent(J)]=decodeURIComponent(Je)}}),F}function vn(B){const F=B.indexOf("?");if(!F)return"";const W=B.indexOf("#",F);return B.substring(F,W>0?W:void 0)}function vs(B,F){const W=new Ct(B,F);return W.subscribe.bind(W)}class Ct{constructor(F,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{F(this)}).catch(ge=>{this.error(ge)})}next(F){this.forEachObserver(W=>{W.next(F)})}error(F){this.forEachObserver(W=>{W.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,W,ge){let J;if(void 0===F&&void 0===W&&void 0===ge)throw new Error("Missing Observer.");J=function _t(B,F){if("object"!=typeof B||null===B)return!1;for(const W of F)if(W in B&&"function"==typeof B[W])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:W,complete:ge},void 0===J.next&&(J.next=Qi),void 0===J.error&&(J.error=Qi),void 0===J.complete&&(J.complete=Qi);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Je}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,F)}sendOne(F,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{W(this.observers[F])}catch(ge){typeof console<"u"&&console.error&&console.error(ge)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qi(){}function We(B,F=1e3,W=2){const ge=F*Math.pow(W,B),J=Math.round(.5*ge*(Math.random()-.5)*2);return Math.min(144e5,ge+J)}function Pt(B){return B&&B._delegate?B._delegate:B}},3652:(st,Ie,P)=>{var g=P(4650);let Q=null;function N(){return Q}class oe{}const ae=new g.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function de(){return(0,g.LFG)($)}()},providedIn:"platform"}),n})();const le=new g.OlP("Location Initialized");let $=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){j()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){j()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Z(){return new $((0,g.LFG)(ae))}()},providedIn:"platform"}),n})();function j(){return!!window.history.pushState}function Ve(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let tt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(be)},providedIn:"root"}),n})();const he=new g.OlP("appBaseHref");let be=(()=>{class n extends tt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ve(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+He(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+He(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe),g.LFG(he,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),we=(()=>{class n extends tt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ve(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe),g.LFG(he,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Fe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ee(Se(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function _e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,Se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=He,n.joinWithSlash=Ve,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(g.LFG(tt))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ce(){return new Le((0,g.LFG)(tt))}()},providedIn:"root"}),n})();function Se(n){return n.replace(/\/index.html$/,"")}const Ne={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var V=(()=>((V=V||{})[V.Decimal=0]="Decimal",V[V.Percent=1]="Percent",V[V.Currency=2]="Currency",V[V.Scientific=3]="Scientific",V))(),ne=(()=>((ne=ne||{})[ne.Decimal=0]="Decimal",ne[ne.Group=1]="Group",ne[ne.List=2]="List",ne[ne.PercentSign=3]="PercentSign",ne[ne.PlusSign=4]="PlusSign",ne[ne.MinusSign=5]="MinusSign",ne[ne.Exponential=6]="Exponential",ne[ne.SuperscriptingExponent=7]="SuperscriptingExponent",ne[ne.PerMille=8]="PerMille",ne[ne.Infinity=9]="Infinity",ne[ne.NaN=10]="NaN",ne[ne.TimeSeparator=11]="TimeSeparator",ne[ne.CurrencyDecimal=12]="CurrencyDecimal",ne[ne.CurrencyGroup=13]="CurrencyGroup",ne))();function ht(n,e){const t=(0,g.cg1)(n),r=t[g.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ne.CurrencyDecimal)return t[g.wAp.NumberSymbols][ne.Decimal];if(e===ne.CurrencyGroup)return t[g.wAp.NumberSymbols][ne.Group]}return r}const In=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ou(n,e,t,r,s){const l=function En(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],l=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],m=l[0],w=l[1]||"";t.posPre=m.substring(0,m.indexOf("#"));for(let S=0;S<w.length;S++){const k=w.charAt(S);"0"===k?t.minFrac=t.maxFrac=S+1:"#"===k?t.maxFrac=S+1:t.posSuf+=k}const D=m.split(",");if(t.gSize=D[1]?D[1].length:0,t.lgSize=D[2]||D[1]?(D[2]||D[1]).length:0,u){const S=s.length-t.posPre.length-t.posSuf.length,k=u.indexOf("#");t.negPre=u.substring(0,k).replace(/'/g,""),t.negSuf=u.slice(k+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function mn(n,e){return(0,g.cg1)(n)[g.wAp.NumberFormats][e]}(e,V.Currency),ht(e,ne.MinusSign));return l.minFrac=function vi(n){let e;const t=Ne[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),l.maxFrac=l.minFrac,function ta(n,e,t,r,s,u,l=!1){let m="",w=!1;if(isFinite(n)){let D=function Ac(n){let r,s,u,l,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(m=e.length))r=[0],s=1;else{for(m--;"0"===e.charAt(m);)m--;for(s-=u,r=[],l=0;u<=m;u++,l++)r[l]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);l&&(D=function dd(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(D));let S=e.minInt,k=e.minFrac,U=e.maxFrac;if(u){const At=u.match(In);if(null===At)throw new Error(`${u} is not a valid digit info`);const ut=At[1],it=At[3],bt=At[5];null!=ut&&(S=ra(ut)),null!=it&&(k=ra(it)),null!=bt?U=ra(bt):null!=it&&k>U&&(U=k)}!function na(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let l=u+n.integerLen,m=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let k=l;k<r.length;k++)r[k]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let k=1;k<l;k++)r[k]=0}if(m>=5)if(l-1<0){for(let k=0;k>l;k--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;s<Math.max(0,u);s++)r.push(0);let w=0!==u;const D=e+n.integerLen,S=r.reduceRight(function(k,U,K,te){return te[K]=(U+=k)<10?U:U-10,w&&(0===te[K]&&K>=D?te.pop():w=!1),U>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(D,k,U);let K=D.digits,te=D.integerLen;const xe=D.exponent;let Re=[];for(w=K.every(At=>!At);te<S;te++)K.unshift(0);for(;te<0;te++)K.unshift(0);te>0?Re=K.splice(te,K.length):(Re=K,K=[0]);const Tt=[];for(K.length>=e.lgSize&&Tt.unshift(K.splice(-e.lgSize,K.length).join(""));K.length>e.gSize;)Tt.unshift(K.splice(-e.gSize,K.length).join(""));K.length&&Tt.unshift(K.join("")),m=Tt.join(ht(t,r)),Re.length&&(m+=ht(t,s)+Re.join("")),xe&&(m+=ht(t,ne.Exponential)+"+"+xe)}else m=ht(t,ne.Infinity);return m=n<0&&!w?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,l,e,ne.CurrencyGroup,ne.CurrencyDecimal,s).replace("\xa4",t).replace("\xa4","").trim()}function ra(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class qr{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ii=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new qr(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),kn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{kn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function kn(n,e){n.context.$implicit=e.item}let yn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new po,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){js("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){js("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class po{constructor(){this.$implicit=null,this.ngIf=null}}function js(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}function Nn(n,e){return new g.vHH(2100,!1)}class sn{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class ig{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ri=new ig,hd=new sn;let Hs=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,g.QGY)(t))return ri;if((0,g.F4k)(t))return hd;throw Nn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.sBO,16))},n.\u0275pipe=g.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),yo=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,s="symbol",u,l){if(!function Mc(n){return!(null==n||""===n||n!=n)}(t))return null;l=l||this._locale,"boolean"==typeof s&&(s=s?"symbol":"code");let m=r||this._defaultCurrencyCode;"code"!==s&&(m="symbol"===s||"symbol-narrow"===s?function dt(n,e,t="en"){const r=function Mr(n){return(0,g.cg1)(n)[g.wAp.Currencies]}(t)[n]||Ne[n]||[],s=r[1];return"narrow"===e&&"string"==typeof s?s:r[0]||n}(m,"symbol"===s?"wide":"narrow",l):s);try{return ou(function gd(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),l,m,r,u)}catch(w){throw Nn()}}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.soG,16),g.Y36(g.EJc,16))},n.\u0275pipe=g.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let Ti=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Pc(n){return"server"===n}let Is=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new ua((0,g.LFG)(ae),window)}),n})();class ua{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ws(this.window.history)||Ws(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ws(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _f extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class bs extends _f{static makeCurrent(){!function se(n){Q||(Q=n)}(new bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Iu(){return oi=oi||document.querySelector("base"),oi?oi.getAttribute("href"):null}();return null==t?null:function Gc(n){Ci=Ci||document.createElement("a"),Ci.setAttribute("href",n);const e=Ci.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){oi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ir(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ci,oi=null;const Ad=new g.OlP("TRANSITION_ID"),ya=[{provide:g.ip1,useFactory:function To(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=N(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Ad,ae,g.zs3],multi:!0}];let qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const _a=new g.OlP("EventManagerPlugins");let Bi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_a),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Wc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=N().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let xd=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends xd{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,s.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zc))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Zc(n){N().remove(n)}const _n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Co=/%COMP%/g;function Ao(n,e){return e.flat(100).map(t=>t.replace(Co,n))}function ts(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qs=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Cs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Yr(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case g.ifc.ShadowDom:return new Kc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ao(r.id,r.styles);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Bi),g.LFG(Ds),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Cs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_n[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Tu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Tu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=_n[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=_n[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,s&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ts(r)):this.eventManager.addEventListener(e,t,ts(r))}}function Tu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Yr extends Cs{constructor(e,t,r,s){super(e),this.component=r;const u=Ao(s+"-"+r.id,r.styles);t.addStyles(u),this.contentAttr=function bu(n){return"_ngcontent-%COMP%".replace(Co,n)}(s+"-"+r.id),this.hostAttr=function Du(n){return"_nghost-%COMP%".replace(Co,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Kc extends Cs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ao(s.id,s.styles);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xo=(()=>{class n extends Wc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ss=["alt","control","meta","shift"],Cu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Su={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yc=(()=>{class n extends Wc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Ss.forEach(D=>{const S=r.indexOf(D);S>-1&&(r.splice(S,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=Cu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Ss.forEach(l=>{l!==s&&(0,Su[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Jc=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function xu(){bs.makeCurrent()},multi:!0},{provide:ae,useFactory:function Si(){return(0,g.RDi)(document),document},deps:[]}]),Ai=new g.OlP(""),ui=[{provide:g.rWj,useClass:class ai{addToWindow(e){g.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const s=g.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],vf=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ia(){return new g.qLn},deps:[]},{provide:_a,useClass:xo,multi:!0,deps:[ae,g.R0b,g.Lbi]},{provide:_a,useClass:Yc,multi:!0,deps:[ae]},{provide:Qs,useClass:Qs,deps:[Bi,Ds,g.AFp]},{provide:g.FYo,useExisting:Qs},{provide:xd,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[ae]},{provide:Bi,useClass:Bi,deps:[_a,g.R0b]},{provide:class Zs{},useClass:qc,deps:[]},[]];let Md=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Ad,useExisting:g.AFp},ya]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ai,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...vf,...ui],imports:[Ti,g.hGG]}),n})(),$i=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function el(){return new $i((0,g.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var an=P(8996),Un=P(7669);function Xe(...n){const e=(0,Un.yG)(n);return(0,an.D)(n,e)}var Yn=P(7579);class rr extends Yn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Pu=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ir=P(9751);const{isArray:il}=Array,{getPrototypeOf:rs,prototype:xf,keys:Fd}=Object;var Js=P(4671),gt=P(4004);const{isArray:b}=Array;var H=P(5403),ee=P(9672);function Te(...n){const e=(0,Un.yG)(n),t=(0,Un.jO)(n),{args:r,keys:s}=function Sa(n){if(1===n.length){const e=n[0];if(il(e))return{args:e,keys:null};if(function Aa(n){return n&&"object"==typeof n&&rs(n)===xf}(e)){const t=Fd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,an.D)([],e);const u=new ir.y(function Ye(n,e,t=Js.y){return r=>{nt(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)nt(e,()=>{const D=(0,an.D)(n[w],e);let S=!1;D.subscribe((0,H.x)(r,k=>{u[w]=k,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>function L(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,l):Js.y));return t?u.pipe(function x(n){return(0,gt.U)(e=>function T(n,e){return b(e)?n(...e):n(e)}(n,e))}(t)):u}function nt(n,e,t){n?(0,ee.f)(t,n,e):e()}var Qe=P(8189);function It(...n){return function kt(){return(0,Qe.J)(1)}()((0,an.D)(n,(0,Un.yG)(n)))}var br=P(8421);function Vn(n){return new ir.y(e=>{(0,br.Xf)(n()).subscribe(e)})}var xa=P(9635),Ra=P(576);function Hi(n,e){const t=(0,Ra.m)(n)?n:()=>n,r=s=>s.error(t());return new ir.y(e?s=>e.schedule(r,0,s):r)}var Qn=P(515),zi=P(727),Dn=P(4482);function Ud(){return(0,Dn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,H.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cg extends ir.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,H.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zi.w0.EMPTY)}return e}refCount(){return Ud()(this)}}function Bn(n,e){return(0,Dn.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,H.x)(r,w=>{s?.unsubscribe();let D=0;const S=u++;(0,br.Xf)(n(w,S)).subscribe(s=(0,H.x)(r,k=>r.next(e?e(w,k,S,D++):k),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function Ou(n){return n<=0?()=>Qn.E:(0,Dn.e)((e,t)=>{let r=0;e.subscribe((0,H.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function sl(...n){const e=(0,Un.yG)(n);return(0,Dn.e)((t,r)=>{(e?It(n,t,e):It(n,t)).subscribe(r)})}function As(n,e){return(0,Dn.e)((t,r)=>{let s=0;t.subscribe((0,H.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Fr=P(5577);function Vd(n){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,H.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Ma(n=P0){return(0,Dn.e)((e,t)=>{let r=!1;e.subscribe((0,H.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function P0(){return new Pu}function No(n,e){const t=arguments.length>=2;return r=>r.pipe(n?As((s,u)=>n(s,u,r)):Js.y,Ou(1),t?Vd(e):Ma(()=>new Pu))}function eo(n,e){return(0,Ra.m)(e)?(0,Fr.z)(n,e,1):(0,Fr.z)(n,1)}var Xr=P(8505);function ka(n){return(0,Dn.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,H.x)(t,void 0,void 0,l=>{u=(0,br.Xf)(n(l,ka(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function O0(n,e,t,r,s){return(u,l)=>{let m=t,w=e,D=0;u.subscribe((0,H.x)(l,S=>{const k=D++;w=m?n(w,S,k):(m=!0,S),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}function Bd(n,e){return(0,Dn.e)(O0(n,e,arguments.length>=2,!0))}function lg(n){return n<=0?()=>Qn.E:(0,Dn.e)((e,t)=>{let r=[];e.subscribe((0,H.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function $d(n,e){const t=arguments.length>=2;return r=>r.pipe(n?As((s,u)=>n(s,u,r)):Js.y,lg(1),t?Vd(e):Ma(()=>new Pu))}function jd(n){return(0,Dn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",Lu=Symbol("RouteTitle");class is{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fu(n){return new is(n)}function Oy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function ss(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Uu(n[s],e[s]))return!1;return!0}function Uu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function hg(n){return Array.prototype.concat.apply([],n)}function Hd(n){return n.length>0?n[n.length-1]:null}function sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Po(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,an.D)(Promise.resolve(n)):Xe(n)}const Vu=!1,ci={exact:function Dr(n,e,t){if(!Lo(n.segments,e.segments)||!ul(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dr(n.children[r],e.children[r],t))return!1;return!0},subset:kf},ol={exact:function Mf(n,e){return ss(n,e)},subset:function al(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Uu(n[t],e[t]))},ignored:()=>!0};function zd(n,e,t){return ci[t.paths](n.root,e.root,t.matrixParams)&&ol[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kf(n,e,t){return Nf(n,e,e.segments,t)}function Nf(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Lo(s,t)||e.hasChildren()||!ul(s,t,r))}if(n.segments.length===t.length){if(!Lo(n.segments,t)||!ul(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!kf(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Lo(n.segments,s)&&ul(n.segments,s,r)&&n.children[zt])&&Nf(n.children[zt],e,u,r)}}function ul(n,e,t){return e.every((r,s)=>ol[t](n[s].parameters,r.parameters))}class Oo{constructor(e=new Wt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fu(this.queryParams)),this._queryParamMap}toString(){return Of.serialize(this)}}class Wt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,sr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gd(this)}}class Gi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fu(this.parameters)),this._parameterMap}toString(){return Wd(this)}}function Lo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let cl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new Na},providedIn:"root"}),n})();class Na{parse(e){const t=new By(e);return new Oo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${os(e.root,!0)}`,r=function gg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${qd(t)}=${qd(s)}`).join("&"):`${qd(t)}=${qd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ll(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Of=new Na;function Gd(n){return n.segments.map(e=>Wd(e)).join("/")}function os(n,e){if(!n.hasChildren())return Gd(n);if(e){const t=n.children[zt]?os(n.children[zt],!1):"",r=[];return sr(n.children,(s,u)=>{u!==zt&&r.push(`${u}:${os(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Pf(n,e){let t=[];return sr(n.children,(r,s)=>{s===zt&&(t=t.concat(e(r,s)))}),sr(n.children,(r,s)=>{s!==zt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===zt?[os(n.children[zt],!1)]:[`${s}:${os(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${Gd(n)}/${t[0]}`:`${Gd(n)}/(${t.join("//")})`}}function fg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qd(n){return fg(n).replace(/%3B/gi,";")}function dl(n){return fg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hl(n){return decodeURIComponent(n)}function Pa(n){return hl(n.replace(/\+/g,"%20"))}function Wd(n){return`${dl(n.path)}${function pg(n){return Object.keys(n).map(e=>`;${dl(e)}=${dl(n[e])}`).join("")}(n.parameters)}`}const fl=/^[^\/()?;=#]+/;function Zd(n){const e=n.match(fl);return e?e[0]:""}const Uy=/^[^=?&#]+/,Ff=/^[^&#]+/;class By{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Wt(e,t)),r}parseSegment(){const e=Zd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,Vu);return this.capture(e),new Gi(hl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Zd(this.remaining);s&&(r=s,this.capture(r))}e[hl(t)]=hl(r)}parseQueryParam(e){const t=function Lf(n){const e=n.match(Uy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Vy(n){const e=n.match(Ff);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Pa(t),u=Pa(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zd(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new g.vHH(4010,Vu);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[zt]:new Wt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,Vu)}}function Oa(n){return n.segments.length>0?new Wt([],{[zt]:n}):n}function Bu(n){const e={};for(const r of Object.keys(n.children)){const u=Bu(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function mg(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Wt(n.segments.concat(e.segments),e.children)}return n}(new Wt(n.segments,e))}function to(n){return n instanceof Oo}function La(n,e,t,r,s){if(0===t.length)return Fa(e.root,e.root,e.root,r,s);const u=function vg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pl(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return sr(u.outlets,(w,D)=>{m[D]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new pl(t,e,r)}(t);return u.toRoot()?Fa(e.root,e.root,new Wt([],{}),r,s):function l(w){const D=function Yd(n,e,t,r){if(n.isAbsolute)return new Ua(e.root,!0,0);if(-1===r)return new Ua(t,t===e.root,0);return function ju(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new g.vHH(4005,!1);s=r.segments.length}return new Ua(r,!1,s-u)}(t,r+(xs(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=D.processChildren?Rs(D.segmentGroup,D.index,u.commands):Hu(D.segmentGroup,D.index,u.commands);return Fa(e.root,D.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function xs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $u(n){return"object"==typeof n&&null!=n&&n.outlets}function Fa(n,e,t,r,s){let l,u={};r&&sr(r,(w,D)=>{u[D]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),l=n===e?t:$y(n,e,t);const m=Oa(Bu(l));return new Oo(m,u,s)}function $y(n,e,t){const r={};return sr(n.children,(s,u)=>{r[u]=s===e?t:$y(s,e,t)}),new Wt(n.segments,r)}class pl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xs(r[0]))throw new g.vHH(4003,!1);const s=r.find($u);if(s&&s!==Hd(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ua{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Hu(n,e,t){if(n||(n=new Wt([],{})),0===n.segments.length&&n.hasChildren())return Rs(n,e,t);const r=function wg(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if($u(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!zu(w,D,l))return u;r+=2}else{if(!zu(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Wt(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new Wt(n.segments.slice(r.pathIndex),n.children),Rs(u,0,s)}return r.match&&0===s.length?new Wt(n.segments,{}):r.match&&!n.hasChildren()?Tr(n,e,t):r.match?Rs(n,0,s):Tr(n,e,t)}function Rs(n,e,t){if(0===t.length)return new Wt(n.segments,{});{const r=function Vf(n){return $u(n[0])?n[0].outlets:{[zt]:n}}(t),s={};return sr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=Hu(n.children[l],e,u))}),sr(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Wt(n.segments,s)}}function Tr(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if($u(u)){const w=Va(u.outlets);return new Wt(r,w)}if(0===s&&xs(t[0])){r.push(new Gi(n.segments[e].path,gl(t[0]))),s++;continue}const l=$u(u)?u.outlets[zt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&xs(m)?(r.push(new Gi(l,gl(m))),s+=2):(r.push(new Gi(l,{})),s++)}return new Wt(r,{})}function Va(n){const e={};return sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Tr(new Wt([],{}),0,t))}),e}function gl(n){const e={};return sr(n,(t,r)=>e[r]=`${t}`),e}function zu(n,e,t){return n==t.path&&ss(e,t.parameters)}const Ba="imperative";class xi{constructor(e,t){this.id=e,this.url=t}}class Bf extends xi{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fo extends xi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qd extends xi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ms extends xi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class Xd extends xi{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jd extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $f extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $a extends xi{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ig extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class li extends xi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class no{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gu{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ml{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Dg=(()=>{class n{createUrlTree(t,r,s,u,l,m){return La(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Hy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(e){return Dg.\u0275fac(e)},providedIn:"root"}),n})();class Tg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=y(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=y(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=h(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return h(e,this._root).map(t=>t.value)}}function y(n,e){if(n===e.value)return e;for(const t of e.children){const r=y(n,t);if(r)return r}return null}function h(n,e){if(n===e.value)return[e];for(const t of e.children){const r=h(n,t);if(r.length)return r.unshift(e),r}return[]}class p{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function v(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class A extends Tg{constructor(e,t){super(e),this.snapshot=t,$n(this,e)}toString(){return this.snapshot.toString()}}function M(n,e){const t=function G(n,e){const l=new yt([],{},{},"",{},zt,e,null,n.root,-1,{});return new ct("",new p(l,[]))}(n,e),r=new rr([new Gi("",{})]),s=new rr({}),u=new rr({}),l=new rr({}),m=new rr(""),w=new ce(r,s,l,m,u,zt,e,t.root);return w.snapshot=t.root,new A(new p(w,[]),t)}class ce{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,gt.U)(D=>D[Lu]))??Xe(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Fu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Fu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Be(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ze(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yt{get title(){return this.data?.[Lu]}constructor(e,t,r,s,u,l,m,w,D,S,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=S,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ct extends Tg{constructor(e,t){super(t),this.url=e,$n(this,t)}toString(){return qi(this._root)}}function $n(n,e){e.value._routerState=n,e.children.forEach(t=>$n(n,t))}function qi(n){const e=n.children.length>0?` { ${n.children.map(qi).join(", ")} } `:"";return`${n.value}${e}`}function qu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ss(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ss(e.params,t.params)||n.params.next(t.params),function Ly(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ss(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ss(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eh(n,e){const t=ss(n.params,e.params)&&function Fy(n,e){return Lo(n,e)&&n.every((t,r)=>ss(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eh(n.parent,e.parent))}function di(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Wu(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return di(n,r,s);return di(n,r)})}(n,e,t);return new p(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>di(n,m)),l}}const r=function th(n){return new ce(new rr(n.url),new rr(n.params),new rr(n.queryParams),new rr(n.fragment),new rr(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>di(n,u));return new p(r,s)}}const vl="ngNavigationCancelingError";function nh(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=to(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Gf(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Gf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[vl]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Cg(n){return zy(n)&&to(n.url)}function zy(n){return n&&n[vl]}class wl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ja,this.attachRef=null}}let ja=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new wl,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gy=!1;let U0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(ja),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Gy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Gy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Gy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,Gy);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new V0(t,m,s.injector);if(r&&function Eb(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(l);this.activated=s.createComponent(D,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),n})();class V0{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ce?this.route:e===ja?this.childContexts:this.parent.get(e,t)}}let qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[U0],encapsulation:2}),n})();function B0(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Zy(n){const e=n.children&&n.children.map(Zy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=qy),t}function Wi(n){return n.outlet||zt}function Ky(n,e){const t=n.filter(r=>Wi(r)===e);return t.push(...n.filter(r=>Wi(r)!==e)),t}function Wf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Sb{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=v(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),sr(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=v(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=v(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=v(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new ml(u.value.snapshot))}),e.children.length&&this.forwardEvent(new no(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(qu(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),qu(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Wf(s.snapshot),w=m?.get(g._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class $0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zf{constructor(e,t){this.component=e,this.route=t}}function CS(n,e,t){const r=n._root;return Il(r,e?e._root:null,t,[r.value])}function Uo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function Il(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=v(e);return n.children.forEach(l=>{(function j0(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function H0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Lo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Lo(n.url,e.url)||!ss(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eh(n,e)||!ss(n.queryParams,e.queryParams);default:return!eh(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new $0(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Il(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new Zf(m.outlet.component,l))}else l&&rh(e,m,s),s.canActivateChecks.push(new $0(r)),Il(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),sr(u,(l,m)=>rh(l,t.getContext(m),s)),s}function rh(n,e,t){const r=v(n),s=n.value;sr(r,(u,l)=>{rh(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Zf(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Sg(n){return"function"==typeof n}function Ag(n){return n instanceof Pu||"EmptyError"===n?.name}const Kf=Symbol("INITIAL_VALUE");function ks(){return Bn(n=>Te(n.map(e=>e.pipe(Ou(1),sl(Kf)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===Kf)return Kf;if(!1===t||t instanceof Oo)return t}return!0}),As(e=>e!==Kf),Ou(1)))}function W0(n){return(0,xa.z)((0,Xr.b)(e=>{if(to(e))throw nh(0,e)}),(0,gt.U)(e=>!0===e))}const Mg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bl(n,e,t,r,s){const u=n_(n,e,t);return u.matched?function Mb(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?Xe(s.map(l=>{const m=Uo(l,n);return Po(function Qy(n){return n&&Sg(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(ks(),W0()):Xe(!0)}(r=B0(e,r),e,t).pipe((0,gt.U)(l=>!0===l?u:{...Mg})):Xe(u)}function n_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Mg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Oy)(t,n,e);if(!s)return{...Mg};const u={};sr(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function kg(n,e,t,r){if(t.length>0&&function Nb(n,e,t){return t.some(r=>Ng(n,e,r)&&Wi(r)!==zt)}(n,t,r)){const u=new Wt(e,function r_(n,e,t,r){const s={};s[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Wi(u)!==zt){const l=new Wt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[Wi(u)]=l}return s}(n,e,r,new Wt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Z0(n,e,t){return t.some(r=>Ng(n,e,r))}(n,t,r)){const u=new Wt(n.segments,function kb(n,e,t,r,s){const u={};for(const l of r)if(Ng(n,t,l)&&!s[Wi(l)]){const m=new Wt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[Wi(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Wt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Ng(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function i_(n,e,t,r){return!!(Wi(n)===r||r!==zt&&Ng(e,t,n))&&("**"===n.path||n_(e,n,t).matched)}function Pb(n,e,t){return 0===e.length&&!n.children[t]}const Pg=!1;class Zu{constructor(e){this.segmentGroup=e||null}}class K0{constructor(e){this.urlTree=e}}function Vo(n){return Hi(new Zu(n))}function ih(n){return Hi(new K0(n))}class Fb{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=kg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Wt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,gt.U)(u=>this.createUrlTree(Bu(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ka(u=>{if(u instanceof K0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Zu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,gt.U)(s=>this.createUrlTree(Bu(s),e.queryParams,e.fragment))).pipe(ka(s=>{throw s instanceof Zu?this.noMatchError(s):s}))}noMatchError(e){return new g.vHH(4002,Pg)}createUrlTree(e,t,r){const s=Oa(e);return new Oo(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(u=>new Wt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,an.D)(s).pipe(eo(u=>{const l=r.children[u],m=Ky(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,gt.U)(w=>({segment:w,outlet:u})))}),Bd((u,l)=>(u[l.outlet]=l.segment,u),{}),$d())}expandSegment(e,t,r,s,u,l){return(0,an.D)(r).pipe(eo(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(ka(D=>{if(D instanceof Zu)return Xe(null);throw D}))),No(m=>!!m),ka((m,w)=>{if(Ag(m))return Pb(t,s,u)?Xe(new Wt([],{})):Vo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return i_(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):Vo(t):Vo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ih(u):this.lineralizeSegments(r,u).pipe((0,Fr.z)(l=>{const m=new Wt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:S}=n_(t,s,u);if(!m)return Vo(t);const k=this.applyRedirectCommands(w,s.redirectTo,S);return s.redirectTo.startsWith("/")?ih(k):this.lineralizeSegments(s,k).pipe((0,Fr.z)(U=>this.expandSegment(e,t,r,U.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=B0(r,e),r.loadChildren?(r._loadedRoutes?Xe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,gt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Wt(s,{})))):Xe(new Wt(s,{}))):bl(t,r,s,e).pipe(Bn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Fr.z)(S=>{const k=S.injector??e,U=S.routes,{segmentGroup:K,slicedSegments:te}=kg(t,m,w,U),xe=new Wt(K.segments,K.children);if(0===te.length&&xe.hasChildren())return this.expandChildren(k,U,xe).pipe((0,gt.U)(ut=>new Wt(m,ut)));if(0===U.length&&0===te.length)return Xe(new Wt(m,{}));const Re=Wi(r)===u;return this.expandSegment(k,xe,U,te,Re?zt:u,!0).pipe((0,gt.U)(At=>new Wt(m.concat(At.segments),At.children)))})):Vo(t)))}getChildConfig(e,t,r){return t.children?Xe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Xe({routes:t._loadedRoutes,injector:t._loadedInjector}):function t_(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?Xe(!0):Xe(s.map(l=>{const m=Uo(l,n);return Po(function z0(n){return n&&Sg(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(ks(),W0())}(e,t,r).pipe((0,Fr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Xr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Y0(n){return Hi(Gf(Pg,3))}())):Xe({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Xe(r);if(s.numberOfChildren>1||!s.children[zt])return Hi(new g.vHH(4e3,Pg));s=s.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Oo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return sr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return sr(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new Wt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new g.vHH(4001,Pg);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Q0{}class Vb{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=kg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,gt.U)(t=>{if(null===t)return null;const r=new yt([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new p(r,t),u=new ct(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Be(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,an.D)(Object.keys(r.children)).pipe(eo(s=>{const u=r.children[s],l=Ky(t,s);return this.processSegmentGroup(e,l,u,s)}),Bd((s,u)=>s&&u?(s.push(...u),s):null),function dg(n,e=!1){return(0,Dn.e)((t,r)=>{let s=0;t.subscribe((0,H.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),Vd(null),$d(),(0,gt.U)(s=>{if(null===s)return null;const u=X0(s);return function u_(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,an.D)(t).pipe(eo(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),No(l=>!!l),ka(l=>{if(Ag(l))return Pb(r,s,u)?Xe([]):Xe(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!i_(t,r,s,u))return Xe(null);let l;if("**"===t.path){const m=s.length>0?Hd(s).parameters:{},w=ew(r)+s.length;l=Xe({snapshot:new yt(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tw(t),Wi(t),t.component??t._loadedComponent??null,t,J0(r),w,Dl(t)),consumedSegments:[],remainingSegments:[]})}else l=bl(r,t,s,e).pipe((0,gt.U)(({matched:m,consumedSegments:w,remainingSegments:D,parameters:S})=>{if(!m)return null;const k=ew(r)+w.length;return{snapshot:new yt(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tw(t),Wi(t),t.component??t._loadedComponent??null,t,J0(r),k,Dl(t)),consumedSegments:w,remainingSegments:D}}));return l.pipe(Bn(m=>{if(null===m)return Xe(null);const{snapshot:w,consumedSegments:D,remainingSegments:S}=m;e=t._injector??e;const k=t._loadedInjector??e,U=function Yf(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:K,slicedSegments:te}=kg(r,D,S,U.filter(Re=>void 0===Re.redirectTo));if(0===te.length&&K.hasChildren())return this.processChildren(k,U,K).pipe((0,gt.U)(Re=>null===Re?null:[new p(w,Re)]));if(0===U.length&&0===te.length)return Xe([new p(w,[])]);const xe=Wi(t)===u;return this.processSegment(k,U,K,te,xe?zt:u).pipe((0,gt.U)(Re=>null===Re?null:[new p(w,Re)]))}))}}function Bb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function X0(n){const e=[],t=new Set;for(const r of n){if(!Bb(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=X0(r.children);e.push(new p(r.value,s))}return e.filter(r=>!t.has(r))}function J0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ew(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tw(n){return n.data||{}}function Dl(n){return n.resolve||{}}function zb(n){return"string"==typeof n.title||null===n.title}function Og(n){return Bn(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,gt.U)(()=>e)):Xe(e)})}const Tl=new g.OlP("ROUTES");let c_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Xe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Po(t.loadComponent()).pipe((0,gt.U)(Ns),(0,Xr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),jd(()=>{this.componentLoaders.delete(t)})),s=new cg(r,()=>new Yn.x).pipe(Ud());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,D,S=!1;Array.isArray(m)?D=m:(w=m.create(t).injector,D=hg(w.get(Tl,[],g.XFs.Self|g.XFs.Optional)));return{routes:D.map(Zy),injector:w}}),jd(()=>{this.childrenLoaders.delete(r)})),l=new cg(u,()=>new Yn.x).pipe(Ud());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Po(t()).pipe((0,gt.U)(Ns),(0,Fr.z)(s=>s instanceof g.YKP||Array.isArray(s)?Xe(s):(0,an.D)(this.compiler.compileModuleAsync(s))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ns(n){return function Gb(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Qf=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Yn.x,this.configLoader=(0,g.f3M)(c_),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(cl),this.rootContexts=(0,g.f3M)(ja),this.navigationId=0,this.afterPreactivation=()=>Xe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new jf(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Eg(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new rr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ba,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(As(r=>0!==r.id),(0,gt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Bn(r=>{let s=!1,u=!1;return Xe(r).pipe((0,Xr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Ms(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Qn.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return sw(l.source)&&(t.browserUrlTree=l.extractedUrl),Xe(l).pipe(Bn(S=>{const k=this.transitions?.getValue();return this.events.next(new Bf(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions?.getValue()?Qn.E:Promise.resolve(S)}),function Ub(n,e,t,r){return Bn(s=>function Lb(n,e,t,r,s){return new Fb(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,gt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Xr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function Ha(n,e,t,r,s){return(0,Fr.z)(u=>function a_(n,e,t,r,s,u,l="emptyOnly"){return new Vb(n,e,t,r,s,l,u).recognize().pipe(Bn(m=>null===m?function o_(n){return new ir.y(e=>e.error(n))}(new Q0):Xe(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,gt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Xr.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(U,S)}t.browserUrlTree=S.urlAfterRedirects}const k=new Jd(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(k)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:k,source:U,restoredState:K,extras:te}=l,xe=new Bf(S,this.urlSerializer.serialize(k),U,K);this.events.next(xe);const Re=M(k,this.rootComponentType).snapshot;return Xe(r={...l,targetSnapshot:Re,urlAfterRedirects:k,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new Ms(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Qn.E}}),(0,Xr.b)(l=>{const m=new $f(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,gt.U)(l=>r={...l,guards:CS(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function xb(n,e){return(0,Fr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Xe({...t,guardsResult:!0}):function Jy(n,e,t,r){return(0,an.D)(n).pipe((0,Fr.z)(s=>function q0(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Xe(u.map(m=>{const w=Wf(e)??s,D=Uo(m,w);return Po(function AS(n){return n&&Sg(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):w.runInContext(()=>D(n,e,t,r))).pipe(No())})).pipe(ks()):Xe(!0)}(s.component,s.route,t,e,r)),No(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Fr.z)(m=>m&&function Ab(n){return"boolean"==typeof n}(m)?function xg(n,e,t,r){return(0,an.D)(e).pipe(eo(s=>It(function e_(n,e){return null!==n&&e&&e(new Hf(n)),Xe(!0)}(s.route.parent,r),function Rb(n,e){return null!==n&&e&&e(new Gu(n)),Xe(!0)}(s.route,r),function El(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function SS(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Vn(()=>Xe(l.guards.map(w=>{const D=Wf(l.node)??t,S=Uo(w,D);return Po(function Yy(n){return n&&Sg(n.canActivateChild)}(S)?S.canActivateChild(r,n):D.runInContext(()=>S(r,n))).pipe(No())})).pipe(ks())));return Xe(u).pipe(ks())}(n,s.path,t),function Rg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const s=r.map(u=>Vn(()=>{const l=Wf(e)??t,m=Uo(u,l);return Po(function G0(n){return n&&Sg(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(No())}));return Xe(s).pipe(ks())}(n,s.route,t))),No(s=>!0!==s,!0))}(r,u,n,e):Xe(m)),(0,gt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Xr.b)(l=>{if(r.guardsResult=l.guardsResult,to(l.guardsResult))throw nh(0,l.guardsResult);const m=new $a(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),As(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3,t),!1)),Og(l=>{if(l.guards.canActivateChecks.length)return Xe(l).pipe((0,Xr.b)(m=>{const w=new Ig(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Bn(m=>{let w=!1;return Xe(m).pipe(function jb(n,e){return(0,Fr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return Xe(t);let u=0;return(0,an.D)(s).pipe(eo(l=>function Hb(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!zb(s)&&(u[Lu]=s.title),function MS(n,e,t,r){const s=function kS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return Xe({});const u={};return(0,an.D)(s).pipe((0,Fr.z)(l=>function nw(n,e,t,r){const s=Wf(e)??r,u=Uo(n,s);return Po(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(No(),(0,Xr.b)(m=>{u[l]=m}))),lg(1),function Rf(n){return(0,gt.U)(()=>n)}(u),ka(l=>Ag(l)?Qn.E:Hi(l)))}(u,n,e,r).pipe((0,gt.U)(l=>(n._resolvedData=l,n.data=Be(n,t).resolve,s&&zb(s)&&(n.data[Lu]=s.title),null)))}(l.route,r,n,e)),(0,Xr.b)(()=>u++),lg(1),(0,Fr.z)(l=>u===s.length?Xe(t):Qn.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Xr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2,t))}}))}),(0,Xr.b)(m=>{const w=new li(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),Og(l=>{const m=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Xr.b)(S=>{w.component=S}),(0,gt.U)(()=>{})));for(const S of w.children)D.push(...m(S));return D};return Te(m(l.targetSnapshot.root)).pipe(Vd(),Ou(1))}),Og(()=>this.afterPreactivation()),(0,gt.U)(l=>{const m=function _l(n,e,t){const r=di(n,e._root,t?t._root:void 0);return new A(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Xr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new Sb(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,Xr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Fo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),jd(()=>{s||u||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ka(l=>{if(u=!0,zy(l)){Cg(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new Qd(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Cg(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||sw(r.source)};t.scheduleNavigation(w,Ba,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new Xd(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Qn.E}))}))}cancelNavigationTransition(t,r,s,u){const l=new Qd(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(l),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sw(n){return n!==Ba}let ow=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[Lu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(qb)},providedIn:"root"}),n})(),qb=(()=>{class n extends ow{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($i))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Zb)},providedIn:"root"}),n})();class aw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Zb=(()=>{class n extends aw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fg=new g.OlP("",{providedIn:"root",factory:()=>({})});let $t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(uw)},providedIn:"root"}),n})(),uw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cw(n){throw n}function Yb(n,e,t){return e.parse("/")}const Qb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let as=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(Fg,{optional:!0})||{},this.errorHandler=this.options.errorHandler||cw,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Yb,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)($t),this.routeReuseStrategy=(0,g.f3M)(Wb),this.urlCreationStrategy=(0,g.f3M)(Hy),this.titleStrategy=(0,g.f3M)(ow),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=hg((0,g.f3M)(Tl,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(Qf),this.urlSerializer=(0,g.f3M)(cl),this.location=(0,g.f3M)(Le),this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Oo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=M(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ba,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Zy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,D=w?this.currentUrlTree.fragment:l;let S=null;switch(m){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=to(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,Ba,null,r)}navigate(t,r={skipLocationChange:!1}){return function dw(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...Qb}:!1===r?{...lw}:r,to(t))return zd(this.currentUrlTree,t,s);const u=this.parseUrl(t);return zd(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,D,S;return l?(m=l.resolve,w=l.reject,D=l.promise):D=new Promise((k,U)=>{m=k,w=U}),S="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===s?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),za=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Yn.x;const w=l.nativeElement.tagName;this.isAnchorElement="A"===w||"AREA"===w,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof Fo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,g.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(as),g.Y36(ce),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(tt))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class d_{}let eD=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(As(t=>t instanceof Fo),eo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,an.D)(s).pipe((0,Qe.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Xe(null);const u=s.pipe((0,Fr.z)(l=>null===l?Xe(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,an.D)([u,l]).pipe((0,Qe.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(as),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(d_),g.LFG(c_))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xf=new g.OlP("");let Ug=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ah(n,e){return{\u0275kind:n,\u0275providers:e}}function Cl(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(as),s=n.get(fw);1===n.get(Vg)&&r.initialNavigation(),n.get(gw,null,g.XFs.Optional)?.setUpPreloading(),n.get(Xf,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const fw=new g.OlP("",{factory:()=>new Yn.x}),Vg=new g.OlP("",{providedIn:"root",factory:()=>1});const gw=new g.OlP("");function rD(n){return ah(0,[{provide:gw,useExisting:eD},{provide:d_,useExisting:n}])}const mw=new g.OlP("ROUTER_FORROOT_GUARD"),yw=[Le,{provide:cl,useClass:Na},as,ja,{provide:ce,useFactory:function tD(n){return n.routerState.root},deps:[as]},c_,[]];function _w(){return new g.PXZ("Router",as)}let ep=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[yw,[],{provide:Tl,multi:!0,useValue:t},{provide:mw,useFactory:US,deps:[[as,new g.FiY,new g.tp0]]},{provide:Fg,useValue:r||{}},r?.useHash?{provide:tt,useClass:we}:{provide:tt,useClass:be},{provide:Xf,useFactory:()=>{const n=(0,g.f3M)(Is),e=(0,g.f3M)(g.R0b),t=(0,g.f3M)(Fg),r=(0,g.f3M)(Qf),s=(0,g.f3M)(cl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ug(s,r,n,e,t)}},r?.preloadingStrategy?rD(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:_w},r?.initialNavigation?uh(r):[],[{provide:p_,useFactory:Cl},{provide:g.tb,multi:!0,useExisting:p_}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Tl,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(mw,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[qy]}),n})();function US(n){return"guarded"}function uh(n){return["disabled"===n.initialNavigation?ah(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(as);return()=>{e.setUpLocationChangeListener()}}},{provide:Vg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ah(2,[{provide:Vg,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(le,Promise.resolve());return()=>t.then(()=>new Promise(s=>{const u=e.get(as),l=e.get(fw);(function r(s){e.get(as).events.pipe(As(l=>l instanceof Fo||l instanceof Qd||l instanceof Xd),(0,gt.U)(l=>l instanceof Fo||l instanceof Qd&&(0===l.code||1===l.code)&&null),As(l=>null!==l),Ou(1)).subscribe(()=>{s()})})(()=>{s(!0)}),e.get(Qf).afterPreactivation=()=>(s(!0),l.closed?Xe(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const p_=new g.OlP("");class ch{}ch.\u0275fac=function(e){return new(e||ch)},ch.\u0275mod=g.oAB({type:ch}),ch.\u0275inj=g.cJS({imports:[ep.forRoot([]),ep]});var tp=P(4986),gn=P(2122);function np(){return(0,Dn.e)((n,e)=>{let t,r=!1;n.subscribe((0,H.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function g_(n,e){return n===e}var at,Ur=P(2011),$g=(P(750),P(3942)),pe=P(5861),us=P(9681),Sl=P(4859),Bo=P(1877),Ht=P(2090),lD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$o={},jg=jg||{},Nt=lD||self;function Hg(){}function zg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var m_="closure_uid_"+(1e9*Math.random()>>>0),VS=0;function y_(n,e,t){return n.call.apply(n.bind,arguments)}function ww(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y_:ww).apply(null,arguments)}function Gg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ei(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function Ga(){this.s=this.s,this.o=this.o}Ga.prototype.s=!1,Ga.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function vw(n){Object.prototype.hasOwnProperty.call(n,m_)&&n[m_]||(n[m_]=++VS)}(this)},Ga.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Iw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ip(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ew(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zg(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}fi.prototype.h=function(){this.defaultPrevented=!0};var hD=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",Hg,e),Nt.removeEventListener("test",Hg,e)}catch{}return n}();function qg(n){return/^[\s\xa0]*$/.test(n)}var bw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ps(n,e){return n<e?-1:n>e?1:0}function lh(){var n=Nt.navigator;return n&&(n=n.userAgent)?n:""}function jo(n){return-1!=lh().indexOf(n)}function __(n){return __[" "](n),n}__[" "]=Hg;var hh,n,fD=jo("Opera"),dh=jo("Trident")||jo("MSIE"),Tw=jo("Edge"),sp=Tw||dh,Cw=jo("Gecko")&&!(-1!=lh().toLowerCase().indexOf("webkit")&&!jo("Edge"))&&!(jo("Trident")||jo("MSIE"))&&!jo("Edge"),pD=-1!=lh().toLowerCase().indexOf("webkit")&&!jo("Edge");function op(){var n=Nt.document;return n?n.documentMode:void 0}e:{var fh="",Sw=(n=lh(),Cw?/rv:([^\);]+)(\)|;)/.exec(n):Tw?/Edge\/([\d\.]+)/.exec(n):dh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pD?/WebKit\/(\S+)/.exec(n):fD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Sw&&(fh=Sw?Sw[1]:""),dh){var ap=op();if(null!=ap&&ap>parseFloat(fh)){hh=String(ap);break e}}hh=fh}var BS={};var xw=Nt.document&&dh&&(op()||parseInt(hh,10))||void 0;function Al(n,e){if(fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Cw){e:{try{__(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:qa[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Al.X.h.call(this)}}ei(Al,fi);var qa={2:"touch",3:"pen",4:"mouse"};Al.prototype.h=function(){Al.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ku="closure_listenable_"+(1e6*Math.random()|0),Zg=0;function up(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++Zg,this.ba=this.ea=!1}function Kg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Yg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function w_(n){const e={};for(const t in n)e[t]=n[t];return e}const Rw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mw(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Rw.length;u++)t=Rw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Yu(n){this.src=n,this.g={},this.h=0}function I_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Iw(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Kg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kw(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}Yu.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=kw(n,e,r,s);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new up(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var E_="closure_lm_"+(1e6*Math.random()|0),b_={};function Nw(n,e,t,r,s){if(r&&r.once)return Ow(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Nw(n,e[u],t,r,s);return null}return t=C_(t),n&&n[Ku]?n.N(e,t,Jr(r)?!!r.capture:!!r,s):Pw(n,e,t,!1,r,s)}function Pw(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Jr(s)?!!s.capture:!!s,m=cp(n);if(m||(n[E_]=m=new Yu(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function gD(){const e=mD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hD||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(D_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ow(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ow(n,e[u],t,r,s);return null}return t=C_(t),n&&n[Ku]?n.O(e,t,Jr(r)?!!r.capture:!!r,s):Pw(n,e,t,!0,r,s)}function Lw(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Lw(n,e[u],t,r,s);else r=Jr(r)?!!r.capture:!!r,t=C_(t),n&&n[Ku]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kw(u=n.g[e],t,r,s))&&(Kg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=cp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kw(e,t,r,s)),(t=-1<n?e[n]:null)&&Qg(t))}function Qg(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ku])I_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(D_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cp(e))?(I_(t,n),0==t.h&&(t.src=null,e[E_]=null)):Kg(n)}}}function D_(n){return n in b_?b_[n]:b_[n]="on"+n}function mD(n,e){if(n.ba)n=!0;else{e=new Al(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Qg(n),n=t.call(r,e)}return n}function cp(n){return(n=n[E_])instanceof Yu?n:null}var T_="__closure_events_fn_"+(1e9*Math.random()>>>0);function C_(n){return"function"==typeof n?n:(n[T_]||(n[T_]=function(e){return n.handleEvent(e)}),n[T_])}function Vr(){Ga.call(this),this.i=new Yu(this),this.P=this,this.I=null}function ti(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new fi(e,n);else if(e instanceof fi)e.target=e.target||n;else{var s=e;Mw(e=new fi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Xg(l,r,!0,e)&&s}if(s=Xg(l=e.g=n,r,!0,e)&&s,s=Xg(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Xg(l=e.g=t[u],r,!1,e)&&s}function Xg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&I_(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}ei(Vr,Ga),Vr.prototype[Ku]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){Lw(this,n,e,t,r)},Vr.prototype.M=function(){if(Vr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Kg(t[r]);delete n.g[e],n.h--}}this.I=null},Vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var S_=Nt.JSON.stringify;function yD(){var n=gh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ph,A_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new _D,n=>n.reset());class _D{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $S(n){Nt.setTimeout(()=>{throw n},0)}function x_(n,e){ph||function xl(){var n=Nt.Promise.resolve(void 0);ph=function(){n.then(vD)}}(),Uw||(ph(),Uw=!0),gh.add(n,e)}var Uw=!1,gh=new class Fw{constructor(){this.h=this.g=null}add(e,t){const r=A_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function vD(){for(var n;n=yD();){try{n.h.call(n.g)}catch(t){$S(t)}var e=A_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Uw=!1}function Jg(n,e){Vr.call(this),this.h=n||1,this.g=e||Nt,this.j=hi(this.lb,this),this.l=Date.now()}function lp(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function R_(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function ro(n){n.g=R_(()=>{n.g=null,n.i&&(n.i=!1,ro(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ei(Jg,Vr),(at=Jg.prototype).ca=!1,at.R=null,at.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ti(this,"tick"),this.ca&&(lp(this),this.start()))}},at.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){Jg.X.M.call(this),lp(this),delete this.g};class dp extends Ga{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ro(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mr(n){Ga.call(this),this.h=n,this.g={}}ei(mr,Ga);var Qu=[];function hp(n,e,t,r){Array.isArray(t)||(t&&(Qu[0]=t.toString()),t=Qu);for(var s=0;s<t.length;s++){var u=Nw(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function cs(n){Yg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Qg(e)},n),n.g={}}function mh(){this.g=!0}function io(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function wh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return S_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}mr.prototype.M=function(){mr.X.M.call(this),cs(this)},mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mh.prototype.Aa=function(){this.g=!1},mh.prototype.info=function(){};var Os={},Rl=null;function Wa(){return Rl=Rl||new Vr}function Ml(n){fi.call(this,Os.Pa,n)}function Ih(n){const e=Wa();ti(e,new Ml(e))}function M_(n,e){fi.call(this,Os.STAT_EVENT,n),this.stat=e}function pi(n){const e=Wa();ti(e,new M_(e,n))}function k_(n,e){fi.call(this,Os.Qa,n),this.size=e}function Eh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}Os.Pa="serverreachability",ei(Ml,fi),Os.STAT_EVENT="statevent",ei(M_,fi),Os.Qa="timingevent",ei(k_,fi);var fp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},N_={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function em(){}function Vw(){}em.prototype.h=null;var nm,pp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function tm(){fi.call(this,"d")}function O_(){fi.call(this,"c")}function bh(){}function kl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new mr(this),this.O=rm,this.T=new Jg(n=sp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Bw}function Bw(){this.i=null,this.g="",this.h=!1}ei(tm,fi),ei(O_,fi),ei(bh,em),bh.prototype.g=function(){return new XMLHttpRequest},bh.prototype.i=function(){return{}},nm=new bh;var rm=45e3,Dh={},Th={};function L_(n,e,t){n.K=1,n.v=mp(Za(e)),n.s=t,n.P=!0,im(n,null)}function im(n,e){n.F=Date.now(),Nl(n),n.A=Za(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),qw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Bw,n.g=oI(n.l,t?e:null,!n.s),0<n.N&&(n.L=new dp(hi(n.La,n,n.g),n.N)),hp(n.S,n.g,"readystatechange",n.ib),e=n.H?w_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ih(),function yh(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var S=D[0];D=D[1];var k=S.split("_");l=2<=k.length&&"type"==k[1]?l+(S+"=")+D+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function sm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function F_(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=$w(n,t),s==Th){4==e&&(n.o=4,pi(14),r=!1),io(n.j,n.m,null,"[Incomplete Response]");break}if(s==Dh){n.o=4,pi(15),io(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}io(n.j,n.m,s,null),V_(n,s)}sm(n)&&s!=Th&&s!=Dh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ym(e),e.K=!0,pi(11))):(io(n.j,n.m,t,"[Invalid Chunked Response]"),Xu(n),Pl(n))}function $w(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Th:(t=Number(e.substring(t,r)),isNaN(t)?Dh:(r+=1)+t>e.length?Th:(e=e.substr(r,t),n.C=r+t,e))}function Nl(n){n.V=Date.now()+n.O,U_(n,n.O)}function U_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Eh(hi(n.gb,n),e)}function gp(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Pl(n){0==n.l.G||n.I||K_(n.l,n)}function Xu(n){gp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,lp(n.T),cs(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function V_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||or(t.h,n)))if(!n.J&&or(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ep(t),pm(t)}kh(t),pi(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Eh(hi(t.cb,t),6e3));if(1>=Zw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else nc(t,11)}else if((n.J||t.g==n)&&Ep(t),!qg(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const S=D[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const k=D[4];null!=k&&(t.Ca=k,t.j.info("SVER="+t.Ca));const U=D[5];null!=U&&"number"==typeof U&&0<U&&(t.J=r=1.5*U,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const te=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.h;u.g||-1==te.indexOf("spdy")&&-1==te.indexOf("quic")&&-1==te.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(um(u,u.h),u.h=null))}if(r.D){const xe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.za=xe,xn(r.F,r.D,xe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=X_(r,r.H?r.ka:null,r.V),l.J){Kw(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&(gp(m),Nl(m)),r.g=l}else mm(r);0<t.i.length&&Ip(t)}else"stop"!=D[0]&&"close"!=D[0]||nc(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?nc(t,7):fm(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Ih()}catch{}}function B_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Hw(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function jw(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(at=kl.prototype).setTimeout=function(n){this.O=n},at.ib=function(n){n=n.target;const e=this.L;e&&3==Ya(n)?e.l():this.La(n)},at.La=function(n){try{if(n==this.g)e:{const S=Ya(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||sp||this.g&&(this.h.h||this.g.fa()||nI(this.g)))){this.I||4!=S||7==e||Ih(),gp(this);var t=this.g.aa();this.Y=t;t:if(sm(this)){var r=nI(this.g);n="";var s=r.length,u=4==Ya(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xu(this),Pl(this);var l="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function _h(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qg(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,pi(12),Xu(this),Pl(this);break e}io(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,V_(this,t)}this.P?(F_(this,S,l),sp&&this.i&&3==S&&(hp(this.S,this.T,"tick",this.hb),this.T.start())):(io(this.j,this.m,l,null),V_(this,l)),4==S&&Xu(this),this.i&&!this.I&&(4==S?K_(this.l,this):(this.i=!1,Nl(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),Xu(this),Pl(this)}}}catch{}},at.hb=function(){if(this.g){var n=Ya(this.g),e=this.g.fa();this.C<e.length&&(gp(this),F_(this,n,e),this.i&&4!=n&&Nl(this))}},at.cancel=function(){this.I=!0,Xu(this)},at.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function vh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ih(),pi(17)),Xu(this),this.o=2,Pl(this)):U_(this,this.V-n)};var $_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ol(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ol){this.h=void 0!==e?e:n.h,Ch(this,n.j),this.s=n.s,this.g=n.g,Sh(this,n.m),this.l=n.l,e=n.i;var t=new yp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),j_(this,t),this.o=n.o}else n&&(t=String(n).match($_))?(this.h=!!e,Ch(this,t[1]||"",!0),this.s=Ah(t[2]||""),this.g=Ah(t[3]||"",!0),Sh(this,t[4]),this.l=Ah(t[5]||"",!0),j_(this,t[6]||"",!0),this.o=Ah(t[7]||"")):(this.h=!!e,this.i=new yp(null,this.h))}function Za(n){return new Ol(n)}function Ch(n,e,t){n.j=t?Ah(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Sh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function j_(n,e,t){e instanceof yp?(n.i=e,function jS(n,e){e&&!n.j&&(Ho(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(ec(this,r),qw(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=xh(e,Ju)),n.i=new yp(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function mp(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ah(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ol.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xh(e,H_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xh(e,H_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(xh(t,"/"==t.charAt(0)?om:Gw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xh(t,ID)),n.join("")};var H_=/[#\/\?@]/g,Gw=/[#\?:]/g,om=/[#\?]/g,Ju=/[#\?@]/g,ID=/#/g;function yp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ho(n){n.g||(n.g=new Map,n.h=0,n.i&&function wD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ec(n,e){Ho(n),e=tc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function am(n,e){return Ho(n),e=tc(n,e),n.g.has(e)}function qw(n,e,t){ec(n,e),0<t.length&&(n.i=null,n.g.set(tc(n,e),ip(t)),n.h+=t.length)}function tc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ww(n){this.l=n||ED,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ga&&Nt.g.Ga()&&Nt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=yp.prototype).add=function(n,e){Ho(this),this.i=null,n=tc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Ho(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},at.oa=function(){Ho(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},at.W=function(n){Ho(this);let e=[];if("string"==typeof n)am(this,n)&&(e=e.concat(this.g.get(tc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return Ho(this),this.i=null,am(this,n=tc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var ED=10;function z_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Zw(n){return n.h?1:n.g?n.g.size:0}function or(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function um(n,e){n.g?n.g.add(e):n.h=e}function Kw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Yw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ip(n.i)}function cm(){}function bD(){this.g=new cm}function Qw(n,e,t){const r=t||"";try{B_(n,function(s,u){let l=s;Jr(s)&&(l=S_(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ka(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function _p(n){this.l=n.ac||null,this.j=n.jb||!1}function lm(n,e){Vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=dm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ww.prototype.cancel=function(){if(this.i=Yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},cm.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},cm.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},ei(_p,em),_p.prototype.g=function(){return new lm(this.l,this.j)},_p.prototype.i=function(n){return function(){return n}}({}),ei(lm,Vr);var dm=0;function Jw(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Rh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hm(n)}function hm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=lm.prototype).open=function(n,e){if(this.readyState!=dm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hm(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rh(this)),this.readyState=dm},at.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hm(this)),this.g&&(this.readyState=3,hm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Nt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jw(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},at.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rh(this):hm(this),3==this.readyState&&Jw(this)}},at.Va=function(n){this.g&&(this.response=this.responseText=n,Rh(this))},at.Ua=function(n){this.g&&(this.response=n,Rh(this))},at.ga=function(){this.g&&Rh(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(lm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var eI=Nt.JSON.parse;function jn(n){Vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=so,this.K=this.L=!1}ei(jn,Vr);var so="",DD=/^https?$/i,TD=["POST","PUT"];function Ls(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Fs(n),vp(n)}function Fs(n){n.D||(n.D=!0,ti(n,"complete"),ti(n,"error"))}function G_(n){if(n.h&&typeof jg<"u"&&(!n.C[1]||4!=Ya(n)||2!=n.aa()))if(n.v&&4==Ya(n))R_(n.Ha,0,n);else if(ti(n,"readystatechange"),4==Ya(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match($_)[1]||null;if(!s&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;s=u.substr(0,u.length-1)}r=!DD.test(s?s.toLowerCase():"")}t=r}if(t)ti(n,"complete"),ti(n,"success");else{n.m=6;try{var l=2<Ya(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Fs(n)}}finally{vp(n)}}}function vp(n,e){if(n.g){tI(n);const t=n.g,r=n.C[0]?Hg:null;n.g=null,n.C=null,e||ti(n,"ready");try{t.onreadystatechange=r}catch{}}}function tI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function Ya(n){return n.g?n.g.readyState:0}function nI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case so:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rI(n){let e="";return Yg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function wp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=rI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function Qa(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function iI(n){this.Ca=0,this.i=[],this.j=new mh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Qa("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Qa("baseRetryDelayMs",5e3,n),this.bb=Qa("retryDelaySeedMs",1e4,n),this.$a=Qa("forwardChannelMaxRetries",2,n),this.ta=Qa("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Ww(n&&n.concurrentRequestLimit),this.Fa=new bD,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function fm(n){if(q_(n),3==n.G){var e=n.U++,t=Za(n.F);xn(t,"SID",n.I),xn(t,"RID",e),xn(t,"TYPE","terminate"),Mh(n,t),(e=new kl(n,n.j,e,void 0)).K=2,e.v=mp(Za(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=oI(e.l,null),e.g.da(e.v)),e.F=Date.now(),Nl(e)}Q_(n)}function pm(n){n.g&&(ym(n),n.g.cancel(),n.g=null)}function q_(n){pm(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),Ep(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Ip(n){z_(n.h)||n.m||(n.m=!0,x_(n.Ja,n),n.C=0)}function sI(n,e){var t;t=e?e.m:n.U++;const r=Za(n.F);xn(r,"SID",n.I),xn(r,"RID",t),xn(r,"AID",n.T),Mh(n,r),n.o&&n.s&&wp(r,n.o,n.s),t=new kl(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=W_(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),um(n.h,t),L_(t,r,e)}function Mh(n,e){n.ia&&Yg(n.ia,function(t,r){xn(e,r,t)}),n.l&&B_({},function(t,r){xn(e,r,t)})}function W_(n,e,t){t=Math.min(n.i.length,t);var r=n.l?hi(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=s[w].h;const S=s[w].g;if(D-=u,0>D)u=Math.max(0,s[w].h-100),m=!1;else try{Qw(S,l,"req"+D+"_")}catch{r&&r(S)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function mm(n){n.g||n.u||(n.Z=1,x_(n.Ia,n),n.A=0)}function kh(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Eh(hi(n.Ia,n),Y_(n,n.A)),n.A++,0))}function ym(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Z_(n){n.g=new kl(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Za(n.sa);xn(e,"RID","rpc"),xn(e,"SID",n.I),xn(e,"CI",n.L?"0":"1"),xn(e,"AID",n.T),xn(e,"TYPE","xmlhttp"),Mh(n,e),n.o&&n.s&&wp(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=mp(Za(e)),t.s=null,t.P=!0,im(t,n)}function Ep(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function K_(n,e){var t=null;if(n.g==e){Ep(n),ym(n),n.g=null;var r=2}else{if(!or(n.h,e))return;t=e.D,Kw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ti(r=Wa(),new k_(r,t)),Ip(n)}else mm(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function gm(n,e){return!(Zw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Eh(hi(n.Ja,n,e),Y_(n,n.C)),n.C++,0)))}(n,e)||2==r&&kh(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:nc(n,5);break;case 4:nc(n,10);break;case 3:nc(n,6);break;default:nc(n,2)}}function Y_(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function nc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=hi(n.kb,n);t||(t=new Ol("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Ch(t,"https"),mp(t)),function Xw(n,e){const t=new mh;if(Nt.Image){const r=new Image;r.onload=Gg(Ka,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Gg(Ka,t,r,"TestLoadImage: error",!1,e),r.onabort=Gg(Ka,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gg(Ka,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.l&&n.l.va(e),Q_(n),q_(n)}function Q_(n){if(n.G=0,n.la=[],n.l){const e=Yw(n.h);(0!=e.length||0!=n.i.length)&&(Ew(n.la,e),Ew(n.la,n.i),n.h.i.length=0,ip(n.i),n.i.length=0),n.l.ua()}}function X_(n,e,t){var r=t instanceof Ol?Za(t):new Ol(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Sh(r,r.m);else{var s=Nt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ol(null,void 0);r&&Ch(u,r),e&&(u.g=e),s&&Sh(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&xn(r,t,e),xn(r,"VER",n.ma),Mh(n,r),r}function oI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jn(t&&n.Da&&!n.ra?new _p({jb:!0}):n.ra)).Ka(n.H),e}function aI(){}function _m(){if(dh&&!(10<=Number(xw)))throw Error("Environmental error: no available transport.")}function ls(n,e){Vr.call(this),this.g=new iI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!qg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Nh(this)}function uI(n){tm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cI(){O_.call(this),this.status=1}function Nh(n){this.g=n}(at=jn.prototype).Ka=function(n){this.L=n},at.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nm.g(),this.C=function P_(n){return n.h||(n.h=n.i())}(this.u?this.u:nm),this.g.onreadystatechange=hi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Ls(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Nt.FormData&&n instanceof Nt.FormData,!(0<=Iw(TD,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tI(this),0<this.B&&((this.K=function zo(n){return dh&&function Aw(){return function Dw(n){var e=BS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=bw(String(hh)).split("."),t=bw("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Ps(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Ps(0==s[2].length,0==u[2].length)||Ps(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.qa,this)):this.A=R_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Ls(this,u)}},at.qa=function(){typeof jg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ti(this,"complete"),ti(this,"abort"),vp(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vp(this,!0)),jn.X.M.call(this)},at.Ha=function(){this.s||(this.F||this.v||this.l?G_(this):this.fb())},at.fb=function(){G_(this)},at.aa=function(){try{return 2<Ya(this)?this.g.status:-1}catch{return-1}},at.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),eI(e)}},at.Ea=function(){return this.m},at.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=iI.prototype).ma=8,at.G=1,at.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new kl(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=w_(u),Mw(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=W_(this,s,e),xn(t=Za(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),Mh(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(rI(u)))+"&"+e:this.o&&wp(t,this.o,u)),um(this.h,s),this.Ya&&xn(t,"TYPE","init"),this.O?(xn(t,"$req",e),xn(t,"SID","null"),s.Z=!0,L_(s,t,null)):L_(s,t,e),this.G=2}}else 3==this.G&&(n?sI(this,n):0==this.i.length||z_(this.h)||sI(this))},at.Ia=function(){if(this.u=null,Z_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Eh(hi(this.eb,this),n)}},at.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pi(10),pm(this),Z_(this))},at.cb=function(){null!=this.v&&(this.v=null,pm(this),kh(this),pi(19))},at.kb=function(n){n?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},(at=aI.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Ra=function(){},_m.prototype.g=function(n,e){return new ls(n,e)},ei(ls,Vr),ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;pi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=X_(n,null,n.V),Ip(n)},ls.prototype.close=function(){fm(this.g)},ls.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=S_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Ip(e)},ls.prototype.M=function(){this.g.l=null,delete this.j,fm(this.g),delete this.g,ls.X.M.call(this)},ei(uI,tm),ei(cI,O_),ei(Nh,aI),Nh.prototype.xa=function(){ti(this.g,"a")},Nh.prototype.wa=function(n){ti(this.g,new uI(n))},Nh.prototype.va=function(n){ti(this.g,new cI)},Nh.prototype.ua=function(){ti(this.g,"b")},_m.prototype.createWebChannel=_m.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,fp.NO_ERROR=0,fp.TIMEOUT=8,fp.HTTP_ERROR=6,N_.COMPLETE="complete",Vw.EventType=pp,pp.OPEN="a",pp.CLOSE="b",pp.ERROR="c",pp.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,jn.prototype.listenOnce=jn.prototype.O,jn.prototype.getLastError=jn.prototype.Oa,jn.prototype.getLastErrorCode=jn.prototype.Ea,jn.prototype.getStatus=jn.prototype.aa,jn.prototype.getResponseJson=jn.prototype.Sa,jn.prototype.getResponseText=jn.prototype.fa,jn.prototype.send=jn.prototype.da,jn.prototype.setWithCredentials=jn.prototype.Ka;var CD=$o.createWebChannelTransport=function(){return new _m},SD=$o.getStatEventTarget=function(){return Wa()},J_=$o.ErrorCode=fp,AD=$o.EventType=N_,xD=$o.Event=Os,lI=$o.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},RD=$o.FetchXmlHttpFactory=_p,vm=$o.WebChannel=Vw,MD=$o.XhrIo=jn;const dI="@firebase/firestore";class Br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let Ll="9.16.0";const Xa=new Bo.Yd("@firebase/firestore");function wm(){return Xa.logLevel}function ke(n,...e){if(Xa.logLevel<=Bo.in.DEBUG){const t=e.map(Im);Xa.debug(`Firestore (${Ll}): ${n}`,...t)}}function Xn(n,...e){if(Xa.logLevel<=Bo.in.ERROR){const t=e.map(Im);Xa.error(`Firestore (${Ll}): ${n}`,...t)}}function rc(n,...e){if(Xa.logLevel<=Bo.in.WARN){const t=e.map(Im);Xa.warn(`Firestore (${Ll}): ${n}`,...t)}}function Im(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ke(n="Unexpected state"){const e=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: `+n;throw Xn(e),new Error(e)}function rt(n,e){n||Ke()}function je(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ln{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ev{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Br.UNAUTHENTICATED))}shutdown(){}}class zS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gI{constructor(e){this.t=e,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let l=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ln,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=l;e.enqueueRetryable((0,pe.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ln)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new pI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new Br(e)}}class mI{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Br.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class GS{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new mI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kD{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.A=t.token,new vt(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ND(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Fl{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ND(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function Ja(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function bp(n){return n+"\0"}class Ft{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ft(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Ft(0,0))}static max(){return new mt(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ph{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ke(),void 0===r?r=e.length-t:r>e.length-t&&Ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ph.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ph?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Ph{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const PD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends Ph{construct(e,t,r){return new Hn(e,t,r)}static isValidIdentifier(e){return PD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(tn.fromString(e))}static fromName(e){return new ze(tn.fromString(e).popFirst(5))}static empty(){return new ze(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new tn(e.slice()))}}class Dp{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Em(n){return n.fields.find(e=>2===e.kind)}function Ul(n){return n.fields.filter(e=>2!==e.kind)}Dp.UNKNOWN_ID=-1;class bm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cp(0,gi.min())}}function yI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=mt.fromTimestamp(1e9===r?new Ft(t+1,0):new Ft(t,r));return new gi(s,ze.empty(),e)}function _I(n){return new gi(n.readTime,n.key,-1)}class gi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gi(mt.min(),ze.empty(),-1)}static max(){return new gi(mt.max(),ze.empty(),-1)}}function Dm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const tv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ic(n){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,pe.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==tv)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),Vl.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(s=>s?re.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const D=w;t(e[D]).next(S=>{l[D]=S,++m,m===u&&r(l)},S=>s(S))}})}static doWhile(e,t){return new re((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Tm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ln,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Oh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=iv(r.target.error);this.P.reject(new Oh(e,s))}}static open(e,t,r,s){try{return new Tm(t,e.transaction(s,r))}catch(u){throw new Oh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vI(t)}}class oo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===oo.D((0,Ht.z$)())&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ht.hl)())return!1;if(oo.N())return!0;const e=(0,Ht.z$)(),t=oo.D(e),r=0<t&&t<10,s=oo.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,pe.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Oh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Ae(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Oh(e,m))},u.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,pe.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Tm.open(u.db,e,l?"readonly":"readwrite",r),D=s(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),re.reject(S))).toPromise();return D.catch(()=>{}),yield w.v,D}catch(w){const D=w,S="FirebaseError"!==D.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",S),u.close(),!S)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class LD{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Bl(this.q.delete())}}class Oh extends Ae{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function eu(n){return"IndexedDbTransactionError"===n.name}class vI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new re((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new re((r,s)=>{t.onerror=u=>{const l=iv(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new re((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new LD(m),D=t(m.primaryKey,m.value,w);if(D instanceof re){const S=D.catch(k=>(w.done(),re.reject(k)));r.push(S)}w.isDone?s():null===w.G?m.continue():m.continue(w.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bl(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=iv(r.target.error);t(s)}})}let rv=!1;function iv(n){const e=oo.D((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rv||(rv=!0,setTimeout(()=>{throw r},0)),r}}return n}class FD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){eu(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ic(r)}yield t.nt(6e4)}))}}class WS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return re.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ke("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(s,u)).next(m=>(ke("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=_I(u);Dm(l,r)>0&&(r=l)}),new gi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Us=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>r.writeSequenceNumber(s))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class ZS{constructor(e,t,r,s,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class $l{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $l("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}function sv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Go(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sp(n){return null==n}function Lh(n){return 0===n&&1/n==-1/0}function Fh(n){return"number"==typeof n&&Number.isInteger(n)&&!Lh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Cr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const VD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sc(n){if(rt(!!n),"string"==typeof n){let e=0;const t=VD.exec(n);if(rt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jl(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function Cm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function II(n){const e=n.mapValue.fields.__previous_value__;return Cm(e)?II(e):e}function Ap(n){const e=sc(n.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}const Vs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sm={nullValue:"NULL_VALUE"};function oc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cm(n)?4:DI(n)?9007199254740991:10:Ke()}function qo(n,e){if(n===e)return!0;const t=oc(n);if(t!==oc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ap(n).isEqual(Ap(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=sc(r.timestampValue),l=sc(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,jl(n.bytesValue).isEqual(jl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ar(r.geoPointValue.latitude)===ar(s.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ar(r.integerValue)===ar(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=ar(r.doubleValue),l=ar(s.doubleValue);return u===l?Lh(u)===Lh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Ja(n.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(sv(u)!==sv(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!qo(u[m],l[m])))return!1;return!0}(n,e);default:return Ke()}var s}function Uh(n,e){return void 0!==(n.values||[]).find(t=>qo(t,e))}function ac(n,e){if(n===e)return 0;const t=oc(n),r=oc(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=ar(s.integerValue||s.doubleValue),m=ar(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return ov(n.timestampValue,e.timestampValue);case 4:return ov(Ap(n),Ap(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=jl(s),m=jl(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const D=Lt(l[w],m[w]);if(0!==D)return D}return Lt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Lt(ar(s.latitude),ar(u.latitude));return 0!==l?l:Lt(ar(s.longitude),ar(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const D=ac(l[w],m[w]);if(D)return D}return Lt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Vs.mapValue&&u===Vs.mapValue)return 0;if(s===Vs.mapValue)return 1;if(u===Vs.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let S=0;S<m.length&&S<D.length;++S){const k=Lt(m[S],D[S]);if(0!==k)return k;const U=ac(l[m[S]],w[D[S]]);if(0!==U)return U}return Lt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw Ke()}}function ov(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=sc(n),r=sc(e),s=Lt(t.seconds,r.seconds);return 0!==s?s:Lt(t.nanos,r.nanos)}function Vh(n){return xp(n)}function xp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=sc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jl(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=xp(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${xp(r.fields[m])}`;return u+"}"}(n.mapValue):Ke();var e}function Hl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Am(n){return!!n&&"integerValue"in n}function Bh(n){return!!n&&"arrayValue"in n}function EI(n){return!!n&&"nullValue"in n}function bI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xm(n){return!!n&&"mapValue"in n}function zl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Go(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TI(n){return"nullValue"in n?Sm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hl($l.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ke()}function BD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hl($l.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Vs:Ke()}function CI(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function SI(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class uc{constructor(e,t){this.position=e,this.inclusive=t}}function AI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):ac(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function xI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qo(n.position[t],e.position[t]))return!1;return!0}class RI{}class Xt extends RI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new dv(e,t,r):"array-contains"===t?new $D(e,r):"in"===t?new Mm(e,r):"not-in"===t?new jD(e,r):"array-contains-any"===t?new HD(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new NI(e,r):new hv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ac(t,this.value)):null!==t&&oc(this.value)===oc(t)&&this.matchesComparison(ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class un extends RI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new un(e,t)}matches(e){return Gl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Gl(n){return"and"===n.op}function av(n){return"or"===n.op}function uv(n){return cv(n)&&Gl(n)}function cv(n){for(const e of n.filters)if(e instanceof un)return!1;return!0}function lv(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+Vh(n.value);if(uv(n))return n.filters.map(e=>lv(e)).join(",");{const e=n.filters.map(t=>lv(t)).join(",");return`${n.op}(${e})`}}function MI(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&qo(t.value,r.value)):n instanceof un?function(t,r){return r instanceof un&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&MI(u,r.filters[l]),!0)}(n,e):void Ke();var t,r}function kI(n,e){const t=n.filters.concat(e);return un.create(t,n.op)}function Rm(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${Vh(e.value)}`:n instanceof un?function(e){return e.op.toString()+" {"+e.getFilters().map(Rm).join(" ,")+"}"}(n):"Filter";var e}class dv extends Xt{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class NI extends Xt{constructor(e,t){super(e,"in",t),this.keys=PI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hv extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=PI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function PI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class $D extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bh(t)&&Uh(t.arrayValue,this.value)}}class Mm extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uh(this.value.arrayValue,t)}}class jD extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uh(this.value.arrayValue,t)}}class HD extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uh(this.value.arrayValue,r))}}class ao{constructor(e,t="asc"){this.field=e,this.dir=t}}function OI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Jn{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fv(this.root,e,this.comparator,!1)}getReverseIterator(){return new fv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fv(this.root,e,this.comparator,!0)}}class fv{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??$r.RED,this.left=s??$r.EMPTY,this.right=u??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new $r(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return $r.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(n,e,t,r,s){return this}insert(n,e,t){return new $r(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LI(this.data.getIterator())}getIteratorFrom(e){return new LI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class LI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cc(n){return n.hasNext()?n.getNext():void 0}class Zi{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new Zi([])}unionWith(e){let t=new cn(Hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(t)}setAll(e){let t=Hn.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=zl(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());xm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];xm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Go(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new jr(zl(this.value))}}function km(n){const e=[];return Go(n.fields,(t,r)=>{const s=new Hn([t]);if(xm(r)){const u=km(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Zi(e)}class Tn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,mt.min(),mt.min(),mt.min(),jr.empty(),0)}static newFoundDocument(e,t,r,s){return new Tn(e,1,t,mt.min(),r,s,0)}static newNoDocument(e,t){return new Tn(e,2,t,mt.min(),mt.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,mt.min(),mt.min(),jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class FI{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function Nm(n,e=null,t=[],r=[],s=null,u=null,l=null){return new FI(n,e,t,r,s,u,l)}function lc(n){const e=je(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Sp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vh(r)).join(",")),e.ft=t}return e.ft}function Rp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xI(n.startAt,e.startAt)&&xI(n.endAt,e.endAt)}function Pm(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Om(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function UI(n,e,t){let r=Sm,s=!0;for(const u of Om(n,e)){let l=Sm,m=!0;switch(u.op){case"<":case"<=":l=TI(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Sm}CI({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];CI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function pv(n,e,t){let r=Vs,s=!0;for(const u of Om(n,e)){let l=Vs,m=!0;switch(u.op){case">=":case">":l=BD(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Vs}SI({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];SI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class dc{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function gv(n,e,t,r,s,u,l,m){return new dc(n,e,t,r,s,u,l,m)}function $h(n){return new dc(n)}function VI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function BI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Lm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function mv(n){return null!==n.collectionGroup}function ql(n){const e=je(n);if(null===e.dt){e.dt=[];const t=Lm(e),r=BI(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new ao(t)),e.dt.push(new ao(Hn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ao(Hn.keyField(),u))}}}return e.dt}function mi(n){const e=je(n);if(!e._t)if("F"===e.limitType)e._t=Nm(e.path,e.collectionGroup,ql(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ql(e))t.push(new ao(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new uc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new uc(e.startAt.position,e.startAt.inclusive):null;e._t=Nm(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function yv(n,e){e.getFirstInequalityField(),Lm(n);const t=n.filters.concat([e]);return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fm(n,e,t){return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mp(n,e){return Rp(mi(n),mi(e))&&n.limitType===e.limitType}function $I(n){return`${lc(mi(n))}|lt:${n.limitType}`}function _v(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Rm(r)).join(", ")}]`),Sp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vh(r)).join(",")),`Target(${t})`}(mi(n))}; limitType=${n.limitType})`}function vv(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of ql(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=AI(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,ql(t),r)||t.endAt&&!function(s,u,l){const m=AI(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,ql(t),r)));var t,r}function jI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HI(n){return(e,t)=>{let r=!1;for(const s of ql(n)){const u=kp(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function kp(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?ac(m,w):Ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}function wv(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function Iv(n){return{integerValue:""+n}}function Ev(n,e){return Fh(e)?Iv(e):wv(n,e)}class Np{constructor(){this._=void 0}}function zI(n,e,t){return n instanceof Pp?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof hc?WI(n,e):n instanceof Wl?bv(n,e):function(r,s){const u=qI(r,s),l=Hh(u)+Hh(r.gt);return Am(u)&&Am(r.gt)?Iv(l):wv(r.yt,l)}(n,e)}function GI(n,e,t){return n instanceof hc?WI(n,e):n instanceof Wl?bv(n,e):t}function qI(n,e){return n instanceof jh?Am(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Pp extends Np{}class hc extends Np{constructor(e){super(),this.elements=e}}function WI(n,e){const t=ZI(e);for(const r of n.elements)t.some(s=>qo(s,r))||t.push(r);return{arrayValue:{values:t}}}class Wl extends Np{constructor(e){super(),this.elements=e}}function bv(n,e){let t=ZI(e);for(const r of n.elements)t=t.filter(s=>!qo(s,r));return{arrayValue:{values:t}}}class jh extends Np{constructor(e,t){super(),this.yt=e,this.gt=t}}function Hh(n){return ar(n.integerValue||n.doubleValue)}function ZI(n){return Bh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zl{constructor(e,t){this.field=e,this.transform=t}}class zD{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Um{}function KI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gc(n.key,Cn.none()):new zh(n.key,n.data,Cn.none());{const t=n.data,r=jr.empty();let s=new cn(Hn.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new Zo(n.key,r,new Zi(s.toArray()),Cn.none())}}function GD(n,e,t){n instanceof zh?function(r,s,u){const l=r.value.clone(),m=Bm(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Zo?function(r,s,u){if(!fc(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=Bm(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(Dv(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pc(n,e,t,r){return n instanceof zh?function(s,u,l,m){if(!fc(s.precondition,u))return l;const w=s.value.clone(),D=Tv(s.fieldTransforms,m,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zo?function(s,u,l,m){if(!fc(s.precondition,u))return l;const w=Tv(s.fieldTransforms,m,u),D=u.data;return D.setAll(Dv(s)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,fc(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Vm(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=qI(r.transform,s||null);null!=u&&(null===t&&(t=jr.empty()),t.set(r.field,u))}return t||null}function YI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ja(t,r,(s,u)=>function Wo(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof hc&&r instanceof hc||t instanceof Wl&&r instanceof Wl?Ja(t.elements,r.elements,qo):t instanceof jh&&r instanceof jh?qo(t.gt,r.gt):t instanceof Pp&&r instanceof Pp);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class zh extends Um{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zo extends Um{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Dv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Bm(n,e,t){const r=new Map;rt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,GI(l,m,t[s]))}return r}function Tv(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,zI(u,l,e))}return r}class gc extends Um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Op extends Um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QI{constructor(e){this.count=e}}var er,Jt;function XI(n){switch(n){default:return Ke();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function JI(n){if(void 0===n)return Xn("GRPC error has no .code"),ue.UNKNOWN;switch(n){case er.OK:return ue.OK;case er.CANCELLED:return ue.CANCELLED;case er.UNKNOWN:return ue.UNKNOWN;case er.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case er.INTERNAL:return ue.INTERNAL;case er.UNAVAILABLE:return ue.UNAVAILABLE;case er.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case er.NOT_FOUND:return ue.NOT_FOUND;case er.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case er.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case er.ABORTED:return ue.ABORTED;case er.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case er.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case er.DATA_LOSS:return ue.DATA_LOSS;default:return Ke()}}(Jt=er||(er={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class mc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Go(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return wI(this.inner)}size(){return this.innerSize}}const qD=new Jn(ze.comparator);function Ri(){return qD}const $m=new Jn(ze.comparator);function Gh(...n){let e=$m;for(const t of n)e=e.insert(t.key,t);return e}function eE(n){let e=$m;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function uo(){return Lp()}function Cv(){return Lp()}function Lp(){return new mc(n=>n.toString(),(n,e)=>n.isEqual(e))}const tE=new Jn(ze.comparator),nE=new cn(ze.comparator);function Gt(...n){let e=nE;for(const t of n)e=e.add(t);return e}const rE=new cn(Lt);function jm(){return rE}class Sr{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ko.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sr(mt.min(),s,jm(),Ri(),Gt())}}class Ko{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ko(r,t,Gt(),Gt(),Gt())}}class Hm{constructor(e,t,r,s){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=s}}class iE{constructor(e,t){this.targetId=e,this.Et=t}}class WD{constructor(e,t,r=Cr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class ZD{constructor(){this.At=0,this.Rt=qh(),this.bt=Cr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Gt(),t=Gt(),r=Gt();return this.Rt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ke()}}),new Ko(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=qh()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class sE{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ri(),this.qt=Sv(),this.Ut=new cn(Lt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,r=e.Et.count,s=this.Yt(t);if(s){const u=s.target;if(Pm(u))if(0===r){const l=new ze(u.path);this.Qt(t,l,Tn.newNoDocument(l,mt.min()))}else rt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,l)=>{const m=this.Yt(l);if(m){if(u.current&&Pm(m.target)){const w=new ze(m.target.path);null!==this.Lt.get(w)||this.te(l,w)||this.Qt(l,w,Tn.newNoDocument(w,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=Gt();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const D=this.Yt(w);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const s=new Sr(e,t,this.Ut,this.Lt,r);return this.Lt=Ri(),this.qt=Sv(),this.Ut=new cn(Lt),s}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new ZD,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new cn(Lt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new ZD),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Sv(){return new Jn(ze.comparator)}function qh(){return new Jn(ze.comparator)}const KD={asc:"ASCENDING",desc:"DESCENDING"},Av={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YD={and:"AND",or:"OR"};class oE{constructor(e,t){this.databaseId=e,this.wt=t}}function Wh(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aE(n,e){return n.wt?e.toBase64():e.toUint8Array()}function QD(n,e){return Wh(n,e.toTimestamp())}function zn(n){return rt(!!n),mt.fromTimestamp(function(e){const t=sc(e);return new Ft(t.seconds,t.nanos)}(n))}function zm(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function xv(n){const e=tn.fromString(n);return rt(Fv(e)),e}function yc(n,e){return zm(n.databaseId,e.path)}function Bs(n,e){const t=xv(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(Mv(t))}function uE(n,e){return zm(n.databaseId,e)}function Rv(n){const e=xv(n);return 4===e.length?tn.emptyPath():Mv(e)}function Fp(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mv(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Kl(n,e,t){return{name:yc(n,e),fields:t.value.mapValue.fields}}function cE(n,e,t){const r=Bs(n,e.name),s=zn(e.updateTime),u=e.createTime?zn(e.createTime):mt.min(),l=new jr({mapValue:{fields:e.fields}}),m=Tn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Gm(n,e){let t;if(e instanceof zh)t={update:Kl(n,e.key,e.value)};else if(e instanceof gc)t={delete:yc(n,e.key)};else if(e instanceof Zo)t={update:Kl(n,e.key,e.data),updateMask:JD(e.fieldMask)};else{if(!(e instanceof Op))return Ke();t={verify:yc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Pp)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof hc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jh)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw Ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:QD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ke()),t;var s}function Nv(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Cn.updateTime(zn(s.updateTime)):void 0!==s.exists?Cn.exists(s.exists):Cn.none():Cn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(rt("REQUEST_TIME"===l.setToServerValue),m=new Pp):"appendMissingElements"in l?m=new hc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Wl(l.removeAllFromArray.values||[]):"increment"in l?m=new jh(u,l.increment):Ke();const w=Hn.fromServerFormat(l.fieldPath);return new Zl(w,m)}(n,s)):[];var s;if(e.update){const s=Bs(n,e.update.name),u=new jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Zi((e.updateMask.fieldPaths||[]).map(D=>Hn.fromServerFormat(D)));return new Zo(s,u,l,t,r)}return new zh(s,u,t,r)}if(e.delete){const s=Bs(n,e.delete);return new gc(s,t)}if(e.verify){const s=Bs(n,e.verify);return new Op(s,t)}return Ke()}function dE(n,e){return{documents:[uE(n,e.path)]}}function Pv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=uE(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=uE(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return Lv(un.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:Zh((S=D).field),direction:XD(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(D=e.limit,n.wt||Sp(D)?D:{value:D});var D,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function hE(n){let e=Rv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){rt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const k=Ov(S);return k instanceof un&&uv(k)?k.getFilters():[k]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new ao(Kh((k=S).field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let m=null;t.limit&&(m=function(S){let k;return k="object"==typeof S?S.value:S,Sp(k)?null:k}(t.limit));let w=null;var S;t.startAt&&(w=new uc((S=t.startAt).values||[],!!S.before));let D=null;return t.endAt&&(D=function(S){return new uc(S.values||[],!S.before)}(t.endAt)),gv(e,s,l,u,m,"F",w,D)}function Ov(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kh(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Kh(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kh(e.unaryFilter.field);return Xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Kh(e.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(n):void 0!==n.fieldFilter?Xt.create(Kh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return un.create(e.compositeFilter.filters.map(t=>Ov(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ke()}}(e.compositeFilter.op))}(n):Ke();var e}function XD(n){return KD[n]}function pE(n){return Av[n]}function gE(n){return YD[n]}function Zh(n){return{fieldPath:n.canonicalString()}}function Kh(n){return Hn.fromServerFormat(n.fieldPath)}function Lv(n){return n instanceof Xt?function(e){if("=="===e.op){if(bI(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NAN"}};if(EI(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bI(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NOT_NAN"}};if(EI(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zh(e.field),op:pE(e.op),value:e.value}}}(n):n instanceof un?function(e){const t=e.getFilters().map(r=>Lv(r));return 1===t.length?t[0]:{compositeFilter:{op:gE(e.op),filters:t}}}(n):Ke()}function JD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Uv(e)),e=mE(n.get(t),e);return Uv(e)}function mE(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Uv(n){return n+"\x01\x01"}function Yo(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Ke(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:Ke()}u=l+2}return new tn(r)}const yE=["userId","batchId"];function Vv(n,e){return[n,yi(e)]}function Bv(n,e,t){return[n,yi(e),t]}const YS={},QS=["prefixPath","collectionGroup","readTime","documentId"],XS=["prefixPath","collectionGroup","documentId"],JS=["collectionGroup","readTime","prefixPath","documentId"],eA=["canonicalId","targetId"],tA=["targetId","path"],nA=["path","targetId"],rA=["collectionId","parent"],qm=["indexId","uid"],iA=["uid","sequenceNumber"],_E=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wm=["indexId","uid","orderedDocumentKey"],vE=["userId","collectionPath","documentId"],wE=["userId","collectionPath","largestBatchId"],sA=["userId","collectionGroup","largestBatchId"],Zm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IE=[...Zm,"documentOverlays"],EE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$v=EE,oA=[...$v,"indexConfiguration","indexState","indexEntries"];class bE extends nv{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=je(n);return oo.M(t.se,e)}class jv{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&GD(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Cv();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=KI(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(t,r)=>YI(t,r))&&Ja(this.baseMutations,e.baseMutations,(t,r)=>YI(t,r))}}class Yh{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){rt(e.mutations.length===r.length);let s=tE;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new Yh(e,t,r,s)}}class Hv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yl{constructor(e,t,r,s,u=mt.min(),l=mt.min(),m=Cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new Yl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class eT{constructor(e){this.ie=e}}function DE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Km(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yc(s=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Wh(s,u.version.toTimestamp()),createTime:Wh(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ql(e.version)};else{if(!e.isUnknownDocument())return Ke();r.unknownDocument={path:t.path.toArray(),version:Ql(e.version)}}var s,u;return r}function Km(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ql(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qh(n){const e=new Ft(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function Xl(n,e){const t=(e.baseMutations||[]).map(u=>Nv(n.ie,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>Nv(n.ie,u)),s=Ft.fromMillis(e.localWriteTimeMs);return new jv(e.batchId,s,t,r)}function Xh(n){const e=Qh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qh(n.lastLimboFreeSnapshotVersion):mt.min();let r;var s;return void 0!==n.query.documents?(rt(1===(s=n.query).documents.length),r=mi($h(Rv(s.documents[0])))):r=mi(hE(n.query)),new Yl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Cr.fromBase64String(n.resumeToken))}function zv(n,e){const t=Ql(e.snapshotVersion),r=Ql(e.lastLimboFreeSnapshotVersion);let s;s=Pm(e.target)?dE(n.ie,e.target):Pv(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:lc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function TE(n){const e=hE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Fm(e,e.limit,"L"):e}function ds(n,e){return new Hv(e.largestBatchId,Nv(n.ie,e.overlayMutation))}function CE(n,e){const t=e.path.lastSegment();return[n,yi(e.path.popLast()),t]}function Ym(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ql(r.readTime),documentKey:yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class tT{getBundleMetadata(e,t){return nT(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Qh(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return nT(e).put({bundleId:(r=t).id,createTime:Ql(zn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return hs(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:TE(s.bundledQuery),readTime:Qh(s.readTime)};var s})}saveNamedQuery(e,t){return hs(e).put({name:(r=t).name,readTime:Ql(zn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function nT(n){return Hr(n,"bundles")}function hs(n){return Hr(n,"namedQueries")}class Qm{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Qm(e,t.uid||"")}getOverlay(e,t){return Jl(e).get(CE(this.userId,t)).next(r=>r?ds(this.yt,r):null)}getOverlays(e,t){const r=uo();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new Hv(t,l);s.push(this.oe(e,m))}),re.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(yi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Jl(e).Y("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const s=uo(),u=yi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Jl(e).W("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const D=ds(this.yt,w);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=uo();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jl(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,D,S)=>{const k=ds(this.yt,D);u.size()<s||k.largestBatchId===l?(u.set(k.getKey(),k),l=k.largestBatchId):S.done()}).next(()=>u)}oe(e,t){return Jl(e).put(function(r,s,u){const[l,m,w]=CE(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Gm(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function Jl(n){return Hr(n,"documentOverlays")}class ed{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Lh(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(jl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?DI(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Ke()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const s of Object.keys(r))this.de(s,t),this.ce(r[s],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const s of r)this.ce(s,t)}me(e,t){this.he(t,37),ze.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function rT(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Xm(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=rT(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ed.Ie=new ed;class SE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const s=t.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const s=t.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}this.Pe()}Se(e){const t=this.De(e),r=Xm(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}xe(e){const t=this.De(e),r=Xm(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class AE{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class iT{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Jh{constructor(){this.$e=new SE,this.Be=new AE(this.$e),this.Le=new iT(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class _c{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _c(this.indexId,this.documentKey,this.arrayValue,r)}}function vc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Gv(n.arrayValue,e.arrayValue),0!==t?t:(t=Gv(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function Gv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class sT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){rt(e.collectionGroup===this.collectionId);const t=Em(e);if(void 0!==t&&!this.We(t))return!1;const r=Ul(e);let s=0,u=0;for(;s<r.length&&this.We(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Qe){const l=r[s];if(!this.ze(this.Qe,l)||!this.He(this.Ke[u++],l))return!1;++s}for(;s<r.length;++s)if(u>=this.Ke.length||!this.He(this.Ke[u++],r[s]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Jm(n){var e,t;if(rt(n instanceof Xt||n instanceof un),n instanceof Xt){if(n instanceof Mm){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Xt.create(n.field,"==",u)))||[];return un.create(s,"or")}return n}const r=n.filters.map(s=>Jm(s));return un.create(r,n.op)}function wc(n){if(0===n.getFilters().length)return[];const e=qv(Jm(n));return rt(Qo(e)),ey(e)||Up(e)?[e]:e.getFilters()}function ey(n){return n instanceof Xt}function Up(n){return n instanceof un&&uv(n)}function Qo(n){return ey(n)||Up(n)||function(e){if(e instanceof un&&av(e)){for(const t of e.getFilters())if(!ey(t)&&!Up(t))return!1;return!0}return!1}(n)}function qv(n){if(rt(n instanceof Xt||n instanceof un),n instanceof Xt)return n;if(1===n.filters.length)return qv(n.filters[0]);const e=n.filters.map(r=>qv(r));let t=un.create(e,n.op);return t=ty(t),Qo(t)?t:(rt(t instanceof un),rt(Gl(t)),rt(t.filters.length>1),t.filters.reduce((r,s)=>xE(r,s)))}function xE(n,e){let t;return rt(n instanceof Xt||n instanceof un),rt(e instanceof Xt||e instanceof un),t=n instanceof Xt?e instanceof Xt?un.create([n,e],"and"):RE(n,e):e instanceof Xt?RE(e,n):function(r,s){if(rt(r.filters.length>0&&s.filters.length>0),Gl(r)&&Gl(s))return kI(r,s.getFilters());const u=av(r)?r:s,l=av(r)?s:r,m=u.filters.map(w=>xE(w,l));return un.create(m,"or")}(n,e),ty(t)}function RE(n,e){if(Gl(e))return kI(e,n.getFilters());{const t=e.filters.map(r=>xE(n,r));return un.create(t,"or")}}function ty(n){if(rt(n instanceof Xt||n instanceof un),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return ty(e[0]);if(cv(n))return n;const t=e.map(s=>ty(s)),r=[];return t.forEach(s=>{s instanceof Xt?r.push(s):s instanceof un&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:un.create(r,n.op)}class oT{constructor(){this.Je=new Wv}addToCollectionParentIndex(e,t){return this.Je.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(gi.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Wv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new cn(tn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new cn(tn.comparator)).toArray()}}const Vp=new Uint8Array(0);class uA{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Wv,this.Xe=new mc(r=>lc(r),(r,s)=>Rp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:yi(s)};return Zv(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[bp(t),""],!1,!0);return Zv(e).W(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Yo(l.parent))}return r})}addFieldIndex(e,t){const r=$p(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=ny(e);return u.next(m=>{l.put(Ym(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=$p(e),s=ny(e),u=Bp(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Bp(e);let s=!0;const u=new Map;return re.forEach(this.Ze(t),l=>this.tn(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Gt();const m=[];return re.forEach(u,(w,D)=>{var S;ke("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${lc(t)}`);const k=function(ut,it){const bt=Em(it);if(void 0===bt)return null;for(const Vt of Om(ut,bt.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(D,w),U=function(ut,it){const bt=new Map;for(const Vt of Ul(it))for(const lr of Om(ut,Vt.fieldPath))switch(lr.op){case"==":case"in":bt.set(Vt.fieldPath.canonicalString(),lr.value);break;case"not-in":case"!=":return bt.set(Vt.fieldPath.canonicalString(),lr.value),Array.from(bt.values())}return null}(D,w),K=function(ut,it){const bt=[];let Vt=!0;for(const lr of Ul(it)){const su=0===lr.kind?UI(ut,lr.fieldPath,ut.startAt):pv(ut,lr.fieldPath,ut.startAt);bt.push(su.value),Vt&&(Vt=su.inclusive)}return new uc(bt,Vt)}(D,w),te=function(ut,it){const bt=[];let Vt=!0;for(const lr of Ul(it)){const su=0===lr.kind?pv(ut,lr.fieldPath,ut.endAt):UI(ut,lr.fieldPath,ut.endAt);bt.push(su.value),Vt&&(Vt=su.inclusive)}return new uc(bt,Vt)}(D,w),xe=this.en(w,D,K),Re=this.en(w,D,te),Tt=this.nn(w,D,U),At=this.sn(w.indexId,k,xe,K.inclusive,Re,te.inclusive,Tt);return re.forEach(At,ut=>r.J(ut,t.limit).next(it=>{it.forEach(bt=>{const Vt=ze.fromSegments(bt.documentKey);l.has(Vt)||(l=l.add(Vt),m.push(Vt))})}))}).next(()=>m)}return re.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:wc(un.create(e.filters,"and")).map(r=>Nm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),D=w/(null!=t?t.length:1),S=[];for(let k=0;k<w;++k){const U=t?this.rn(t[k/D]):Vp,K=this.on(e,U,r[k%D],s),te=this.un(e,U,u[k%D],l),xe=m.map(Re=>this.on(e,U,Re,!0));S.push(...this.createRange(K,te,xe))}return S}on(e,t,r,s){const u=new _c(e,ze.empty(),t,r);return s?u:u.Ue()}un(e,t,r,s){const u=new _c(e,ze.empty(),t,r);return s?u.Ue():u}tn(e,t){const r=new sT(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.je(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.Ze(t);return re.forEach(s,u=>this.tn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new cn(Hn.comparator),D=!1;for(const S of m.filters)for(const k of S.getFlattenedFilters())k.field.isKeyField()||("array-contains"===k.op||"array-contains-any"===k.op?D=!0:w=w.add(k.field));for(const S of m.orderBy)S.field.isKeyField()||(w=w.add(S.field));return w.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}cn(e,t){const r=new Jh;for(const s of Ul(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.qe(s.kind);ed.Ie.ue(u,l)}return r.Fe()}rn(e){const t=new Jh;return ed.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Jh;return ed.Ie.ue(Hl(this.databaseId,t),r.qe(function(s){const u=Ul(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let s=[];s.push(new Jh);let u=0;for(const l of Ul(e)){const m=r[u++];for(const w of s)if(this.hn(t,l.fieldPath)&&Bh(m))s=this.ln(s,l,m);else{const D=w.qe(l.kind);ed.Ie.ue(m,D)}}return this.fn(s)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new Jh;w.seed(m.Fe()),ed.Ie.ue(l,w.qe(t.kind)),u.push(w)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=$p(e),s=ny(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return re.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(D,S){const k=S?new Cp(S.sequenceNumber,new gi(Qh(S.readTime),new ze(Yo(S.documentKey)),S.largestBatchId)):Cp.empty(),U=D.fields.map(([K,te])=>new bm(Hn.fromServerFormat(K),te));return new Dp(D.indexId,D.collectionGroup,U,k)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=$p(e),u=ny(e);return this.dn(e).next(l=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,w=>u.put(Ym(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?re.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),re.forEach(m,w=>this._n(e,s,w).next(D=>{const S=this.wn(u,w);return D.isEqual(S)?re.resolve():this.mn(e,u,w,D,S)}))))})}gn(e,t,r,s){return Bp(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,s){return Bp(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const s=Bp(e);let u=new cn(vc);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,m)=>{u=u.add(new _c(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new cn(vc);const s=this.cn(t,e);if(null==s)return r;const u=Em(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Bh(l))for(const m of l.arrayValue.values||[])r=r.add(new _c(t.indexId,e.key,this.rn(m),s))}else r=r.add(new _c(t.indexId,e.key,Vp,s));return r}mn(e,t,r,s,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,D,S,k){const U=m.getIterator(),K=w.getIterator();let te=cc(U),xe=cc(K);for(;te||xe;){let Re=!1,Tt=!1;if(te&&xe){const At=D(te,xe);At<0?Tt=!0:At>0&&(Re=!0)}else null!=te?Tt=!0:Re=!0;Re?(S(xe),xe=cc(K)):Tt?(k(te),te=cc(U)):(te=cc(U),xe=cc(K))}}(s,u,vc,m=>{l.push(this.gn(e,t,r,m))},m=>{l.push(this.yn(e,t,r,m))}),re.waitFor(l)}dn(e){let t=1;return ny(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>vc(l,m)).filter((l,m,w)=>!m||0!==vc(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=vc(l,e),w=vc(l,t);if(0===m)s[0]=e.Ue();else if(m>0&&w<0)s.push(l),s.push(l.Ue());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.pn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,Vp,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,Vp,[]]))}return u}pn(e,t){return vc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ry)}getMinOffset(e,t){return re.mapArray(this.Ze(t),r=>this.tn(e,r).next(s=>s||Ke())).next(ry)}}function Zv(n){return Hr(n,"collectionParents")}function Bp(n){return Hr(n,"indexEntries")}function $p(n){return Hr(n,"indexConfiguration")}function ny(n){return Hr(n,"indexState")}function ry(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Dm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new gi(e.readTime,e.documentKey,t)}const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mi(e,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yv(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:l},(S,k,U)=>(m++,U.delete()));u.push(w.next(()=>{rt(1===m)}));const D=[];for(const S of t.mutations){const k=Bv(e,S.key.path,t.batchId);u.push(s.delete(k)),D.push(S.key)}return re.waitFor(u).next(()=>D)}function jp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ke();e=n.noDocument}return JSON.stringify(e).length}Mi.DEFAULT_COLLECTION_PERCENTILE=10,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mi.DEFAULT=new Mi(41943040,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mi.DISABLED=new Mi(-1,0,0);class Hp{constructor(e,t,r,s){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static re(e,t,r,s){rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Hp(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return co(e).Z({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=td(e),l=co(e);return l.add({}).next(m=>{rt("number"==typeof m);const w=new jv(m,t,r,s),D=function(U,K,te){const xe=te.baseMutations.map(Tt=>Gm(U.ie,Tt)),Re=te.mutations.map(Tt=>Gm(U.ie,Tt));return{userId:K,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:xe,mutations:Re}}(this.yt,this.userId,w),S=[];let k=new cn((U,K)=>Lt(U.canonicalString(),K.canonicalString()));for(const U of s){const K=Bv(this.userId,U.key.path,m);k=k.add(U.key.path.popLast()),S.push(l.put(D)),S.push(u.put(K,YS))}return k.forEach(U=>{S.push(this.indexManager.addToCollectionParentIndex(e,U))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),re.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return co(e).get(t).next(r=>r?(rt(r.userId===this.userId),Xl(this.yt,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return co(e).Z({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(rt(m.batchId>=r),u=Xl(this.yt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return co(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return co(e).W("userMutationsIndex",t).next(r=>r.map(s=>Xl(this.yt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vv(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return td(e).Z({range:s},(l,m,w)=>{const[D,S,k]=l,U=Yo(S);if(D===this.userId&&t.path.isEqual(U))return co(e).get(k).next(K=>{if(!K)throw Ke();rt(K.userId===this.userId),u.push(Xl(this.yt,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Lt);const s=[];return t.forEach(u=>{const l=Vv(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=td(e).Z({range:m},(D,S,k)=>{const[U,K,te]=D,xe=Yo(K);U===this.userId&&u.path.isEqual(xe)?r=r.add(te):k.done()});s.push(w)}),re.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Vv(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new cn(Lt);return td(e).Z({range:l},(w,D,S)=>{const[k,U,K]=w,te=Yo(U);k===this.userId&&r.isPrefixOf(te)?te.length===s&&(m=m.add(K)):S.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(co(e).get(u).next(l=>{if(null===l)throw Ke();rt(l.userId===this.userId),r.push(Xl(this.yt,l))}))}),re.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Yv(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return td(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=Yo(u[1]);s.push(w)}else m.done()}).next(()=>{rt(0===s.length)})})}containsKey(e,t){return zp(e,this.userId,t)}Rn(e){return ME(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zp(n,e,t){const r=Vv(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return td(n).Z({range:u,X:!0},(m,w,D)=>{const[S,k,U]=m;S===e&&k===s&&(l=!0),D.done()}).next(()=>l)}function co(n){return Hr(n,"mutations")}function td(n){return Hr(n,"documentMutations")}function ME(n){return Hr(n,"mutationQueues")}class nd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new nd(0)}static vn(){return new nd(-1)}}class cA{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new nd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mt.fromTimestamp(new Ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gp(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Gp(e).Z((l,m)=>{const w=Xh(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>re.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Gp(e).Z((r,s)=>{const u=Xh(s);t(u)})}Vn(e){return aT(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}Sn(e,t){return aT(e).put("targetGlobalKey",t)}Dn(e,t){return Gp(e).put(zv(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=lc(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Gp(e).Z({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const D=Xh(m);Rp(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=tu(e);return t.forEach(l=>{const m=yi(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),re.waitFor(s)}removeMatchingKeys(e,t,r){const s=tu(e);return re.forEach(t,u=>{const l=yi(u.path);return re.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=tu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=tu(e);let u=Gt();return s.Z({range:r,X:!0},(l,m,w)=>{const D=Yo(l[1]),S=new ze(D);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=yi(t.path),s=IDBKeyRange.bound([r],[bp(r)],!1,!0);let u=0;return tu(e).Z({index:"documentTargetsIndex",X:!0,range:s},([l,m],w,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}ne(e,t){return Gp(e).get(t).next(r=>r?Xh(r):null)}}function Gp(n){return Hr(n,"targets")}function aT(n){return Hr(n,"targetGlobal")}function tu(n){return Hr(n,"targetDocuments")}function kE([n,e],[t,r]){const s=Lt(n,t);return 0===s?Lt(e,r):s}class uT{constructor(e){this.xn=e,this.buffer=new cn(kE),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){eu(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ic(r)}yield t.Fn(3e5)}))}}class lA{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Us.at);const r=new uT(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Kv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,s,u,l,m,w,D;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),s=this.params.maximumSequenceNumbersToCollect):s=k,l=Date.now(),this.nthSequenceNumber(e,s))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(D=Date.now(),wm()<=Bo.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${k} documents in `+(D-w)+`ms\nTotal Duration: ${D-S}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:k})))}}class dA{constructor(e,t){this.db=e,this.garbageCollector=new lA(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return Qv(e,r)}removeReference(e,t,r){return Qv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Qv(e,t)}Gn(e,t){return function(r,s){let u=!1;return ME(r).tt(l=>zp(r,l,s).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const w=this.Gn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),tu(e).delete([0,yi(l.path)])))});s.push(w)}}).next(()=>re.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Qv(e,t)}Kn(e,t){const r=tu(e);let s,u=Us.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:D})=>{0===l?(u!==Us.at&&t(new ze(Yo(s)),u),u=D,s=w):u=Us.at}).next(()=>{u!==Us.at&&t(new ze(Yo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qv(n,e){return tu(n).put((r=n.currentSequenceNumber,{targetId:0,path:yi(e.path),sequenceNumber:r}));var r}class lT{constructor(){this.changes=new mc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hA{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return rd(e).put(r)}removeEntry(e,t,r){return rd(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Km(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return rd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ef(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return rd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ef(t))},(s,u)=>{r={document:this.jn(t,u),size:jp(u)}}).next(()=>r)}getEntries(e,t){let r=Ri();return this.zn(e,t,(s,u)=>{const l=this.jn(s,u);r=r.insert(s,l)}).next(()=>r)}Hn(e,t){let r=Ri(),s=new Jn(ze.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),s=s.insert(u,jp(l))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let s=new cn(Xv);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(ef(s.first()),ef(s.last())),l=s.getIterator();let m=l.getNext();return rd(e).Z({index:"documentKeyIndex",range:u},(w,D,S)=>{const k=ze.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&Xv(m,k)<0;)r(m,null),m=l.getNext();m&&m.isEqual(k)&&(r(m,D),m=l.hasNext()?l.getNext():null),m?S.j(ef(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Km(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rd(e).W(IDBKeyRange.bound(s,u,!0)).next(l=>{let m=Ri();for(const w of l){const D=this.jn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Ri();const l=Ic(t,r),m=Ic(t,gi.max());return rd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,D,S)=>{const k=this.jn(ze.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(k.key,k),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new iy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PE(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Qn(e,t){return PE(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function aA(n,e){let t;if(e.document)t=cE(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),s=Qh(e.noDocument.readTime);t=Tn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ke();{const r=ze.fromSegments(e.unknownDocument.path),s=Qh(e.unknownDocument.version);t=Tn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Ft(r[0],r[1]);return mt.fromTimestamp(s)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return Tn.newInvalidDocument(e)}}function NE(n){return new hA(n)}class iy extends lT{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new mc(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new cn((u,l)=>Lt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=DE(this.Yn.yt,l);s=s.add(u.path.popLast());const D=jp(w);r+=D-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=DE(this.Yn.yt,l.convertToNoDocument(mt.min()));t.push(this.Yn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function PE(n){return Hr(n,"remoteDocumentGlobal")}function rd(n){return Hr(n,"remoteDocumentsV14")}function ef(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ic(n,e){const t=e.documentKey.path.toArray();return[n,Km(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xv(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Lt(t[u],r[u]),s)return s;return s=Lt(t.length,r.length),s||(s=Lt(t[t.length-2],r[r.length-2]),s||Lt(t[t.length-1],r[r.length-1]))}class Jv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sy{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&pc(r.mutation,s,Zi.empty(),Ft.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const s=uo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Gh();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=uo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=Ri();const l=Lp(),m=Lp();return t.forEach((w,D)=>{const S=r.get(D.key);s.has(D.key)&&(void 0===S||S.mutation instanceof Zo)?u=u.insert(D.key,D):void 0!==S?(l.set(D.key,S.mutation.getFieldMask()),pc(S.mutation,D,S.mutation.getFieldMask(),Ft.now())):l.set(D.key,Zi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((D,S)=>l.set(D,S)),t.forEach((D,S)=>{var k;return m.set(D,new Jv(S,null!==(k=l.get(D))&&void 0!==k?k:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Lp();let s=new Jn((l,m)=>l-m),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let S=r.get(w)||Zi.empty();S=m.applyToLocalView(D,S),r.set(w,S);const k=(s.get(m.batchId)||Gt()).add(w);s=s.insert(m.batchId,k)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),D=w.key,S=w.value,k=Cv();S.forEach(U=>{if(!u.has(U)){const K=KI(t.get(U),r.get(U));null!==K&&k.set(U,K),u=u.add(U)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,k))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):re.resolve(uo());let m=-1,w=u;return l.next(D=>re.forEach(D,(S,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),u.get(S)?re.resolve():this.remoteDocumentCache.getEntry(e,S).next(U=>{w=w.insert(S,U)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,w,D,Gt())).next(S=>({batchId:m,changes:eE(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let s=Gh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Gh();return this.indexManager.getCollectionParents(e,s).next(l=>re.forEach(l,m=>{const w=(D=t,S=m.child(s),new dc(S,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((S,k)=>{u=u.insert(S,k)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const D=w.getKey();null===s.get(D)&&(s=s.insert(D,Tn.newInvalidDocument(D)))});let l=Gh();return s.forEach((m,w)=>{const D=u.get(m);void 0!==D&&pc(D.mutation,w,Zi.empty(),Ft.now()),vv(t,w)&&(l=l.insert(m,w))}),l})}}class dT{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:zn(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:TE(r.bundledQuery),readTime:zn(r.readTime)}),re.resolve();var r}}class e0{constructor(){this.overlays=new Jn(ze.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=uo();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.oe(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=uo(),u=t.length+1,l=new ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Jn((D,S)=>D-S);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let S=u.get(D.largestBatchId);null===S&&(S=uo(),u=u.insert(D.largestBatchId,S)),S.set(D.getKey(),D)}}const m=uo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,S)=>m.set(D,S)),!(m.size()>=s)););return re.resolve(m)}oe(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Hv(t,r));let u=this.es.get(t);void 0===u&&(u=Gt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class qp{constructor(){this.ns=new cn(ur.ss),this.rs=new cn(ur.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ur(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ur(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new tn([])),r=new ur(t,e),s=new ur(t,e+1),u=[];return this.rs.forEachInRange([r,s],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new tn([])),r=new ur(t,e),s=new ur(t,e+1);let u=Gt();return this.rs.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new ur(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ur{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||Lt(e._s,t._s)}static os(e,t){return Lt(e._s,t._s)||ze.comparator(e.key,t.key)}}class fA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new cn(ur.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const l=new jv(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.gs=this.gs.add(new ur(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ur(t,0),s=new ur(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],l=>{const m=this.ys(l._s);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Lt);return t.forEach(s=>{const u=new ur(s,0),l=new ur(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const l=new ur(new ze(u),0);let m=new cn(Lt);return this.gs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(m=m.add(w._s)),!0)},l),re.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,s=>{const u=new ur(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ur(t,0),s=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pA{constructor(e){this.Es=e,this.docs=new Jn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Ri();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Tn.newInvalidDocument(s))}),re.resolve(r)}getAllFromCollection(e,t,r){let s=Ri();const u=new ze(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:w}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Dm(_I(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,t,r,s){Ke()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gA(this)}getSize(e){return re.resolve(this.size)}}class gA extends lT{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class mA{constructor(e){this.persistence=e,this.Rs=new mc(t=>lc(t),Rp),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new qp,this.targetCount=0,this.vs=nd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new nd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),re.waitFor(u).next(()=>s)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class t0{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Us(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new mA(this),this.indexManager=new oT,this.remoteDocumentCache=new pA(r=>this.referenceDelegate.xs(r)),this.yt=new eT(t),this.Ns=new dT(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new fA(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const s=new hT(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class hT extends nv{constructor(e){super(),this.currentSequenceNumber=e}}class oy{constructor(e){this.persistence=e,this.Fs=new qp,this.$s=null}static Bs(e){return new oy(e)}get Ls(){if(this.$s)return this.$s;throw Ke()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const s=ze.fromPath(r);return this.qs(e,s).next(u=>{u||t.removeEntry(s,mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class fT{constructor(e){this.yt=e}$(e,t,r,s){const u=new Tm("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yE,{unique:!0}),m.createObjectStore("documentMutations"),OE(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=re.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),OE(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").W().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yE,{unique:!0});const S=w.store("mutations"),k=D.map(U=>S.put(U));return re.waitFor(k)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Us(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(l=l.next(()=>this.Gs(u))),r<8&&s>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.js(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:vE});w.createIndex("collectionPathOverlayIndex",wE,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",sA,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:QS});w.createIndex("documentKeyIndex",XS),w.createIndex("collectionGroupIndex",JS)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:qm}).createIndex("sequenceNumberIndex",iA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:_E}).createIndex("documentKeyIndex",Wm,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=jp(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>re.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>re.forEach(m,w=>{rt(w.userId===u.userId);const D=Xl(this.yt,w);return Yv(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((l,m)=>{const w=new tn(l),D=[0,yi(w)];u.push(t.get(D).next(S=>S?re.resolve():t.put({targetId:0,path:yi(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:rA});const r=t.store("collectionParents"),s=new Wv,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:yi(w)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const w=new tn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,w],D)=>{const S=Yo(m);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=Xh(s),l=zv(this.yt,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(D=l,D.document?new ze(tn.fromString(D.document.name).popFirst(5)):D.noDocument?ze.fromSegments(D.noDocument.path):D.unknownDocument?ze.fromSegments(D.unknownDocument.path):Ke()).path.toArray();var D;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(S))}).next(()=>re.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=NE(this.yt),u=new t0(oy.Bs,this.yt.ie);return r.W().next(l=>{const m=new Map;return l.forEach(w=>{var D;let S=null!==(D=m.get(w.userId))&&void 0!==D?D:Gt();Xl(this.yt,w).keys().forEach(k=>S=S.add(k)),m.set(w.userId,S)}),re.forEach(m,(w,D)=>{const S=new Br(D),k=Qm.re(this.yt,S),U=u.getIndexManager(S),K=Hp.re(S,this.yt,U,u.referenceDelegate);return new sy(s,K,k,U).recalculateAndSaveOverlaysForDocumentKeys(new bE(t,Us.at),w).next()})})}}function OE(n){n.createObjectStore("targetDocuments",{keyPath:tA}).createIndex("documentTargetsIndex",nA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eA,{unique:!0}),n.createObjectStore("targetGlobal")}const ay="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uy{constructor(e,t,r,s,u,l,m,w,D,S,k=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=D,this.Ys=S,this.Xs=k,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=U=>Promise.resolve(),!uy.C())throw new Ae(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dA(this,s),this.ii=t+"main",this.yt=new eT(w),this.ri=new oo(this.ii,this.Xs,new fT(this.yt)),this.Cs=new cA(this.referenceDelegate,this.yt),this.remoteDocumentCache=NE(this.yt),this.Ns=new tT,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&Xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ue.FAILED_PRECONDITION,ay);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Us(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,pe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(eu(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return tf(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return cy(e).delete(this.clientId)}yi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Hr(r,"clientMetadata");return s.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return re.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):tf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ae(ue.FAILED_PRECONDITION,ay);return!1}}return!(!this.networkEnabled||!this.inForeground)||cy(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bE(t,Us.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>cy(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Hp.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new uA(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Qm.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?oA:14===l?$v:13===l?EE:12===l?IE:11===l?Zm:void Ke();var l;let m;return this.ri.runTransaction(e,s,u,w=>(m=new bE(w,this.Ss?this.Ss.next():Us.at),"readwrite-primary"===t?this.fi(m).next(D=>!!D||this.di(m)).next(D=>{if(!D)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ae(ue.FAILED_PRECONDITION,tv);return r(m)}).next(D=>this.wi(m).next(()=>D)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return tf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ue.FAILED_PRECONDITION,ay)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tf(e).put("owner",t)}static C(){return oo.C()}_i(e){const t=tf(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tf(n){return Hr(n,"owner")}function cy(n){return Hr(n,"clientMetadata")}function n0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ly{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Gt(),s=Gt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new ly(e,t.fromCache,r,s)}}class dy{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(VI(t))return re.resolve(null);let r=mi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Fm(t,null,"F"),r=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Gt(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.Fi(t,m);return this.$i(t,D,l,w.readTime)?this.ki(e,Fm(t,null,"F")):this.Bi(e,D,t,w)}))})))}Oi(e,t,r,s){return VI(t)||s.isEqual(mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,s)?this.Mi(e,t):(wm()<=Bo.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_v(t)),this.Bi(e,l,t,yI(s,-1)))})}Fi(e,t){let r=new cn(HI(e));return t.forEach((s,u)=>{vv(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return wm()<=Bo.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",_v(t)),this.Ni.getDocumentsMatchingQuery(e,t,gi.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class yA{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new Jn(Lt),this.Ui=new mc(u=>lc(u),Rp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function r0(n,e,t,r){return new yA(n,e,t,r)}function hy(n,e){return s0.apply(this,arguments)}function s0(){return s0=(0,pe.Z)(function*(n,e){const t=je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Gt();for(const D of s){l.push(D.batchId);for(const S of D.mutations)w=w.add(S.key)}for(const D of u){m.push(D.batchId);for(const S of D.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(D=>({ji:D,removedBatchIds:l,addedBatchIds:m}))})})}),s0.apply(this,arguments)}function pT(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,D){const S=w.batch,k=S.keys();let U=re.resolve();return k.forEach(K=>{U=U.next(()=>D.getEntry(m,K)).next(te=>{const xe=w.docVersions.get(K);rt(null!==xe),te.version.compareTo(xe)<0&&(S.applyToRemoteDocument(te,w),te.isValidDocument()&&(te.setReadTime(w.commitVersion),D.addEntry(te)))})}),U.next(()=>l.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Gt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function gT(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function _A(n,e){const t=je(n),r=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const m=[];e.targetChanges.forEach((S,k)=>{const U=s.get(k);if(!U)return;m.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,k).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,k)));let K=U.withSequenceNumber(u.currentSequenceNumber);var te,xe,Re;e.targetMismatches.has(k)?K=K.withResumeToken(Cr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,r)),s=s.insert(k,K),xe=K,Re=S,(0===(te=U).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,K))});let w=Ri(),D=Gt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(LE(u,l,e.documentUpdates).next(S=>{w=S.Wi,D=S.zi})),!r.isEqual(mt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(k=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return re.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,D)).next(()=>w)}).then(u=>(t.qi=s,u))}function LE(n,e,t){let r=Gt(),s=Gt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ri();return t.forEach((m,w)=>{const D=u.get(m);w.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(mt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):ke("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",w.version)}),{Wi:l,zi:s}})}function mT(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nf(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,re.resolve(s)):t.Cs.allocateTargetId(r).next(l=>(s=new Yl(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.qi.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Wp(n,e,t){return FE.apply(this,arguments)}function FE(){return FE=(0,pe.Z)(function*(n,e,t){const r=je(n),s=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!eu(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}),FE.apply(this,arguments)}function o0(n,e,t){const r=je(n);let s=mt.min(),u=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,D){const S=je(m),k=S.Ui.get(D);return void 0!==k?re.resolve(S.qi.get(k)):S.Cs.getTargetData(w,D)}(r,l,mi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?s:mt.min(),t?u:Gt())).next(m=>(UE(r,jI(e),m),{documents:m,Hi:u})))}function yT(n,e){const t=je(n),r=je(t.Cs),s=t.qi.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function _T(n,e){const t=je(n),r=t.Ki.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,yI(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(UE(t,e,s),s))}function UE(n,e,t){let r=n.Ki.get(e)||mt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function VE(){return VE=(0,pe.Z)(function*(n,e,t,r){const s=je(n);let u=Gt(),l=Ri();for(const D of t){const S=e.Ji(D.metadata.name);D.document&&(u=u.add(S));const k=e.Yi(D);k.setReadTime(e.Xi(D.metadata.readTime)),l=l.insert(S,k)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),w=yield nf(s,(D=r,mi($h(tn.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>LE(D,m,l).next(S=>(m.apply(D),S)).next(S=>s.Cs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>s.Cs.addMatchingKeys(D,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,S.Wi,S.zi)).next(()=>S.Wi)))}),VE.apply(this,arguments)}function wA(n,e){return BE.apply(this,arguments)}function BE(){return BE=(0,pe.Z)(function*(n,e,t=Gt()){const r=yield nf(n,mi(TE(e.bundledQuery))),s=je(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=zn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Cr.EMPTY_BYTE_STRING,l);return s.qi=s.qi.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),BE.apply(this,arguments)}function vT(n,e){return`firestore_clients_${n}_${e}`}function wT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function i(n,e){return`firestore_targets_${n}_${e}`}class o{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ae(s.error.code,s.error.message))),l?new o(e,t,s.state,u):(Xn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class a{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ae(r.error.code,r.error.message))),u?new a(e,r.state,s):(Xn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class c{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=jm();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=Fh(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new c(e,u):(Xn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class d{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new d(t.clientId,t.onlineState):(Xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class f{constructor(){this.activeTargetIds=jm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Jn(Lt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=vT(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new f),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(vT(e.persistenceKey,s));if(u){const l=c.Zi(s,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(i(this.persistenceKey,e));if(r){const s=a.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(i(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let l=Us.at;if(null!=u)try{const m=JSON.parse(u);rt("number"==typeof m),l=m}catch(m){Xn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==Us.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new o(this.currentUser,e,t,r),u=wT(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=wT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=i(this.persistenceKey,e),u=new a(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return c.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return o.Zi(new Br(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return a.Zi(s,t)}yr(e){return d.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=jm();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class I{constructor(){this.Lr=new f,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new f,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E{Ur(e){}shutdown(){}}class C{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const R={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class z extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const l=this.ho(e,t);ke("RestConnection","Sending: ",l,r);const m={};return this.lo(m,s,u),this.fo(e,l,m,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw rc("RestConnection",`${e} failed with error: `,w,"url: ",l,"request:",r),w})}_o(e,t,r,s,u,l){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ll,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${R[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,l)=>{const m=new MD;m.setWithCredentials(!0),m.listenOnce(AD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case J_.NO_ERROR:const D=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(D)),u(D);break;case J_.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),l(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case J_.HTTP_ERROR:const S=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){let k=m.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=k?.error;if(U&&U.status&&U.message){const K=function(te){const xe=te.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(xe)>=0?xe:ue.UNKNOWN}(U.status);l(new Ae(K,U.message))}else l(new Ae(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=CD(),l=SD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new RD({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=s.join("");ke("Connection","Creating WebChannel: "+w,m);const D=u.createWebChannel(w,m);let S=!1,k=!1;const U=new O({Hr:te=>{k?ke("Connection","Not sending because WebChannel is closed:",te):(S||(ke("Connection","Opening WebChannel transport."),D.open(),S=!0),ke("Connection","WebChannel sending:",te),D.send(te))},Jr:()=>D.close()}),K=(te,xe,Re)=>{te.listen(xe,Tt=>{try{Re(Tt)}catch(At){setTimeout(()=>{throw At},0)}})};return K(D,vm.EventType.OPEN,()=>{k||ke("Connection","WebChannel transport opened.")}),K(D,vm.EventType.CLOSE,()=>{k||(k=!0,ke("Connection","WebChannel transport closed"),U.io())}),K(D,vm.EventType.ERROR,te=>{k||(k=!0,rc("Connection","WebChannel transport errored:",te),U.io(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))}),K(D,vm.EventType.MESSAGE,te=>{var xe;if(!k){const Re=te.data[0];rt(!!Re);const At=Re.error||(null===(xe=Re[0])||void 0===xe?void 0:xe.error);if(At){ke("Connection","WebChannel received error:",At);const ut=At.status;let it=function(Vt){const lr=er[Vt];if(void 0!==lr)return JI(lr)}(ut),bt=At.message;void 0===it&&(it=ue.INTERNAL,bt="Unknown error status: "+ut+" with message "+At.message),k=!0,U.io(new Ae(it,bt)),D.close()}else ke("Connection","WebChannel received:",Re),U.ro(Re)}}),K(l,xD.STAT_EVENT,te=>{te.stat===lI.PROXY?ke("Connection","Detected buffering proxy"):te.stat===lI.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{U.so()},0),U}}function X(){return typeof window<"u"?window:null}function me(){return typeof document<"u"?document:null}function Oe(n){return new oE(n,!0)}class Ge{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class et{constructor(e,t,r,s,u,l,m,w){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ge(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,pe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Et extends et{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function kv(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Ke(),s=e.targetChange.targetIds||[],u=function(w,D){return w.wt?(rt(void 0===D||"string"==typeof D),Cr.fromBase64String(D||"")):(rt(void 0===D||D instanceof Uint8Array),Cr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const D=void 0===w.code?ue.UNKNOWN:JI(w.code);return new Ae(D,w.message||"")}(l);t=new WD(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Bs(n,r.document.name),u=zn(r.document.updateTime),l=r.document.createTime?zn(r.document.createTime):mt.min(),m=new jr({mapValue:{fields:r.document.fields}}),w=Tn.newFoundDocument(s,u,l,m);t=new Hm(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=Bs(n,r.document),u=r.readTime?zn(r.readTime):mt.min(),l=Tn.newNoDocument(s,u);t=new Hm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Bs(n,r.document);t=new Hm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Ke();{const r=e.filter,u=new QI(r.count||0);t=new iE(r.targetId,u)}}var w;return t}(this.yt,e),r=function(s){if(!("targetChange"in s))return mt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?zn(u.readTime):mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Fp(this.yt),t.addTarget=function(s,u){let l;const m=u.target;return l=Pm(m)?{documents:dE(s,m)}:{query:Pv(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=aE(s,u.resumeToken):u.snapshotVersion.compareTo(mt.min())>0&&(l.readTime=Wh(s,u.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function fE(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ke()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Fp(this.yt),t.removeTarget=e,this.Bo(t)}}class Me extends et{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function KS(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,s){let u=zn(r.updateTime?r.updateTime:s);return u.isEqual(mt.min())&&(u=zn(s)),new zD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.Zo(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Fp(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gm(this.yt,r))};this.Bo(t)}}class Ut extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(ue.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ue.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class IA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Xn(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class cM{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;id(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(D){const S=je(D);S._u.add(4),yield fy(S),S.gu.set("Unknown"),S._u.delete(4),yield a0(S)}),function(D){return w.apply(this,arguments)})(l))}))}),this.gu=new IA(r,s)}}function a0(n){return IT.apply(this,arguments)}function IT(){return IT=(0,pe.Z)(function*(n){if(id(n))for(const e of n.wu)yield e(!0)}),IT.apply(this,arguments)}function fy(n){return ET.apply(this,arguments)}function ET(){return ET=(0,pe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ET.apply(this,arguments)}function $E(n,e){const t=je(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),TT(t)?DT(t):gy(t).ko()&&bT(t,e))}function u0(n,e){const t=je(n),r=gy(t);t.du.delete(e),r.ko()&&EA(t,e),0===t.du.size&&(r.ko()?r.Fo():id(t)&&t.gu.set("Unknown"))}function bT(n,e){n.yu.Ot(e.targetId),gy(n).zo(e)}function EA(n,e){n.yu.Ot(e),gy(n).Ho(e)}function DT(n){n.yu=new sE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),gy(n).start(),n.gu.uu()}function TT(n){return id(n)&&!gy(n).No()&&n.du.size>0}function id(n){return 0===je(n)._u.size}function bA(n){n.yu=void 0}function lM(n){return CT.apply(this,arguments)}function CT(){return CT=(0,pe.Z)(function*(n){n.du.forEach((e,t)=>{bT(n,e)})}),CT.apply(this,arguments)}function dM(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,pe.Z)(function*(n,e){bA(n),TT(n)?(n.gu.hu(e),DT(n)):n.gu.set("Unknown")}),ST.apply(this,arguments)}function hM(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,pe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof WD&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jE(n,r)}else if(e instanceof Hm?n.yu.Kt(e):e instanceof iE?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(mt.min()))try{const r=yield gT(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.yu.Zt(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=s.du.get(w);D&&s.du.set(w,D.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=s.du.get(m);if(!w)return;s.du.set(m,w.withResumeToken(Cr.EMPTY_BYTE_STRING,w.snapshotVersion)),EA(s,m);const D=new Yl(w.target,m,1,w.sequenceNumber);bT(s,D)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield jE(n,r)}var r}),AT.apply(this,arguments)}function jE(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,pe.Z)(function*(n,e,t){if(!eu(e))throw e;n._u.add(1),yield fy(n),n.gu.set("Offline"),t||(t=()=>gT(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield a0(n)}))}),xT.apply(this,arguments)}function DA(n,e){return e().catch(t=>jE(n,t,e))}function py(n){return RT.apply(this,arguments)}function RT(){return RT=(0,pe.Z)(function*(n){const e=je(n),t=rf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;fM(e);)try{const s=yield mT(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,pM(e,s)}catch(s){yield jE(e,s)}TA(e)&&CA(e)}),RT.apply(this,arguments)}function fM(n){return id(n)&&n.fu.length<10}function pM(n,e){n.fu.push(e);const t=rf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function TA(n){return id(n)&&!rf(n).No()&&n.fu.length>0}function CA(n){rf(n).start()}function gM(n){return MT.apply(this,arguments)}function MT(){return MT=(0,pe.Z)(function*(n){rf(n).eu()}),MT.apply(this,arguments)}function mM(n){return kT.apply(this,arguments)}function kT(){return kT=(0,pe.Z)(function*(n){const e=rf(n);for(const t of n.fu)e.Xo(t.mutations)}),kT.apply(this,arguments)}function yM(n,e,t){return NT.apply(this,arguments)}function NT(){return NT=(0,pe.Z)(function*(n,e,t){const r=n.fu.shift(),s=Yh.from(r,e,t);yield DA(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield py(n)}),NT.apply(this,arguments)}function _M(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,pe.Z)(function*(n,e){var t;e&&rf(n).Yo&&(yield(t=(0,pe.Z)(function*(r,s){if(XI(u=s.code)&&u!==ue.ABORTED){const l=r.fu.shift();rf(r).Mo(),yield DA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield py(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),TA(n)&&CA(n)}),PT.apply(this,arguments)}function SA(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,pe.Z)(function*(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=id(t);t._u.add(3),yield fy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield a0(t)}),OT.apply(this,arguments)}function LT(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,pe.Z)(function*(n,e){const t=je(n);e?(t._u.delete(2),yield a0(t)):e||(t._u.add(2),yield fy(t),t.gu.set("Unknown"))}),FT.apply(this,arguments)}function gy(n){return n.pu||(n.pu=function(e,t,r){const s=je(e);return s.su(),new Et(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:lM.bind(null,n),Zr:dM.bind(null,n),Wo:hM.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.pu.Mo(),TT(n)?DT(n):n.gu.set("Unknown")):(yield n.pu.stop(),bA(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function rf(n){return n.Iu||(n.Iu=function(e,t,r){const s=je(e);return s.su(),new Me(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:gM.bind(null,n),Zr:_M.bind(null,n),tu:mM.bind(null,n),Zo:yM.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Mo(),yield py(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class UT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new UT(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),eu(n))return new Ae(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class yy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Gh(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new yy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new yy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class AA{constructor(){this.Tu=new Jn(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ke():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class _y{constructor(e,t,r,s,u,l,m,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new _y(e,t,yy.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class vM{constructor(){this.Au=void 0,this.listeners=[]}}class wM{constructor(){this.queries=new mc(e=>$I(e),Mp),this.onlineState="Unknown",this.Ru=new Set}}function VT(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,pe.Z)(function*(n,e){const t=je(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new vM),s)try{u.Au=yield t.onListen(r)}catch(l){const m=my(l,`Initialization of query '${_v(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&HT(t)}),BT.apply(this,arguments)}function $T(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,pe.Z)(function*(n,e){const t=je(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),jT.apply(this,arguments)}function IM(n,e){const t=je(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.Pu(s)&&(r=!0);l.Au=s}}r&&HT(t)}function EM(n,e,t){const r=je(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function HT(n){n.Ru.forEach(e=>{e.next()})}class zT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new _y(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=_y.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class bM{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class xA{constructor(e){this.yt=e}Ji(e){return Bs(this.yt,e)}Yi(e){return e.metadata.exists?cE(this.yt,e.document,!1):Tn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return zn(e)}}class DM{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=tn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new xA(this.yt);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Gt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function vA(n,e,t,r){return VE.apply(this,arguments)}(e.localStore,new xA(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield wA(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function RA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MA{constructor(e){this.key=e}}class kA{constructor(e){this.key=e}}class NA{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gt(),this.mutatedKeys=Gt(),this.Gu=HI(e),this.Qu=new yy(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new AA,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,k)=>{const U=s.get(S),K=vv(this.query,k)?k:null,te=!!U&&this.mutatedKeys.has(U.key),xe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Re=!1;U&&K?U.data.isEqual(K.data)?te!==xe&&(r.track({type:3,doc:K}),Re=!0):this.Hu(U,K)||(r.track({type:2,doc:K}),Re=!0,(w&&this.Gu(K,w)>0||D&&this.Gu(K,D)<0)&&(m=!0)):!U&&K?(r.track({type:0,doc:K}),Re=!0):U&&!K&&(r.track({type:1,doc:U}),Re=!0,(w||D)&&(m=!0)),Re&&(K?(l=l.add(K),u=xe?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((D,S)=>function(k,U){const K=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return K(k)-K(U)}(D.type,S.type)||this.Gu(D.doc,S.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new _y(this.query,e.Qu,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new AA,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new kA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new MA(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Gt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return _y.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class TM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CM{constructor(e){this.key=e,this.nc=!1}}class SM{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new mc(m=>$I(m),Mp),this.rc=new Map,this.oc=new Set,this.uc=new Jn(ze.comparator),this.cc=new Map,this.ac=new qp,this.hc={},this.lc=new Map,this.fc=nd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function AM(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,pe.Z)(function*(n,e){const t=pC(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const l=yield nf(t.localStore,mi(e));t.isPrimaryClient&&$E(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield qT(t,e,r,"current"===m,l.resumeToken)}return s}),GT.apply(this,arguments)}function qT(n,e,t,r,s){return WT.apply(this,arguments)}function WT(){return WT=(0,pe.Z)(function*(n,e,t,r,s){n._c=(k,U,K)=>{return(te=(0,pe.Z)(function*(xe,Re,Tt,At){let ut=Re.view.Wu(Tt);ut.$i&&(ut=yield o0(xe.localStore,Re.query,!1).then(({documents:Vt})=>Re.view.Wu(Vt,ut)));const it=At&&At.targetChanges.get(Re.targetId),bt=Re.view.applyChanges(ut,xe.isPrimaryClient,it);return rC(xe,Re.targetId,bt.Xu),bt.snapshot}),function(xe,Re,Tt,At){return te.apply(this,arguments)})(n,k,U,K);var te};const u=yield o0(n.localStore,e,!0),l=new NA(e,u.Hi),m=l.Wu(u.documents),w=Ko.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=l.applyChanges(m,n.isPrimaryClient,w);rC(n,t,D.Xu);const S=new TM(e,t,l);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),WT.apply(this,arguments)}function xM(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,pe.Z)(function*(n,e){const t=je(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!Mp(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),u0(t.remoteStore,r.targetId),vy(t,r.targetId)}).catch(ic))):(vy(t,r.targetId),yield Wp(t.localStore,r.targetId,!0))}),ZT.apply(this,arguments)}function KT(){return KT=(0,pe.Z)(function*(n,e,t){const r=gC(n);try{const s=yield function(u,l){const m=je(u),w=Ft.now(),D=l.reduce((U,K)=>U.add(K.key),Gt());let S,k;return m.persistence.runTransaction("Locally write mutations","readwrite",U=>{let K=Ri(),te=Gt();return m.Gi.getEntries(U,D).next(xe=>{K=xe,K.forEach((Re,Tt)=>{Tt.isValidDocument()||(te=te.add(Re))})}).next(()=>m.localDocuments.getOverlayedDocuments(U,K)).next(xe=>{S=xe;const Re=[];for(const Tt of l){const At=Vm(Tt,S.get(Tt.key).overlayedDocument);null!=At&&Re.push(new Zo(Tt.key,At,km(At.value.mapValue),Cn.exists(!0)))}return m.mutationQueue.addMutationBatch(U,w,Re,l)}).next(xe=>{k=xe;const Re=xe.applyToLocalDocumentSet(S,te);return m.documentOverlayCache.saveOverlays(U,xe.batchId,Re)})}).then(()=>({batchId:k.batchId,changes:eE(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.hc[u.currentUser.toKey()];w||(w=new Jn(Lt)),w=w.insert(l,m),u.hc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield sd(r,s.changes),yield py(r.remoteStore)}catch(s){const u=my(s,"Failed to persist write");t.reject(u)}}),KT.apply(this,arguments)}function PA(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,pe.Z)(function*(n,e){const t=je(n);try{const r=yield _A(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.cc.get(u);l&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.nc=!0:s.modifiedDocuments.size>0?rt(l.nc):s.removedDocuments.size>0&&(rt(l.nc),l.nc=!1))}),yield sd(t,r,e)}catch(r){yield ic(r)}}),YT.apply(this,arguments)}function OA(n,e,t){const r=je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=je(u);m.onlineState=l;let w=!1;m.queries.forEach((D,S)=>{for(const k of S.listeners)k.bu(l)&&(w=!0)}),w&&HT(m)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function MM(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,pe.Z)(function*(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let l=new Jn(ze.comparator);l=l.insert(u,Tn.newNoDocument(u,mt.min()));const m=Gt().add(u),w=new Sr(mt.min(),new Map,new cn(Lt),l,m);yield PA(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),iC(r)}else yield Wp(r.localStore,e,!1).then(()=>vy(r,e,t)).catch(ic)}),QT.apply(this,arguments)}function kM(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,pe.Z)(function*(n,e){const t=je(n),r=e.batch.batchId;try{const s=yield pT(t.localStore,e);nC(t,r,null),tC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sd(t,s)}catch(s){yield ic(s)}}),XT.apply(this,arguments)}function NM(n,e,t){return JT.apply(this,arguments)}function JT(){return JT=(0,pe.Z)(function*(n,e,t){const r=je(n);try{const s=yield function(u,l){const m=je(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.mutationQueue.lookupMutationBatch(w,l).next(S=>(rt(null!==S),D=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,D,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>m.localDocuments.getDocuments(w,D))})}(r.localStore,e);nC(r,e,t),tC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sd(r,s)}catch(s){yield ic(s)}}),JT.apply(this,arguments)}function eC(){return eC=(0,pe.Z)(function*(n,e){const t=je(n);id(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=je(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=my(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),eC.apply(this,arguments)}function tC(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function nC(n,e,t){const r=je(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function vy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||LA(n,r)})}function LA(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(u0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),iC(n))}function rC(n,e,t){for(const r of t)r instanceof MA?(n.ac.addReference(r.key,e),OM(n,r)):r instanceof kA?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||LA(n,r.key)):Ke()}function OM(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),iC(n))}function iC(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(tn.fromString(e)),r=n.fc.next();n.cc.set(r,new CM(t)),n.uc=n.uc.insert(t,r),$E(n.remoteStore,new Yl(mi($h(t.path)),r,2,Us.at))}}function sd(n,e,t){return sC.apply(this,arguments)}function sC(){return sC=(0,pe.Z)(function*(n,e,t){const r=je(n),s=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{l.push(r._c(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const S=ly.Ci(w.targetId,D);u.push(S)}}))}),yield Promise.all(l),r.sc.Wo(s),yield(m=(0,pe.Z)(function*(w,D){const S=je(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>re.forEach(D,U=>re.forEach(U.Si,K=>S.persistence.referenceDelegate.addReference(k,U.targetId,K)).next(()=>re.forEach(U.Di,K=>S.persistence.referenceDelegate.removeReference(k,U.targetId,K)))))}catch(k){if(!eu(k))throw k;ke("LocalStore","Failed to update sequence numbers: "+k)}for(const k of D){const U=k.targetId;if(!k.fromCache){const K=S.qi.get(U),xe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);S.qi=S.qi.insert(U,xe)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),sC.apply(this,arguments)}function LM(n,e){return oC.apply(this,arguments)}function oC(){return oC=(0,pe.Z)(function*(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield hy(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Ae(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sd(t,r.ji)}var s}),oC.apply(this,arguments)}function FM(n,e){const t=je(n),r=t.cc.get(e);if(r&&r.nc)return Gt().add(r.key);{let s=Gt();const u=t.rc.get(e);if(!u)return s;for(const l of u){const m=t.ic.get(l);s=s.unionWith(m.view.ju)}return s}}function UM(n,e){return aC.apply(this,arguments)}function aC(){return aC=(0,pe.Z)(function*(n,e){const t=je(n),r=yield o0(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&rC(t,e.targetId,s.Xu),s}),aC.apply(this,arguments)}function VM(n,e){return uC.apply(this,arguments)}function uC(){return uC=(0,pe.Z)(function*(n,e){const t=je(n);return _T(t.localStore,e).then(r=>sd(t,r))}),uC.apply(this,arguments)}function BM(n,e,t,r){return cC.apply(this,arguments)}function cC(){return cC=(0,pe.Z)(function*(n,e,t,r){const s=je(n),u=yield function(l,m){const w=je(l),D=je(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>D.Tn(S,m).next(k=>k?w.localDocuments.getDocuments(S,k):re.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield py(s.remoteStore):"acknowledged"===t||"rejected"===t?(nC(s,e,r||null),tC(s,e),m=e,je(je(s.localStore).mutationQueue).An(m)):Ke(),yield sd(s,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),cC.apply(this,arguments)}function lC(){return lC=(0,pe.Z)(function*(n,e){const t=je(n);if(pC(t),gC(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield FA(t,r.toArray());t.dc=!0,yield LT(t.remoteStore,!0);for(const u of s)$E(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(vy(t,l),Wp(t.localStore,l,!0))),u0(t.remoteStore,l)}),yield s,yield FA(t,r),function(u){const l=je(u);l.cc.forEach((m,w)=>{u0(l.remoteStore,w)}),l.ac.fs(),l.cc=new Map,l.uc=new Jn(ze.comparator)}(t),t.dc=!1,yield LT(t.remoteStore,!1)}}),lC.apply(this,arguments)}function FA(n,e,t){return dC.apply(this,arguments)}function dC(){return dC=(0,pe.Z)(function*(n,e,t){const r=je(n),s=[],u=[];for(const l of e){let m;const w=r.rc.get(l);if(w&&0!==w.length){m=yield nf(r.localStore,mi(w[0]));for(const D of w){const S=r.ic.get(D),k=yield UM(r,S);k.snapshot&&u.push(k.snapshot)}}else{const D=yield yT(r.localStore,l);m=yield nf(r.localStore,D),yield qT(r,UA(D),l,!1,m.resumeToken)}s.push(m)}return r.sc.Wo(u),s}),dC.apply(this,arguments)}function UA(n){return gv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jM(n){const e=je(n);return je(je(e.localStore).persistence).vi()}function HM(n,e,t,r){return hC.apply(this,arguments)}function hC(){return hC=(0,pe.Z)(function*(n,e,t,r){const s=je(n);if(s.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield _T(s.localStore,jI(u[0])),m=Sr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Cr.EMPTY_BYTE_STRING);yield sd(s,l,m);break}case"rejected":yield Wp(s.localStore,e,!0),vy(s,e,r);break;default:Ke()}}),hC.apply(this,arguments)}function zM(n,e,t){return fC.apply(this,arguments)}function fC(){return fC=(0,pe.Z)(function*(n,e,t){const r=pC(n);if(r.dc){for(const s of e){if(r.rc.has(s)){ke("SyncEngine","Adding an already active target "+s);continue}const u=yield yT(r.localStore,s),l=yield nf(r.localStore,u);yield qT(r,UA(u),l.targetId,!1,l.resumeToken),$E(r.remoteStore,l)}for(const s of t)r.rc.has(s)&&(yield Wp(r.localStore,s,!1).then(()=>{u0(r.remoteStore,s),vy(r,s)}).catch(ic))}}),fC.apply(this,arguments)}function pC(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MM.bind(null,e),e.sc.Wo=IM.bind(null,e.eventManager),e.sc.wc=EM.bind(null,e.eventManager),e}function gC(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NM.bind(null,e),e}class VA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.yt=Oe(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return r0(this.persistence,new dy,e.initialUser,this.yt)}yc(e){return new t0(oy.Bs,this.yt)}gc(e){return new I}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BA extends VA{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield gC(r.Ac.syncEngine),yield py(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return r0(this.persistence,new dy,e.initialUser,this.yt)}Tc(e,t){return new cT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new WS(t,this.persistence);return new FD(e.asyncQueue,r)}yc(e){const t=n0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Mi.withCacheSize(this.cacheSizeBytes):Mi.DEFAULT;return new uy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,X(),me(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new I}}class qM extends BA{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof _&&(r.sharedClientState.syncEngine={Fr:BM.bind(null,s),$r:HM.bind(null,s),Br:zM.bind(null,s),vi:jM.bind(null,s),Mr:VM.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,pe.Z)(function*(l){yield function $M(n,e){return lC.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=X();if(!_.C(t))throw new Ae(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=n0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mC{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>OA(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=LM.bind(null,r.syncEngine),yield LT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wM}createDatastore(e){const t=Oe(e.databaseInfo.databaseId),r=new z(e.databaseInfo);return new Ut(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>OA(this.syncEngine,m,0),l=C.C()?new C:new E,new cM(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,D){const S=new SM(r,s,u,l,m,w);return D&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=je(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield fy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function yC(n,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $A(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jA(n){if(!ze.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HA(n){if(ze.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ke()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=HE(n);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zA(n,e){if(e<=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const GA=new Map;class qA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class c0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ev;switch(t.type){case"gapi":return new GS(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GA.get(e);t&&(ke("ComponentProvider","Removing Datastore"),GA.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class Ec extends ki{constructor(e,t,r){super(e,t,$h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new ze(e))}withConverter(e){return new Ec(this.firestore,e,this._path)}}function ZA(n,e,...t){if(n=(0,Ht.m9)(n),yC("collection","path",e),n instanceof c0){const r=tn.fromString(e,...t);return HA(r),new Ec(n,null,r)}{if(!(n instanceof qn||n instanceof Ec))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return HA(r),new Ec(n.firestore,null,r)}}function zE(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=Fl.R()),yC("doc","path",e),n instanceof c0){const r=tn.fromString(e,...t);return jA(r),new qn(n,null,new ze(r))}{if(!(n instanceof qn||n instanceof Ec))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return jA(r),new qn(n.firestore,n instanceof Ec?n.converter:null,new ze(r))}}function KA(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof qn||n instanceof Ec)&&(e instanceof qn||e instanceof Ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _C(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof ki&&e instanceof ki&&n.firestore===e.firestore&&Mp(n._query,e._query)&&n.converter===e.converter}function YA(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class GE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ZM{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Ln,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new bM(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,pe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class QM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,pe.Z)(function*(u,l){const m=je(u),w=Fp(m.yt)+"/documents",D={documents:l.map(K=>yc(m.yt,K))},S=yield m._o("BatchGetDocuments",w,D,l.length),k=new Map;S.forEach(K=>{const te=function lE(n,e){return"found"in e?function(t,r){rt(!!r.found);const s=Bs(t,r.found.name),u=zn(r.found.updateTime),l=r.found.createTime?zn(r.found.createTime):mt.min(),m=new jr({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const s=Bs(t,r.missing),u=zn(r.readTime);return Tn.newNoDocument(s,u)}(n,e):Ke()}(m.yt,K);k.set(te.key.toString(),te)});const U=[];return l.forEach(K=>{const te=k.get(K.toString());rt(!!te),U.push(te)}),U}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=ze.fromPath(s);e.mutations.push(new Op(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(s,u){const l=je(s),m=Fp(l.yt)+"/documents",w={writes:u.map(D=>Gm(l.yt,D))};yield l.ao("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ke();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Cn.exists(!1):Cn.updateTime(t):Cn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Ae(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cn.updateTime(t)}return Cn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XM{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Ge(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,pe.Z)(function*(){const t=new QM(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Sp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!XI(t)}return!1}}class JM{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Br.UNAUTHENTICATED,this.clientId=Fl.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,pe.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=my(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function QA(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,pe.Z)(function*(u){r.isEqual(u)||(yield hy(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),vC.apply(this,arguments)}function XA(n,e){return wC.apply(this,arguments)}function wC(){return wC=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield IC(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>SA(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>SA(e.remoteStore,u)),n.onlineComponents=e}),wC.apply(this,arguments)}function IC(n){return EC.apply(this,arguments)}function EC(){return EC=(0,pe.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield QA(n,new VA)),n.offlineComponents}),EC.apply(this,arguments)}function qE(n){return bC.apply(this,arguments)}function bC(){return bC=(0,pe.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield XA(n,new mC)),n.onlineComponents}),bC.apply(this,arguments)}function JA(n){return IC(n).then(e=>e.persistence)}function WE(n){return IC(n).then(e=>e.localStore)}function DC(n){return qE(n).then(e=>e.remoteStore)}function TC(n){return qE(n).then(e=>e.syncEngine)}function wy(n){return CC.apply(this,arguments)}function CC(){return CC=(0,pe.Z)(function*(n){const e=yield qE(n),t=e.eventManager;return t.onListen=AM.bind(null,e.syncEngine),t.onUnlisten=xM.bind(null,e.syncEngine),t}),CC.apply(this,arguments)}function tx(n,e,t={}){const r=new Ln;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,l,m,w){const D=new GE({next:k=>{u.enqueueAndForget(()=>$T(s,S));const U=k.docs.has(l);!U&&k.fromCache?w.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&k.fromCache&&m&&"server"===m.source?w.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(k)},error:k=>w.reject(k)}),S=new zT($h(l.path),D,{includeMetadataChanges:!0,Nu:!0});return VT(s,S)}(yield wy(n),n.asyncQueue,e,t,r)})),r.promise}function nx(n,e,t={}){const r=new Ln;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(s,u,l,m,w){const D=new GE({next:k=>{u.enqueueAndForget(()=>$T(s,S)),k.fromCache&&"server"===m.source?w.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(k)},error:k=>w.reject(k)}),S=new zT(l,D,{includeMetadataChanges:!0,Nu:!0});return VT(s,S)}(yield wy(n),n.asyncQueue,e,t,r)})),r.promise}class a1{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ge(this,"async_queue_retry"),this.Wc=()=>{const t=me();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=me();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=me();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Ln;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!eu(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Xn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=UT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(s),s}zc(){this.Kc&&Ke()}verifyOperationInProgress(){}Xc(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function SC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class u1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ln,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends c0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new a1,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rx(this),this._firestoreClient.terminate()}}function Ar(n){return n._firestoreClient||rx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZS(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new JM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ix(n,e,t){const r=new Ln;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield QA(n,t),yield XA(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(l=u).name?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;rc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function sx(n){if(n._initialized||n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(Cr.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zp{constructor(e){this._methodName=e}}class ZE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const _1=/^__.*__$/;class v1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new zh(e,this.data,t,this.fieldTransforms)}}class ox{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ax(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class KE{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new KE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return XE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ax(this.sa)&&_1.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class w1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Oe(e)}da(e,t,r,s=!1){return new KE({sa:e,methodName:t,fa:r,path:Hn.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Kp(n){const e=n._freezeSettings(),t=Oe(n._databaseId);return new w1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YE(n,e,t,r,s,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,s);MC("Data must be an object, but it was:",l,r);const m=lx(r,l);let w,D;if(u.merge)w=new Zi(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const k of u.mergeFields){const U=kC(e,k,t);if(!l.contains(U))throw new Ae(ue.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);hx(S,U)||S.push(U)}w=new Zi(S),D=l.fieldTransforms.filter(k=>w.covers(k.field))}else w=null,D=l.fieldTransforms;return new v1(new jr(m),w,D)}class l0 extends Zp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof l0}}function ux(n,e,t){return new KE({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class AC extends Zp{_toFieldTransform(e){return new Zl(e.path,new Pp)}isEqual(e){return e instanceof AC}}class I1 extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ux(this,e,!0),r=this._a.map(u=>Yp(u,t)),s=new hc(r);return new Zl(e.path,s)}isEqual(e){return this===e}}class E1 extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ux(this,e,!0),r=this._a.map(u=>Yp(u,t)),s=new Wl(r);return new Zl(e.path,s)}isEqual(e){return this===e}}class b1 extends Zp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new jh(e.yt,Ev(e.yt,this.wa));return new Zl(e.path,t)}isEqual(e){return this===e}}function xC(n,e,t,r){const s=n.da(1,e,t);MC("Data must be an object, but it was:",s,r);const u=[],l=jr.empty();Go(r,(w,D)=>{const S=QE(e,w,t);D=(0,Ht.m9)(D);const k=s.ca(S);if(D instanceof l0)u.push(S);else{const U=Yp(D,k);null!=U&&(u.push(S),l.set(S,U))}});const m=new Zi(u);return new ox(l,m,s.fieldTransforms)}function RC(n,e,t,r,s,u){const l=n.da(1,e,t),m=[kC(e,r,t)],w=[s];if(u.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let U=0;U<u.length;U+=2)m.push(kC(e,u[U])),w.push(u[U+1]);const D=[],S=jr.empty();for(let U=m.length-1;U>=0;--U)if(!hx(D,m[U])){const K=m[U];let te=w[U];te=(0,Ht.m9)(te);const xe=l.ca(K);if(te instanceof l0)D.push(K);else{const Re=Yp(te,xe);null!=Re&&(D.push(K),S.set(K,Re))}}const k=new Zi(D);return new ox(S,k,l.fieldTransforms)}function cx(n,e,t,r=!1){return Yp(t,n.da(r?4:3,e))}function Yp(n,e){if(dx(n=(0,Ht.m9)(n)))return MC("Unsupported field value:",e,n),lx(n,e);if(n instanceof Zp)return function(t,r){if(!ax(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=Yp(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ev(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Ft.fromDate(t);return{timestampValue:Wh(r.yt,s)}}if(t instanceof Ft){const s=new Ft(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wh(r.yt,s)}}if(t instanceof ZE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bc)return{bytesValue:aE(r.yt,t._byteString)};if(t instanceof qn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${HE(t)}`)}(n,e)}function lx(n,e){const t={};return wI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Go(n,(r,s)=>{const u=Yp(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function dx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof ZE||n instanceof bc||n instanceof qn||n instanceof Zp)}function MC(n,e,t){if(!dx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=HE(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function kC(n,e,t){if((e=(0,Ht.m9)(e))instanceof od)return e._internalPath;if("string"==typeof e)return QE(n,e);throw XE("Field path arguments must be of type string or ",n,!1,void 0,t)}const D1=new RegExp("[~\\*/\\[\\]]");function QE(n,e,t){if(e.search(D1)>=0)throw XE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new od(...e.split("."))._internalPath}catch{throw XE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function XE(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Ae(ue.INVALID_ARGUMENT,m+n+w)}function hx(n,e){return n.some(t=>t.isEqual(e))}class d0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new T1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(JE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class T1 extends d0{data(){return super.data()}}function JE(n,e){return"string"==typeof e?QE(n,e):e instanceof od?e._internalPath:e._delegate._internalPath}function fx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NC{}class h0 extends NC{}function sf(n,e,...t){let r=[];e instanceof NC&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof Iy).length,l=s.filter(m=>m instanceof f0).length;if(u>1||u>0&&l>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class f0 extends h0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new f0(e,t,r)}_apply(e){const t=this._parse(e);return yx(e._query,t),new ki(e.firestore,e.converter,yv(e._query,t))}_parse(e){const t=Kp(e.firestore);return function(s,u,l,m,w,D,S){let k;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){mx(S,D);const U=[];for(const K of S)U.push(gx(m,s,K));k={arrayValue:{values:U}}}else k=gx(m,s,S)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||mx(S,D),k=cx(l,"where",S,"in"===D||"not-in"===D);return Xt.create(w,D,k)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Iy extends NC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)yx(u,m),u=yv(u,m)}(e._query,t),new ki(e.firestore,e.converter,yv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class PC extends h0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new PC(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ao(s,u);return function(m,w){if(null===BI(m)){const D=Lm(m);null!==D&&_x(0,D,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new dc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eb extends h0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new eb(e,t,r)}_apply(e){return new ki(e.firestore,e.converter,Fm(e._query,this._limit,this._limitType))}}class tb extends h0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tb(e,t,r)}_apply(e){const t=px(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,(s=t,new dc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class nb extends h0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new nb(e,t,r)}_apply(e){const t=px(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,(s=t,new dc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function px(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof d0)return function(s,u,l,m,w){if(!m)throw new Ae(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const S of ql(s))if(S.field.isKeyField())D.push(Hl(u,m.key));else{const k=m.data.field(S.field);if(Cm(k))throw new Ae(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const U=S.field.canonicalString();throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}D.push(k)}return new uc(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Kp(n.firestore);return function(u,l,m,w,D,S){const k=u.explicitOrderBy;if(D.length>k.length)throw new Ae(ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let K=0;K<D.length;K++){const te=D[K];if(k[K].field.isKeyField()){if("string"!=typeof te)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof te}`);if(!mv(u)&&-1!==te.indexOf("/"))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${te}' contains a slash.`);const xe=u.path.child(tn.fromString(te));if(!ze.isDocumentKey(xe))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Re=new ze(xe);U.push(Hl(l,Re))}else{const xe=cx(m,w,te);U.push(xe)}}return new uc(U,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function gx(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mv(e)&&-1!==t.indexOf("/"))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!ze.isDocumentKey(r))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hl(n,new ze(r))}if(t instanceof qn)return Hl(n,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${HE(t)}.`)}function mx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yx(n,e){if(e.isInequality()){const r=Lm(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=BI(n);null!==u&&_x(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _x(n,e,t){if(!t.isEqual(e))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class OC{convertValue(e,t="none"){switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ke()}}convertObject(e,t){const r={};return Go(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ZE(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=II(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ap(e));default:return null}}convertTimestamp(e){const t=sc(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);rt(Fv(r));const s=new $l(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return s.isEqual(t)||Xn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function rb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class P1 extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ad extends d0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new p0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(JE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class p0 extends ad{data(e={}){return super.data(e)}}class af{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Qp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new p0(this._firestore,this._userDataWriter,r.key,r,new Qp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new p0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new p0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:O1(l.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function O1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}function wx(n,e){return n instanceof ad&&e instanceof ad?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof af&&e instanceof af&&n._firestore===e._firestore&&_C(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class uf extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function Ix(n,e,t){n=nn(n,qn);const r=nn(n.firestore,Wn),s=rb(n.converter,e,t);return Ey(r,[YE(Kp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Cn.none())])}function Ex(n,e,t,...r){n=nn(n,qn);const s=nn(n.firestore,Wn),u=Kp(s);let l;return l="string"==typeof(e=(0,Ht.m9)(e))||e instanceof od?RC(u,"updateDoc",n._key,e,t,r):xC(u,"updateDoc",n._key,e),Ey(s,[l.toMutation(n._key,Cn.exists(!0))])}function bx(n,...e){var t,r,s;n=(0,Ht.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||SC(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(SC(e[l])){const k=e[l];e[l]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[l+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[l+2]=null===(s=k.complete)||void 0===s?void 0:s.bind(k)}let w,D,S;if(n instanceof qn)D=nn(n.firestore,Wn),S=$h(n._key.path),w={next:k=>{e[l]&&e[l](LC(D,n,k))},error:e[l+1],complete:e[l+2]};else{const k=nn(n,ki);D=nn(k.firestore,Wn),S=k._query;const U=new uf(D);w={next:K=>{e[l]&&e[l](new af(D,U,k,K))},error:e[l+1],complete:e[l+2]},fx(n._query)}return function(k,U,K,te){const xe=new GE(te),Re=new zT(U,xe,K);return k.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return VT(yield wy(k),Re)})),()=>{xe.bc(),k.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return $T(yield wy(k),Re)}))}}(Ar(D),S,m,w)}function Ey(n,e){return function(t,r){const s=new Ln;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function RM(n,e,t){return KT.apply(this,arguments)}(yield TC(t),r,s)})),s.promise}(Ar(n),e)}function LC(n,e,t){const r=t.docs.get(e._key),s=new uf(n);return new ad(n,s,e._key,r,new Qp(t.hasPendingWrites,t.fromCache),e.converter)}const G1={maxAttempts:5};class Dx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kp(e)}set(e,t,r){this._verifyNotCommitted();const s=cf(e,this._firestore),u=rb(s.converter,t,r),l=YE(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Cn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=cf(e,this._firestore);let l;return l="string"==typeof(t=(0,Ht.m9)(t))||t instanceof od?RC(this._dataReader,"WriteBatch.update",u._key,t,r,s):xC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cf(e,this._firestore);return this._mutations=this._mutations.concat(new gc(t._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cf(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new Ae(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class q1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kp(e)}get(e){const t=cf(e,this._firestore),r=new P1(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Ke();const u=s[0];if(u.isFoundDocument())return new d0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new d0(this._firestore,r,t._key,null,t.converter);throw Ke()})}set(e,t,r){const s=cf(e,this._firestore),u=rb(s.converter,t,r),l=YE(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=cf(e,this._firestore);let l;return l="string"==typeof(t=(0,Ht.m9)(t))||t instanceof od?RC(this._dataReader,"Transaction.update",u._key,t,r,s):xC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=cf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cf(e,this._firestore),r=new uf(this._firestore);return super.get(e).then(s=>new ad(this._firestore,r,t._key,s._document,new Qp(!1,!1),t.converter))}}function FC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Cx(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function Sx(){if(!function UD(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ll=us.SDK_VERSION,(0,us._registerComponent)(new Sl.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Wn(new gI(t.getProvider("auth-internal")),new kD(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,us.registerVersion)(dI,"3.8.1",n),(0,us.registerVersion)(dI,"3.8.1","esm2017")}();class g0{constructor(e){this._delegate=e}static fromBase64String(e){return Sx(),new g0(bc.fromBase64String(e))}static fromUint8Array(e){return Cx(),new g0(bc.fromUint8Array(e))}toBase64(){return Sx(),this._delegate.toBase64()}toUint8Array(){return Cx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function UC(n){return function tk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nk{enableIndexedDbPersistence(e,t){return function l1(n,e){sx(n=nn(n,Wn));const t=Ar(n),r=n._freezeSettings(),s=new mC;return ix(t,s,new BA(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function d1(n){sx(n=nn(n,Wn));const e=Ar(n),t=n._freezeSettings(),r=new mC;return ix(e,r,new qM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function h1(n){if(n._initialized&&!n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ln;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!oo.C())return Promise.resolve();const s=r+"main";yield oo.delete(s)}),function(r){return t.apply(this,arguments)})(n0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ax{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $l||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&rc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function WA(n,e,t,r={}){var s;const u=(n=nn(n,c0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&rc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Br.MOCK_USER;else{l=(0,Ht.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Br(w)}n._authCredentials=new zS(new pI(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function p1(n){return function e1(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield JA(n),t=yield DC(n);return e.setNetworkEnabled(!0),function(r){const s=je(r);return s._u.delete(0),a0(s)}(t)}))}(Ar(n=nn(n,Wn)))}(this._delegate)}disableNetwork(){return function g1(n){return function t1(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield JA(n),t=yield DC(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(s){const u=je(s);u._u.add(0),yield fy(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Ar(n=nn(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,$A("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function f1(n){return function(e){const t=new Ln;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function PM(n,e){return eC.apply(this,arguments)}(yield TC(e),t)})),t.promise}(Ar(n=nn(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function z1(n,e){return function i1(n,e){const t=new GE(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield wy(n),s=t,je(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield wy(n),s=t,void je(r).Ru.delete(s);var r,s}))}}(Ar(n=nn(n,Wn)),SC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new by(this,ZA(this._delegate,e))}catch(t){throw fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xo(this,zE(this._delegate,e))}catch(t){throw fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function WM(n,e){if(n=nn(n,c0),yC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ki(n,null,(t=e,new dc(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W1(n,e,t){n=nn(n,Wn);const r=Object.assign(Object.assign({},G1),t);return function(s){if(s.maxAttempts<1)throw new Ae(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Ln;return s.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const w=yield function ex(n){return qE(n).then(e=>e.datastore)}(s);new XM(s.asyncQueue,w,l,u,m).run()})),m.promise}(Ar(n),s=>e(new q1(n,s)),r)}(this._delegate,t=>e(new xx(this,t)))}batch(){return Ar(this._delegate),new Rx(new Dx(this._delegate,e=>Ey(this._delegate,e)))}loadBundle(e){return function m1(n,e){const t=Ar(n=nn(n,Wn)),r=new u1;return function s1(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return YA(w,D);if(w instanceof ArrayBuffer)return YA(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new ZM(w,l);var w}(t,Oe(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function GM(n,e,t){const r=je(n);var s;(s=(0,pe.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(U,K){const te=je(U),xe=zn(K.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Re=>te.Ns.getBundleMetadata(Re,K.id)).then(Re=>!!Re&&Re.createTime.compareTo(xe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(U=w).totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}),Promise.resolve(new Set);m._updateProgress(RA(w));const D=new DM(w,u.localStore,l.yt);let S=yield l.mc();for(;S;){const U=yield D.Fu(S);U&&m._updateProgress(U),S=yield l.mc()}const k=yield D.complete();return yield sd(u,k.Lu,void 0),yield function(U,K){const te=je(U);return te.persistence.runTransaction("Save bundle","readwrite",xe=>te.Ns.saveBundleMetadata(xe,K))}(u.localStore,w),m._completeWith(k.progress),Promise.resolve(k.Bu)}catch(w){return rc("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var U}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield TC(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function y1(n,e){return function o1(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const s=je(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield WE(n),e)}))}(Ar(n=nn(n,Wn)),e).then(t=>t?new ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class ib extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new g0(new bc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xo.forKey(t,this.firestore,null)}}class xx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}get(e){const t=Jp(e);return this._delegate.get(t).then(r=>new m0(this._firestore,new ad(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Jp(e);return r?(FC("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}}class Rx{constructor(e){this._delegate=e}set(e,t,r){const s=Jp(e);return r?(FC("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new p0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new y0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Xp(e,new ib(e),t),s.set(t,u)),u}}Xp.INSTANCES=new WeakMap;class Xo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xo(t,new qn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Xo(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new by(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new by(this.firestore,ZA(this._delegate,e))}catch(t){throw fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof qn&&KA(this._delegate,e)}set(e,t){t=FC("DocumentReference.set",t);try{return t?Ix(this._delegate,e,t):Ix(this._delegate,e)}catch(r){throw fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ex(this._delegate,e):Ex(this._delegate,e,t,...r)}catch(s){throw fs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function j1(n){return Ey(nn(n.firestore,Wn),[new gc(n._key,Cn.none())])}(this._delegate)}onSnapshot(...e){const t=Mx(e),r=kx(e,s=>new m0(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return bx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function F1(n){n=nn(n,qn);const e=nn(n.firestore,Wn),t=Ar(e),r=new uf(e);return function n1(n,e){const t=new Ln;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,l){try{const m=yield function(w,D){const S=je(w);return S.persistence.runTransaction("read document","readonly",k=>S.localDocuments.getDocument(k,D))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Ae(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=my(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield WE(n),e,t);var r})),t.promise}(t,n._key).then(s=>new ad(e,r,n._key,s,new Qp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function U1(n){n=nn(n,qn);const e=nn(n.firestore,Wn);return tx(Ar(e),n._key,{source:"server"}).then(t=>LC(e,n,t))}(this._delegate):function L1(n){n=nn(n,qn);const e=nn(n.firestore,Wn);return tx(Ar(e),n._key).then(t=>LC(e,n,t))}(this._delegate),t.then(r=>new m0(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xo(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function fs(n,e,t){return n.message=n.message.replace(e,t),n}function Mx(n){for(const e of n)if("object"==typeof e&&!UC(e))return e;return{}}function kx(n,e){var t,r;let s;return s=UC(n[0])?n[0]:UC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class m0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wx(this._delegate,e._delegate)}}class y0 extends m0{data(e){const t=this._delegate.data(e);return function fI(n,e){n||Ke()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}where(e,t,r){try{return new ps(this.firestore,sf(this._delegate,function C1(n,e,t){const r=e,s=JE("where",n);return f0._create(s,r,t)}(e,t,r)))}catch(s){throw fs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,sf(this._delegate,function S1(n,e="asc"){const t=e,r=JE("orderBy",n);return PC._create(r,t)}(e,t)))}catch(r){throw fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,sf(this._delegate,function A1(n){return zA("limit",n),eb._create("limit",n,"F")}(e)))}catch(t){throw fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,sf(this._delegate,function x1(n){return zA("limitToLast",n),eb._create("limitToLast",n,"L")}(e)))}catch(t){throw fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,sf(this._delegate,function R1(...n){return tb._create("startAt",n,!0)}(...e)))}catch(t){throw fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,sf(this._delegate,function M1(...n){return tb._create("startAfter",n,!1)}(...e)))}catch(t){throw fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,sf(this._delegate,function k1(...n){return nb._create("endBefore",n,!1)}(...e)))}catch(t){throw fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,sf(this._delegate,function N1(...n){return nb._create("endAt",n,!0)}(...e)))}catch(t){throw fs(t,"endAt()","Query.endAt()")}}isEqual(e){return _C(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function B1(n){n=nn(n,ki);const e=nn(n.firestore,Wn),t=Ar(e),r=new uf(e);return function r1(n,e){const t=new Ln;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(s,u,l){try{const m=yield o0(s,u,!0),w=new NA(u,m.Hi),D=w.Wu(m.documents),S=w.applyChanges(D,!1);l.resolve(S.snapshot)}catch(m){const w=my(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield WE(n),e,t);var r})),t.promise}(t,n._query).then(s=>new af(e,r,n,s))}(this._delegate):"server"===e?.source?function $1(n){n=nn(n,ki);const e=nn(n.firestore,Wn),t=Ar(e),r=new uf(e);return nx(t,n._query,{source:"server"}).then(s=>new af(e,r,n,s))}(this._delegate):function V1(n){n=nn(n,ki);const e=nn(n.firestore,Wn),t=Ar(e),r=new uf(e);return fx(n._query),nx(t,n._query).then(s=>new af(e,r,n,s))}(this._delegate),t.then(r=>new VC(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Mx(e),r=kx(e,s=>new VC(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return bx(this._delegate,t,r)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}class ik{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new y0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new y0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ik(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new y0(this._firestore,r))})}isEqual(e){return wx(this._delegate,e._delegate)}}class by extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xo(this.firestore,e):null}doc(e){try{return new Xo(this.firestore,void 0===e?zE(this._delegate):zE(this._delegate,e))}catch(t){throw fs(t,"doc()","CollectionReference.doc()")}}add(e){return function H1(n,e){const t=nn(n.firestore,Wn),r=zE(n),s=rb(n.converter,e);return Ey(t,[YE(Kp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Xo(this.firestore,t))}isEqual(e){return KA(this._delegate,e._delegate)}withConverter(e){return new by(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function Jp(n){return nn(n,qn)}class BC{constructor(...e){this._delegate=new od(...e)}static documentId(){return new BC(Hn.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof od&&this._delegate._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function K1(){return new AC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eg(e)}static delete(){const e=function Z1(){return new l0("deleteField")}();return e._methodName="FieldValue.delete",new eg(e)}static arrayUnion(...e){const t=function Y1(...n){return new I1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eg(t)}static arrayRemove(...e){const t=function Q1(...n){return new E1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eg(t)}static increment(e){const t=function X1(n){return new b1("increment",n)}(e);return t._methodName="FieldValue.increment",new eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sk={Firestore:Ax,GeoPoint:ZE,Timestamp:Ft,Blob:g0,Transaction:xx,WriteBatch:Rx,DocumentReference:Xo,DocumentSnapshot:m0,Query:ps,QueryDocumentSnapshot:y0,QuerySnapshot:VC,CollectionReference:by,FieldPath:BC,FieldValue:eg,setLogLevel:function rk(n){!function hI(n){Xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function ak(n){(function ok(n,e){n.INTERNAL.registerComponent(new Sl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},sk)))})(n,(e,t)=>new Ax(e,t,new nk)),n.registerVersion("@firebase/firestore-compat","0.3.1")}($g.Z);var uk=P(6451),sb=P(5363),ck=P(6063);class lk extends Yn.x{constructor(e=1/0,t=1/0,r=ck.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var dk=P(3099);function Nx(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,dk.B)({connector:()=>new lk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Px(n,e){return(0,Ra.m)(e)?Bn(()=>n,e):Bn(()=>n)}var $C=P(9468);P(259);const HC=new Map,Lx={activated:!1,tokenObservers:[]},mk={initialized:!1,enabled:!1};function Ni(n){return HC.get(n)||Object.assign({},Lx)}function ab(){return mk}class Ek{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function bk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gs=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ux(n){if(!Ni(n).activated)throw gs.create("use-before-activation",{appName:n.name})}function qC(n,e){return WC.apply(this,arguments)}function WC(){return WC=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const k=yield s.getHeartbeatsHeader();k&&(r["X-Firebase-Client"]=k)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(k){throw gs.create("fetch-network-error",{originalErrorMessage:k?.message})}if(200!==l.status)throw gs.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(k){throw gs.create("fetch-parse-error",{originalErrorMessage:k?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(w[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+D,issuedAtTimeMillis:S}}),WC.apply(this,arguments)}function Sk(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const _0="firebase-app-check-store";let lb=null;function Bx(){return lb||(lb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(gs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_0,{keyPath:"compositeKey"})}}catch(t){e(gs.create("storage-open",{originalErrorMessage:t?.message}))}}),lb)}function ZC(){return ZC=(0,pe.Z)(function*(n,e){const r=(yield Bx()).transaction(_0,"readwrite"),u=r.objectStore(_0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var D;m(gs.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),ZC.apply(this,arguments)}const v0=new Bo.Yd("@firebase/app-check");function QC(n,e){return(0,Ht.hl)()?function Mk(n,e){return function $x(n,e){return ZC.apply(this,arguments)}(function Hx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{v0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zx(){return ab().enabled}function Gx(){return JC.apply(this,arguments)}function JC(){return JC=(0,pe.Z)(function*(){const n=ab();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),JC.apply(this,arguments)}const Fk={error:"UNKNOWN_ERROR"};function Uk(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function db(n){return eS.apply(this,arguments)}function eS(){return eS=(0,pe.Z)(function*(n,e=!1){const t=n.app;Ux(t);const r=Ni(t);let u,s=r.token;if(s&&!Dy(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(Dy(w)?s=w:yield QC(t,void 0))}if(!e&&s&&Dy(s))return{token:s.token};let m,l=!1;if(zx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qC(Sk(t,yield Gx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield QC(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Ni(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?v0.warn(w.message):v0.error(w),u=w}return s?u?m=Dy(s)?{token:s.token,internalError:u}:Zx(u):(m={token:s.token},r.token=s,yield QC(t,s)):m=Zx(u),l&&Wx(t,m),m}),eS.apply(this,arguments)}function nS(n,e){const t=Ni(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qx(n){const{app:e}=n,t=Ni(e);let r=t.tokenRefresher;r||(r=function Vk(n){const{app:e}=n;return new Ek((0,pe.Z)(function*(){let r;if(r=Ni(e).token?yield db(n,!0):yield db(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Wx(n,e){const t=Ni(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Dy(n){return n.expireTimeMillis-Date.now()>0}function Zx(n){return{token:Uk(Fk),error:n}}class Bk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ni(this.app);for(const t of e)nS(this.app,t.next);return Promise.resolve()}}const nR="app-check-internal";!function eN(){(0,us._registerComponent)(new Sl.wA("app-check",n=>function $k(n,e){return new Bk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(nR).initialize()})),(0,us._registerComponent)(new Sl.wA(nR,n=>function jk(n){return{getToken:e=>db(n,e),addTokenListener:e=>function tS(n,e,t,r){const{app:s}=n,u=Ni(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Dy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),qx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>qx(n))}(n,"INTERNAL",e),removeTokenListener:e=>nS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,us.registerVersion)("@firebase/app-check","0.6.1")}();class fb{constructor(){return(0,gn.vb)("app-check")}}typeof window<"u"&&window;var iR=P(9260);const sR=new g.OlP("angularfire2.auth.use-emulator"),aS=new g.OlP("angularfire2.auth.settings"),oR=new g.OlP("angularfire2.auth.tenant-id"),aR=new g.OlP("angularfire2.auth.langugage-code"),uR=new g.OlP("angularfire2.auth.use-device-language"),cR=new g.OlP("angularfire.auth.persistence"),lR=(n,e,t,r,s,u,l,m)=>(0,Ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[D,S]of Object.entries(l))w.settings[D]=S;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let dR=(()=>{class n{constructor(t,r,s,u,l,m,w,D,S,k,U,K){const te=new Yn.x,xe=Xe(void 0).pipe((0,sb.Q)(l.outsideAngular),Bn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,750)))),(0,gt.U)(()=>(0,Ur.on)(t,u,r)),(0,gt.U)(Re=>lR(Re,u,m,D,S,k,w,U)),Nx({bufferSize:1,refCount:!1}));if(Pc(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{xe.pipe(No()).subscribe();const Tt=xe.pipe(Bn(it=>it.getRedirectResult().then(bt=>bt,()=>null)),gn.iC,Nx({bufferSize:1,refCount:!1})),At=xe.pipe(Bn(it=>new ir.y(bt=>({unsubscribe:u.runOutsideAngular(()=>it.onAuthStateChanged(Vt=>bt.next(Vt),Vt=>bt.error(Vt),()=>bt.complete()))})))),ut=xe.pipe(Bn(it=>new ir.y(bt=>({unsubscribe:u.runOutsideAngular(()=>it.onIdTokenChanged(Vt=>bt.next(Vt),Vt=>bt.error(Vt),()=>bt.complete()))}))));this.authState=Tt.pipe(Px(At),(0,$C.R)(l.outsideAngular),(0,sb.Q)(l.insideAngular)),this.user=Tt.pipe(Px(ut),(0,$C.R)(l.outsideAngular),(0,sb.Q)(l.insideAngular)),this.idToken=this.user.pipe(Bn(it=>it?(0,an.D)(it.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(Bn(it=>it?(0,an.D)(it.getIdTokenResult()):Xe(null))),this.credential=(0,uk.T)(Tt,te,this.authState.pipe(As(it=>!it))).pipe((0,gt.U)(it=>it?.user?it:null),(0,$C.R)(l.outsideAngular),(0,sb.Q)(l.insideAngular))}return(0,Ur.pX)(this,xe,u,{spy:{apply:(Re,Tt,At)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&At.then(ut=>te.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur.Dh),g.LFG(Ur.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gn.HU),g.LFG(sR,8),g.LFG(aS,8),g.LFG(oR,8),g.LFG(aR,8),g.LFG(uR,8),g.LFG(cR,8),g.LFG(fb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function hR(n,e){return function oN(n,e=tp.z){return new ir.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function uS(n,e){return hR(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function pb(n,e){return uS(n,e).pipe(sl(void 0),np(),(0,gt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(S=>S.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function fR(n,e,t){return pb(n,t).pipe(Bd((r,s)=>function uN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return cS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return cS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function rp(n,e=Js.y){return n=n??g_,(0,Dn.e)((t,r)=>{let s,u=!0;t.subscribe((0,H.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,gt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function cS(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function pR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=pb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(sl(void 0),np(),As(([r,s])=>s.length>0||!r),(0,gt.U)(([r,s])=>s),gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pR(e);return fR(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return uS(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(gn.iC)}add(e){return this.ref.add(e)}doc(e){return new mR(this.ref.doc(e),this.afs)}}class mR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=vR(r,t);return new gR(s,u,this.afs)}snapshotChanges(){return function aN(n,e){return hR(n,e).pipe(sl(void 0),np(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(gn.iC)}}class lN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pb(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),As(t=>t.length>0),gn.iC):pb(this.query,this.afs.schedulers.outsideAngular).pipe(gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pR(e);return fR(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return uS(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),gn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(gn.iC)}}const yR=new g.OlP("angularfire2.enableFirestorePersistence"),_R=new g.OlP("angularfire2.firestore.persistenceSettings"),dN=new g.OlP("angularfire2.firestore.settings"),hN=new g.OlP("angularfire2.firestore.use-emulator");function vR(n,e=(t=>t)){return{query:e(n),ref:n}}let lS=(()=>{class n{constructor(t,r,s,u,l,m,w,D,S,k,U,K,te,xe,Re,Tt,At){this.schedulers=w;const ut=(0,Ur.on)(t,m,r),it=S;k&&lR(ut,m,U,te,xe,Re,K,Tt),[this.firestore,this.persistenceEnabled$]=(0,Ur.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const bt=m.runOutsideAngular(()=>ut.firestore());if(u&&bt.settings(u),it&&bt.useEmulator(...it),s&&!Pc(l)){const Vt=()=>{try{return(0,an.D)(bt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(lr){return typeof console<"u"&&console.warn(lr),Xe(!1)}};return[bt,m.runOutsideAngular(Vt)]}return[bt,Xe(!1)]},[u,it,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=vR(s,r),m=this.schedulers.ngZone.run(()=>u);return new gR(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new lN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new mR(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur.Dh),g.LFG(Ur.xv,8),g.LFG(yR,8),g.LFG(dN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gn.HU),g.LFG(_R,8),g.LFG(hN,8),g.LFG(dR,8),g.LFG(sR,8),g.LFG(aS,8),g.LFG(oR,8),g.LFG(aR,8),g.LFG(uR,8),g.LFG(cR,8),g.LFG(fb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fN=(()=>{class n{constructor(){iR.Z.registerVersion("angularfire",gn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yR,useValue:!0},{provide:_R,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[lS]}),n})();class w0{constructor(e,t){t.setTitle("Pastaboys")}}w0.\u0275fac=function(e){return new(e||w0)(g.Y36(lS),g.Y36($i))},w0.\u0275cmp=g.Xpm({type:w0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"router-outlet")},dependencies:[U0]});class nu{constructor(){this.order=[],this.subject=new rr([]),this.item=0,this.renderAmount=e=>this.order.findIndex(r=>r.id===e)}sendData(e){this.subject.next(e)}getSubject(){return this.subject.asObservable()}pushOrder(e,t,r,s,u){const l=this.order.some(w=>w.id===t),m=this.order.findIndex(w=>w.id===t);!1===l?this.order.push({price:e,id:t,name:r,amount:1,image:s}):this.order[m].amount=this.order[m].amount+1,this.sendData(this.order)}reduceOrder(e){const t=this.order.findIndex(r=>r.id===e);this.order[t].amount=this.order[t].amount-1,this.order=this.order.filter(r=>r.amount>0),this.sendData(this.order)}}nu.\u0275fac=function(e){return new(e||nu)},nu.\u0275prov=g.Yz7({token:nu,factory:nu.\u0275fac,providedIn:"root"});class tg{constructor(){this.items=[{id:1,name:"Carbonara",price:25e3,resep:"Pasta dengan saus creamy dari campuran susu, keju, dan kocokan telur ini memiliki rasa gurih manis yang pasti anda sukai.",image:"assets/img/carbo.png"},{id:2,name:"Chicken Mushroom",price:2e4,resep:"Chicken Mushroom dengan saus creamy dengan campuran jamur,susu,pake butter dan ayam filet yang sudah diolah ini memiliki rasa gurih yang pasti anda sukai.",image:"assets/img/chicken.png"},{id:3,name:"Yoghurt",price:8e3,resep:"Yogurt yang dibuat dari susu segar dan plain yogurt ini memiliki rasa creamy manis yang pasti anda sukai.",image:"assets/img/yoghurt.jpg"},{id:4,name:"Cookies",price:1e4,resep:"Cookies coklat kesukaan kamu.",image:"assets/img/cook.jpg"}]}getItems(){return this.items}}function pN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",11),g.NdJ("click",function(){g.CHM(t);const s=g.oxw().$implicit,u=g.oxw();return g.KtG(u.pushOrder(s.price,s.id,s.name,s.image))}),g._uU(1," Tambah "),g.qZA()}}function gN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",12)(1,"button",13),g._uU(2," Catatan "),g.qZA(),g.TgZ(3,"div",14)(4,"button",15),g.NdJ("click",function(){g.CHM(t);const s=g.oxw().$implicit,u=g.oxw();return g.KtG(u.reduceOrder(s.id))}),g._UZ(5,"img",16),g.qZA(),g.TgZ(6,"div",17),g._uU(7),g.qZA(),g.TgZ(8,"button",15),g.NdJ("click",function(){g.CHM(t);const s=g.oxw().$implicit,u=g.oxw();return g.KtG(u.pushOrder(s.price,s.id,s.name,s.image))}),g._UZ(9,"img",18),g.qZA()()()}if(2&n){const t=g.oxw().$implicit,r=g.oxw();g.xp6(7),g.hij(" ",null==r.order[r.renderAmount(t.id)]?null:r.order[r.renderAmount(t.id)].amount," ")}}tg.\u0275fac=function(e){return new(e||tg)},tg.\u0275prov=g.Yz7({token:tg,factory:tg.\u0275fac,providedIn:"root"});const mN=function(n){return["/menu",n]};function yN(n,e){if(1&n&&(g.TgZ(0,"div",2)(1,"div",3)(2,"div",4),g._UZ(3,"img",5),g.TgZ(4,"p",6),g._uU(5),g.qZA(),g.TgZ(6,"p",7),g._uU(7),g.ALo(8,"currency"),g.qZA()(),g.TgZ(9,"div",8),g.YNc(10,pN,2,0,"button",9),g.YNc(11,gN,10,1,"div",10),g.qZA()()()),2&n){const t=e.$implicit,r=g.oxw();g.xp6(2),g.Q6J("routerLink",g.VKq(11,mN,t.id)),g.xp6(1),g.s9C("src",t.image,g.LSH),g.xp6(2),g.Oqu(t.name),g.xp6(2),g.hij(" ",g.gM2(8,6,t.price,"IDR","symbol","3.0")," "),g.xp6(3),g.Q6J("ngIf",(null==r.order[r.renderAmount(t.id)]?null:r.order[r.renderAmount(t.id)].amount)<1),g.xp6(1),g.Q6J("ngIf",(null==r.order[r.renderAmount(t.id)]?null:r.order[r.renderAmount(t.id)].amount)>0)}}class I0{constructor(e,t){this.itemService=e,this.orderItem=t,this.items=this.itemService.getItems(),this.order=[],this.renderAmount=r=>this.orderItem.renderAmount(r),this.subscription=t.getSubject().subscribe(r=>{this.order=r})}pushOrder(e,t,r,s){this.orderItem.pushOrder(e,t,r,s)}reduceOrder(e){this.orderItem.reduceOrder(e)}}I0.\u0275fac=function(e){return new(e||I0)(g.Y36(tg),g.Y36(nu))},I0.\u0275cmp=g.Xpm({type:I0,selectors:[["app-cards"]],decls:2,vars:1,consts:[[1,"grid","mt-10","gap-4","gap-y-10","grid-cols-2","grid-rows-2"],["class","border-[#C5C5C5] border-[1px] rounded-2xl",4,"ngFor","ngForOf"],[1,"border-[#C5C5C5]","border-[1px]","rounded-2xl"],[1,"flex","flex-col","items-center","p-3"],[1,"cursor-pointer",3,"routerLink"],[1,"rounded-full","h-28","w-28","m-auto","mb-2",3,"src"],[1,"text-xs","font-bold"],[1,"text-xs","font-semibold"],[1,"mt-10","mb-0"],["class","border-[#28A748] border-2 h-5 text-xs text-[#28A748] px-7 rounded-lg",3,"click",4,"ngIf"],["class","flex justify-between items-center gap-1",4,"ngIf"],[1,"border-[#28A748]","border-2","h-5","text-xs","text-[#28A748]","px-7","rounded-lg",3,"click"],[1,"flex","justify-between","items-center","gap-1"],[1,"text-[10px]","border-black","border-[1px]","rounded-full","px-2","shadow-lg"],[1,"flex","items-center","justify-center","gap-2","flex-shrink-0"],[1,"",3,"click"],["src","assets/img/min.svg"],[1,"text-xs","w-2","flex","justify-center"],["src","assets/img/plus.svg"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,yN,12,13,"div",1),g.qZA()),2&e&&(g.xp6(1),g.Q6J("ngForOf",t.items))},dependencies:[Ii,yn,za,yo]});class Ty{constructor(e){this.orderItem=e,this.order=[],this.cont=0,this.amountTotal=()=>this.order.reduce((r,s)=>r+s.amount,0),this.totalAddition=()=>this.order.reduce((r,s)=>r+s.price*s.amount,0),this.subscription=e.getSubject().subscribe(t=>this.order=t)}ngOnChanges(e){}}Ty.\u0275fac=function(e){return new(e||Ty)(g.Y36(nu))},Ty.\u0275cmp=g.Xpm({type:Ty,selectors:[["app-checkout"]],features:[g.TTD],decls:9,vars:7,consts:[["routerLink","/payment",1,"fixed","w-4/5","xl:w-2/5","bottom-1","left-2/4","-translate-x-1/2","px-10","bg-blue-300","rounded-b-full","py-2"],[1,"flex","justify-between"],[1,"font-medium"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"p"),g._uU(4),g.qZA()(),g.TgZ(5,"div")(6,"p",2),g._uU(7),g.ALo(8,"currency"),g.qZA()()()()),2&e&&(g.xp6(4),g.hij("",t.amountTotal()," Item"),g.xp6(3),g.hij(" ",0===t.totalAddition()?"Rp0":g.gM2(8,2,t.totalAddition(),"IDR","symbol","3.0")," "))},dependencies:[za,yo]});class ng{constructor(){this.userInfo={name:"",address:"",number:""},this.subject=new rr([])}onKey(e,t){1===t&&(this.userInfo.name=e),2===t&&(this.userInfo.number=e),3===t&&(this.userInfo.address=e),this.sendData(this.userInfo)}sendData(e){this.subject.next(e)}getSubject(){return this.subject.asObservable()}}function _N(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",7)(1,"div",8),g._UZ(2,"img",9),g.TgZ(3,"div",10)(4,"div",11)(5,"div")(6,"h1",4),g._uU(7),g.qZA(),g.TgZ(8,"p",5),g._uU(9),g.ALo(10,"currency"),g.qZA()()(),g.TgZ(11,"button",12),g._uU(12," Catatan "),g.qZA()()(),g.TgZ(13,"div",13)(14,"div",14)(15,"button",15),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw();return g.KtG(l.reduceOrder(u.id))}),g._UZ(16,"img",16),g.qZA(),g.TgZ(17,"div",17),g._uU(18),g.qZA(),g.TgZ(19,"button",15),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw();return g.KtG(l.addOrder(u.price,u.id,u.name,u.image))}),g._UZ(20,"img",18),g.qZA()()()()}if(2&n){const t=e.$implicit;g.xp6(2),g.s9C("src",t.image,g.LSH),g.xp6(5),g.Oqu(t.name),g.xp6(2),g.hij(" ",g.gM2(10,4,t.price,"IDR","symbol","3.0")," "),g.xp6(9),g.Oqu(t.amount)}}ng.\u0275fac=function(e){return new(e||ng)},ng.\u0275prov=g.Yz7({token:ng,factory:ng.\u0275fac,providedIn:"root"});class E0{constructor(e){this.orderItem=e,this.order=[],this.menu=!1,this.subscription=this.orderItem.getSubject().subscribe(t=>{this.order=t})}addOrder(e,t,r,s){this.orderItem.pushOrder(e,t,r,s)}reduceOrder(e){this.orderItem.reduceOrder(e)}setSwitch(){this.menu=!0,console.log(this.menu)}ngOnInit(){this.order=this.order.filter(e=>e.amount>0)}}E0.\u0275fac=function(e){return new(e||E0)(g.Y36(nu))},E0.\u0275cmp=g.Xpm({type:E0,selectors:[["app-list"]],inputs:{menu:"menu"},decls:12,vars:1,consts:[[1,"bg-[#F5F5F5]","py-2","mt-8","xl:rounded-lg"],["class","flex gap-4 mt-2 mb-3 justify-between items-end lg:w-10/12 m-auto px-7",4,"ngFor","ngForOf"],[1,"w-full","h-[1px]","bg-[#BCBCBC]","bg-opacity-80"],[1,"flex","items-center","justify-between","mt-1","lg:w-10/12","m-auto","px-7"],[1,"font-semibold","text-sm"],[1,"text-xs"],["routerLink","/menu",1,"border-[#28A748]","border-2","h-5","text-xs","text-[#28A748]","px-7","rounded-lg"],[1,"flex","gap-4","mt-2","mb-3","justify-between","items-end","lg:w-10/12","m-auto","px-7"],[1,"flex","gap-4"],["alt","",1,"w-20","h-20","rounded-2xl",3,"src"],[1,"flex","flex-col","gap-7"],[1,"flex","justify-between"],[1,"w-14","text-[10px]","border-black","border-[1px]","rounded-full","px-2","shadow-lg"],[1,"flex","flex-col","gap-14","items-end"],[1,"flex","items-center","justify-center","gap-2","flex-shrink-0"],[1,"",3,"click"],["src","assets/img/min.svg"],[1,"text-xs","w-2","flex","justify-center"],["src","assets/img/plus.svg"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,_N,21,9,"div",1),g._UZ(2,"div",2),g.TgZ(3,"div",3)(4,"div")(5,"h1",4),g._uU(6,"Ada lagi pesanannya?"),g.qZA(),g.TgZ(7,"p",5),g._uU(8,"Masih bisa nambah menu lain, ya"),g.qZA()(),g.TgZ(9,"div")(10,"button",6),g._uU(11," Tambah "),g.qZA()()()()),2&e&&(g.xp6(1),g.Q6J("ngForOf",t.order))},dependencies:[Ii,za,yo]});let wR=(()=>{class n{get nativeWindow(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),wN=(()=>{class n{constructor(t,r,s){this.element=t,this._window=r,this._zone=s,this.onlyGrow=!1,this.useImportant=!1,this.resized=new g.vpe,this.autosize=!0,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound())}set minRows(t){this._minRows=+t,this.textAreaEl&&(this.textAreaEl.rows=this._minRows)}set _autosize(t){this.autosize="boolean"!=typeof t||t}onInput(t){this.adjust()}ngOnDestroy(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)}ngAfterContentChecked(){this.adjust()}ngOnChanges(t){this.adjust(!0)}_findNestedTextArea(){this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(()=>{this._findNestedTextArea()},100))}_onTextAreaFound(){this._addWindowResizeHandler(),setTimeout(()=>{this.adjust()})}_addWindowResizeHandler(){this._windowResizeHandler=function IN(n,e){let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>{n(...r)},e)}}(()=>{this._zone.run(()=>{this.adjust()})},200),this._zone.runOutsideAngular(()=>{this._window.nativeWindow.addEventListener("resize",this._windowResizeHandler,!1)})}adjust(t=!1){if(this.autosize&&!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){const r=this.textAreaEl.value;if(!1===t&&r===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=r,this._oldWidth=this.textAreaEl.offsetWidth;const s=this.textAreaEl.cloneNode(!0),u=this.textAreaEl.parentNode;s.style.width=this.textAreaEl.offsetWidth+"px",s.style.visibility="hidden",s.style.position="absolute",s.textContent=r,u.appendChild(s),s.style["overflow-y"]="hidden",s.style.height="auto";let l=s.scrollHeight,m=this._window.nativeWindow.getComputedStyle(s,null);l+=parseInt(m.getPropertyValue("border-top-width")),l+=parseInt(m.getPropertyValue("border-bottom-width")),"content-box"===m.getPropertyValue("box-sizing")&&(l-=parseInt(m.getPropertyValue("padding-top")),l-=parseInt(m.getPropertyValue("padding-bottom")));const w=this.textAreaEl.offsetHeight;if(!1===this.onlyGrow||l>w){const S=this._getLineHeight(),k=l/S;if(this._minRows&&this._minRows>=k)l=this._minRows*S;else if(this.maxRows&&this.maxRows<=k){const te=this.maxRows*S;l=this.onlyGrow?Math.max(te,w):te,this.textAreaEl.style["overflow-y"]="auto"}else this.textAreaEl.style["overflow-y"]="hidden";this.textAreaEl.style.setProperty("height",l+"px",this.useImportant?"important":""),this.resized.emit(l)}u.removeChild(s)}}_getLineHeight(){let t=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(t)&&this._window.nativeWindow.getComputedStyle){const r=this._window.nativeWindow.getComputedStyle(this.textAreaEl);t=parseInt(r.lineHeight,10)}if(isNaN(t)){const r=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");t=Math.floor(1.5*parseInt(r.replace("px",""),10))}return t}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(wR),g.Y36(g.R0b))},n.\u0275dir=g.lG2({type:n,selectors:[["","autosize",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r.onInput(u.target)})},inputs:{minRows:"minRows",_autosize:["autosize","_autosize"],maxRows:"maxRows",onlyGrow:"onlyGrow",useImportant:"useImportant"},outputs:{resized:"resized"},features:[g.TTD]}),n})(),EN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[wR],imports:[[]]}),n})();class b0{constructor(e){this.userInput=e,this.values="",this.userInfo={name:"",address:"",number:""},this.name=this.userInput.userInfo.name,this.address=this.userInput.userInfo.address,this.number=this.userInput.userInfo.number}onKey(e,t){this.userInput.onKey(e,t)}}b0.\u0275fac=function(e){return new(e||b0)(g.Y36(ng))},b0.\u0275cmp=g.Xpm({type:b0,selectors:[["app-input"]],decls:15,vars:4,consts:[[1,"flex","gap-8","bg-[#F5F5F5]","p-5","justify-center","mt-4","xl:rounded-lg"],[1,"flex","flex-col","gap-4"],[1,"text-[#BCBCBC]","text-xs"],[1,"flex","flex-col","gap-4","lg:w-1/4"],["autosize","","type","text",1,"focus:outline-none","border","pl-3","text-xs","rounded-3xl","shadow-[0_4px_4px_rgba(0,0,0,0.25),0_4px_4px_rgba(0,0,0,0.3)]",3,"value","keyup"],["box",""],[1,"focus:outline-none","border","text-xs","pl-3","rounded-3xl","shadow-[0_4px_4px_rgba(0,0,0,0.25),0_4px_4px_rgba(0,0,0,0.3)]",3,"value","keyup"],["box2",""],["autosize","","type","text",1,"resize-none","focus:outline-none","border","pl-3","pr-3","text-xs","rounded-3xl","shadow-[0_4px_4px_rgba(0,0,0,0.25),0_4px_4px_rgba(0,0,0,0.3)]",3,"minRows","value","keyup"],["box3",""]],template:function(e,t){if(1&e){const r=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"p",2),g._uU(3,"Nama"),g.qZA(),g.TgZ(4,"p",2),g._uU(5,"Nomor Whatsapp (Wa)"),g.qZA(),g.TgZ(6,"p",2),g._uU(7,"Alamat"),g.qZA()(),g.TgZ(8,"div",3)(9,"input",4,5),g.NdJ("keyup",function(){g.CHM(r);const u=g.MAs(10);return g.KtG(t.onKey(u.value,1))}),g.qZA(),g.TgZ(11,"input",6,7),g.NdJ("keyup",function(){g.CHM(r);const u=g.MAs(12);return g.KtG(t.onKey(u.value,2))}),g.qZA(),g.TgZ(13,"textarea",8,9),g.NdJ("keyup",function(){g.CHM(r);const u=g.MAs(14);return g.KtG(t.onKey(u.value,3))}),g.qZA()()()}2&e&&(g.xp6(9),g.s9C("value",t.name),g.xp6(2),g.s9C("value",t.number),g.xp6(2),g.s9C("value",t.address),g.Q6J("minRows",1.1))},dependencies:[wN]});class D0{}D0.\u0275fac=function(e){return new(e||D0)},D0.\u0275cmp=g.Xpm({type:D0,selectors:[["app-head"]],decls:19,vars:0,consts:[[1,"flex","items-center","justify-start","gap-2","ml-6"],["routerLink","/menu","src","assets/img/arrow.svg","alt",""],["src","assets/img/pastaboys.png","alt","",1,"h-10"],[1,"w-full","h-[1px]","bg-[#BCBCBC]"],[1,"max-[360px]:flex-wrap","flex","mt-5","gap-2","ml-4","justify-center"],[1,"flex","items-start","gap-2"],["src","assets/img/clock.svg","alt","",1,"w-9"],[1,"w-44"],[1,"font-semibold","text-sm"],[1,"text-xs","font-medium"],["src","assets/img/location.svg","alt","",1,"w-9"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"img",1)(2,"img",2),g.qZA(),g._UZ(3,"div",3),g.TgZ(4,"div",4)(5,"div",5),g._UZ(6,"img",6),g.TgZ(7,"div",7)(8,"h2",8),g._uU(9,"Pesan antar"),g.qZA(),g.TgZ(10,"p",9),g._uU(11," Sistem Pre Order hingga hari jumat dan diantar hari sabtu "),g.qZA()()(),g.TgZ(12,"div",5),g._UZ(13,"img",10),g.TgZ(14,"div",7)(15,"h2",8),g._uU(16,"Alamat"),g.qZA(),g.TgZ(17,"p",9),g._uU(18,"Khusus daerah Malang"),g.qZA()()()())},dependencies:[za]});class T0{constructor(){this.order=[],this.totalAddition=()=>this.order.reduce((t,r)=>t+r.price*r.amount,0)}}T0.\u0275fac=function(e){return new(e||T0)},T0.\u0275cmp=g.Xpm({type:T0,selectors:[["app-ringkasan"]],inputs:{order:"order"},decls:32,vars:12,consts:[[1,"m-10","bg-[#F5F5F5]","rounded-xl"],[1,"p-5"],[1,"font-semibold","text-sm"],[1,"p-2"],[1,"flex","justify-between","mt-2","text-xs"],[1,"w-full","h-[1px]","bg-black","bg-opacity-80"],[1,"p-7"],[1,"text-xs"],[1,"text-xs","px-7","pb-7","pt-2"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),g._uU(3,"Ringkasan pembayaran"),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"p"),g._uU(7,"Harga"),g.qZA(),g.TgZ(8,"p"),g._uU(9),g.ALo(10,"currency"),g.qZA()(),g.TgZ(11,"div",4)(12,"p"),g._uU(13,"Ongkir"),g.qZA(),g.TgZ(14,"p"),g._uU(15,"Gratis"),g.qZA()(),g.TgZ(16,"div",4)(17,"p"),g._uU(18,"Biaya layanan & lainnya."),g.qZA(),g.TgZ(19,"p"),g._uU(20,"0"),g.qZA()()()(),g._UZ(21,"div",5),g.TgZ(22,"div",6)(23,"div",4)(24,"p",7),g._uU(25,"Total Pembayaran"),g.qZA(),g.TgZ(26,"p"),g._uU(27),g.ALo(28,"currency"),g.qZA()()(),g._UZ(29,"div",5),g.TgZ(30,"p",8),g._uU(31,"Mohon diperiksa kembali*"),g.qZA()()),2&e&&(g.xp6(9),g.hij(" ",0===t.totalAddition()?"Rp0":g.gM2(10,2,t.totalAddition(),"IDR","symbol","3.0")," "),g.xp6(18),g.hij(" ",0===t.totalAddition()?"Rp0":g.gM2(28,7,t.totalAddition(),"IDR","symbol","3.0")," "))},dependencies:[yo]});class Cy{constructor(e,t){this.orderItem=e,this.userInput=t,this.order=[],this.finalOrder={name:"",number:"",address:"",order:[]},this.switchView=new g.vpe,this.subscription=this.orderItem.getSubject().subscribe(r=>{this.order=r,this.finalOrder.order=r}),this.subscription=this.userInput.getSubject().subscribe(r=>{this.finalOrder.name=r.name,this.finalOrder.address=r.address,this.finalOrder.number=r.number})}setSwitch(){this.switchView.emit(!0)}addUserInput(e){}log(){console.log(this.finalOrder)}}function bN(n,e){if(1&n&&(g.TgZ(0,"li"),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.xp6(1),g.hij(" ",t.name," ")}}function DN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",2)(1,"h1",3),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.addItem())}),g._uU(2,"Menu"),g.qZA(),g.TgZ(3,"h2"),g._uU(4,"Choose your delicious meal"),g.qZA(),g.TgZ(5,"ul"),g.YNc(6,bN,2,1,"li",4),g.ALo(7,"async"),g.qZA(),g.TgZ(8,"div",5),g._UZ(9,"app-cards")(10,"app-checkout"),g.qZA()()}if(2&n){const t=g.oxw();g.xp6(6),g.Q6J("ngForOf",g.lcZ(7,1,t.items))}}function TN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",6)(1,"app-payment",7),g.NdJ("switchView",function(s){g.CHM(t);const u=g.oxw();return g.KtG(u.switchView(s))}),g.qZA()()}}Cy.\u0275fac=function(e){return new(e||Cy)(g.Y36(nu),g.Y36(ng))},Cy.\u0275cmp=g.Xpm({type:Cy,selectors:[["app-payment"]],outputs:{switchView:"switchView"},decls:8,vars:1,consts:[[1,"xl:w-2/5","xl:shadow-md","h-screen","m-auto"],[3,"setSwitchView"],[3,"order"],[1,"flex","justify-center","items-center","mt-8"],[1,"bg-[#E28F42]","mb-2","py-2","px-3","w-72","rounded-3xl","text-lg","text-white","font-semibold","border-white","border-[1px]","drop-shadow-[0_4px_4px_rgba(0,0,0,0.3)]",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"app-head")(2,"app-input"),g.TgZ(3,"app-list",1),g.NdJ("setSwitchView",function(){return t.setSwitch()}),g.qZA(),g._UZ(4,"app-ringkasan",2),g.TgZ(5,"div",3)(6,"button",4),g.NdJ("click",function(){return t.log()}),g._uU(7," Pesan "),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("order",t.order))},dependencies:[E0,b0,D0,T0]});class C0{addHello(e){this.order=e}switchView(e){this.menu=e}constructor(e,t){this.itemOrder=e,this.afs=t,this.menu=!0,this.current="hello",this.order=[],this.datas=[],this.itemsCollection=t.collection("items"),this.items=this.itemsCollection.valueChanges(),this.deletee=t.doc("items/n9AqpviQGInJPPmaJ1us")}addItem(){this.deletee.delete()}}C0.\u0275fac=function(e){return new(e||C0)(g.Y36(nu),g.Y36(lS))},C0.\u0275cmp=g.Xpm({type:C0,selectors:[["app-menu"]],decls:2,vars:2,consts:[["class","xl:w-2/5 xl:m-auto ml-9 mr-9 mt-2 h-screen",4,"ngIf"],["class","xl:w-2/5 xl:m-auto mt-5 h-screen",4,"ngIf"],[1,"xl:w-2/5","xl:m-auto","ml-9","mr-9","mt-2","h-screen"],[1,"text-xl","font-semibold",3,"click"],[4,"ngFor","ngForOf"],[1,"flex","flex-col"],[1,"xl:w-2/5","xl:m-auto","mt-5","h-screen"],[3,"switchView"]],template:function(e,t){1&e&&(g.YNc(0,DN,11,3,"div",0),g.YNc(1,TN,2,0,"div",1)),2&e&&(g.Q6J("ngIf",t.menu),g.xp6(1),g.Q6J("ngIf",!1===t.menu))},dependencies:[Ii,yn,I0,Ty,Cy,Hs]});class S0{}S0.\u0275fac=function(e){return new(e||S0)},S0.\u0275cmp=g.Xpm({type:S0,selectors:[["app-welcome"]],decls:11,vars:0,consts:[[1,"bg-cover","h-screen","relative","top-0","left-0",2,"background-image","url(assets/img/marbel.png)"],["src","assets/img/rect.png",1,"relative","top-0","left-0","h-screen","w-screen"],["src","assets/img/pasta.png",1,"absolute","top-0","left-0","w-screen","lg:h-screen"],[1,"flex","flex-col","gap-12","items-center","absolute","mr-auto","ml-auto","top-44","left-0","right-0"],["src","assets/img/pastaWelcome.png"],[1,"flex","flex-col","items-center"],[1,"text-3xl","text-white","font-bold"],["src","assets/img/pastaboys.png",1,"w-36"],["routerLink","/menu",1,"bg-[#606767]","w-48","h-12","text-white","text-xl","font-bold","rounded-full"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"img",1)(2,"img",2),g.TgZ(3,"div",3),g._UZ(4,"img",4),g.TgZ(5,"div",5)(6,"p",6),g._uU(7,"Selamat Datang"),g.qZA(),g._UZ(8,"img",7),g.qZA(),g.TgZ(9,"button",8),g._uU(10," Get a meal "),g.qZA()()())},dependencies:[za]});class A0{}A0.\u0275fac=function(e){return new(e||A0)},A0.\u0275cmp=g.Xpm({type:A0,selectors:[["app-page-not-found"]],decls:2,vars:0,template:function(e,t){1&e&&(g.TgZ(0,"p"),g._uU(1,"page-not-found works!"),g.qZA())}});const IR="firebasestorage.googleapis.com",ER="storageBucket";class cr extends Ht.ZR{constructor(e,t,r=0){super(dS(e),`Firebase Storage: ${t} (${dS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function dS(n){return"storage/"+n}function hS(){return new cr("unknown","An unknown error occurred, please check the error payload for server response.")}function bR(){return new cr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function DR(){return new cr("canceled","User canceled the upload/download.")}function TR(){return new cr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Sy(n){return new cr("invalid-argument",n)}function CR(){return new cr("app-deleted","The Firebase app was deleted.")}function SR(n){return new cr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function x0(n,e){return new cr("invalid-format","String does not match format '"+n+"': "+e)}function R0(n){throw new cr("internal-error","Internal error: "+n)}class Ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ki.makeFromUrl(e,t)}catch{return new Ki(e,"")}if(""===r.path)return r;throw function LN(n){return new cr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function D(it){it.path_=decodeURIComponent(it.path)}const k=t.replace(/[.]/g,"\\."),ut=[{regex:m,indices:{bucket:1,path:3},postModify:function u(it){"/"===it.path.charAt(it.path.length-1)&&(it.path_=it.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${k}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===IR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let it=0;it<ut.length;it++){const bt=ut[it],Vt=bt.regex.exec(e);if(Vt){let su=Vt[bt.indices.path];su||(su=""),r=new Ki(Vt[bt.indices.bucket],su),bt.postModify(r);break}}if(null==r)throw function ON(n){return new cr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class $N{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function gb(n){return"string"==typeof n||n instanceof String}function AR(n){return fS()&&n instanceof Blob}function fS(){return typeof Blob<"u"&&!(0,Ht.UG)()}function pS(n,e,t,r){if(r<e)throw Sy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Sy(`Invalid value for '${n}'. Expected ${t} or less.`)}function ud(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function xR(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var lf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(lf||(lf={})),lf))();function RR(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class WN{constructor(e,t,r,s,u,l,m,w,D,S,k,U=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=w,this.timeout_=D,this.progressCallback_=S,this.connectionFactory_=k,this.retry=U,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,te)=>{this.resolve_=K,this.reject_=te,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,l=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function zN(n){return void 0!==n}(w)?u():u(w)}catch(w){l(w)}else if(null!==m){const w=hS();w.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,w):w)}else l(s.canceled?this.appDelete_?CR():DR():bR())};this.canceled_?t(0,new mb(!1,null,!0)):this.backoffId_=function jN(n,e,t){let r=1,s=null,u=null,l=!1,m=0;function w(){return 2===m}let D=!1;function S(...Re){D||(D=!0,e.apply(null,Re))}function k(Re){s=setTimeout(()=>{s=null,n(K,w())},Re)}function U(){u&&clearTimeout(u)}function K(Re,...Tt){if(D)return void U();if(Re)return U(),void S.call(null,Re,...Tt);if(w()||l)return U(),void S.call(null,Re,...Tt);let ut;r<64&&(r*=2),1===m?(m=2,ut=0):ut=1e3*(r+Math.random()),k(ut)}let te=!1;function xe(Re){te||(te=!0,U(),!D&&(null!==s?(Re||(m=2),clearTimeout(s),k(0)):Re||(m=1)))}return k(0),u=setTimeout(()=>{l=!0,xe(!0)},t),xe}((r,s)=>{if(s)return void r(!1,new mb(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===lf.NO_ERROR,w=u.getStatus();if(!m||RR(w,this.additionalRetryCodes_)&&this.retry){const S=u.getErrorCode()===lf.ABORT;return void r(!1,new mb(!1,null,S))}const D=-1!==this.successCodes_.indexOf(w);r(!0,new mb(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function HN(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class mb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function eP(...n){const e=function JN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(fS())return new Blob(n);throw new cr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const lo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gS{constructor(e,t){this.data=e,this.contentType=t||null}}function mS(n,e){switch(n){case lo.RAW:return new gS(MR(e));case lo.BASE64:case lo.BASE64URL:return new gS(kR(n,e));case lo.DATA_URL:return new gS(function iP(n){const e=new NR(n);return e.base64?kR(lo.BASE64,e.rest):function rP(n){let e;try{e=decodeURIComponent(n)}catch{throw x0(lo.DATA_URL,"Malformed data URL.")}return MR(e)}(e.rest)}(e),function sP(n){return new NR(n).contentType}(e))}throw hS()}function MR(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function kR(n,e){switch(n){case lo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw x0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case lo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw x0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function nP(n){if(typeof atob>"u")throw function BN(n){return new cr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:x0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class NR{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw x0(lo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function oP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Dc{constructor(e,t){let r=0,s="";AR(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(AR(this.data_)){const s=function tP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Dc(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Dc(r,!0)}}static getBlob(...e){if(fS()){const t=e.map(r=>r instanceof Dc?r.data_:r);return new Dc(eP.apply(null,t))}{const t=e.map(l=>gb(l)?mS(lo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)s[u++]=l[m]}),new Dc(s,!0)}}uploadData(){return this.data_}}function yS(n){let e;try{e=JSON.parse(n)}catch{return null}return function qN(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function PR(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function cP(n,e){return e}class ms{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||cP}}let yb=null;function M0(){if(yb)return yb;const n=[];n.push(new ms("bucket")),n.push(new ms("generation")),n.push(new ms("metageneration")),n.push(new ms("name","fullPath",!0));const t=new ms("name");t.xform=function e(u,l){return function lP(n){return!gb(n)||n.length<2?n:PR(n)}(l)},n.push(t);const s=new ms("size");return s.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(s),n.push(new ms("timeCreated")),n.push(new ms("updated")),n.push(new ms("md5Hash",null,!0)),n.push(new ms("cacheControl",null,!0)),n.push(new ms("contentDisposition",null,!0)),n.push(new ms("contentEncoding",null,!0)),n.push(new ms("contentLanguage",null,!0)),n.push(new ms("contentType",null,!0)),n.push(new ms("metadata","customMetadata",!0)),yb=n,yb}function OR(n,e,t){const r=yS(e);return null===r?null:function hP(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function dP(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Ki(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function _S(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const LR="prefixes";class Tc{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cc(n){if(!n)throw hS()}function _b(n,e){return function t(r,s){const u=OR(n,s,e);return Cc(null!==u),u}}function Ay(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function NN(){return new cr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function kN(){return new cr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function MN(n){return new cr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function PN(n){return new cr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function k0(n){const e=Ay(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function RN(n){return new cr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function UR(n,e,t){const s=ud(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Tc(s,"GET",_b(n,t),l);return m.errorHandler=k0(e),m}function _P(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=ud(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,S=new Tc(m,"GET",function mP(n,e){return function t(r,s){const u=function gP(n,e,t){const r=yS(t);return null===r?null:function pP(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[LR])for(const s of t[LR]){const u=s.replace(/\/$/,""),l=n._makeStorageReference(new Ki(e,u));r.prefixes.push(l)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new Ki(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return Cc(null!==u),u}}(n,e.bucket),D);return S.urlParams=u,S.errorHandler=Ay(e),S}function BR(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function EP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class vb{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function vS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Cc(!1)}return Cc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const CP={STATE_CHANGED:"state_changed"},ys={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wS(n){switch(n){case"running":case"pausing":case"canceling":return ys.RUNNING;case"paused":return ys.PAUSED;case"success":return ys.SUCCESS;case"canceled":return ys.CANCELED;default:return ys.ERROR}}class SP{constructor(e,t,r){if(function GN(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function xy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class AP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=lf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=lf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw R0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw R0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw R0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw R0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw R0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class xP extends AP{initXhr(){this.xhr_.responseType="text"}}function ru(){return new xP}class zR{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=M0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(RR(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=bR()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function bP(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l=BR(e,r,s),m={name:l.fullPath},w=ud(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},k=_S(l,t),te=new Tc(w,"POST",function K(xe){let Re;vS(xe);try{Re=xe.getResponseHeader("X-Goog-Upload-URL")}catch{Cc(!1)}return Cc(gb(Re)),Re},n.maxUploadRetryTime);return te.urlParams=m,te.headers=S,te.body=k,te.errorHandler=Ay(e),te}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ru,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function DP(n,e,t,r){const w=new Tc(t,"POST",function u(D){const S=vS(D,["active","final"]);let k=null;try{k=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Cc(!1)}k||Cc(!1);const U=Number(k);return Cc(!isNaN(U)),new vb(U,r.size(),"final"===S)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=Ay(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,ru,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new vb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let l;try{l=function TP(n,e,t,r,s,u,l,m){const w=new vb(0,0);if(l?(w.current=l.current,w.total=l.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function UN(){return new cr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const D=w.total-w.current;let S=D;s>0&&(S=Math.min(S,s));const k=w.current;let K="";K=0===S?"finalize":D===S?"upload, finalize":"upload";const te={"X-Goog-Upload-Command":K,"X-Goog-Upload-Offset":`${w.current}`},xe=r.slice(k,k+S);if(null===xe)throw TR();const ut=new Tc(t,"POST",function Re(it,bt){const Vt=vS(it,["active","final"]),lr=w.current+S,su=r.size();let bS;return bS="final"===Vt?_b(e,u)(it,bt):null,new vb(lr,su,"final"===Vt,bS)},e.maxUploadRetryTime);return ut.headers=te,ut.body=xe.uploadData(),ut.progressCallback=m||null,ut.errorHandler=Ay(n),ut}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(l,ru,s,u,!1);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=UR(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,ru,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function $R(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let ut="";for(let it=0;it<2;it++)ut+=Math.random().toString().slice(2);return ut}();l["Content-Type"]="multipart/related; boundary="+w;const D=BR(e,r,s),S=_S(D,t),K=Dc.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+w+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===K)throw TR();const te={name:D.fullPath},xe=ud(u,n.host,n._protocol),Tt=n.maxUploadRetryTime,At=new Tc(xe,"POST",_b(n,t),Tt);return At.urlParams=te,At.headers=l,At.body=K.uploadData(),At.errorHandler=Ay(e),At}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ru,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=DR(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=wS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new SP(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(wS(this._state)){case ys.SUCCESS:xy(this._resolve.bind(null,this.snapshot))();break;case ys.CANCELED:case ys.ERROR:xy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wS(this._state)){case ys.RUNNING:case ys.PAUSED:e.next&&xy(e.next.bind(e,this.snapshot))();break;case ys.SUCCESS:e.complete&&xy(e.complete.bind(e))();break;default:e.error&&xy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class rg{constructor(e,t){this._service=e,this._location=t instanceof Ki?t:Ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rg(e,t)}get root(){const e=new Ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PR(this._location.path)}get storage(){return this._service}get parent(){const e=function aP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ki(this._location.bucket,e);return new rg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw SR(e)}}function qR(n,e,t){return IS.apply(this,arguments)}function IS(){return IS=(0,pe.Z)(function*(n,e,t){const s=yield WR(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield qR(n,e,s.nextPageToken))}),IS.apply(this,arguments)}function WR(n,e){null!=e&&"number"==typeof e.maxResults&&pS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=_P(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ru)}function $P(n){n._throwIfRoot("getDownloadURL");const e=function vP(n,e,t){const s=ud(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Tc(s,"GET",function yP(n,e){return function t(r,s){const u=OR(n,s,e);return Cc(null!==u),function fP(n,e,t,r){const s=yS(e);if(null===s||!gb(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(D=>{const k=n.fullPath;return ud("/b/"+l(n.bucket)+"/o/"+l(k),t,r)+xR({alt:"media",token:D})})[0]}(u,s,n.host,n._protocol)}}(n,t),l);return m.errorHandler=k0(e),m}(n.storage,n._location,M0());return n.storage.makeRequestWithTokens(e,ru).then(t=>{if(null===t)throw function VN(){return new cr("no-download-url","The given file does not have any download URLs.")}();return t})}function ZR(n,e){const t=function uP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ki(n._location.bucket,t);return new rg(n.storage,r)}function KR(n,e){if(n instanceof ES){const t=n;if(null==t._bucket)throw function FN(){return new cr("no-default-bucket","No default bucket found. Did you set the '"+ER+"' property when initializing the app?")}();const r=new rg(t,t._bucket);return null!=e?KR(r,e):r}return void 0!==e?ZR(n,e):n}function GP(n,e){if(e&&function HP(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ES)return function zP(n,e){return new rg(n,e)}(n,e);throw Sy("To use ref(service, url), the first argument must be a Storage instance.")}return KR(n,e)}function YR(n,e){const t=e?.[ER];return null==t?null:Ki.makeFromBucketSpec(t,n)}class ES{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=IR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Ki.makeFromBucketSpec(s,this._host):YR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ki.makeFromBucketSpec(this._url,e):YR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rg(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new $N(CR());{const l=function XN(n,e,t,r,s,u,l=!0){const m=xR(n.urlParams),w=n.url+m,D=Object.assign({},n.headers);return function YN(n,e){e&&(n["X-Firebase-GMPID"]=e)}(D,e),function ZN(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(D,t),function KN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(D,u),function QN(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(D,r),new WN(w,n.method,D,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const QR="@firebase/storage";function eM(n,e){return GP(n=(0,Ht.m9)(n),e)}function tO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new ES(t,r,s,e,us.SDK_VERSION)}!function nO(){(0,us._registerComponent)(new Sl.wA("storage",tO,"PUBLIC").setMultipleInstances(!0)),(0,us.registerVersion)(QR,"0.10.1",""),(0,us.registerVersion)(QR,"0.10.1","esm2017")}();class wb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class nM{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wb(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?l=>t(new wb(l,this,this._ref)):{next:t.next?l=>t.next(new wb(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class rM{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new cd(e,this._service))}get items(){return this._delegate.items.map(e=>new cd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class cd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function eO(n,e){return ZR(n,e)}(this._delegate,e);return new cd(t,this.storage)}get root(){return new cd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new cd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new nM(function WP(n,e,t){return function LP(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new zR(n,new Dc(e),t)}(n=(0,Ht.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=lo.RAW,r){this._throwIfRoot("putString");const s=mS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new nM(new zR(this._delegate,new Dc(s.data,!0),u),this)}listAll(){return function QP(n){return function UP(n){const e={prefixes:[],items:[]};return qR(n,e).then(()=>e)}(n=(0,Ht.m9)(n))}(this._delegate).then(e=>new rM(e,this.storage))}list(e){return function YP(n,e){return WR(n=(0,Ht.m9)(n),e)}(this._delegate,e||void 0).then(t=>new rM(t,this.storage))}getMetadata(){return function ZP(n){return function VP(n){n._throwIfRoot("getMetadata");const e=UR(n.storage,n._location,M0());return n.storage.makeRequestWithTokens(e,ru)}(n=(0,Ht.m9)(n))}(this._delegate)}updateMetadata(e){return function KP(n,e){return function BP(n,e){n._throwIfRoot("updateMetadata");const t=function wP(n,e,t,r){const u=ud(e.fullServerUrl(),n.host,n._protocol),m=_S(t,r),D=n.maxOperationRetryTime,S=new Tc(u,"PATCH",_b(n,r),D);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=m,S.errorHandler=k0(e),S}(n.storage,n._location,e,M0());return n.storage.makeRequestWithTokens(t,ru)}(n=(0,Ht.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function XP(n){return $P(n=(0,Ht.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function JP(n){return function jP(n){n._throwIfRoot("deleteObject");const e=function IP(n,e){const r=ud(e.fullServerUrl(),n.host,n._protocol),m=new Tc(r,"DELETE",function l(w,D){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=k0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ru)}(n=(0,Ht.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw SR(e)}}class iM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sM(e))throw Sy("ref() expected a child path but got a URL, use refFromURL instead.");return new cd(eM(this._delegate,e),this)}refFromURL(e){if(!sM(e))throw Sy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ki.makeFromUrl(e,this._delegate.host)}catch{throw Sy("refFromUrl() expected a valid full URL but got an invalid one.")}return new cd(eM(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function tM(n,e,t,r={}){!function qP(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Ht.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function sM(n){return/^[A-Za-z]+:\/\//.test(n)}function oO(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new iM(t,r)}function oM(n){const e=function uO(n){return new ir.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function CN(n,e=tp.z){return(0,Dn.e)((t,r)=>{let s=null,u=null,l=null;const m=()=>{if(s){s.unsubscribe(),s=null;const D=u;u=null,r.next(D)}};function w(){const D=l+n,S=e.now();if(S<D)return s=this.schedule(void 0,D-S),void r.add(s);m()}t.subscribe((0,H.x)(r,D=>{u=D,l=e.now(),s||(s=e.schedule(w,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Ib(n){return{getDownloadURL:()=>Xe(void 0).pipe(gn.fc,Bn(()=>n.getDownloadURL()),gn.iC),getMetadata:()=>Xe(void 0).pipe(gn.fc,Bn(()=>n.getMetadata()),gn.iC),delete:()=>(0,an.D)(n.delete()),child:e=>Ib(n.child(e)),updateMetadata:e=>(0,an.D)(n.updateMetadata(e)),put:(e,t)=>oM(n.put(e,t)),putString:(e,t,r)=>oM(n.putString(e,t,r)),list:e=>(0,an.D)(n.list(e)),listAll:()=>(0,an.D)(n.listAll())}}!function aO(n){const e={TaskState:ys,TaskEvent:CP,StringFormat:lo,Storage:iM,Reference:cd};n.INTERNAL.registerComponent(new Sl.wA("storage-compat",oO,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.1")}($g.Z);const cO=new g.OlP("angularfire2.storageBucket"),lO=new g.OlP("angularfire2.storage.maxUploadRetryTime"),dO=new g.OlP("angularfire2.storage.maxOperationRetryTime"),hO=new g.OlP("angularfire2.storage.use-emulator");let fO=(()=>{class n{constructor(t,r,s,u,l,m,w,D,S,k){const U=(0,Ur.on)(t,l,r);this.storage=(0,Ur.cc)(`${U.name}.storage.${s}`,"AngularFireStorage",U.name,()=>{const K=l.runOutsideAngular(()=>U.storage(s||void 0)),te=S;return te&&K.useEmulator(...te),w&&K.setMaxUploadRetryTime(w),D&&K.setMaxOperationRetryTime(D),K},[w,D])}ref(t){return Ib(this.storage.ref(t))}refFromURL(t){return Ib(this.storage.refFromURL(t))}upload(t,r,s){return Ib(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur.Dh),g.LFG(Ur.xv,8),g.LFG(cO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gn.HU),g.LFG(lO,8),g.LFG(dO,8),g.LFG(hO,8),g.LFG(fb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),gO=(()=>{class n{constructor(){iR.Z.registerVersion("angularfire",gn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[fO],imports:[pO]}),n})();const iu=void 0,_O=["id",[["AM","PM"],iu,iu],iu,[["M","S","S","R","K","J","S"],["Min","Sen","Sel","Rab","Kam","Jum","Sab"],["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],["Min","Sen","Sel","Rab","Kam","Jum","Sab"]],iu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]],iu,[["SM","M"],iu,["Sebelum Masehi","Masehi"]],0,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE, dd MMMM y"],["HH.mm","HH.mm.ss","HH.mm.ss z","HH.mm.ss zzzz"],["{1} {0}",iu,iu,iu],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN","."],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"IDR","Rp","Rupiah Indonesia",{AUD:["AU$","$"],BYN:[iu,"\u0440."],IDR:["Rp"],INR:["Rs","\u20b9"],JPY:["JP\xa5","\xa5"],PHP:[iu,"\u20b1"],THB:["\u0e3f"],TWD:["NT$"],USD:["US$","$"],XXX:[]},"ltr",function yO(n){return 5}];class N0{constructor(e,t,r){this.router=e,this.itemService=t,this.orderItem=r,this.id$=this.router.paramMap.pipe((0,gt.U)(s=>s.get("id"))),this.id=0,this.items=[],this.order=[],this.renderAmount=s=>this.orderItem.renderAmount(s),this.subscription=this.orderItem.getSubject().subscribe(s=>{this.order=s})}pushOrder(e,t,r,s){this.orderItem.pushOrder(e,t,r,s)}reduceOrder(e){this.orderItem.reduceOrder(e)}ngOnInit(){this.id$.subscribe(e=>{this.id=Number(e)}),this.items=this.itemService.getItems().filter(e=>e.id===this.id)}}N0.\u0275fac=function(e){return new(e||N0)(g.Y36(ce),g.Y36(tg),g.Y36(nu))},N0.\u0275cmp=g.Xpm({type:N0,selectors:[["app-detail"]],decls:24,vars:10,consts:[[1,"xl:w-2/6","m-auto"],[1,"relative"],[1,"rounded-b-lg","h-80","w-full","max-w-full",3,"src"],["routerLink","/menu","src","assets/img/back.svg","alt","",1,"absolute","bottom-2","left-2","bg-white","px-2","py-1.5","rounded-full"],[1,"flex","justify-between","p-8"],[1,""],[1,"font-medium","text-2xl"],[1,"font-bold","text-2xl"],[1,"flex","items-center","justify-center","gap-2","flex-shrink-0"],[1,"",3,"click"],["src","assets/img/min.svg"],[1,"text-xs","w-2","flex","justify-center"],["src","assets/img/plus.svg"],[1,"p-8"],[1,"text-lg","font-medium"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1),g._UZ(2,"img",2)(3,"img",3),g.qZA(),g.TgZ(4,"div",4)(5,"div",5)(6,"h1",6),g._uU(7),g.qZA(),g.TgZ(8,"h2",7),g._uU(9),g.ALo(10,"currency"),g.qZA()(),g.TgZ(11,"div",8)(12,"button",9),g.NdJ("click",function(){return t.reduceOrder(t.id)}),g._UZ(13,"img",10),g.qZA(),g.TgZ(14,"div",11),g._uU(15),g.qZA(),g.TgZ(16,"button",9),g.NdJ("click",function(){return t.pushOrder(t.items[0].price,t.items[0].id,t.items[0].name,t.items[0].image)}),g._UZ(17,"img",12),g.qZA()()(),g.TgZ(18,"div",13)(19,"h1",14),g._uU(20,"Resep"),g.qZA(),g.TgZ(21,"p"),g._uU(22),g.qZA()(),g._UZ(23,"app-checkout"),g.qZA()),2&e&&(g.xp6(2),g.s9C("src",t.items[0].image,g.LSH),g.xp6(5),g.Oqu(t.items[0].name),g.xp6(2),g.hij(" ",g.gM2(10,5,t.items[0].price,"IDR","symbol","3.0")," "),g.xp6(6),g.hij(" ",(null==t.order[t.renderAmount(t.id)]?null:t.order[t.renderAmount(t.id)].amount)<1?"0":null==t.order[t.renderAmount(t.id)]?null:t.order[t.renderAmount(t.id)].amount," "),g.xp6(7),g.Oqu(t.items[0].resep))},dependencies:[za,Ty,yo]}),function Mn(n,e,t){(0,g.dwT)(n,e,t)}(_O,"id");class Ry{}Ry.\u0275fac=function(e){return new(e||Ry)},Ry.\u0275mod=g.oAB({type:Ry,bootstrap:[w0]}),Ry.\u0275inj=g.cJS({providers:[{provide:g.soG,useValue:"id-ID"},{provide:tt,useClass:we},{provide:aS,useValue:{appVerificationDisabledForTesting:!0}}],imports:[Md,ch,EN,fN,gO,Ur.hO.initializeApp({apiKey:"AIzaSyB01Q_AMKzUa9udcV0N9N96315BgxVmIfc",authDomain:"pastaboysorder.firebaseapp.com",projectId:"pastaboysorder",storageBucket:"pastaboysorder.appspot.com",messagingSenderId:"688589310816",appId:"1:688589310816:web:3e6b47fa89e852f9d52c05",measurementId:"G-XRQD79SDW9"}),ep.forRoot([{path:"menu",component:C0},{path:"menu/:id",component:N0},{path:"payment",component:Cy},{path:"order",component:S0},{path:"",redirectTo:"/order",pathMatch:"full"},{path:"**",component:A0}])]}),Jc().bootstrapModule(Ry).catch(n=>console.error(n))},9751:(st,Ie,P)=>{P.d(Ie,{y:()=>de});var g=P(2961),Q=P(727),N=P(8822),se=P(9635),oe=P(2416),ae=P(576),fe=P(2806);let de=(()=>{class Z{constructor(Ee){Ee&&(this._subscribe=Ee)}lift(Ee){const He=new Z;return He.source=this,He.operator=Ee,He}subscribe(Ee,He,tt){const he=function j(Z){return Z&&Z instanceof g.Lv||function $(Z){return Z&&(0,ae.m)(Z.next)&&(0,ae.m)(Z.error)&&(0,ae.m)(Z.complete)}(Z)&&(0,Q.Nn)(Z)}(Ee)?Ee:new g.Hp(Ee,He,tt);return(0,fe.x)(()=>{const{operator:be,source:we}=this;he.add(be?be.call(he,we):we?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(Ee){try{return this._subscribe(Ee)}catch(He){Ee.error(He)}}forEach(Ee,He){return new(He=le(He))((tt,he)=>{const be=new g.Hp({next:we=>{try{Ee(we)}catch(Le){he(Le),be.unsubscribe()}},error:he,complete:tt});this.subscribe(be)})}_subscribe(Ee){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Ee)}[N.L](){return this}pipe(...Ee){return(0,se.U)(Ee)(this)}toPromise(Ee){return new(Ee=le(Ee))((He,tt)=>{let he;this.subscribe(be=>he=be,be=>tt(be),()=>He(he))})}}return Z.create=Ve=>new Z(Ve),Z})();function le(Z){var Ve;return null!==(Ve=Z??oe.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(st,Ie,P)=>{P.d(Ie,{x:()=>fe});var g=P(9751),Q=P(727);const se=(0,P(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=P(8737),ae=P(2806);let fe=(()=>{class le extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Z=new de(this,this);return Z.operator=j,Z}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(j)}})}error(j){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Z}=this;for(;Z.length;)Z.shift().error(j)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Z,isStopped:Ve,observers:Ee}=this;return Z||Ve?Q.Lc:(this.currentObservers=null,Ee.push(j),new Q.w0(()=>{this.currentObservers=null,(0,oe.P)(Ee,j)}))}_checkFinalizedStatuses(j){const{hasError:Z,thrownError:Ve,isStopped:Ee}=this;Z?j.error(Ve):Ee&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return le.create=($,j)=>new de($,j),le})();class de extends fe{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Z||Z.call(j,$)}error($){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Z||Z.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,Z;return null!==(Z=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==Z?Z:Q.Lc}}},2961:(st,Ie,P)=>{P.d(Ie,{Hp:()=>tt,Lv:()=>Z});var g=P(576),Q=P(727),N=P(2416),se=P(7849);function oe(){}const ae=le("C",void 0,void 0);function le(Ce,_e,Se){return{kind:Ce,value:_e,error:Se}}var $=P(3410),j=P(2806);class Z extends Q.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Q.Nn)(_e)&&_e.add(this)):this.destination=Le}static create(_e,Se,Fe){return new tt(_e,Se,Fe)}next(_e){this.isStopped?we(function de(Ce){return le("N",Ce,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?we(function fe(Ce){return le("E",void 0,Ce)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?we(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Ee(Ce,_e){return Ve.call(Ce,_e)}class He{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Se}=this;if(Se.next)try{Se.next(_e)}catch(Fe){he(Fe)}}error(_e){const{partialObserver:Se}=this;if(Se.error)try{Se.error(_e)}catch(Fe){he(Fe)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Se){he(Se)}}}class tt extends Z{constructor(_e,Se,Fe){let Ne;if(super(),(0,g.m)(_e)||!_e)Ne={next:_e??void 0,error:Se??void 0,complete:Fe??void 0};else{let V;this&&N.v.useDeprecatedNextContext?(V=Object.create(_e),V.unsubscribe=()=>this.unsubscribe(),Ne={next:_e.next&&Ee(_e.next,V),error:_e.error&&Ee(_e.error,V),complete:_e.complete&&Ee(_e.complete,V)}):Ne=_e}this.destination=new He(Ne)}}function he(Ce){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ce):(0,se.h)(Ce)}function we(Ce,_e){const{onStoppedNotification:Se}=N.v;Se&&$.z.setTimeout(()=>Se(Ce,_e))}const Le={closed:!0,next:oe,error:function be(Ce){throw Ce},complete:oe}},727:(st,Ie,P)=>{P.d(Ie,{Lc:()=>ae,w0:()=>oe,Nn:()=>fe});var g=P(576);const N=(0,P(3888).d)(le=>function(j){le(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Z,Ve)=>`${Ve+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=P(8737);class oe{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ee of j)Ee.remove(this);else j.remove(this);const{initialTeardown:Z}=this;if((0,g.m)(Z))try{Z()}catch(Ee){$=Ee instanceof N?Ee.errors:[Ee]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Ee of Ve)try{de(Ee)}catch(He){$=$??[],He instanceof N?$=[...$,...He.errors]:$.push(He)}}if($)throw new N($)}}add($){var j;if($&&$!==this)if(this.closed)de($);else{if($ instanceof oe){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,se.P)(j,$),$ instanceof oe&&$._removeParent(this)}}oe.EMPTY=(()=>{const le=new oe;return le.closed=!0,le})();const ae=oe.EMPTY;function fe(le){return le instanceof oe||le&&"closed"in le&&(0,g.m)(le.remove)&&(0,g.m)(le.add)&&(0,g.m)(le.unsubscribe)}function de(le){(0,g.m)(le)?le():le.unsubscribe()}},2416:(st,Ie,P)=>{P.d(Ie,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,Ie,P)=>{P.d(Ie,{E:()=>Q});const Q=new(P(9751).y)(oe=>oe.complete())},8996:(st,Ie,P)=>{P.d(Ie,{D:()=>_e});var g=P(8421),Q=P(5363),N=P(9468),ae=P(9751),de=P(2202),le=P(576),$=P(9672);function Z(Se,Fe){if(!Se)throw new Error("Iterable cannot be null");return new ae.y(Ne=>{(0,$.f)(Ne,Fe,()=>{const V=Se[Symbol.asyncIterator]();(0,$.f)(Ne,Fe,()=>{V.next().then(ye=>{ye.done?Ne.complete():Ne.next(ye.value)})},0,!0)})})}var Ve=P(3670),Ee=P(8239),He=P(1144),tt=P(6495),he=P(2206),be=P(4532),we=P(3260);function _e(Se,Fe){return Fe?function Ce(Se,Fe){if(null!=Se){if((0,Ve.c)(Se))return function se(Se,Fe){return(0,g.Xf)(Se).pipe((0,N.R)(Fe),(0,Q.Q)(Fe))}(Se,Fe);if((0,He.z)(Se))return function fe(Se,Fe){return new ae.y(Ne=>{let V=0;return Fe.schedule(function(){V===Se.length?Ne.complete():(Ne.next(Se[V++]),Ne.closed||this.schedule())})})}(Se,Fe);if((0,Ee.t)(Se))return function oe(Se,Fe){return(0,g.Xf)(Se).pipe((0,N.R)(Fe),(0,Q.Q)(Fe))}(Se,Fe);if((0,he.D)(Se))return Z(Se,Fe);if((0,tt.T)(Se))return function j(Se,Fe){return new ae.y(Ne=>{let V;return(0,$.f)(Ne,Fe,()=>{V=Se[de.h](),(0,$.f)(Ne,Fe,()=>{let ye,q;try{({value:ye,done:q}=V.next())}catch(Y){return void Ne.error(Y)}q?Ne.complete():Ne.next(ye)},0,!0)}),()=>(0,le.m)(V?.return)&&V.return()})}(Se,Fe);if((0,we.L)(Se))return function Le(Se,Fe){return Z((0,we.Q)(Se),Fe)}(Se,Fe)}throw(0,be.z)(Se)}(Se,Fe):(0,g.Xf)(Se)}},8421:(st,Ie,P)=>{P.d(Ie,{Xf:()=>Ve});var g=P(655),Q=P(1144),N=P(8239),se=P(9751),oe=P(3670),ae=P(2206),fe=P(4532),de=P(6495),le=P(3260),$=P(576),j=P(7849),Z=P(8822);function Ve(Ce){if(Ce instanceof se.y)return Ce;if(null!=Ce){if((0,oe.c)(Ce))return function Ee(Ce){return new se.y(_e=>{const Se=Ce[Z.L]();if((0,$.m)(Se.subscribe))return Se.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,Q.z)(Ce))return function He(Ce){return new se.y(_e=>{for(let Se=0;Se<Ce.length&&!_e.closed;Se++)_e.next(Ce[Se]);_e.complete()})}(Ce);if((0,N.t)(Ce))return function tt(Ce){return new se.y(_e=>{Ce.then(Se=>{_e.closed||(_e.next(Se),_e.complete())},Se=>_e.error(Se)).then(null,j.h)})}(Ce);if((0,ae.D)(Ce))return be(Ce);if((0,de.T)(Ce))return function he(Ce){return new se.y(_e=>{for(const Se of Ce)if(_e.next(Se),_e.closed)return;_e.complete()})}(Ce);if((0,le.L)(Ce))return function we(Ce){return be((0,le.Q)(Ce))}(Ce)}throw(0,fe.z)(Ce)}function be(Ce){return new se.y(_e=>{(function Le(Ce,_e){var Se,Fe,Ne,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Se=(0,g.KL)(Ce);!(Fe=yield Se.next()).done;)if(_e.next(Fe.value),_e.closed)return}catch(ye){Ne={error:ye}}finally{try{Fe&&!Fe.done&&(V=Se.return)&&(yield V.call(Se))}finally{if(Ne)throw Ne.error}}_e.complete()})})(Ce,_e).catch(Se=>_e.error(Se))})}},6451:(st,Ie,P)=>{P.d(Ie,{T:()=>ae});var g=P(8189),Q=P(8421),N=P(515),se=P(7669),oe=P(8996);function ae(...fe){const de=(0,se.yG)(fe),le=(0,se._6)(fe,1/0),$=fe;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,g.J)(le)((0,oe.D)($,de)):N.E}},5403:(st,Ie,P)=>{P.d(Ie,{x:()=>Q});var g=P(2961);function Q(se,oe,ae,fe,de){return new N(se,oe,ae,fe,de)}class N extends g.Lv{constructor(oe,ae,fe,de,le,$){super(oe),this.onFinalize=le,this.shouldUnsubscribe=$,this._next=ae?function(j){try{ae(j)}catch(Z){oe.error(Z)}}:super._next,this._error=de?function(j){try{de(j)}catch(Z){oe.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(j){oe.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(st,Ie,P)=>{P.d(Ie,{U:()=>N});var g=P(4482),Q=P(5403);function N(se,oe){return(0,g.e)((ae,fe)=>{let de=0;ae.subscribe((0,Q.x)(fe,le=>{fe.next(se.call(oe,le,de++))}))})}},8189:(st,Ie,P)=>{P.d(Ie,{J:()=>N});var g=P(5577),Q=P(4671);function N(se=1/0){return(0,g.z)(Q.y,se)}},5577:(st,Ie,P)=>{P.d(Ie,{z:()=>de});var g=P(4004),Q=P(8421),N=P(4482),se=P(9672),oe=P(5403),fe=P(576);function de(le,$,j=1/0){return(0,fe.m)($)?de((Z,Ve)=>(0,g.U)((Ee,He)=>$(Z,Ee,Ve,He))((0,Q.Xf)(le(Z,Ve))),j):("number"==typeof $&&(j=$),(0,N.e)((Z,Ve)=>function ae(le,$,j,Z,Ve,Ee,He,tt){const he=[];let be=0,we=0,Le=!1;const Ce=()=>{Le&&!he.length&&!be&&$.complete()},_e=Fe=>be<Z?Se(Fe):he.push(Fe),Se=Fe=>{Ee&&$.next(Fe),be++;let Ne=!1;(0,Q.Xf)(j(Fe,we++)).subscribe((0,oe.x)($,V=>{Ve?.(V),Ee?_e(V):$.next(V)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(be--;he.length&&be<Z;){const V=he.shift();He?(0,se.f)($,He,()=>Se(V)):Se(V)}Ce()}catch(V){$.error(V)}}))};return le.subscribe((0,oe.x)($,_e,()=>{Le=!0,Ce()})),()=>{tt?.()}}(Z,Ve,le,j)))}},5363:(st,Ie,P)=>{P.d(Ie,{Q:()=>se});var g=P(9672),Q=P(4482),N=P(5403);function se(oe,ae=0){return(0,Q.e)((fe,de)=>{fe.subscribe((0,N.x)(de,le=>(0,g.f)(de,oe,()=>de.next(le),ae),()=>(0,g.f)(de,oe,()=>de.complete(),ae),le=>(0,g.f)(de,oe,()=>de.error(le),ae)))})}},3099:(st,Ie,P)=>{P.d(Ie,{B:()=>oe});var g=P(8421),Q=P(7579),N=P(2961),se=P(4482);function oe(fe={}){const{connector:de=(()=>new Q.x),resetOnError:le=!0,resetOnComplete:$=!0,resetOnRefCountZero:j=!0}=fe;return Z=>{let Ve,Ee,He,tt=0,he=!1,be=!1;const we=()=>{Ee?.unsubscribe(),Ee=void 0},Le=()=>{we(),Ve=He=void 0,he=be=!1},Ce=()=>{const _e=Ve;Le(),_e?.unsubscribe()};return(0,se.e)((_e,Se)=>{tt++,!be&&!he&&we();const Fe=He=He??de();Se.add(()=>{tt--,0===tt&&!be&&!he&&(Ee=ae(Ce,j))}),Fe.subscribe(Se),!Ve&&tt>0&&(Ve=new N.Hp({next:Ne=>Fe.next(Ne),error:Ne=>{be=!0,we(),Ee=ae(Le,le,Ne),Fe.error(Ne)},complete:()=>{he=!0,we(),Ee=ae(Le,$),Fe.complete()}}),(0,g.Xf)(_e).subscribe(Ve))})(Z)}}function ae(fe,de,...le){if(!0===de)return void fe();if(!1===de)return;const $=new N.Hp({next:()=>{$.unsubscribe(),fe()}});return(0,g.Xf)(de(...le)).subscribe($)}},9468:(st,Ie,P)=>{P.d(Ie,{R:()=>Q});var g=P(4482);function Q(N,se=0){return(0,g.e)((oe,ae)=>{ae.add(N.schedule(()=>oe.subscribe(ae),se))})}},8505:(st,Ie,P)=>{P.d(Ie,{b:()=>oe});var g=P(576),Q=P(4482),N=P(5403),se=P(4671);function oe(ae,fe,de){const le=(0,g.m)(ae)||fe||de?{next:ae,error:fe,complete:de}:ae;return le?(0,Q.e)(($,j)=>{var Z;null===(Z=le.subscribe)||void 0===Z||Z.call(le);let Ve=!0;$.subscribe((0,N.x)(j,Ee=>{var He;null===(He=le.next)||void 0===He||He.call(le,Ee),j.next(Ee)},()=>{var Ee;Ve=!1,null===(Ee=le.complete)||void 0===Ee||Ee.call(le),j.complete()},Ee=>{var He;Ve=!1,null===(He=le.error)||void 0===He||He.call(le,Ee),j.error(Ee)},()=>{var Ee,He;Ve&&(null===(Ee=le.unsubscribe)||void 0===Ee||Ee.call(le)),null===(He=le.finalize)||void 0===He||He.call(le)}))}):se.y}},4408:(st,Ie,P)=>{P.d(Ie,{o:()=>oe});var g=P(727);class Q extends g.w0{constructor(fe,de){super()}schedule(fe,de=0){return this}}const N={setInterval(ae,fe,...de){const{delegate:le}=N;return le?.setInterval?le.setInterval(ae,fe,...de):setInterval(ae,fe,...de)},clearInterval(ae){const{delegate:fe}=N;return(fe?.clearInterval||clearInterval)(ae)},delegate:void 0};var se=P(8737);class oe extends Q{constructor(fe,de){super(fe,de),this.scheduler=fe,this.work=de,this.pending=!1}schedule(fe,de=0){var le;if(this.closed)return this;this.state=fe;const $=this.id,j=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(j,$,de)),this.pending=!0,this.delay=de,this.id=null!==(le=this.id)&&void 0!==le?le:this.requestAsyncId(j,this.id,de),this}requestAsyncId(fe,de,le=0){return N.setInterval(fe.flush.bind(fe,this),le)}recycleAsyncId(fe,de,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return de;null!=de&&N.clearInterval(de)}execute(fe,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(fe,de);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,de){let $,le=!1;try{this.work(fe)}catch(j){le=!0,$=j||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:fe,scheduler:de}=this,{actions:le}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(le,this),null!=fe&&(this.id=this.recycleAsyncId(de,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,Ie,P)=>{P.d(Ie,{v:()=>N});var g=P(6063);class Q{constructor(oe,ae=Q.now){this.schedulerActionCtor=oe,this.now=ae}schedule(oe,ae=0,fe){return new this.schedulerActionCtor(this,oe).schedule(fe,ae)}}Q.now=g.l.now;class N extends Q{constructor(oe,ae=Q.now){super(oe,ae),this.actions=[],this._active=!1}flush(oe){const{actions:ae}=this;if(this._active)return void ae.push(oe);let fe;this._active=!0;do{if(fe=oe.execute(oe.state,oe.delay))break}while(oe=ae.shift());if(this._active=!1,fe){for(;oe=ae.shift();)oe.unsubscribe();throw fe}}}},4986:(st,Ie,P)=>{P.d(Ie,{z:()=>N});var g=P(4408);const N=new(P(7565).v)(g.o)},6063:(st,Ie,P)=>{P.d(Ie,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(st,Ie,P)=>{P.d(Ie,{z:()=>g});const g={setTimeout(Q,N,...se){const{delegate:oe}=g;return oe?.setTimeout?oe.setTimeout(Q,N,...se):setTimeout(Q,N,...se)},clearTimeout(Q){const{delegate:N}=g;return(N?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(st,Ie,P)=>{P.d(Ie,{h:()=>Q});const Q=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,Ie,P)=>{P.d(Ie,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,Ie,P)=>{P.d(Ie,{_6:()=>ae,jO:()=>se,yG:()=>oe});var g=P(576);function N(fe){return fe[fe.length-1]}function se(fe){return(0,g.m)(N(fe))?fe.pop():void 0}function oe(fe){return function Q(fe){return fe&&(0,g.m)(fe.schedule)}(N(fe))?fe.pop():void 0}function ae(fe,de){return"number"==typeof N(fe)?fe.pop():de}},8737:(st,Ie,P)=>{function g(Q,N){if(Q){const se=Q.indexOf(N);0<=se&&Q.splice(se,1)}}P.d(Ie,{P:()=>g})},3888:(st,Ie,P)=>{function g(Q){const se=Q(oe=>{Error.call(oe),oe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(Ie,{d:()=>g})},2806:(st,Ie,P)=>{P.d(Ie,{O:()=>se,x:()=>N});var g=P(2416);let Q=null;function N(oe){if(g.v.useDeprecatedSynchronousErrorHandling){const ae=!Q;if(ae&&(Q={errorThrown:!1,error:null}),oe(),ae){const{errorThrown:fe,error:de}=Q;if(Q=null,fe)throw de}}else oe()}function se(oe){g.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=oe)}},9672:(st,Ie,P)=>{function g(Q,N,se,oe=0,ae=!1){const fe=N.schedule(function(){se(),ae?Q.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(Q.add(fe),!ae)return fe}P.d(Ie,{f:()=>g})},4671:(st,Ie,P)=>{function g(Q){return Q}P.d(Ie,{y:()=>g})},1144:(st,Ie,P)=>{P.d(Ie,{z:()=>g});const g=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(st,Ie,P)=>{P.d(Ie,{D:()=>Q});var g=P(576);function Q(N){return Symbol.asyncIterator&&(0,g.m)(N?.[Symbol.asyncIterator])}},576:(st,Ie,P)=>{function g(Q){return"function"==typeof Q}P.d(Ie,{m:()=>g})},3670:(st,Ie,P)=>{P.d(Ie,{c:()=>N});var g=P(8822),Q=P(576);function N(se){return(0,Q.m)(se[g.L])}},6495:(st,Ie,P)=>{P.d(Ie,{T:()=>N});var g=P(2202),Q=P(576);function N(se){return(0,Q.m)(se?.[g.h])}},8239:(st,Ie,P)=>{P.d(Ie,{t:()=>Q});var g=P(576);function Q(N){return(0,g.m)(N?.then)}},3260:(st,Ie,P)=>{P.d(Ie,{L:()=>se,Q:()=>N});var g=P(655),Q=P(576);function N(oe){return(0,g.FC)(this,arguments,function*(){const fe=oe.getReader();try{for(;;){const{value:de,done:le}=yield(0,g.qq)(fe.read());if(le)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{fe.releaseLock()}})}function se(oe){return(0,Q.m)(oe?.getReader)}},4482:(st,Ie,P)=>{P.d(Ie,{A:()=>Q,e:()=>N});var g=P(576);function Q(se){return(0,g.m)(se?.lift)}function N(se){return oe=>{if(Q(oe))return oe.lift(function(ae){try{return se(ae,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(st,Ie,P)=>{P.d(Ie,{U:()=>N,z:()=>Q});var g=P(4671);function Q(...se){return N(se)}function N(se){return 0===se.length?g.y:1===se.length?se[0]:function(ae){return se.reduce((fe,de)=>de(fe),ae)}}},7849:(st,Ie,P)=>{P.d(Ie,{h:()=>N});var g=P(2416),Q=P(3410);function N(se){Q.z.setTimeout(()=>{const{onUnhandledError:oe}=g.v;if(!oe)throw se;oe(se)})}},4532:(st,Ie,P)=>{function g(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ie,{z:()=>g})},655:(st,Ie,P)=>{function se(q,Y){var ie={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&Y.indexOf(ne)<0&&(ie[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(ne=Object.getOwnPropertySymbols(q);Ue<ne.length;Ue++)Y.indexOf(ne[Ue])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Ue])&&(ie[ne[Ue]]=q[ne[Ue]])}return ie}function de(q,Y,ie,ne){return new(ie||(ie=Promise))(function(Pe,ot){function en(Bt){try{Mt(ne.next(Bt))}catch(lt){ot(lt)}}function ln(Bt){try{Mt(ne.throw(Bt))}catch(lt){ot(lt)}}function Mt(Bt){Bt.done?Pe(Bt.value):function Ue(Pe){return Pe instanceof ie?Pe:new ie(function(ot){ot(Pe)})}(Bt.value).then(en,ln)}Mt((ne=ne.apply(q,Y||[])).next())})}function he(q){return this instanceof he?(this.v=q,this):new he(q)}function be(q,Y,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,ne=ie.apply(q,Y||[]),Pe=[];return Ue={},ot("next"),ot("throw"),ot("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function ot(Qt){ne[Qt]&&(Ue[Qt]=function(yr){return new Promise(function(xr,ht){Pe.push([Qt,yr,xr,ht])>1||en(Qt,yr)})})}function en(Qt,yr){try{!function ln(Qt){Qt.value instanceof he?Promise.resolve(Qt.value.v).then(Mt,Bt):lt(Pe[0][2],Qt)}(ne[Qt](yr))}catch(xr){lt(Pe[0][3],xr)}}function Mt(Qt){en("next",Qt)}function Bt(Qt){en("throw",Qt)}function lt(Qt,yr){Qt(yr),Pe.shift(),Pe.length&&en(Pe[0][0],Pe[0][1])}}function Le(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,Y=q[Symbol.asyncIterator];return Y?Y.call(q):(q=function Z(q){var Y="function"==typeof Symbol&&Symbol.iterator,ie=Y&&q[Y],ne=0;if(ie)return ie.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Pe){ie[Pe]=q[Pe]&&function(ot){return new Promise(function(en,ln){!function Ue(Pe,ot,en,ln){Promise.resolve(ln).then(function(Mt){Pe({value:Mt,done:en})},ot)}(en,ln,(ot=q[Pe](ot)).done,ot.value)})}}}P.d(Ie,{FC:()=>be,KL:()=>Le,_T:()=>se,mG:()=>de,qq:()=>he})},4650:(st,Ie,P)=>{P.d(Ie,{$8M:()=>el,$WT:()=>Mn,$Z:()=>p_,AFp:()=>vE,ALo:()=>GI,AaK:()=>de,CHM:()=>Fc,CRH:()=>Cv,CZH:()=>Wm,CqO:()=>gp,D6c:()=>nf,EJc:()=>Hv,EpF:()=>$w,F4k:()=>U_,FYo:()=>Y0,FiY:()=>gt,GfV:()=>s_,JOm:()=>is,KtG:()=>bd,LFG:()=>$e,LSH:()=>Wi,Lbi:()=>EE,Lck:()=>Jn,MAs:()=>nm,MMx:()=>cc,NdJ:()=>Pl,OlP:()=>on,Oqu:()=>mm,P3R:()=>Zf,PXZ:()=>ty,Q6J:()=>bh,QGY:()=>Nl,Qsj:()=>Lb,R0b:()=>hs,RDi:()=>no,Rgc:()=>fc,SBq:()=>ih,Sil:()=>Km,Suo:()=>uo,TTD:()=>ua,TgZ:()=>rm,VKq:()=>mi,X6Q:()=>nd,XFs:()=>dt,Xpm:()=>ta,Xts:()=>Il,Y36:()=>uh,YKP:()=>OI,YNc:()=>tm,Yjl:()=>ra,Yz7:()=>ht,Z0I:()=>Rr,ZZ4:()=>dy,_UZ:()=>Th,_Vd:()=>Zu,_c5:()=>LE,_uU:()=>W_,aQg:()=>hy,c2e:()=>Hr,cJS:()=>ni,cg1:()=>ev,dDg:()=>vc,dqk:()=>Ct,dwT:()=>pI,eFA:()=>Zv,eoX:()=>Gv,f3M:()=>We,g9A:()=>IE,gM2:()=>bv,h0i:()=>ao,hGG:()=>mT,hij:()=>kh,iGM:()=>Gh,ifc:()=>qt,ip1:()=>_E,jDz:()=>jr,kL8:()=>gI,lG2:()=>na,lcZ:()=>hc,lqb:()=>El,lri:()=>Jh,n5z:()=>Md,oAB:()=>En,oxw:()=>$_,q4F:()=>Q0,qLn:()=>Yf,qZA:()=>Dh,rWj:()=>_c,s9C:()=>Ch,sBO:()=>kE,sIi:()=>gh,s_b:()=>Vm,soG:()=>Yh,tb:()=>$v,tp0:()=>T,uIk:()=>mh,vHH:()=>he,vpe:()=>Wo,wAp:()=>vt,xp6:()=>uw,z2F:()=>zp,zSh:()=>Jy,zs3:()=>sh});var g=P(7579),Q=P(727),N=P(9751),se=P(6451),oe=P(3099);function ae(i){for(let o in i)if(i[o]===ae)return o;throw Error("Could not find renamed property on target object.")}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const $=ae({__forward_ref__:ae});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function Z(i){return Ve(i)?i():i}function Ve(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===j}function Ee(i){return i&&!!i.\u0275providers}const tt="https://g.co/ng/security#xss";class he extends Error{constructor(o,a){super(function be(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function we(i){return"string"==typeof i?i:null==i?"":String(i)}function Fe(i,o){throw new he(-201,!1)}function Bt(i,o){null==i&&function lt(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function ht(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ni(i){return{providers:i.providers||[],imports:i.imports||[]}}function zr(i){return Mr(i,kr)||Mr(i,dn)}function Rr(i){return null!==zr(i)}function Mr(i,o){return i.hasOwnProperty(o)?i[o]:null}function _i(i){return i&&(i.hasOwnProperty($s)||i.hasOwnProperty(Gr))?i[$s]:null}const kr=ae({\u0275prov:ae}),$s=ae({\u0275inj:ae}),dn=ae({ngInjectableDef:ae}),Gr=ae({ngInjectorDef:ae});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Yi;function vn(i){const o=Yi;return Yi=i,o}function Nr(i,o,a){const c=zr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&dt.Optional?null:void 0!==o?o:void Fe(de(i))}const Ct=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Sn={},wn="__NG_DI_FLAG__",wi="ngTempTokenPath",Jo=/\n/gm,Xi="__source";let Zt;function vr(i){const o=Zt;return Zt=i,o}function Pi(i,o=dt.Default){if(void 0===Zt)throw new he(-203,!1);return null===Zt?Nr(i,void 0,o):Zt.get(i,o&dt.Optional?null:void 0,o)}function $e(i,o=dt.Default){return(function vi(){return Yi}()||Pi)(Z(i),o)}function We(i,o=dt.Default){return $e(i,wt(o))}function wt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Dt(i){const o=[];for(let a=0;a<i.length;a++){const c=Z(i[a]);if(Array.isArray(c)){if(0===c.length)throw new he(900,!1);let d,f=dt.Default;for(let _=0;_<c.length;_++){const I=c[_],E=B(I);"number"==typeof E?-1===E?d=I.token:f|=E:d=I}o.push($e(d,f))}else o.push($e(c))}return o}function Pt(i,o){return i[wn]=o,i.prototype[wn]=o,i}function B(i){return i[wn]}function ge(i){return{toString:i}.toString()}var J=(()=>((J=J||{})[J.OnPush=0]="OnPush",J[J.Default=1]="Default",J))(),qt=(()=>{return(i=qt||(qt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",qt;var i})();const In={},pt=[],tr=ae({\u0275cmp:ae}),jt=ae({\u0275dir:ae}),Zn=ae({\u0275pipe:ae}),fo=ae({\u0275mod:ae}),wr=ae({\u0275fac:ae}),ea=ae({__NG_ELEMENT_ID__:ae});let df=0;function ta(i){return ge(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===J.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||pt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qt.Emulated,id:"c"+df++,styles:i.styles||pt,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=i.dependencies,_=i.features;return d.inputs=Ac(i.inputs,c),d.outputs=Ac(i.outputs),_&&_.forEach(I=>I(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Sc).filter(ld):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Rn).filter(ld):null,d})}function Sc(i){return Kt(i)||Kn(i)}function ld(i){return null!==i}function En(i){return ge(()=>({type:i.type,bootstrap:i.bootstrap||pt,declarations:i.declarations||pt,imports:i.imports||pt,exports:i.exports||pt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ac(i,o){if(null==i)return In;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,o&&(o[d]=f)}return a}const na=ta;function ra(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Kt(i){return i[tr]||null}function Kn(i){return i[jt]||null}function Rn(i){return i[Zn]||null}function Mn(i){const o=Kt(i)||Kn(i)||Rn(i);return null!==o&&o.standalone}function Ir(i,o){const a=i[fo]||null;if(!a&&!0===o)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function Wr(i){return Array.isArray(i)&&"object"==typeof i[1]}function bi(i){return Array.isArray(i)&&!0===i[1]}function sa(i){return 0!=(4&i.flags)}function Di(i){return i.componentOffset>-1}function xc(i){return 1==(1&i.flags)}function Zr(i){return null!==i.template}function oa(i){return 0!=(256&i[2])}function qs(i,o){return i.hasOwnProperty(wr)?i[wr]:null}class Is{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ua(){return Ws}function Ws(i){return i.type.prototype.ngOnChanges&&(i.setInput=lu),cu}function cu(){const i=ca(this),o=i?.current;if(o){const a=i.previous;if(a===In)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function lu(i,o,a,c){const d=this.declaredInputs[a],f=ca(i)||function du(i,o){return i[Zs]=o}(i,{previous:In,current:null}),_=f.current||(f.current={}),I=f.previous,E=I[d];_[d]=new Is(E&&E.currentValue,o,I===In),i[c]=o}ua.ngInherit=!0;const Zs="__ngSimpleChanges__";function ca(i){return i[Zs]||null}function Pn(i){for(;Array.isArray(i);)i=i[0];return i}function hr(i,o){return Pn(o[i.index])}function wo(i,o){return i.data[o]}function Es(i,o){return i[o]}function nr(i,o){const a=o[i];return Wr(a)?a:a[0]}function ha(i){return 64==(64&i[2])}function Ui(i,o){return null==o?null:i[o]}function fa(i){i[18]=0}function pa(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const St={lFrame:My(null),bindingsEnabled:!0};function mu(){return St.bindingsEnabled}function De(){return St.lFrame.lView}function Yt(){return St.lFrame.tView}function Fc(i){return St.lFrame.contextLView=i,i[8]}function bd(i){return St.lFrame.contextLView=null,i}function fr(){let i=Io();for(;null!==i&&64===i.type;)i=i.parent;return i}function Io(){return St.lFrame.currentTNode}function ii(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function _u(){return St.lFrame.isParent}function bn(){const i=St.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function es(){return St.lFrame.bindingIndex++}function $c(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,Td(o)}function Td(i){St.lFrame.currentDirectiveIndex=i}function Cd(){return St.lFrame.currentQueryIndex}function jc(i){St.lFrame.currentQueryIndex=i}function Sd(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function gf(i,o,a){if(a&dt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&dt.Host||(d=Sd(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const c=St.lFrame=mf();return c.currentTNode=o,c.lView=i,!0}function vu(i){const o=mf(),a=i[1];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function mf(){const i=St.lFrame,o=null===i?null:i.child;return null===o?My(i):o}function My(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function og(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const wu=og;function ag(){const i=og();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kr(){return St.lFrame.selectedIndex}function ma(i){St.lFrame.selectedIndex=i}function pn(){const i=St.lFrame;return wo(i.tView,i.selectedIndex)}function bs(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:R}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function oi(i,o,a){Gc(i,o,3,a)}function Iu(i,o,a,c){(3&i[2])===a&&Gc(i,o,a,c)}function Ci(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Gc(i,o,a,c){const f=c??-1,_=o.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<_;E++)if("number"==typeof o[E+1]){if(I=o[E],null!=c&&I>=c)break}else o[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(Ad(i,a,o,E),i[18]=(4294901760&i[18])+E+2),E++}function Ad(i,o,a,c){const d=a[c]<0,f=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class ya{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function _n(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],_=a[c++],I=a[c++];i.setAttribute(o,_,I,f)}else{const f=d,_=a[++c];So(f)?i.setProperty(o,f,_):i.setAttribute(o,f,_),c++}}return c}function Co(i){return 3===i||4===i||6===i}function So(i){return 64===i.charCodeAt(0)}function Ts(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Eu(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Eu(i,o,a,c,d){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===o){_=-1;break}if(I>o){_=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function Rd(i){return-1!==i}function bu(i){return 32767&i}function Ao(i,o){let a=function Du(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let ts=!0;function Qs(i){const o=ts;return ts=i,o}let Tu=0;const Yr={};function xo(i,o){const a=Cu(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,Ss(c.data,i),Ss(o,null),Ss(c.blueprint,null));const d=Su(i,o),f=i.injectorIndex;if(Rd(d)){const _=bu(d),I=Ao(d,o),E=I[1].data;for(let C=0;C<8;C++)o[f+C]=I[_+C]|E[_+C]}return o[f+8]=d,f}function Ss(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Cu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Su(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=wf(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Yc(i,o,a){!function Kc(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ea)&&(c=a[ea]),null==c&&(c=a[ea]=Tu++);const d=255&c;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Ro(i,o,a){if(a&dt.Optional||void 0!==i)return i;Fe()}function Qc(i,o,a,c){if(a&dt.Optional&&void 0===c&&(c=null),!(a&(dt.Self|dt.Host))){const d=i[9],f=vn(void 0);try{return d?d.get(o,c,a&dt.Optional):Nr(o,c,a&dt.Optional)}finally{vn(f)}}return Ro(c,0,a)}function Xc(i,o,a,c=dt.Default,d){if(null!==i){if(1024&o[2]){const _=function Nd(i,o,a,c,d){let f=i,_=o;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const I=ns(f,_,a,c|dt.Self,Yr);if(I!==Yr)return I;let E=f.parent;if(!E){const C=_[21];if(C){const R=C.get(a,Yr,c);if(R!==Yr)return R}E=wf(_),_=_[15]}f=E}return d}(i,o,a,c,Yr);if(_!==Yr)return _}const f=ns(i,o,a,c,Yr);if(f!==Yr)return f}return Qc(o,a,c,d)}function ns(i,o,a,c,d){const f=function Ru(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ea)?i[ea]:void 0;return"number"==typeof o?o>=0?255&o:vf:o}(a);if("function"==typeof f){if(!gf(o,i,c))return c&dt.Host?Ro(d,0,c):Qc(o,a,c,d);try{const _=f(c);if(null!=_||c&dt.Optional)return _;Fe()}finally{wu()}}else if("number"==typeof f){let _=null,I=Cu(i,o),E=-1,C=c&dt.Host?o[16][6]:null;for((-1===I||c&dt.SkipSelf)&&(E=-1===I?Su(i,o):o[I+8],-1!==E&&Ai(c,!1)?(_=o[1],I=bu(E),o=Ao(E,o)):I=-1);-1!==I;){const R=o[1];if(Jc(f,I,R.data)){const O=xu(I,o,a,_,c,C);if(O!==Yr)return O}E=o[I+8],-1!==E&&Ai(c,o[1].data[I+8]===C)&&Jc(f,I,o)?(_=R,I=bu(E),o=Ao(E,o)):I=-1}}return d}function xu(i,o,a,c,d,f){const _=o[1],I=_.data[i+8],R=Ia(I,_,a,null==c?Di(I)&&ts:c!=_&&0!=(3&I.type),d&dt.Host&&f===I);return null!==R?Si(o,_,R,I):Yr}function Ia(i,o,a,c,d){const f=i.providerIndexes,_=o.data,I=1048575&f,E=i.directiveStart,R=f>>20,z=d?I+R:i.directiveEnd;for(let X=c?I:I+R;X<z;X++){const me=_[X];if(X<E&&a===me||X>=E&&me.type===a)return X}if(d){const X=_[E];if(X&&Zr(X)&&X.type===a)return E}return null}function Si(i,o,a,c){let d=i[a];const f=o.data;if(function ai(i){return i instanceof ya}(d)){const _=d;_.resolving&&function Ce(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Le(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():we(i)}(f[a]));const I=Qs(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?vn(_.injectImpl):null;gf(i,c,dt.Default);try{d=i[a]=_.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function _f(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const _=Ws(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==E&&vn(E),Qs(I),_.resolving=!1,wu()}}return d}function Jc(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Ai(i,o){return!(i&dt.Self||i&dt.Host&&o)}class ui{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Xc(this._tNode,this._lView,o,wt(c),a)}}function vf(){return new ui(fr(),De())}function Md(i){return ge(()=>{const o=i.prototype.constructor,a=o[wr]||kd(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[wr]||kd(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function kd(i){return Ve(i)?()=>{const o=kd(Z(i));return o&&o()}:qs(i)}function wf(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function el(i){return function Au(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Co(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(fr(),i)}const Ea="__parameters__";function Mo(i,o,a){return ge(()=>{const c=function Ef(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const _=new d(...f);return I.annotation=_,I;function I(E,C,R){const O=E.hasOwnProperty(Ea)?E[Ea]:Object.defineProperty(E,Ea,{value:[]})[Ea];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(_),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class on{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ht({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ji(i,o){i.forEach(a=>Array.isArray(a)?ji(a,o):o(a))}function ku(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Ca(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}const gt=Pt(Mo("Optional"),8),T=Pt(Mo("SkipSelf"),4);var is=(()=>((is=is||{})[is.Important=1]="Important",is[is.DashCase=2]="DashCase",is))();const Uu=new Map;let hg=0;const Mf="__ngContext__";function Dr(i,o){Wr(o)?(i[Mf]=o[20],function L0(i){Uu.set(i[20],i)}(o)):i[Mf]=o}function Of(i,o){return undefined(i,o)}function os(i){const o=i[3];return bi(o)?o[3]:o}function ll(i){return hl(i[13])}function dl(i){return hl(i[4])}function hl(i){for(;null!==i&&!bi(i);)i=i[4];return i}function Pa(i,o,a,c,d){if(null!=c){let f,_=!1;bi(c)?f=c:Wr(c)&&(_=!0,c=c[0]);const I=Pn(c);0===i&&null!==a?null==d?xs(o,a,I):La(o,a,I,d||null,!0):1===i&&null!==a?La(o,a,I,d||null,!0):2===i?function Va(i,o,a){const c=pl(i,o);c&&function Fa(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,_):3===i&&o.destroyNode(I),null!=f&&function Bf(i,o,a,c,d){const f=a[7];f!==Pn(a)&&Pa(o,i,c,f,d);for(let I=10;I<a.length;I++){const E=a[I];zu(E[1],E,i,o,c,f)}}(o,i,f,a,d)}}function fl(i,o,a){return i.createElement(o,a)}function Oa(i,o){const a=i[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,pa(d,-1)),a.splice(c,1)}function Bu(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&Oa(d,c),o>0&&(i[a-1][4]=c[4]);const f=Ca(i,10+o);!function Zd(i,o){zu(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function mg(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&zu(i,o,a,3,null,null),function Ff(i){let o=i[13];if(!o)return to(i[1],i);for(;o;){let a=null;if(Wr(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)Wr(o)&&to(o[1],o),o=o[3];null===o&&(o=i),Wr(o)&&to(o[1],o),a=o&&o[4]}o=a}}(o)}}function to(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function F0(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof ya)){const f=a[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const I=d[f[_]],E=f[_+1];try{E.call(I)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function Kd(i,o){const a=i.cleanup,c=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+3];_>=0?c[d=_]():c[d=-_].unsubscribe(),f+=2}else{const _=c[d=a[f+1]];a[f].call(_)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&bi(o[3])){a!==o[3]&&Oa(a,o);const c=o[19];null!==c&&c.detachView(i)}!function Po(i){Uu.delete(i[20])}(o)}}function yg(i,o,a){return function _g(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===qt.None||f===qt.Emulated)return null}return hr(c,a)}}(i,o.parent,a)}function La(i,o,a,c,d){i.insertBefore(o,a,c,d)}function xs(i,o,a){i.appendChild(o,a)}function $u(i,o,a,c,d){null!==c?La(i,o,a,c,d):xs(i,o,a)}function pl(i,o){return i.parentNode(o)}let Hf,ml,Yd=function Uf(i,o,a){return 40&i.type?hr(i,a):null};function Hu(i,o,a,c){const d=yg(i,c,o),f=o[11],I=function Ua(i,o,a){return Yd(i,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)$u(f,d,a[E],I,!1);else $u(f,d,a,I,!1)}function Rs(i,o){if(null!==o){const a=o.type;if(3&a)return hr(o,i);if(4&a)return Tr(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Rs(i,c);{const d=i[o.index];return bi(d)?Tr(-1,d):Pn(d)}}if(32&a)return Of(o,i)()||Pn(i[o.index]);{const c=wg(i,o);return null!==c?Array.isArray(c)?c[0]:Rs(os(i[16]),c):Rs(i,o.next)}}return null}function wg(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Tr(i,o){const a=10+i+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Rs(c,d)}return o[7]}function gl(i,o,a,c,d,f,_){for(;null!=a;){const I=c[a.index],E=a.type;if(_&&0===o&&(I&&Dr(Pn(I),c),a.flags|=2),32!=(32&a.flags))if(8&E)gl(i,o,a.child,c,d,f,!1),Pa(o,i,d,I,f);else if(32&E){const C=Of(a,c);let R;for(;R=C();)Pa(o,i,d,R,f);Pa(o,i,d,I,f)}else 16&E?xi(i,o,c,a,d,f):Pa(o,i,d,I,f);a=_?a.projectionNext:a.next}}function zu(i,o,a,c,d,f){gl(a,c,i.firstChild,o,d,f,!1)}function xi(i,o,a,c,d,f){const _=a[16],E=_[6].projection[c.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)Pa(o,i,d,E[C],f);else gl(i,o,E,_[3],d,f,!0)}function Ms(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Xd(i,o,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&_n(i,o,c),null!==d&&Ms(i,o,d),null!==f&&function Qd(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function no(i){Hf=i}function Dg(i){return function yl(){if(void 0===ml&&(ml=null,Ct.trustedTypes))try{ml=Ct.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return ml}()?.createScriptURL(i)||i}class jy{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tt})`}}function v(i){return i instanceof jy?i.changingThisBreaksApplicationSecurity:i}function A(i,o){const a=function M(i){return i instanceof jy&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${tt})`)}return a===o}const eh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var gr=(()=>((gr=gr||{})[gr.NONE=0]="NONE",gr[gr.HTML=1]="HTML",gr[gr.STYLE=2]="STYLE",gr[gr.SCRIPT=3]="SCRIPT",gr[gr.URL=4]="URL",gr[gr.RESOURCE_URL=5]="RESOURCE_URL",gr))();function Wi(i){const o=Uo();return o?o.sanitize(gr.URL,i)||"":A(i,"URL")?v(i):function _l(i){return(i=String(i)).match(eh)?i:"unsafe:"+i}(we(i))}function Ky(i){const o=Uo();if(o)return Dg(o.sanitize(gr.RESOURCE_URL,i)||"");if(A(i,"ResourceURL"))return Dg(v(i));throw new he(904,!1)}function Zf(i,o,a){return function $0(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Ky:Wi}(o,a)(i)}function Uo(){const i=De();return i&&i[12]}const Il=new on("ENVIRONMENT_INITIALIZER"),j0=new on("INJECTOR",-1),H0=new on("INJECTOR_DEF_TYPES");class rh{get(o,a=Sn){if(a===Sn){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return a}}function Ab(...i){return{\u0275providers:z0(0,i),\u0275fromNgModule:!0}}function z0(i,...o){const a=[],c=new Set;let d;return ji(o,f=>{const _=f;Yy(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&G0(d,a),a}function G0(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Qy(d,f=>{o.push(f)})}}function Yy(i,o,a,c){if(!(i=Z(i)))return!1;let d=null,f=_i(i);const _=!f&&Kt(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const E=i.ngModule;if(f=_i(E),!f)return!1;d=E}const I=c.has(d);if(_){if(I)return!1;if(c.add(d),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const C of E)Yy(C,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let C;c.add(d);try{ji(f.imports,R=>{Yy(R,o,a,c)&&(C||(C=[]),C.push(R))})}finally{}void 0!==C&&G0(C,o)}if(!I){const C=qs(d)||(()=>new d);o.push({provide:d,useFactory:C,deps:pt},{provide:H0,useValue:d,multi:!0},{provide:Il,useValue:()=>$e(d),multi:!0})}const E=f.providers;null==E||I||Qy(E,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}function Qy(i,o){for(let a of i)Ee(a)&&(a=a.\u0275providers),Array.isArray(a)?Qy(a,o):o(a)}const xS=ae({provide:String,useValue:ae});function Xy(i){return null!==i&&"object"==typeof i&&xS in i}function ks(i){return"function"==typeof i}const Jy=new on("Set Injector scope."),xg={},Rb={};let e_;function Rg(){return void 0===e_&&(e_=new rh),e_}class El{}class q0 extends El{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,r_(o,_=>this.processProvider(_)),this.records.set(j0,bl(void 0,this)),d.has("environment")&&this.records.set(El,bl(void 0,this));const f=this.records.get(Jy);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(H0.multi,pt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=vr(this),c=vn(void 0);try{return o()}finally{vr(a),vn(c)}}get(o,a=Sn,c=dt.Default){this.assertNotDestroyed(),c=wt(c);const d=vr(this),f=vn(void 0);try{if(!(c&dt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const E=function kb(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(o)&&zr(o);I=E&&this.injectableDefInScope(E)?bl(t_(o),xg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&dt.Self?Rg():this.parent).get(o,a=c&dt.Optional&&a===Sn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[wi]=_[wi]||[]).unshift(de(o)),d)throw _;return function F(i,o,a,c){const d=i[wi];throw o[Xi]&&d.unshift(o[Xi]),i.message=function W(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=de(o);if(Array.isArray(o))d=o.map(de).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let I=o[_];f.push(_+":"+("string"==typeof I?JSON.stringify(I):de(I)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Jo,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[wi]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{vn(f),vr(d)}}resolveInjectorInitializers(){const o=vr(this),a=vn(void 0);try{const c=this.get(Il.multi,pt,dt.Self);for(const d of c)d()}finally{vr(o),vn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(de(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(o){let a=ks(o=Z(o))?o:Z(o&&o.provide);const c=function Mb(i){return Xy(i)?bl(void 0,i.useValue):bl(function Mg(i,o,a){let c;if(ks(i)){const d=Z(i);return qs(d)||t_(d)}if(Xy(i))c=()=>Z(i.useValue);else if(function Kf(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Dt(i.deps||[]));else if(function Ag(i){return!(!i||!i.useExisting)}(i))c=()=>$e(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function n_(i){return!!i.deps}(i))return qs(d)||t_(d);c=()=>new d(...Dt(i.deps))}return c}(i),xg)}(o);if(ks(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=bl(void 0,xg,!0),d.factory=()=>Dt(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===xg&&(a.value=Rb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function kg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Z(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function t_(i){const o=zr(i),a=null!==o?o.factory:qs(i);if(null!==a)return a;if(i instanceof on)throw new he(204,!1);if(i instanceof Function)return function W0(i){const o=i.length;if(o>0)throw function ko(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new he(204,!1);const a=function ho(i){const o=i&&(i[kr]||i[dn]);if(o){const a=function _s(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new he(204,!1)}function bl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function r_(i,o){for(const a of i)Array.isArray(a)?r_(a,o):a&&Ee(a)?r_(a.\u0275providers,o):o(a)}class Nb{}class Z0{}class Pg{resolveComponentFactory(o){throw function Ng(i){const o=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Zu=(()=>{class i{}return i.NULL=new Pg,i})();function K0(){return Vo(fr(),De())}function Vo(i,o){return new ih(hr(i,o))}let ih=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=K0,i})();function Ob(i){return i instanceof ih?i.nativeElement:i}class Y0{}let Lb=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Fb(){const i=De(),a=nr(fr().index,i);return(Wr(a)?a:i)[11]}(),i})(),Ub=(()=>{class i{}return i.\u0275prov=ht({token:i,providedIn:"root",factory:()=>null}),i})();class s_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Q0=new s_("15.1.0"),o_={};function u_(i){return i.ngOriginalError}class Yf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&u_(o);for(;a&&u_(a);)a=u_(a);return a||null}}function Ha(i){return i instanceof Function?i():i}function Og(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const rw="ng-template";function iw(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Og(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Tl(i){return 4===i.type&&i.value!==rw}function c_(i,o,a){return o===(4!==i.type||a?i.value:rw)}function Gb(i,o,a){let c=4;const d=i.attrs||[],f=function ow(i){for(let o=0;o<i.length;o++)if(Co(i[o]))return o;return i.length}(d);let _=!1;for(let I=0;I<o.length;I++){const E=o[I];if("number"!=typeof E){if(!_)if(4&c){if(c=2|1&c,""!==E&&!c_(i,E,a)||""===E&&1===o.length){if(Ns(c))return!1;_=!0}}else{const C=8&c?E:o[++I];if(8&c&&null!==i.attrs){if(!iw(i.attrs,C,a)){if(Ns(c))return!1;_=!0}continue}const O=Lg(8&c?"class":E,d,Tl(i),a);if(-1===O){if(Ns(c))return!1;_=!0;continue}if(""!==C){let z;z=O>f?"":d[O+1].toLowerCase();const X=8&c?z:null;if(X&&-1!==Og(X,C,0)||2&c&&C!==z){if(Ns(c))return!1;_=!0}}}}else{if(!_&&!Ns(c)&&!Ns(E))return!1;if(_&&Ns(E))continue;_=!1,c=E|1&c}}return Ns(c)||_}function Ns(i){return 0==(1&i)}function Lg(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let f=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function qb(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Qf(i,o,a=!1){for(let c=0;c<o.length;c++)if(Gb(i,o[c],a))return!0;return!1}function aw(i,o){return i?":not("+o.trim()+")":o}function Zb(i){let o=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const I=i[++a];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Ns(_)&&(o+=aw(f,d),d=""),c=_,f=f||!Ns(c);a++}return""!==d&&(o+=aw(f,d)),o}const $t={};function uw(i){l_(Yt(),De(),Kr()+i,!1)}function l_(i,o,a,c){if(!c)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&oi(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Iu(o,f,0,a)}ma(a)}function d_(i,o=null,a=null,c){const d=Jb(i,o,a,c);return d.resolveInjectorInitializers(),d}function Jb(i,o=null,a=null,c,d=new Set){const f=[a||pt,Ab(i)];return c=c||("object"==typeof i?void 0:de(i)),new q0(f,o||Rg(),c||null,d)}let sh=(()=>{class i{static create(a,c){if(Array.isArray(a))return d_({name:""},c,a,"");{const d=a.name??"";return d_({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Sn,i.NULL=new rh,i.\u0275prov=ht({token:i,providedIn:"any",factory:()=>$e(j0)}),i.__NG_ELEMENT_ID__=-1,i})();function uh(i,o=dt.Default){const a=De();return null===a?$e(i,o):Xc(fr(),a,Z(i),o)}function p_(){throw new Error("invalid")}function aD(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const _=i.data[f];jc(a[c]),_.contentQueries(2,o[f],f)}}}function tp(i,o,a,c,d,f,_,I,E,C,R){const O=o.blueprint.slice();return O[0]=d,O[2]=76|c,(null!==R||i&&1024&i[2])&&(O[2]|=1024),fa(O),O[3]=O[15]=i,O[8]=a,O[10]=_||i&&i[10],O[11]=I||i&&i[11],O[12]=E||i&&i[12]||null,O[9]=C||i&&i[9]||null,O[6]=f,O[20]=function Hd(){return hg++}(),O[21]=R,O[16]=2==o.type?i[16]:O,O}function gn(i,o,a,c,d){let f=i.data[o];if(null===f)f=function np(i,o,a,c,d){const f=Io(),_=_u(),E=i.data[o]=function at(i,o,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=E),null!==f&&(_?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,o,a,c,d),function sg(){return St.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const _=function yu(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ii(f,!0),f}function rp(i,o,a,c){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function g_(i,o,a){vu(o);try{const c=i.viewQuery;null!==c&&ap(1,c,a);const d=i.template;null!==d&&cD(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&aD(i,o),i.staticViewQueries&&ap(2,i.viewQuery,a);const f=i.components;null!==f&&function ch(i,o){for(let a=0;a<o.length;a++)Cw(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,ag()}}function Ur(i,o,a,c){const d=o[2];if(128!=(128&d)){vu(o);try{fa(o),function Vc(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&cD(i,o,a,2,c);const _=3==(3&d);if(_){const C=i.preOrderCheckHooks;null!==C&&oi(o,C,null)}else{const C=i.preOrderHooks;null!==C&&Iu(o,C,0,null),Ci(o,0)}if(function dh(i){for(let o=ll(i);null!==o;o=dl(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c];512&d[2]||pa(d[3],1),d[2]|=512}}}(o),function fD(i){for(let o=ll(i);null!==o;o=dl(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];ha(c)&&Ur(d,c,d.template,c[8])}}(o),null!==i.contentQueries&&aD(i,o),_){const C=i.contentCheckHooks;null!==C&&oi(o,C)}else{const C=i.contentHooks;null!==C&&Iu(o,C,1),Ci(o,1)}!function oD(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ma(~d);else{const f=d,_=a[++c],I=a[++c];$c(_,f),I(2,o[f])}}}finally{ma(-1)}}(i,o);const I=i.components;null!==I&&function uD(i,o){for(let a=0;a<o.length;a++)Tw(i,o[a])}(o,I);const E=i.viewQuery;if(null!==E&&ap(2,E,c),_){const C=i.viewCheckHooks;null!==C&&oi(o,C)}else{const C=i.viewHooks;null!==C&&Iu(o,C,2),Ci(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,pa(o[3],-1))}finally{ag()}}}function cD(i,o,a,c,d){const f=Kr(),_=2&c;try{ma(-1),_&&o.length>22&&l_(i,o,22,!1),a(c,d)}finally{ma(f)}}function $g(i,o,a){if(sa(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}function pe(i,o,a){mu()&&(function ei(i,o,a,c){const d=a.directiveStart,f=a.directiveEnd;Di(a)&&function bw(i,o,a){const c=hr(o,i),d=Sl(a),f=i[10],_=op(i,tp(i,d,null,a.onPush?32:16,c,o,f,f.createRenderer(c,a),null,null,null));i[o.index]=_}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||xo(a,o),Dr(c,o);const _=a.initialInputs;for(let I=d;I<f;I++){const E=i.data[I],C=Si(o,i,I,a);Dr(C,o),null!==_&&jo(0,I-d,C,E,0,_),Zr(E)&&(nr(a.index,o)[8]=Si(o,i,I,a))}}(i,o,a,hr(a,o)),64==(64&a.flags)&&Ga(i,o,a))}function us(i,o,a=hr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],I=-1===_?a(o,i):i[_];i[d++]=I}}}function Sl(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Bo(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Bo(i,o,a,c,d,f,_,I,E,C){const R=22+c,O=R+d,z=function Ht(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:$t);return a}(R,O),X="function"==typeof C?C():C;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:I,declTNode:o,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:X,incompleteFirstPass:!1}}function $o(i,o,a,c){const d=Aw(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Wg(i).push(c,d.length-1))}function jg(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?Nt(a,o,d,f):c.hasOwnProperty(d)&&Nt(a,o,c[d],f)}return a}function Nt(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Jr(i,o,a,c,d,f,_,I){const E=hr(o,a);let R,C=o.inputs;!I&&null!=C&&(R=C[c])?(Al(i,a,R,c,d),Di(o)&&vw(a,o.index)):3&o.type&&(c=function zg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,o.value||"",c):d,f.setProperty(E,c,d))}function vw(i,o){const a=nr(o,i);16&a[2]||(a[2]|=32)}function y_(i,o,a,c){let d=!1;if(mu()){const f=null===c?null:{"":-1},_=function Iw(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const _=a[f];if(Qf(o,_.selectors,!1))if(c||(c=[]),Zr(_))if(null!==_.findHostDirectiveDefs){const I=[];d=d||new Map,_.findHostDirectiveDefs(_,I,d),c.unshift(...I,_),ip(i,o,I.length)}else c.unshift(_),ip(i,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(i,a);let I,E;null===_?I=E=null:[I,E]=_,null!==I&&(d=!0,ww(i,o,a,I,f,E)),f&&function Ew(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new he(-301,!1);c.push(o[d],f)}}}(a,c,f)}return a.mergedAttrs=Ts(a.mergedAttrs,a.attrs),d}function ww(i,o,a,c,d,f){for(let C=0;C<c.length;C++)Yc(xo(a,o),i,c[C].type);!function hD(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let C=0;C<c.length;C++){const R=c[C];R.providersResolver&&R.providersResolver(R)}let _=!1,I=!1,E=rp(i,o,c.length,null);for(let C=0;C<c.length;C++){const R=c[C];a.mergedAttrs=Ts(a.mergedAttrs,R.hostAttrs),qg(i,a,o,E,R),fi(E,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const O=R.type.prototype;!_&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!I&&(O.ngOnChanges||O.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),E++}!function Hg(i,o,a){const d=o.directiveEnd,f=i.data,_=o.attrs,I=[];let E=null,C=null;for(let R=o.directiveStart;R<d;R++){const O=f[R],z=a?a.get(O):null,me=z?z.outputs:null;E=jg(O.inputs,R,E,z?z.inputs:null),C=jg(O.outputs,R,C,me);const Oe=null===E||null===_||Tl(o)?null:__(E,R,_);I.push(Oe)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=8),E.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=E,o.outputs=C}(i,a,f)}function Ga(i,o,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,_=function ga(){return St.lFrame.currentDirectiveIndex}();try{ma(f);for(let I=c;I<d;I++){const E=i.data[I],C=o[I];Td(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&dD(E,C)}}finally{ma(-1),Td(_)}}function dD(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function ip(i,o,a){o.componentOffset=a,(i.components||(i.components=[])).push(o.index)}function fi(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Zr(o)&&(a[""]=i)}}function qg(i,o,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=qs(d.type)),_=new ya(f,Zr(d),uh);i.blueprint[c]=_,a[c]=_,function hi(i,o,a,c,d){const f=d.hostBindings;if(f){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const I=~o.index;(function Gg(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=I&&_.push(I),_.push(a,c,f)}}(i,o,c,rp(i,a,d.hostVars,$t),d)}function Ps(i,o,a,c,d,f){const _=hr(i,o);!function lh(i,o,a,c,d,f,_){if(null==f)i.removeAttribute(o,d,a);else{const I=null==_?we(f):_(f,c||"",d);i.setAttribute(o,d,I,a)}}(o[11],_,f,i.value,a,c,d)}function jo(i,o,a,c,d,f){const _=f[o];if(null!==_){const I=c.setInput;for(let E=0;E<_.length;){const C=_[E++],R=_[E++],O=_[E++];null!==I?c.setInput(a,O,C,R):a[R]=O}}}function __(i,o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const _=i[f];for(let I=0;I<_.length;I+=2)if(_[I]===o){c.push(f,_[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Dw(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function Tw(i,o){const a=nr(o,i);if(ha(a)){const c=a[1];48&a[2]?Ur(c,a,c.template,a[8]):a[5]>0&&sp(a)}}function sp(i){for(let c=ll(i);null!==c;c=dl(c))for(let d=10;d<c.length;d++){const f=c[d];if(ha(f))if(512&f[2]){const _=f[1];Ur(_,f,_.template,f[8])}else f[5]>0&&sp(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=nr(a[c],i);ha(d)&&d[5]>0&&sp(d)}}function Cw(i,o){const a=nr(o,i),c=a[1];(function pD(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),g_(c,a,a[8])}function op(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function hh(i){for(;i;){i[2]|=32;const o=os(i);if(oa(i)&&!o)return i;i=o}return null}function fh(i,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{Ur(i,o,i.template,a)}catch(_){throw c&&xw(o,_),_}finally{d.end&&d.end()}}function ap(i,o,a){jc(0),o(i,a)}function Aw(i){return i[7]||(i[7]=[])}function Wg(i){return i.cleanup||(i.cleanup=[])}function xw(i,o){const a=i[9],c=a?a.get(Yf,null):null;c&&c.handleError(o)}function Al(i,o,a,c,d){for(let f=0;f<a.length;){const _=a[f++],I=a[f++],E=o[_],C=i.data[_];null!==C.setInput?C.setInput(E,d,c,I):E[I]=d}}function qa(i,o,a){const c=function Ks(i,o){return Pn(o[i])}(o,i);!function pg(i,o,a){i.setValue(o,a)}(i[11],c,a)}function Ku(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const I=o[_];"number"==typeof I?f=I:1==f?d=le(d,I):2==f&&(c=le(c,I+": "+o[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Zg(i,o,a,c,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&c.push(Pn(f)),bi(f))for(let I=10;I<f.length;I++){const E=f[I],C=E[1].firstChild;null!==C&&Zg(E[1],E,C,c)}const _=a.type;if(8&_)Zg(i,o,a.child,c);else if(32&_){const I=Of(a,o);let E;for(;E=I();)c.push(E)}else if(16&_){const I=wg(o,a);if(Array.isArray(I))c.push(...I);else{const E=os(o[16]);Zg(E[1],E,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class up{get rootNodes(){const o=this._lView,a=o[1];return Zg(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(bi(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Bu(o,c),Ca(a,c))}this._attachedToViewContainer=!1}mg(this._lView[1],this._lView)}onDestroy(o){$o(this._lView[1],this._lView,null,o)}markForCheck(){hh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){fh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lf(i,o){zu(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=o}}class Kg extends up{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;fh(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Yg extends Zu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Kt(o);return new Yu(a,this.ngModule)}}function w_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Mw{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=wt(c);const d=this.injector.get(o,o_,c);return d!==o_||a===o_?d:this.parentInjector.get(o,a,c)}}class Yu extends Z0{get inputs(){return w_(this.componentDef.inputs)}get outputs(){return w_(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Kb(i){return i.map(Zb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let f=(d=d||this.ngModule)instanceof El?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new Mw(o,f):o,I=_.get(Y0,null);if(null===I)throw new he(407,!1);const E=_.get(Ub,null),C=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",O=c?function lD(i,o,a){return i.selectRootElement(o,a===qt.ShadowDom)}(C,c,this.componentDef.encapsulation):fl(C,R,function Rw(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),z=this.componentDef.onPush?288:272,X=Bo(0,null,null,1,0,null,null,null,null,null),me=tp(null,X,null,z,null,null,I,C,E,_,null);let Oe,Ge;vu(me);try{const et=this.componentDef;let Et,Me=null;et.findHostDirectiveDefs?(Et=[],Me=new Map,et.findHostDirectiveDefs(et,Et,Me),Et.push(et)):Et=[et];const Ut=function E_(i,o){const a=i[1];return i[22]=o,gn(a,22,2,"#host",null)}(me,O),Fn=function b_(i,o,a,c,d,f,_,I){const E=d[1];!function Nw(i,o,a,c){for(const d of i)o.mergedAttrs=Ts(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Ku(o,o.mergedAttrs,!0),null!==a&&Xd(c,a,o))}(c,i,o,_);const C=f.createRenderer(o,a),R=tp(d,Sl(a),null,a.onPush?32:16,d[i.index],i,f,C,I||null,null,null);return E.firstCreatePass&&ip(E,i,c.length-1),op(d,R),d[i.index]=R}(Ut,O,et,Et,me,I,C);Ge=wo(X,22),O&&function gD(i,o,a,c){if(c)_n(i,a,["ng-version",Q0.full]);else{const{attrs:d,classes:f}=function Fg(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++c]):8===d&&a.push(f);else{if(!Ns(d))break;d=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&_n(i,a,d),f&&f.length>0&&Ms(i,a,f.join(" "))}}(C,et,O,c),void 0!==a&&function Ow(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Ge,this.ngContentSelectors,a),Oe=function Pw(i,o,a,c,d,f){const _=fr(),I=d[1],E=hr(_,d);ww(I,d,_,a,null,c);for(let R=0;R<a.length;R++)Dr(Si(d,I,_.directiveStart+R,_),d);Ga(I,d,_),E&&Dr(E,d);const C=Si(d,I,_.directiveStart+_.componentOffset,_);if(i[8]=d[8]=C,null!==f)for(const R of f)R(C,o);return $g(I,_,i),C}(Fn,et,Et,Me,me,[Lw]),g_(X,me,null)}finally{ag()}return new I_(this.componentType,Oe,Vo(Ge,me),me,Ge)}}class I_ extends Nb{constructor(o,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Kg(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const f=this._rootLView;Al(f[1],f,d,o,a),vw(f,this._tNode.index)}}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Lw(){const i=fr();bs(De()[1],i)}let ph=null;function xl(){if(!ph){const i=Ct.Symbol;if(i&&i.iterator)ph=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ph=c)}}}return ph}function gh(i){return!!lp(i)&&(Array.isArray(i)||!(i instanceof Map)&&xl()in i)}function lp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ro(i,o,a){return i[o]=a}function mr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Qu(i,o,a,c){const d=mr(i,o,a);return mr(i,o+1,c)||d}function mh(i,o,a,c){const d=De();return mr(d,es(),o)&&(Yt(),Ps(pn(),d,i,o,a,c)),mh}function _h(i,o,a,c){return mr(i,es(),a)?o+we(a)+c:$t}function tm(i,o,a,c,d,f,_,I){const E=De(),C=Yt(),R=i+22,O=C.firstCreatePass?function pp(i,o,a,c,d,f,_,I,E){const C=o.consts,R=gn(o,i,4,_||null,Ui(C,I));y_(o,a,R,Ui(C,E)),bs(o,R);const O=R.tViews=Bo(2,R,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C);return null!==o.queries&&(o.queries.template(o,R),O.queries=o.queries.embeddedTView(R)),R}(R,C,E,o,a,c,d,f,_):C.data[R];ii(O,!1);const z=E[11].createComment("");Hu(C,E,z,O),Dr(z,E),op(E,E[R]=Dw(z,E,z,O)),xc(O)&&pe(C,E,O),null!=_&&us(E,O,I)}function nm(i){return Es(function Uc(){return St.lFrame.contextLView}(),22+i)}function bh(i,o,a){const c=De();return mr(c,es(),o)&&Jr(Yt(),pn(),c,i,o,c[11],a,!1),bh}function kl(i,o,a,c,d){const _=d?"class":"style";Al(i,a,o.inputs[_],_,c)}function rm(i,o,a,c){const d=De(),f=Yt(),_=22+i,I=d[11],E=d[_]=fl(I,o,function ug(){return St.lFrame.currentNamespace}()),C=f.firstCreatePass?function Bw(i,o,a,c,d,f,_){const I=o.consts,C=gn(o,i,2,d,Ui(I,f));return y_(o,a,C,Ui(I,_)),null!==C.attrs&&Ku(C,C.attrs,!1),null!==C.mergedAttrs&&Ku(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(_,f,d,0,o,a,c):f.data[_];return ii(C,!0),Xd(I,E,C),32!=(32&C.flags)&&Hu(f,d,E,C),0===function gu(){return St.lFrame.elementDepthCount}()&&Dr(E,d),function Lc(){St.lFrame.elementDepthCount++}(),xc(C)&&(pe(f,d,C),$g(f,C,d)),null!==c&&us(d,C),rm}function Dh(){let i=fr();_u()?function Eo(){St.lFrame.isParent=!1}():(i=i.parent,ii(i,!1));const o=i;!function Id(){St.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(bs(a,i),sa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Wc(i){return 0!=(8&i.flags)}(o)&&kl(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xd(i){return 0!=(16&i.flags)}(o)&&kl(a,o,De(),o.stylesWithoutHost,!1),Dh}function Th(i,o,a,c){return rm(i,o,a,c),Dh(),Th}function $w(){return De()}function Nl(i){return!!i&&"function"==typeof i.then}function U_(i){return!!i&&"function"==typeof i.subscribe}const gp=U_;function Pl(i,o,a,c){const d=De(),f=Yt(),_=fr();return function jw(i,o,a,c,d,f,_){const I=xc(c),C=i.firstCreatePass&&Wg(i),R=o[8],O=Aw(o);let z=!0;if(3&c.type||_){const Oe=hr(c,o),Ge=_?_(Oe):Oe,et=O.length,Et=_?Ut=>_(Pn(Ut[c.index])):c.index;let Me=null;if(!_&&I&&(Me=function V_(i,o,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===c){const I=o[7],E=d[f+2];return I.length>E?I[E]:null}"string"==typeof _&&(f+=2)}return null}(i,o,d,c.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=f,Me.__ngLastListenerFn__=f,z=!1;else{f=B_(c,o,R,f,!1);const Ut=a.listen(Ge,d,f);O.push(f,Ut),C&&C.push(d,Et,et,et+1)}}else f=B_(c,o,R,f,!1);const X=c.outputs;let me;if(z&&null!==X&&(me=X[d])){const Oe=me.length;if(Oe)for(let Ge=0;Ge<Oe;Ge+=2){const Fn=o[me[Ge]][me[Ge+1]].subscribe(f),Gn=O.length;O.push(f,Fn),C&&C.push(d,c.index,Gn,-(Gn+1))}}}(f,d,d[11],_,i,o,c),Pl}function Hw(i,o,a,c){try{return!1!==a(c)}catch(d){return xw(i,d),!1}}function B_(i,o,a,c,d){return function f(_){if(_===Function)return c;hh(i.componentOffset>-1?nr(i.index,o):o);let E=Hw(o,0,c,_),C=f.__ngNextListenerFn__;for(;C;)E=Hw(o,0,C,_)&&E,C=C.__ngNextListenerFn__;return d&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function $_(i=1){return function ky(i){return(St.lFrame.contextLView=function Hc(i,o){for(;i>0;)o=o[15],i--;return o}(i,St.lFrame.contextLView))[8]}(i)}function Ch(i,o,a){return Sh(i,"",o,"",a),Ch}function Sh(i,o,a,c,d){const f=De(),_=_h(f,o,a,c);return _!==$t&&Jr(Yt(),pn(),f,i,_,f[11],d,!1),Sh}function W_(i,o=""){const a=De(),c=Yt(),d=i+22,f=c.firstCreatePass?gn(c,d,1,o,null):c.data[d],_=a[d]=function Wd(i,o){return i.createText(o)}(a[11],o);Hu(c,a,_,f),ii(f,!1)}function mm(i){return kh("",i,""),mm}function kh(i,o,a){const c=De(),d=_h(c,i,o,a);return d!==$t&&qa(c,Kr(),d),kh}const je=void 0;var Ae=["en",[["a","p"],["AM","PM"],je],[["AM","PM"],je,je],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],je,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],je,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",je,"{1} 'at' {0}",je],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ue(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ln={};function pI(i,o,a){"string"!=typeof o&&(a=o,o=i[vt.LocaleId]),o=o.toLowerCase().replace(/_/g,"-"),Ln[o]=i,a&&(Ln[o][vt.ExtraData]=a)}function ev(i){const o=function kD(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=mI(o);if(a)return a;const c=o.split("-")[0];if(a=mI(c),a)return a;if("en"===c)return Ae;throw new he(701,!1)}function gI(i){return ev(i)[vt.PluralCase]}function mI(i){return i in Ln||(Ln[i]=Ct.ng&&Ct.ng.common&&Ct.ng.common.locales&&Ct.ng.common.locales[i]),Ln[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Fl="en-US";let Ph=Fl;class ao{}class OI{}function Jn(i,o){return new $r(i,o??null)}class $r extends ao{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yg(this);const c=Ir(o);this._bootstrapComponents=Ha(c.bootstrap),this._r3Injector=Jb(o,a,[{provide:ao,useValue:this},{provide:Zu,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class cn extends OI{constructor(o){super(),this.moduleType=o}create(o){return new $r(this.moduleType,o)}}class LI extends ao{constructor(o,a,c){super(),this.componentFactoryResolver=new Yg(this),this.instance=null;const d=new q0([...o,{provide:ao,useValue:this},{provide:Zu,useValue:this.componentFactoryResolver}],a||Rg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function cc(i,o,a=null){return new LI(i,o,a).injector}let Zi=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=z0(0,a.type),d=c.length>0?cc([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=ht({token:i,providedIn:"environment",factory:()=>new i($e(El))}),i})();function jr(i){i.getStandaloneInjector=o=>o.get(Zi).getOrCreateStandaloneInjector(i)}function mi(i,o,a,c){return wv(De(),bn(),i,o,a,c)}function kp(i,o){const a=i[o];return a===$t?void 0:a}function wv(i,o,a,c,d,f){const _=o+a;return mr(i,_,d)?ro(i,_+1,f?c.call(f,d):c(d)):kp(i,_+1)}function Np(i,o,a,c,d,f,_,I,E){const C=o+a;return function cs(i,o,a,c,d,f){const _=Qu(i,o,a,c);return Qu(i,o+2,d,f)||_}(i,C,d,f,_,I)?ro(i,C+4,E?c.call(E,d,f,_,I):c(d,f,_,I)):kp(i,C+4)}function GI(i,o){const a=Yt();let c;const d=i+22;a.firstCreatePass?(c=function qI(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const f=c.factory||(c.factory=qs(c.type)),_=vn(uh);try{const I=Qs(!1),E=f();return Qs(I),function O_(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,De(),d,E),E}finally{vn(_)}}function hc(i,o,a){const c=i+22,d=De(),f=Es(d,c);return Hh(d,c)?wv(d,bn(),o,f.transform,a,f):f.transform(a)}function bv(i,o,a,c,d,f){const _=i+22,I=De(),E=Es(I,_);return Hh(I,_)?Np(I,bn(),o,E.transform,a,c,d,f,E):E.transform(a,c,d,f)}function Hh(i,o){return i[1].data[o].pure}function Zl(i){return o=>{setTimeout(i,void 0,o)}}const Wo=class ZI extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,f=a||(()=>null),_=c;if(o&&"object"==typeof o){const E=o;d=E.next?.bind(E),f=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(f=Zl(f),d&&(d=Zl(d)),_&&(_=Zl(_)));const I=super.subscribe({next:d,error:f,complete:_});return o instanceof Q.w0&&o.add(I),I}};function zD(){return this._results[xl()]()}class Cn{get changes(){return this._changes||(this._changes=new Wo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=xl(),c=Cn.prototype;c[a]||(c[a]=zD)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Qr(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Od(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=o[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let fc=(()=>{class i{}return i.__NG_ELEMENT_ID__=GD,i})();const Um=fc,KI=class extends Um{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=tp(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),g_(c,d,o),new up(d)}};function GD(){return pc(fr(),De())}function pc(i,o){return 4&i.type?new KI(o,i,Vo(i,o)):null}let Vm=(()=>{class i{}return i.__NG_ELEMENT_ID__=YI,i})();function YI(){return Tv(fr(),De())}const zh=Vm,Zo=class extends zh{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Vo(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){const o=Su(this._hostTNode,this._hostLView);if(Rd(o)){const a=Ao(o,this._hostLView),c=bu(o);return new ui(a[1].data[c+8],a)}return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Dv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const _=o.createEmbeddedView(a||{},f);return this.insert(_,d),_}createComponent(o,a,c,d,f){const _=o&&!function Mu(i){return"function"==typeof i}(o);let I;if(_)I=a;else{const O=a||{};I=O.index,c=O.injector,d=O.projectableNodes,f=O.environmentInjector||O.ngModuleRef}const E=_?o:new Yu(Kt(o)),C=c||this.parentInjector;if(!f&&null==E.ngModule){const z=(_?C:this.parentInjector).get(El,null);z&&(f=z)}const R=E.create(C,d,void 0,f);return this.insert(R.hostView,I),R}insert(o,a){const c=o._lView,d=c[1];if(function fu(i){return bi(i[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=c[3],z=new Zo(O,O[6],O[3]);z.detach(z.indexOf(o))}}const f=this._adjustIndex(a),_=this._lContainer;!function Vy(i,o,a,c){const d=10+c,f=a.length;c>0&&(a[d-1][4]=o),c<f-10?(o[4]=a[d],ku(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function By(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const I=o[19];null!==I&&I.insertView(i),o[2]|=64}(d,c,_,f);const I=Tr(f,_),E=c[11],C=pl(E,_[7]);return null!==C&&function Uy(i,o,a,c,d,f){c[0]=d,c[6]=o,zu(i,c,a,1,d,f)}(d,_[6],E,c,C,I),o.attachToViewContainerRef(),ku(Bm(_),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Dv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Bu(this._lContainer,a);c&&(Ca(Bm(this._lContainer),a),mg(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Bu(this._lContainer,a);return c&&null!=Ca(Bm(this._lContainer),a)?new up(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Dv(i){return i[8]}function Bm(i){return i[8]||(i[8]=[])}function Tv(i,o){let a;const c=o[i.index];if(bi(c))a=c;else{let d;if(8&i.type)d=Pn(c);else{const f=o[11];d=f.createComment("");const _=hr(i,o);La(f,pl(f,_),d,function vg(i,o){return i.nextSibling(o)}(f,_),!1)}o[i.index]=a=Dw(c,o,d,i),op(o,a)}return new Zo(a,i,o)}class gc{constructor(o){this.queryList=o,this.matches=null}clone(){return new gc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Op{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new Op(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==rE(o,a).matches&&this.queries[a].setDirty()}}class QI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class er{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new er(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Jt{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Jt(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,a,XI(a,f)),this.matchTNodeWithReadOption(o,a,Ia(a,o,f,!1,!1))}else c===fc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ia(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ih||d===Vm||d===fc&&4&a.type)this.addMatch(a.index,-2);else{const f=Ia(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function XI(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function mc(i,o,a,c){return-1===a?function JI(i,o){return 11&i.type?Vo(i,o):4&i.type?pc(i,o):null}(o,i):-2===a?function qD(i,o,a){return a===ih?Vo(o,i):a===fc?pc(o,i):a===Vm?Tv(o,i):void 0}(i,o,c):Si(i,i[1],a,o)}function Ri(i,o,a,c){const d=o[19].queries[c];if(null===d.matches){const f=i.data,_=a.matches,I=[];for(let E=0;E<_.length;E+=2){const C=_[E];I.push(C<0?null:mc(o,f[C],_[E+1],a.metadata.read))}d.matches=I}return d.matches}function $m(i,o,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=Ri(i,o,d,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(_[I/2]);else{const C=f[I+1],R=o[-E];for(let O=10;O<R.length;O++){const z=R[O];z[17]===z[3]&&$m(z[1],z,C,c)}if(null!==R[9]){const O=R[9];for(let z=0;z<O.length;z++){const X=O[z];$m(X[1],X,C,c)}}}}}return c}function Gh(i){const o=De(),a=Yt(),c=Cd();jc(c+1);const d=rE(a,c);if(i.dirty&&function da(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?$m(a,o,c,[]):Ri(a,o,d,c);i.reset(f,Ob),i.notifyOnChanges()}return!0}return!1}function uo(i,o,a,c){const d=Yt();if(d.firstCreatePass){const f=fr();(function nE(i,o,a){null===i.queries&&(i.queries=new er),i.queries.track(new Jt(o,a))})(d,new QI(o,a,c),f.index),function Gt(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function tE(i,o,a){const c=new Cn(4==(4&a));$o(i,o,c,c.destroy),null===o[19]&&(o[19]=new Op),o[19].queries.push(new gc(c))}(d,De(),a)}function Cv(){return function Lp(i,o){return i[19].queries[o].queryList}(De(),Cd())}function rE(i,o){return i.queries.getByIndex(o)}function qm(...i){}const _E=new on("Application Initializer");let Wm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=qm,this.reject=qm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Nl(f))a.push(f);else if(gp(f)){const _=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)($e(_E,8))},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vE=new on("AppId",{providedIn:"root",factory:function wE(){return`${Zm()}${Zm()}${Zm()}`}});function Zm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const IE=new on("Platform Initializer"),EE=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$v=new on("appBootstrapListener");let Hr=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Yh=new on("LocaleId",{providedIn:"root",factory:()=>We(Yh,dt.Optional|dt.SkipSelf)||function jv(){return typeof $localize<"u"&&$localize.locale||Fl}()}),Hv=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class DE{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Km=(()=>{class i{compileModuleSync(a){return new cn(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Ha(Ir(a).declarations).reduce((_,I)=>{const E=Kt(I);return E&&_.push(new Yu(E)),_},[]);return new DE(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const CE=(()=>Promise.resolve(0))();function Ym(i){typeof Zone>"u"?CE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class hs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wo(!1),this.onMicrotaskEmpty=new Wo(!1),this.onStable=new Wo(!1),this.onError=new Wo(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function tT(){let i=Ct.requestAnimationFrame,o=Ct.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function rT(i){const o=()=>{!function ed(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ct,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Xm(i),i.isCheckStableRunning=!0,Jl(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Xm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,_,I)=>{try{return SE(i),a.invokeTask(d,f,_,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),AE(i)}},onInvoke:(a,c,d,f,_,I,E)=>{try{return SE(i),a.invoke(d,f,_,I,E)}finally{i.shouldCoalesceRunChangeDetection&&o(),AE(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Xm(i),Jl(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new he(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,Qm,qm,qm);try{return f.runTask(_,a,c)}finally{f.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Qm={};function Jl(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Xm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function SE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function AE(i){i._nesting--,Jl(i)}class iT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wo,this.onMicrotaskEmpty=new Wo,this.onStable=new Wo,this.onError=new Wo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const Jh=new on(""),_c=new on("");let Jm,vc=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Jm||(function sT(i){Jm=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),Ym(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ym(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)($e(hs),$e(Gv),$e(_c))},i.\u0275prov=ht({token:i,factory:i.\u0275fac}),i})(),Gv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Jm?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),wc=null;const ey=new on("AllowMultipleToken"),Up=new on("PlatformDestroyListeners");class ty{constructor(o,a){this.name=o,this.token=a}}function Zv(i,o,a=[]){const c=`Platform: ${o}`,d=new on(c);return(f=[])=>{let _=ry();if(!_||_.injector.get(ey,!1)){const I=[...a,...f,{provide:d,useValue:!0}];i?i(I):function oT(i){if(wc&&!wc.get(ey,!1))throw new he(400,!1);wc=i;const o=i.get(Kv);(function Vp(i){const o=i.get(IE,null);o&&o.forEach(a=>a())})(i)}(function $p(i=[],o){return sh.create({name:o,providers:[{provide:Jy,useValue:"platform"},{provide:Up,useValue:new Set([()=>wc=null])},...i]})}(I,c))}return function Bp(i){const o=ry();if(!o)throw new he(401,!1);return o}()}}function ry(){return wc?.get(Kv)??null}let Kv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Yv(i,o){let a;return a="noop"===i?new iT:("zone.js"===i?void 0:i)||new hs(o),a}(c?.ngZone,function Mi(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:hs,useValue:d}];return d.run(()=>{const _=sh.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(_),E=I.injector.get(Yf,null);if(!E)throw new he(402,!1);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:R=>{E.handleError(R)}});I.onDestroy(()=>{co(this._modules,I),C.unsubscribe()})}),function jp(i,o,a){try{const c=a();return Nl(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const C=I.injector.get(Wm);return C.runInitializers(),C.donePromise.then(()=>(function tn(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(Ph=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Yh,Fl)||Fl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=Hp({},c);return function qv(i,o,a){const c=new cn(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(zp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new he(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Up,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)($e(sh))},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Hp(i,o){return Array.isArray(o)?o.reduce(Hp,i):{...i,...o}}let zp=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new N.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),Ym(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),C.unsubscribe()}});this.isStable=(0,se.T)(f,_.pipe((0,oe.B)()))}bootstrap(a,c){const d=a instanceof Z0;if(!this._injector.get(Wm).done)throw!d&&Mn(a),new he(405,false);let _;_=d?a:this._injector.get(Zu).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function RE(i){return i.isBoundToModule}(_)?void 0:this._injector.get(ao),C=_.create(sh.NULL,[],c||_.selector,I),R=C.location.nativeElement,O=C.injector.get(Jh,null);return O?.registerApplication(R),C.onDestroy(()=>{this.detachView(C.hostView),co(this.components,C),O?.unregisterApplication(R)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;co(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get($v,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>co(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new he(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)($e(hs),$e(El),$e(Yf))},i.\u0275prov=ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function co(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function nd(){return!1}let kE=(()=>{class i{}return i.__NG_ELEMENT_ID__=uT,i})();function uT(i){return function cT(i,o,a){if(Di(i)&&!a){const c=nr(i.index,o);return new up(c,c)}return 47&i.type?new up(o[16],o):null}(fr(),De(),16==(16&i))}class t0{constructor(){}supports(o){return gh(o)}create(o){return new oy(o)}}const hT=(i,o)=>o;class oy{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||hT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const _=!c||a&&a.currentIndex<uy(c,d,f)?a:c,I=uy(_,d,f),E=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const C=I-d,R=E-d;if(C!=R){for(let z=0;z<C;z++){const X=z<f.length?f[z]:f[z]=0,me=X+z;R<=me&&me<C&&(f[z]=X+1)}f[_.previousIndex]=R-C}}I!==E&&o(_,I,E)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!gh(o))throw new he(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)f=o[I],_=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,f,_,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,I),c=!0),a=a._next}else d=0,function Jg(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[xl()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{_=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,I,_,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new fT(a,c),f,d),o}_verifyReinsertion(o,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new ay),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ay),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class fT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class ay{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new OE,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uy(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class tf{constructor(){}supports(o){return o instanceof Map||lp(o)}create(){return new cy}}class cy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||lp(o)))throw new he(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const c=new n0(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class n0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ly(){return new dy([new t0])}let dy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ly()),deps:[[i,new T,new gt]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new he(901,!1)}}return i.\u0275prov=ht({token:i,providedIn:"root",factory:ly}),i})();function r0(){return new hy([new tf])}let hy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||r0()),deps:[[i,new T,new gt]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new he(901,!1)}}return i.\u0275prov=ht({token:i,providedIn:"root",factory:r0}),i})();const LE=Zv(null,"core",[]);let mT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)($e(zp))},i.\u0275mod=En({type:i}),i.\u0275inj=ni({}),i})();function nf(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(st,Ie,P)=>{P.d(Ie,{Z:()=>He});var g=P(2090),Q=P(4859),N=P(9681),se=P(1877);class oe{constructor(he,be){this._delegate=he,this.firebase=be,(0,N._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(he,be=N._DEFAULT_ENTRY_NAME){var we;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(he);return!Le.isInitialized()&&"EXPLICIT"===(null===(we=Le.getComponent())||void 0===we?void 0:we.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:be})}_removeServiceInstance(he,be=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(be)}_addComponent(he){(0,N._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,N._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function le(){const tt=function de(tt){const he={},be={__esModule:!0,initializeApp:function Ce(Ne,V={}){const ye=N.initializeApp(Ne,V);if((0,g.r3)(he,ye.name))return he[ye.name];const q=new tt(ye,be);return he[ye.name]=q,q},app:Le,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Se(Ne){const V=Ne.name,ye=V.replace("-compat","");if(N._registerComponent(Ne)&&"PUBLIC"===Ne.type){const q=(Y=Le())=>{if("function"!=typeof Y[ye])throw fe.create("invalid-app-argument",{appName:V});return Y[ye]()};void 0!==Ne.serviceProps&&(0,g.ZB)(q,Ne.serviceProps),be[ye]=q,tt.prototype[ye]=function(...Y){return this._getService.bind(this,V).apply(this,Ne.multipleInstances?Y:[])}}return"PUBLIC"===Ne.type?be[ye]:null},removeApp:function we(Ne){delete he[Ne]},useAsService:function Fe(Ne,V){return"serverAuth"===V?null:V},modularAPIs:N}};function Le(Ne){if(!(0,g.r3)(he,Ne=Ne||N._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Ne});return he[Ne]}return be.default=be,Object.defineProperty(be,"apps",{get:function _e(){return Object.keys(he).map(Ne=>he[Ne])}}),Le.App=tt,be}(oe);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function he(be){(0,g.ZB)(tt,be)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),tt}(),j=new se.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=$;!function Ee(tt){(0,N.registerVersion)("@firebase/app-compat","0.2.1",tt)}()},9681:(st,Ie,P)=>{P.r(Ie),P.d(Ie,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ho,_DEFAULT_ENTRY_NAME:()=>ln,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>yr,_apps:()=>Bt,_clearComponents:()=>ni,_components:()=>lt,_getProvider:()=>ht,_registerComponent:()=>xr,_removeServiceInstance:()=>mn,deleteApp:()=>$s,getApp:()=>_i,getApps:()=>kr,initializeApp:()=>_s,onLog:()=>dt,registerVersion:()=>Gr,setLogLevel:()=>Yi});var g=P(5861),Q=P(4859),N=P(1877),se=P(2090),oe=P(8766);class ae{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function fe($e){return"VERSION"===$e.getComponent()?.type}(We)){const wt=We.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(We=>We).join(" ")}}const de="@firebase/app",$=new N.Yd("@firebase/app"),ln="[DEFAULT]",Mt={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,lt=new Map;function Qt($e,ve){try{$e.container.addComponent(ve)}catch(We){$.debug(`Component ${ve.name} failed to register with FirebaseApp ${$e.name}`,We)}}function yr($e,ve){$e.container.addOrOverwriteComponent(ve)}function xr($e){const ve=$e.name;if(lt.has(ve))return $.debug(`There were multiple attempts to register component ${ve}.`),!1;lt.set(ve,$e);for(const We of Bt.values())Qt(We,$e);return!0}function ht($e,ve){const We=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),$e.container.getProvider(ve)}function mn($e,ve,We=ln){ht($e,ve).clearInstance(We)}function ni(){lt.clear()}const Rr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mr{constructor(ve,We,wt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}const ho="9.16.0";function _s($e,ve={}){let We=$e;"object"!=typeof ve&&(ve={name:ve});const wt=Object.assign({name:ln,automaticDataCollectionEnabled:!1},ve),Dt=wt.name;if("string"!=typeof Dt||!Dt)throw Rr.create("bad-app-name",{appName:String(Dt)});if(We||(We=(0,se.aH)()),!We)throw Rr.create("no-options");const Pt=Bt.get(Dt);if(Pt){if((0,se.vZ)(We,Pt.options)&&(0,se.vZ)(wt,Pt.config))return Pt;throw Rr.create("duplicate-app",{appName:Dt})}const B=new Q.H0(Dt);for(const W of lt.values())B.addComponent(W);const F=new Mr(We,wt,B);return Bt.set(Dt,F),F}function _i($e=ln){const ve=Bt.get($e);if(!ve&&$e===ln)return _s();if(!ve)throw Rr.create("no-app",{appName:$e});return ve}function kr(){return Array.from(Bt.values())}function $s($e){return dn.apply(this,arguments)}function dn(){return(dn=(0,g.Z)(function*($e){const ve=$e.name;Bt.has(ve)&&(Bt.delete(ve),yield Promise.all($e.container.getProviders().map(We=>We.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function Gr($e,ve,We){var wt;let Dt=null!==(wt=Mt[$e])&&void 0!==wt?wt:$e;We&&(Dt+=`-${We}`);const Pt=Dt.match(/\s|\//),B=ve.match(/\s|\//);if(Pt||B){const F=[`Unable to register library "${Dt}" with version "${ve}":`];return Pt&&F.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Pt&&B&&F.push("and"),B&&F.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void $.warn(F.join(" "))}xr(new Q.wA(`${Dt}-version`,()=>({library:Dt,version:ve}),"VERSION"))}function dt($e,ve){if(null!==$e&&"function"!=typeof $e)throw Rr.create("invalid-log-argument");(0,N.Am)($e,ve)}function Yi($e){(0,N.Ub)($e)}const Nr="firebase-heartbeat-store";let vs=null;function Ct(){return vs||(vs=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:($e,ve)=>{0===ve&&$e.createObjectStore(Nr)}}).catch($e=>{throw Rr.create("idb-open",{originalErrorMessage:$e.message})})),vs}function _t(){return(_t=(0,g.Z)(function*($e){try{return(yield Ct()).transaction(Nr).objectStore(Nr).get(wn($e))}catch(ve){if(ve instanceof se.ZR)$.warn(ve.message);else{const We=Rr.create("idb-get",{originalErrorMessage:ve?.message});$.warn(We.message)}}})).apply(this,arguments)}function Qi($e,ve){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,g.Z)(function*($e,ve){try{const wt=(yield Ct()).transaction(Nr,"readwrite");return yield wt.objectStore(Nr).put(ve,wn($e)),wt.done}catch(We){if(We instanceof se.ZR)$.warn(We.message);else{const wt=Rr.create("idb-set",{originalErrorMessage:We?.message});$.warn(wt.message)}}})).apply(this,arguments)}function wn($e){return`${$e.name}!${$e.options.appId}`}class Jo{constructor(ve){this.container=ve,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new Zt(We),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var ve=this;return(0,g.Z)(function*(){const wt=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=rn();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!ve._heartbeatsCache.heartbeats.some(Pt=>Pt.date===Dt))return ve._heartbeatsCache.heartbeats.push({date:Dt,agent:wt}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(Pt=>{const B=new Date(Pt.date).valueOf();return Date.now()-B<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,g.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const We=rn(),{heartbeatsToSend:wt,unsentEntries:Dt}=function Xi($e,ve=1024){const We=[];let wt=$e.slice();for(const Dt of $e){const Pt=We.find(B=>B.agent===Dt.agent);if(Pt){if(Pt.dates.push(Dt.date),vr(We)>ve){Pt.dates.pop();break}}else if(We.push({agent:Dt.agent,dates:[Dt.date]}),vr(We)>ve){We.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:We,unsentEntries:wt}}(ve._heartbeatsCache.heartbeats),Pt=(0,se.L)(JSON.stringify({version:2,heartbeats:wt}));return ve._heartbeatsCache.lastSentHeartbeatDate=We,Dt.length>0?(ve._heartbeatsCache.heartbeats=Dt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),Pt})()}}function rn(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,g.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function ft($e){return _t.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var We=this;return(0,g.Z)(function*(){var wt;if(yield We._canUseIndexedDBPromise){const Pt=yield We.read();return Qi(We.app,{lastSentHeartbeatDate:null!==(wt=ve.lastSentHeartbeatDate)&&void 0!==wt?wt:Pt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var We=this;return(0,g.Z)(function*(){var wt;if(yield We._canUseIndexedDBPromise){const Pt=yield We.read();return Qi(We.app,{lastSentHeartbeatDate:null!==(wt=ve.lastSentHeartbeatDate)&&void 0!==wt?wt:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...ve.heartbeats]})}})()}}function vr($e){return(0,se.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Pi($e){xr(new Q.wA("platform-logger",ve=>new ae(ve),"PRIVATE")),xr(new Q.wA("heartbeat",ve=>new Jo(ve),"PRIVATE")),Gr(de,"0.9.1",$e),Gr(de,"0.9.1","esm2017"),Gr("fire-js","")}("")},4859:(st,Ie,P)=>{P.d(Ie,{H0:()=>de,wA:()=>N});var g=P(5861),Q=P(2090);class N{constructor($,j,Z){this.name=$,this.instanceFactory=j,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const se="[DEFAULT]";class oe{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const Z=new Q.BH;if(this.instancesDeferred.set(j,Z),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&Z.resolve(Ve)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const Z=this.normalizeInstanceIdentifier($?.identifier),Ve=null!==(j=$?.optional)&&void 0!==j&&j;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Ee){if(Ve)return null;throw Ee}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function fe(le){return"EAGER"===le.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,Z]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const Ee=this.getOrInitializeService({instanceIdentifier:Ve});Z.resolve(Ee)}catch{}}}}clearInstance($=se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,g.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...j.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=se){return this.instances.has($)}getOptions($=se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,Z=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Z,options:j});for(const[Ee,He]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Ee)&&He.resolve(Ve);return Ve}onInit($,j){var Z;const Ve=this.normalizeInstanceIdentifier(j),Ee=null!==(Z=this.onInitCallbacks.get(Ve))&&void 0!==Z?Z:new Set;Ee.add($),this.onInitCallbacks.set(Ve,Ee);const He=this.instances.get(Ve);return He&&$(He,Ve),()=>{Ee.delete($)}}invokeOnInitCallbacks($,j){const Z=this.onInitCallbacks.get(j);if(Z)for(const Ve of Z)try{Ve($,j)}catch{}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let Z=this.instances.get($);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(le=$,le===se?void 0:le),options:j}),this.instances.set($,Z),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(Z,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Z)}catch{}var le;return Z||null}normalizeInstanceIdentifier($=se){return this.component?this.component.multipleInstances?$:se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new oe($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(st,Ie,P)=>{P.d(Ie,{Am:()=>le,Ub:()=>de,Yd:()=>fe,in:()=>Q});const g=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const N={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},se=Q.INFO,oe={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ae=($,j,...Z)=>{if(j<$.logLevel)return;const Ve=(new Date).toISOString(),Ee=oe[j];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ee](`[${Ve}]  ${$.name}:`,...Z)};class fe{constructor(j){this.name=j,this._logLevel=se,this._logHandler=ae,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Q))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...j),this._logHandler(this,Q.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...j),this._logHandler(this,Q.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...j),this._logHandler(this,Q.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...j),this._logHandler(this,Q.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...j),this._logHandler(this,Q.ERROR,...j)}}function de($){g.forEach(j=>{j.setLogLevel($)})}function le($,j){for(const Z of g){let Ve=null;j&&j.level&&(Ve=N[j.level]),Z.userLogHandler=null===$?null:(Ee,He,...tt)=>{const he=tt.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");He>=(Ve??Ee.logLevel)&&$({level:Q[He].toLowerCase(),message:he,args:tt,type:Ee.name})}}}},259:(st,Ie,P)=>{P.d(Ie,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.16.0","app")},9260:(st,Ie,P)=>{P.d(Ie,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.16.0","app-compat")},750:(st,Ie,P)=>{P.r(Ie);var g=P(5861),Q=P(3942),N=P(2090),se=P(9681),oe=P(1877),ae=P(655),fe=P(4859);const He=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Ee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),we=new oe.Yd("@firebase/auth");function Le(y,...h){we.logLevel<=oe.in.ERROR&&we.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function Ce(y,...h){throw Ne(y,...h)}function _e(y,...h){return Ne(y,...h)}function Se(y,h,p){const v=Object.assign(Object.assign({},tt()),{[h]:p});return new N.LL("auth","Firebase",v).create(h,{appName:y.name})}function Fe(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ce(y,"argument-error"),Se(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function V(y,h,...p){if(!y)throw Ne(h,...p)}function ye(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Le(h),new Error(h)}function q(y,h){y||ye(h)}const Y=new Map;function ie(y){q(y instanceof Function,"Expected a class definition");let h=Y.get(y);return h?(q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Y.set(y,h),h)}function Pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ot(){return"http:"===en()||"https:"===en()}function en(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Bt{constructor(h,p){this.shortDelay=h,this.longDelay=p,q(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function ln(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lt(y,h){q(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Qt{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new Bt(3e4,6e4);function ht(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function mn(y,h,p,v){return ni.apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(y,h,p,v,A={}){return zr(y,A,(0,g.Z)(function*(){let M={},G={};v&&("GET"===h?G=v:M={body:JSON.stringify(v)});const ce=(0,N.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Be=yield y._getAdditionalHeaders();return Be["Content-Type"]="application/json",y.languageCode&&(Be["X-Firebase-Locale"]=y.languageCode),Qt.fetch()(_s(y,y.config.apiHost,p,ce),Object.assign({method:h,headers:Be,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function zr(y,h,p){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},yr),h);try{const A=new _i(y),M=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const G=yield M.json();if("needConfirmation"in G)throw kr(y,"account-exists-with-different-credential",G);if(M.ok&&!("errorMessage"in G))return G;{const ce=M.ok?G.errorMessage:G.error.message,[Be,Ze]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw kr(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Be)throw kr(y,"email-already-in-use",G);if("USER_DISABLED"===Be)throw kr(y,"user-disabled",G);const yt=v[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Se(y,yt,Ze);Ce(y,yt)}}catch(A){if(A instanceof N.ZR)throw A;Ce(y,"network-request-failed")}})).apply(this,arguments)}function Mr(y,h,p,v){return ho.apply(this,arguments)}function ho(){return(ho=(0,g.Z)(function*(y,h,p,v,A={}){const M=yield mn(y,h,p,v,A);return"mfaPendingCredential"in M&&Ce(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function _s(y,h,p,v){const A=`${h}${p}?${v}`;return y.config.emulator?lt(y.config,A):`${y.config.apiScheme}://${A}`}class _i{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kr(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const A=_e(y,h,v);return A.customData._tokenResponse=p,A}function dn(){return(dn=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Gr(y,h){return dt.apply(this,arguments)}function dt(){return(dt=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Yi(y,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function vn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Ct(){return(Ct=(0,g.Z)(function*(y,h=!1){const p=(0,N.m9)(y),v=yield p.getIdToken(h),A=_t(v);V(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,G=M?.sign_in_provider;return{claims:A,token:v,authTime:vn(ft(A.auth_time)),issuedAtTime:vn(ft(A.iat)),expirationTime:vn(ft(A.exp)),signInProvider:G||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function _t(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,N.tV)(p);return A?JSON.parse(A):(Le("Failed to decode base64 JWT payload"),null)}catch(A){return Le("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Sn(y,h){return wn.apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof N.ZR&&wi(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function wi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class _r{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class Jo{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(y){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),A=yield Sn(y,Yi(p,{idToken:v}));V(A?.users.length,p,"internal-error");const M=A.users[0];y._notifyReloadListener(M);const G=null!==(h=M.providerUserInfo)&&void 0!==h&&h.length?$e(M.providerUserInfo):[],ce=Pi(y.providerData,G),yt=!!y.isAnonymous&&!(y.email&&M.passwordHash||ce?.length),ct={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ce,metadata:new Jo(M.createdAt,M.lastLoginAt),isAnonymous:yt};Object.assign(y,ct)})).apply(this,arguments)}function vr(){return(vr=(0,g.Z)(function*(y){const h=(0,N.m9)(y);yield rn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Pi(y,h){return[...y.filter(v=>!h.some(A=>A.providerId===v.providerId)),...h]}function $e(y){return y.map(h=>{var{providerId:p}=h,v=(0,ae._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function We(){return(We=(0,g.Z)(function*(y,h){const p=yield zr(y,{},(0,g.Z)(function*(){const v=(0,N.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:M}=y.config,G=_s(y,A,"/v1/token",`key=${M}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Qt.fetch()(G,{method:"POST",headers:ce,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class wt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Qi(y){const h=_t(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return V(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:G}=yield function ve(y,h){return We.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(A,M,Number(G))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:A,expirationTime:M}=p,G=new wt;return v&&(V("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),A&&(V("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),M&&(V("number"==typeof M,"internal-error",{appName:h}),G.expirationTime=M),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new wt,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Dt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Pt{constructor(h){var{uid:p,auth:v,stsTokenManager:A}=h,M=(0,ae._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Jo(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield Sn(p,p.stsTokenManager.getToken(p.auth,h));return V(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function vs(y){return Ct.apply(this,arguments)}(this,h)}reload(){return function Zt(y){return vr.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Pt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let A=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield rn(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield Sn(h,function $s(y,h){return dn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,A,M,G,ce,Be,Ze,yt;const ct=null!==(v=p.displayName)&&void 0!==v?v:void 0,$n=null!==(A=p.email)&&void 0!==A?A:void 0,qi=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,qu=null!==(G=p.photoURL)&&void 0!==G?G:void 0,eh=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,_l=null!==(Be=p._redirectEventId)&&void 0!==Be?Be:void 0,di=null!==(Ze=p.createdAt)&&void 0!==Ze?Ze:void 0,Wu=null!==(yt=p.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:th,emailVerified:vl,isAnonymous:nh,providerData:Gf,stsTokenManager:Cg}=p;V(th&&Cg,h,"internal-error");const zy=wt.fromJSON(this.name,Cg);V("string"==typeof th,h,"internal-error"),Dt(ct,h.name),Dt($n,h.name),V("boolean"==typeof vl,h,"internal-error"),V("boolean"==typeof nh,h,"internal-error"),Dt(qi,h.name),Dt(qu,h.name),Dt(eh,h.name),Dt(_l,h.name),Dt(di,h.name),Dt(Wu,h.name);const wl=new Pt({uid:th,auth:h,email:$n,emailVerified:vl,displayName:ct,isAnonymous:nh,photoURL:qu,phoneNumber:qi,tenantId:eh,stsTokenManager:zy,createdAt:di,lastLoginAt:Wu});return Gf&&Array.isArray(Gf)&&(wl.providerData=Gf.map(ja=>Object.assign({},ja))),_l&&(wl._redirectEventId=_l),wl}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const A=new wt;A.updateFromServerResponse(p);const M=new Pt({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:v});return yield rn(M),M})()}}const F=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var A=this;return(0,g.Z)(function*(){A.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=v.storage[p];return void 0===A?null:A})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function W(y,h,p){return`firebase:${y}:${h}:${p}`}class ge{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:A,name:M}=this.auth;this.fullUserKey=W(this.userKey,A.apiKey,M),this.fullPersistenceKey=W("persistence",A.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Pt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new ge(ie(F),h,v);const A=(yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let M=A[0]||ie(F);const G=W(v,h.config.apiKey,h.name);let ce=null;for(const Ze of p)try{const yt=yield Ze._get(G);if(yt){const ct=Pt._fromJSON(h,yt);Ze!==M&&(ce=ct),M=Ze;break}}catch{}const Be=A.filter(Ze=>Ze._shouldAllowMigration);return M._shouldAllowMigration&&Be.length?(M=Be[0],ce&&(yield M._set(G,ce.toJSON())),yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(yt){if(yt!==M)try{yield yt._remove(G)}catch{}});return function(yt){return Ze.apply(this,arguments)}}())),new ge(M,h,v)):new ge(M,h,v)})()}}function J(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(In(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Je(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(tr(h))return"Blackberry";if(jt(h))return"Webos";if(Ot(h))return"Safari";if((h.includes("chrome/")||qt(h))&&!h.includes("edge/"))return"Chrome";if(pt(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function Je(y=(0,N.z$)()){return/firefox\//i.test(y)}function Ot(y=(0,N.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function qt(y=(0,N.z$)()){return/crios\//i.test(y)}function In(y=(0,N.z$)()){return/iemobile/i.test(y)}function pt(y=(0,N.z$)()){return/android/i.test(y)}function tr(y=(0,N.z$)()){return/blackberry/i.test(y)}function jt(y=(0,N.z$)()){return/webos/i.test(y)}function Zn(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function df(y=(0,N.z$)()){return Zn(y)||pt(y)||jt(y)||tr(y)||/windows phone/i.test(y)||In(y)}function ou(y,h=[]){let p;switch(y){case"Browser":p=J((0,N.z$)());break;case"Worker":p=`${J((0,N.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${se.SDK_VERSION}/${v}`}class Sc{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=M=>new Promise((G,ce)=>{try{G(h(M))}catch(Be){ce(Be)}});v.onAbort=p,this.queue.push(v);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const v=[];try{for(const A of p.queue)yield A(h),A.onAbort&&v.push(A.onAbort)}catch(A){v.reverse();for(const M of v)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class ld{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dd(this),this.idTokenSubscription=new dd(this),this.beforeStateQueue=new Sc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,M;if(!v._deleted&&(v.persistenceManager=yield ge.create(v,h),!v._deleted)){if(null!==(A=v._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(M=v.currentUser)||void 0===M?void 0:M.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;const A=yield p.assertedPersistence.getCurrentUser();let M=A,G=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Be=M?._redirectEventId,Ze=yield p.tryRedirectSignIn(h);(!ce||ce===Be)&&Ze?.user&&(M=Ze.user,G=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(G)try{yield p.beforeStateQueue.runMiddleware(M)}catch(ce){M=A,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield rn(h)}catch(v){if("auth/network-request-failed"!==v?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Mt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,N.m9)(h):null;return v&&V(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,g.Z)(function*(){if(!v._deleted)return h&&V(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,g.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new N.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&ie(h)||p._popupRedirectResolver;V(v,p,"argument-error"),p.redirectPersistenceManager=yield ge.create(p,[ie(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,A){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>M(this.currentUser)),"function"==typeof p?h.addObserver(p,v,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ou(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function En(y){return(0,N.m9)(y)}class dd{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,N.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function na(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Kt(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Rn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,p){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function Mn(y,h){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:resetPassword",ht(y,h))})).apply(this,arguments)}function Oi(y,h){return qe.apply(this,arguments)}function qe(){return(qe=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xt(y,h){return hn.apply(this,arguments)}function hn(){return(hn=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:update",ht(y,h))})).apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signInWithPassword",ht(y,h))})).apply(this,arguments)}function kn(y,h){return Li.apply(this,arguments)}function Li(){return(Li=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:sendOobCode",ht(y,h))})).apply(this,arguments)}function yn(y,h){return po.apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(y,h){return kn(y,h)})).apply(this,arguments)}function js(y,h){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,g.Z)(function*(y,h){return kn(y,h)})).apply(this,arguments)}function au(y,h){return go.apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(y,h){return kn(y,h)})).apply(this,arguments)}function hf(y,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(y,h){return kn(y,h)})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signInWithEmailLink",ht(y,h))})).apply(this,arguments)}function Ei(){return(Ei=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signInWithEmailLink",ht(y,h))})).apply(this,arguments)}class ws extends Rn{constructor(h,p,v,A=null){super("password",v),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new ws(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new ws(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function qr(y,h){return Ii.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function dr(y,h){return mo.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return Oi(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function ia(y,h){return Ei.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Nn(y,h){return sn.apply(this,arguments)}function sn(){return(sn=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signInWithIdp",ht(y,h))})).apply(this,arguments)}class ri extends Rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ri(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ce("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:A}=p,M=(0,ae._T)(p,["providerId","signInMethod"]);if(!v||!A)return null;const G=new ri(v,A);return G.idToken=M.idToken||void 0,G.accessToken=M.accessToken||void 0,G.secret=M.secret,G.nonce=M.nonce,G.pendingToken=M.pendingToken||null,G}_getIdTokenResponse(h){return Nn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Nn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Nn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,N.xO)(p)}return h}}function hd(y,h){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:sendVerificationCode",ht(y,h))})).apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,h))})).apply(this,arguments)}function fd(){return(fd=(0,g.Z)(function*(y,h){const p=yield Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,h));if(p.temporaryProof)throw kr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Wr={USER_NOT_FOUND:"user-not-found"};function sa(){return(sa=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",ht(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Wr)})).apply(this,arguments)}class Di extends Rn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Di({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Di({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function zs(y,h){return Pr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Er(y,h){return fd.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function bi(y,h){return sa.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:M}=h;return v||p||A||M?new Di({verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:M}):null}}class oa{constructor(h){var p,v,A,M,G,ce;const Be=(0,N.zd)((0,N.pd)(h)),Ze=null!==(p=Be.apiKey)&&void 0!==p?p:null,yt=null!==(v=Be.oobCode)&&void 0!==v?v:null,ct=function xc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Be.mode)&&void 0!==A?A:null);V(Ze&&yt&&ct,"argument-error"),this.apiKey=Ze,this.operation=ct,this.code=yt,this.continueUrl=null!==(M=Be.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(G=Be.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ce=Be.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const p=function Zr(y){const h=(0,N.zd)((0,N.pd)(y)).link,p=h?(0,N.zd)((0,N.pd)(h)).deep_link_id:null,v=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(v?(0,N.zd)((0,N.pd)(v)).link:null)||v||p||h||y}(h);try{return new oa(p)}catch{return null}}}let Rc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ws._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const A=oa.parseLink(v);return V(A,"argument-error"),ws._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ji{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Gs extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class aa extends Gs{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),ri._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),ri._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return aa.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return aa.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:M,nonce:G,providerId:ce}=h;if(!v&&!A&&!p&&!M||!ce)return null;try{return new aa(ce)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:M})}catch{return null}}}let pd=(()=>{class y extends Gs{constructor(){super("facebook.com")}static credential(p){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),yo=(()=>{class y extends Gs{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:A}=p;if(!v&&!A)return null;try{return y.credential(v,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Mc=(()=>{class y extends Gs{constructor(){super("github.com")}static credential(p){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class kc extends Rn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Nn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Nn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Nn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:A,pendingToken:M}=p;return v&&A&&M&&v===A?new kc(v,M):null}static _create(h,p){return new kc(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ti extends Ji{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ti.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ti.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=kc.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return kc._create(v,p)}catch{return null}}}let md=(()=>{class y extends Gs{constructor(){super("twitter.com")}static credential(p,v){return ri._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=p;if(!v||!A)return null;try{return y.credential(v,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Nc(y,h){return yd.apply(this,arguments)}function yd(){return(yd=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signUp",ht(y,h))})).apply(this,arguments)}class Or{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,A=!1){return(0,g.Z)(function*(){const M=yield Pt._fromIdTokenResponse(h,v,A),G=_d(v);return new Or({user:M,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const A=_d(v);return new Or({user:h,providerId:A,_tokenResponse:v,operationType:p})})()}}function _d(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function pf(){return(pf=(0,g.Z)(function*(y){var h;const p=En(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Or({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Nc(p,{returnSecureToken:!0}),A=yield Or._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class vd extends N.ZR{constructor(h,p,v,A){var M;super(p.code,p.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,A){return new vd(h,p,v,A)}}function qs(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?vd._fromErrorAndOperation(y,M,h,v):M})}function Is(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Ws(){return(Ws=(0,g.Z)(function*(y,h){const p=(0,N.m9)(y);yield Zs(!0,p,h);const{providerUserInfo:v}=yield Gr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=Is(v||[]);return p.providerData=p.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function cu(y,h){return lu.apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(y,h,p=!1){const v=yield Sn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Or._forOperation(y,"link",v)})).apply(this,arguments)}function Zs(y,h,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(y,h,p){yield rn(h);const A=!1===y?"provider-already-linked":"no-such-provider";V(Is(h.providerData).has(p)===y,h.auth,A)})).apply(this,arguments)}function du(y,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,A="reauthenticate";try{const M=yield Sn(y,qs(v,A,h,y),p);V(M.idToken,v,"internal-error");const G=_t(M.idToken);V(G,v,"internal-error");const{sub:ce}=G;return V(y.uid===ce,v,"user-mismatch"),Or._forOperation(y,A,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ce(v,"user-mismatch"),M}})).apply(this,arguments)}function hu(y,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",A=yield qs(y,v,h),M=yield Or._fromIdTokenResponse(y,v,A);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function An(y,h){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y,h){return hu(En(y),h)})).apply(this,arguments)}function Pn(y,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,h){const p=(0,N.m9)(y);return yield Zs(!1,p,h.providerId),cu(p,h)})).apply(this,arguments)}function Ks(y,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,g.Z)(function*(y,h){return du((0,N.m9)(y),h)})).apply(this,arguments)}function wd(y,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(y,h){return Mr(y,"POST","/v1/accounts:signInWithCustomToken",ht(y,h))})).apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(y,h){const p=En(y),v=yield wd(p,{token:h,returnSecureToken:!0}),A=yield Or._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class da{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?ha._fromServerResponse(h,p):Ce(h,"internal-error")}}class ha extends da{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new ha(p)}}function fu(y,h,p){var v;V((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function fa(){return(fa=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y),A={requestType:"PASSWORD_RESET",email:h};p&&fu(v,A,p),yield js(v,A)})).apply(this,arguments)}function St(){return(St=(0,g.Z)(function*(y,h,p){yield Mn((0,N.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(y,h){yield xt((0,N.m9)(y),{oobCode:h})})).apply(this,arguments)}function gu(y,h){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,g.Z)(function*(y,h){const p=(0,N.m9)(y),v=yield Mn(p,{oobCode:h}),A=v.requestType;switch(V(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(v.mfaInfo,p,"internal-error");default:V(v.email,p,"internal-error")}let M=null;return v.mfaInfo&&(M=da._fromServerResponse(En(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function mu(){return(mu=(0,g.Z)(function*(y,h){const{data:p}=yield gu((0,N.m9)(y),h);return p.email})).apply(this,arguments)}function Ed(){return(Ed=(0,g.Z)(function*(y,h,p){const v=En(y),A=yield Nc(v,{returnSecureToken:!0,email:h,password:p}),M=yield Or._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(M.user),M})).apply(this,arguments)}function Fc(){return(Fc=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,v,"argument-error"),p&&fu(v,A,p),yield au(v,A)})).apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y),A=Rc.credentialWithLink(h,p||Pe());return V(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),An(v,A)})).apply(this,arguments)}function yu(y,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:createAuthUri",ht(y,h))})).apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:ot()?Pe():"http://localhost"},{signinMethods:A}=yield yu((0,N.m9)(y),v);return A||[]})).apply(this,arguments)}function Dd(){return(Dd=(0,g.Z)(function*(y,h){const p=(0,N.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&fu(p.auth,A,h);const{email:M}=yield yn(p.auth,A);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&fu(v.auth,M,p);const{email:G}=yield hf(v.auth,M);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function Vi(y,h){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,g.Z)(function*(y,h){return mn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,N.m9)(y),M={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield Sn(v,Vi(v.auth,M));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const ce=v.providerData.find(({providerId:Be})=>"password"===Be);ce&&(ce.displayName=v.displayName,ce.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function $c(y,h,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(y,h,p){const{auth:v}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(M.email=h),p&&(M.password=p);const G=yield Sn(y,Oi(v,M));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Ys{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Cd extends Ys{constructor(h,p,v,A){super(h,p,v),this.username=A}}class jc extends Ys{constructor(h,p){super(h,"facebook.com",p)}}class Sd extends Cd{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class gf extends Ys{constructor(h,p){super(h,"google.com",p)}}class vu extends Cd{constructor(h,p,v){super(h,"twitter.com",p,v)}}function mf(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Td(y){var h,p;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const G=null===(p=null===(h=_t(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Ys(M,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new jc(M,A);case"github.com":return new Sd(M,A);case"google.com":return new gf(M,A);case"twitter.com":return new vu(M,A,y.screenName||null);case"custom":case"anonymous":return new Ys(M,null);default:return new Ys(M,v,A)}}(p)}class Do{constructor(h,p,v){this.type=h,this.credential=p,this.auth=v}static _fromIdtoken(h,p){return new Do("enroll",h,p)}static _fromMfaPendingCredential(h){return new Do("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Do._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return Do._fromIdtoken(h.multiFactorSession.idToken)}return null}}class zc{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=En(h),A=p.customData._serverResponse,M=(A.mfaInfo||[]).map(ce=>da._fromServerResponse(v,ce));V(A.mfaPendingCredential,v,"internal-error");const G=Do._fromMfaPendingCredential(A.mfaPendingCredential);return new zc(G,M,function(){var ce=(0,g.Z)(function*(Be){const Ze=yield Be._process(v,G);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(p.operationType){case"signIn":const ct=yield Or._fromIdTokenResponse(v,p.operationType,yt);return yield v._updateCurrentUser(ct.user),ct;case"reauthenticate":return V(p.user,v,"internal-error"),Or._forOperation(p.user,p.operationType,yt);default:Ce(v,"internal-error")}});return function(Be){return ce.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function yf(y,h){return mn(y,"POST","/v2/accounts/mfaEnrollment:start",ht(y,h))}class bs{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>da._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new bs(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Do._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const A=h,M=yield v.getSession(),G=yield Sn(v.user,A._process(v.user.auth,M,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,A=yield p.user.getIdToken(),M=yield Sn(p.user,function _f(y,h){return mn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ht(y,h))}(p.user.auth,{idToken:A,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(M);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G?.code)throw G}})()}}const oi=new WeakMap,Ci="__sak";class Gc{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ci,"1"),this.storage.removeItem(Ci),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const qc=(()=>{class y extends Gc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ad(){const y=(0,N.z$)();return Ot(y)||Zn(y)}()&&function ta(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=df(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),M=this.localCache[v];A!==M&&p(v,M,A)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ce,Be,Ze)=>{this.notifyListeners(ce,Ze)});const A=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!v)return}const M=()=>{const ce=this.storage.getItem(A);!v&&this.localCache[A]===ce||this.notifyListeners(A,ce)},G=this.storage.getItem(A);!function ea(){return(0,N.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const M of Array.from(A))M(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var A=()=>super._set,M=this;return(0,g.Z)(function*(){yield A().call(M,p,v),M.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,A=this;return(0,g.Z)(function*(){const M=yield v().call(A,p);return A.localCache[p]=JSON.stringify(M),M})()}_remove(p){var v=()=>super._remove,A=this;return(0,g.Z)(function*(){yield v().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),Bi=(()=>{class y extends Gc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let xd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(M=>M.isListeningto(p));if(v)return v;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const A=p,{eventId:M,eventType:G,data:ce}=A.data,Be=v.handlersMap[G];if(!Be?.size)return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:G});const Ze=Array.from(Be).map(function(){var ct=(0,g.Z)(function*($n){return $n(A.origin,ce)});return function($n){return ct.apply(this,arguments)}}()),yt=yield function Wc(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:M,eventType:G,response:yt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ds(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Zc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var A=this;return(0,g.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let G,ce;return new Promise((Be,Ze)=>{const yt=Ds("",20);M.port1.start();const ct=setTimeout(()=>{Ze(new Error("unsupported_event"))},v);ce={messageChannel:M,onMessage($n){const qi=$n;if(qi.data.eventId===yt)switch(qi.data.status){case"ack":clearTimeout(ct),G=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Be(qi.data.response);break;default:clearTimeout(ct),clearTimeout(G),Ze(new Error("invalid_response"))}}},A.handlers.add(ce),M.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:h,eventId:yt,data:p},[M.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function _n(){return window}function So(){return typeof _n().WorkerGlobalScope<"u"&&"function"==typeof _n().importScripts}function Eu(){return(Eu=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Du="firebaseLocalStorageDb",ts="firebaseLocalStorage",Qs="fbase_key";class Cs{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function va(y,h){return y.transaction([ts],h?"readwrite":"readonly").objectStore(ts)}function Tu(){const y=indexedDB.open(Du,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(ts,{keyPath:Qs})}catch(A){p(A)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(ts)?h(v):(v.close(),yield function wa(){const y=indexedDB.deleteDatabase(Du);return new Cs(y).toPromise()}(),h(yield Tu()))}))})}function Yr(y,h,p){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,g.Z)(function*(y,h,p){const v=va(y,!0).put({[Qs]:h,value:p});return new Cs(v).toPromise()})).apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(y,h){const p=va(y,!1).get(h),v=yield new Cs(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Cu(y,h){const p=va(y,!0).delete(h);return new Cs(p).toPromise()}const Ro=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Tu()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const M=yield v._openDb();return yield p(M)}catch(M){if(A++>3)throw M;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return So()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=xd._getInstance(function bu(){return So()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(A,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(A,M){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,A;if(p.activeServiceWorker=yield function Ts(){return Eu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Zc(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);M&&null!==(v=M[0])&&void 0!==v&&v.fulfilled&&null!==(A=M[0])&&void 0!==A&&A.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Rd(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Tu();return yield Yr(p,Ci,"1"),yield Cu(p,Ci),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(M=>Yr(M,p,v)),A.localCache[p]=v,A.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=yield v._withRetries(M=>function xo(y,h){return Ss.apply(this,arguments)}(M,p));return v.localCache[p]=A,A})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(A=>Cu(A,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const ce=va(G,!1).getAll();return new Cs(ce).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:G,value:ce}of v)M.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ce)&&(p.notifyListeners(G,ce),A.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!M.has(G)&&(p.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const M of Array.from(A))M(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Qc(y,h){return mn(y,"POST","/v2/accounts/mfaSignIn:start",ht(y,h))}function xu(){return(xu=(0,g.Z)(function*(y){return(yield mn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Si(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=A=>{const M=_e("internal-error");M.customData=A,p(M)},v.type="text/javascript",v.charset="UTF-8",function Ia(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Ru(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ui=1e12;class vf{constructor(h){this.auth=h,this.counter=ui,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Md(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||ui;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ui))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||ui))||void 0===v||v.execute(),""})()}}class Md{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;V(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kd(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nd=Ru("rcb"),wf=new Bt(3e4,6e4);class $i{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=_n().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function Ea(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(_n().grecaptcha):new Promise((v,A)=>{const M=_n().setTimeout(()=>{A(_e(h,"network-request-failed"))},wf.get());_n()[Nd]=()=>{_n().clearTimeout(M),delete _n()[Nd];const ce=_n().grecaptcha;if(!ce)return void A(_e(h,"internal-error"));const Be=ce.render;ce.render=(Ze,yt)=>{const ct=Be(Ze,yt);return this.counter++,ct},this.hostLanguage=p,v(ce)},Si(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Nd,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),A(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=_n().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ba{load(h){return(0,g.Z)(function*(){return new vf(h)})()}clearedOneInstance(){}}const If="recaptcha",Ef={theme:"light",type:"image"};class Mo{constructor(h,p=Object.assign({},Ef),v){this.parameters=p,this.type=If,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(v),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;V(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ba:new $i,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(M=>{const G=ce=>{ce&&(h.tokenChangeListeners.delete(G),M(ce))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=_n()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ot()&&!So(),h.auth,"internal-error"),yield function Xs(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function ns(y){return xu.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pd{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Di._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Da(){return(Da=(0,g.Z)(function*(y,h,p){const v=En(y),A=yield tl(v,h,(0,N.m9)(p));return new Pd(A,M=>An(v,M))})).apply(this,arguments)}function Df(){return(Df=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y);yield Zs(!1,v,"phone");const A=yield tl(v.auth,h,(0,N.m9)(p));return new Pd(A,M=>Pn(v,M))})).apply(this,arguments)}function Tf(){return(Tf=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y),A=yield tl(v.auth,h,(0,N.m9)(p));return new Pd(A,M=>Ks(v,M))})).apply(this,arguments)}function tl(y,h,p){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,g.Z)(function*(y,h,p){var v;const A=yield p.verify();try{let M;if(V("string"==typeof A,y,"argument-error"),V(p.type===If,y,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const G=M.session;if("phoneNumber"in M)return V("enroll"===G.type,y,"internal-error"),(yield yf(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const ce=(null===(v=M.multiFactorHint)||void 0===v?void 0:v.uid)||M.multiFactorUid;return V(ce,y,"missing-multi-factor-info"),(yield Qc(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield hd(y,{phoneNumber:M.phoneNumber,recaptchaToken:A});return G}}finally{p._reset()}})).apply(this,arguments)}function Sf(){return(Sf=(0,g.Z)(function*(y,h){yield cu((0,N.m9)(y),h)})).apply(this,arguments)}let rl=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=En(p)}verifyPhoneNumber(p,v){return tl(this.auth,p,(0,N.m9)(v))}static credential(p,v){return Di._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:A}=p;return v&&A?Di._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function fn(y,h){return h?ie(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ta extends Rn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Nn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Nn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Nn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Mu(y){return hu(y.auth,new Ta(y),y.bypassAuthState)}function Od(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),du(p,new Ta(y),y.bypassAuthState)}function Qr(y){return ji.apply(this,arguments)}function ji(){return(ji=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),cu(p,new Ta(y),y.bypassAuthState)})).apply(this,arguments)}class ku{constructor(h,p,v,A,M=!1){this.auth=h,this.resolver=v,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,A){h.pendingPromise={resolve:v,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(v,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:M,tenantId:G,error:ce,type:Be}=h;if(ce)return void p.reject(ce);const Ze={auth:p.auth,requestUri:v,sessionId:A,tenantId:G||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Be)(Ze))}catch(yt){p.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Mu;case"linkViaPopup":case"linkViaRedirect":return Qr;case"reauthViaPopup":case"reauthViaRedirect":return Od;default:Ce(this.auth,"internal-error")}}resolve(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ca=new Bt(2e3,1e4);function Nu(){return(Nu=(0,g.Z)(function*(y,h,p){const v=En(y);Fe(y,h,Ji);const A=fn(v,p);return new Xe(v,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Af(){return(Af=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y);Fe(v.auth,h,Ji);const A=fn(v.auth,p);return new Xe(v.auth,"reauthViaPopup",h,A,v).executeNotNull()})).apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y);Fe(v.auth,h,Ji);const A=fn(v.auth,p);return new Xe(v.auth,"linkViaPopup",h,A,v).executeNotNull()})).apply(this,arguments)}let Xe=(()=>{class y extends ku{constructor(p,v,A,M,G){super(p,v,M,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return V(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){q(1===p.filter.length,"Popup operations only handle one event");const v=Ds();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,A;this.pollId=null!==(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ca.get())};p()}}return y.currentPopupAction=null,y})();const rr=new Map;class Ld extends ku{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=rr.get(p.auth._key());if(!v){try{const M=(yield function Pu(y,h){return ir.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(M)}catch(A){v=()=>Promise.reject(A)}rr.set(p.auth._key(),v)}return p.bypassAuthState||rr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const A=yield v.auth._redirectUserForId(h.eventId);if(A)return v.user=A,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ir(){return(ir=(0,g.Z)(function*(y,h){const p=Aa(h),v=Sa(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(p));return yield v._remove(p),A})).apply(this,arguments)}function il(y,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,g.Z)(function*(y,h){return Sa(y)._set(Aa(h),"true")})).apply(this,arguments)}function Fd(y,h){rr.set(y._key(),h)}function Sa(y){return ie(y._redirectPersistence)}function Aa(y){return W("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,g.Z)(function*(y,h,p){const v=En(y);Fe(y,h,Ji),yield v._initializationPromise;const A=fn(v,p);return yield il(A,v),A._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y);Fe(v.auth,h,Ji),yield v.auth._initializationPromise;const A=fn(v.auth,p);yield il(A,v.auth);const M=yield It(v);return A._openRedirect(v.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function Te(){return(Te=(0,g.Z)(function*(y,h,p){const v=(0,N.m9)(y);Fe(v.auth,h,Ji),yield v.auth._initializationPromise;const A=fn(v.auth,p);yield Zs(!1,v,h.providerId),yield il(A,v.auth);const M=yield It(v);return A._openRedirect(v.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function nt(){return(nt=(0,g.Z)(function*(y,h){return yield En(y)._initializationPromise,Qe(y,h,!1)})).apply(this,arguments)}function Qe(y,h){return kt.apply(this,arguments)}function kt(){return(kt=(0,g.Z)(function*(y,h,p=!1){const v=En(y),A=fn(v,h),G=yield new Ld(v,A,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function It(y){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(y){const h=Ds(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class xa{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Qn(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hi(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Hi(h)){const A=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(h))}saveEventToCache(h){this.cachedEventUids.add(Ra(h)),this.lastProcessedEventTime=Date.now()}}function Ra(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Hi({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function zi(y){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,g.Z)(function*(y,h={}){return mn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Ud=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cg=/^https?/;function Ou(){return(Ou=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield zi(y);for(const p of h)try{if(sl(p))return}catch{}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function sl(y){const h=Pe(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!cg.test(p))return!1;if(Ud.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const As=new Bt(3e4,6e4);function Fr(){const y=_n().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ma=null;function P0(y){return Ma=Ma||function Vd(y){return new Promise((h,p)=>{var v,A,M;function G(){Fr(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Fr(),p(_e(y,"network-request-failed"))},timeout:As.get()})}if(null!==(A=null===(v=_n().gapi)||void 0===v?void 0:v.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(M=_n().gapi)||void 0===M||!M.load){const ce=Ru("iframefcb");return _n()[ce]=()=>{gapi.load?G():p(_e(y,"network-request-failed"))},Si(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Be=>p(Be))}G()}}).catch(h=>{throw Ma=null,h})}(y),Ma}const No=new Bt(5e3,15e3),ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bd(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?lt(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},A=O0.get(y.config.apiHost);A&&(v.eid=A);const M=y._getFrameworks();return M.length&&(v.fw=M.join(",")),`${p}?${(0,N.xO)(v).slice(1)}`}function $d(){return $d=(0,g.Z)(function*(y){const h=yield P0(y),p=_n().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:Bd(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ka,dontclear:!0},v=>new Promise(function(){var A=(0,g.Z)(function*(M,G){yield v.restyle({setHideOnLeave:!1});const ce=_e(y,"network-request-failed"),Be=_n().setTimeout(()=>{G(ce)},No.get());function Ze(){_n().clearTimeout(Be),M(v)}v.ping(Ze).then(Ze,()=>{G(ce)})});return function(M,G){return A.apply(this,arguments)}}()))}),$d.apply(this,arguments)}const dg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class is{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Uu(y,h,p,v,A,M){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:se.SDK_VERSION,eventId:A};if(h instanceof Ji){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,N.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Be,Ze]of Object.entries(M||{}))G[Be]=Ze}if(h instanceof Gs){const Be=h.getScopes().filter(Ze=>""!==Ze);Be.length>0&&(G.scopes=Be.join(","))}y.tenantId&&(G.tid=y.tenantId);const ce=G;for(const Be of Object.keys(ce))void 0===ce[Be]&&delete ce[Be];return`${function hg({config:y}){return y.emulator?lt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(ce).slice(1)}`}const Hd="webStorageSupport",sr=class L0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bi,this._completeRedirectFn=Qe,this._overrideRedirectResult=Fd}_openPopup(h,p,v,A){var M=this;return(0,g.Z)(function*(){var G;q(null===(G=M.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ce=Uu(h,p,v,Pe(),A);return function Fu(y,h,p,v=500,A=600){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let ce="";const Be=Object.assign(Object.assign({},dg),{width:v.toString(),height:A.toString(),top:M,left:G}),Ze=(0,N.z$)().toLowerCase();p&&(ce=qt(Ze)?"_blank":p),Je(Ze)&&(h=h||"http://localhost",Be.scrollbars="yes");const yt=Object.entries(Be).reduce(($n,[qi,qu])=>`${$n}${qi}=${qu},`,"");if(function wr(y=(0,N.z$)()){var h;return Zn(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ze)&&"_self"!==ce)return function Oy(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ce),new is(null);const ct=window.open(h||"",ce,yt);V(ct,y,"popup-blocked");try{ct.focus()}catch{}return new is(ct)}(h,ce,Ds())})()}_openRedirect(h,p,v,A){var M=this;return(0,g.Z)(function*(){return yield M._originValidation(h),function Co(y){_n().location.href=y}(Uu(h,p,v,Pe(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:M}=this.eventManagers[p];return A?Promise.resolve(A):(q(M,"If manager is not set, promise should be"),M)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function lg(y){return $d.apply(this,arguments)}(h),A=new xa(h);return v.register("authEvent",M=>(V(M?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=v,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Hd,{type:Hd},A=>{var M;const G=null===(M=A?.[0])||void 0===M?void 0:M[Hd];void 0!==G&&p(!!G),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Bn(y){return Ou.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return df()||Ot()||Zn()}};class Po{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return ye("unexpected MultiFactorSessionType")}}}class Vu extends Po{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Vu(h)}_finalizeEnroll(h,p,v){return function ug(y,h){return mn(y,"POST","/v2/accounts/mfaEnrollment:finalize",ht(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Xc(y,h){return mn(y,"POST","/v2/accounts/mfaSignIn:finalize",ht(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ci=(()=>{class y{constructor(){}static assertion(p){return Vu._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var ol="@firebase/auth";class Mf{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{h(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gi(){return window}function Pf(){return(Pf=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:A}=Gi();q(h.sessionId,"AuthEvent did not contain a session ID");const M=yield qd(h.sessionId),G={};return Zn()?G.ibi=A.packageName:pt()?G.apn=A.packageName:Ce(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=M,Uu(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function Na(){return(Na=(0,g.Z)(function*(y){const{BuildInfo:h}=Gi(),p={};Zn()?p.iosBundleId=h.packageName:pt()?p.androidPackageName=h.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield zi(y,p)})).apply(this,arguments)}function os(){return(os=(0,g.Z)(function*(y,h,p){const{cordova:v}=Gi();let A=()=>{};try{yield new Promise((M,G)=>{let ce=null;function Be(){var ct;M();const $n=null===(ct=v.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof $n&&$n(),"function"==typeof p?.close&&p.close()}function Ze(){ce||(ce=window.setTimeout(()=>{G(_e(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Ze()}h.addPassiveListener(Be),document.addEventListener("resume",Ze,!1),pt()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{h.removePassiveListener(Be),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",yt,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function qd(y){return ll.apply(this,arguments)}function ll(){return(ll=(0,g.Z)(function*(y){const h=dl(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function dl(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}(0,N.Pz)("authIdTokenMaxAge"),function al(y){(0,se._registerComponent)(new fe.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:M,authDomain:G}=v.options;return((ce,Be)=>{V(M&&!M.includes(":"),"invalid-api-key",{appName:ce.name}),V(!G?.includes(":"),"argument-error",{appName:ce.name});const Ze={apiKey:M,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ou(y)},yt=new ld(ce,Be,Ze);return function Ue(y,h){const p=h?.persistence||[],v=(Array.isArray(p)?p:[p]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,h?.popupRedirectResolver)}(yt,p),yt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new fe.wA("auth-internal",h=>{const p=En(h.getProvider("auth").getImmediate());return new Mf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(ol,"0.21.1",function Dr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(ol,"0.21.1","esm2017")}("Browser");class Pa extends xa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function gg(y){return fl.apply(this,arguments)}function fl(){return(fl=(0,g.Z)(function*(y){const h=yield Lf()._get(Ff(y));return h&&(yield Lf()._remove(Ff(y))),h})).apply(this,arguments)}function Uy(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Lf(){return ie(qc)}function Ff(y){return W("authEvent",y.config.apiKey,y.name)}function Oa(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,N.zd)(p.join("?"))}const to=class mg{constructor(){this._redirectPersistence=Bi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qe,this._overrideRedirectResult=Fd}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let A=p.eventManagers.get(v);return A||(A=new Pa(h),p.eventManagers.set(v,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,A){var M=this;return(0,g.Z)(function*(){!function fg(y){var h,p,v,A,M,G,ce,Be,Ze,yt;const ct=Gi();V("function"==typeof(null===(h=ct?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=ct?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(M=null===(A=null===(v=ct?.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Be=null===(ce=null===(G=ct?.cordova)||void 0===G?void 0:G.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Be?void 0:Be.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(yt=null===(Ze=ct?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield M._initialize(h);yield G.initialized(),G.resetRedirect(),function xf(){rr.clear()}(),yield M._originValidation(h);const ce=function Wd(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Uy(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,v,A);yield function pg(y,h){return Lf()._set(Ff(y),h)}(h,ce);const Be=yield function Lo(y,h,p){return Pf.apply(this,arguments)}(h,ce,p),Ze=yield function Of(y){const{cordova:h}=Gi();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let A=null;v?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function fo(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Be);return function Gd(y,h,p){return os.apply(this,arguments)}(h,G,Ze)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function cl(y){return Na.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:A,BuildInfo:M}=Gi(),G=setTimeout((0,g.Z)(function*(){yield gg(h),p.onEvent(Kd())}),500),ce=function(){var yt=(0,g.Z)(function*(ct){clearTimeout(G);const $n=yield gg(h);let qi=null;$n&&ct?.url&&(qi=function Zd(y,h){var p,v;const A=function By(y){const h=Oa(y),p=h.link?decodeURIComponent(h.link):void 0,v=Oa(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Oa(A).link||A||v||p||y}(h);if(A.includes("/__/auth/callback")){const M=Oa(A),G=M.firebaseError?function Vy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,ce=null===(v=null===(p=G?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Be=ce?_e(ce):null;return Be?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}($n,ct.url)),p.onEvent(qi||Kd())});return function($n){return yt.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,ce);const Be=A,Ze=`${M.packageName.toLowerCase()}://`;Gi().handleOpenURL=function(){var yt=(0,g.Z)(function*(ct){if(ct.toLowerCase().startsWith(Ze)&&ce({url:ct}),"function"==typeof Be)try{Be(ct)}catch($n){console.error($n)}});return function(ct){return yt.apply(this,arguments)}}()}};function Kd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function xs(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Fa(y=(0,N.z$)()){return!("file:"!==xs()&&"ionic:"!==xs()&&"capacitor:"!==xs()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Uf(){try{const y=self.localStorage,h=Ds();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Ua(y=(0,N.z$)()){return function pl(){return(0,N.w1)()&&11===document?.documentMode}()||function vg(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return Yd()&&(0,N.hl)()}return!1}function Yd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ju(){return(function $u(){return"http:"===xs()||"https:"===xs()}()||(0,N.ru)()||Fa())&&!function $y(){return(0,N.b$)()||(0,N.UG)()}()&&Uf()&&!Yd()}function Vf(){return Fa()&&typeof document<"u"}function Rs(){return(Rs=(0,g.Z)(function*(){return!!Vf()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Tr={LOCAL:"local",NONE:"none",SESSION:"session"},Va=V,gl="persistence";function Ba(y){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Fo(),p=W(gl,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Fo(){var y;try{return(null===(y=function wg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Qd=V;class Ms{constructor(){this.browserResolver=ie(sr),this.cordovaResolver=ie(to),this.underlyingResolver=null,this._redirectPersistence=Bi,this._completeRedirectFn=Qe,this._overrideRedirectResult=Fd}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,A){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,p,v,A)})()}_openRedirect(h,p,v,A){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,p,v,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Vf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Hu(){return Rs.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Xd(y){return y.unwrap()}function $f(y){return Ig(y)}function Ig(y){const{_tokenResponse:h}=y instanceof N.ZR?y.customData:y;if(!h)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return rl.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=yo;break;case"facebook.com":v=pd;break;case"github.com":v=Mc;break;case"twitter.com":v=md;break;default:const{oauthIdToken:A,oauthAccessToken:M,oauthTokenSecret:G,pendingToken:ce,nonce:Be}=h;return M||G||A||ce?ce?p.startsWith("saml.")?kc._create(p,ce):ri._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:A,accessToken:M}):new aa(p).credential({idToken:A,accessToken:M,rawNonce:Be}):null}return y instanceof N.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function li(y,h){return h.catch(p=>{throw p instanceof N.ZR&&function $a(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Hf(y,function pr(y,h){var p;const v=(0,N.m9)(y),A=h;return V(h.customData.operationType,v,"argument-error"),V(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),zc._fromError(v,A)}(y,h));else if(v){const A=Ig(h),M=h;A&&(M.credential=A,M.tenantId=v.tenantId||void 0,M.email=v.email||void 0,M.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:$f(p),additionalUserInfo:mf(p),user:no.getOrCreate(A)}})}function Eg(y,h){return jf.apply(this,arguments)}function jf(){return(jf=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>li(y,p.confirm(v))}})).apply(this,arguments)}class Hf{constructor(h,p){this.resolver=p,this.auth=function Jd(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return li(Xd(this.auth),this.resolver.resolveSignIn(h))}}class no{constructor(h){this._delegate=h,this.multiFactor=function Iu(y){const h=(0,N.m9)(y);return oi.has(h)||oi.set(h,bs._fromUser(h)),oi.get(h)}(h)}static getOrCreate(h){return no.USER_MAP.has(h)||no.USER_MAP.set(h,new no(h)),no.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return li(p.auth,Pn(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return Eg(v.auth,function bf(y,h,p){return Df.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return li(p.auth,function an(y,h,p){return Un.apply(this,arguments)}(p._delegate,h,Ms))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ba(En(p.auth)),function H(y,h,p){return function ee(y,h,p){return Te.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ms)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return li(p.auth,Ks(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Eg(this.auth,function Ny(y,h,p){return Tf.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return li(this.auth,function Py(y,h,p){return Af.apply(this,arguments)}(this._delegate,h,Ms))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ba(En(p.auth)),function T(y,h,p){return function x(y,h,p){return L.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ms)})()}sendEmailVerification(h){return function Uc(y,h){return Dd.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function ua(y,h){return Ws.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function sg(y,h){return $c((0,N.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Bc(y,h){return $c((0,N.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function nl(y,h){return Sf.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function es(y,h){return si.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function bo(y,h,p){return bn.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}no.USER_MAP=new WeakMap;const Gu=V;let ml=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;Gu(A,"invalid-api-key",{appName:p.name}),Gu(A,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?Ms:void 0;this._delegate=v.initialize({options:{persistence:bg(A,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?no.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function Ac(y,h,p){const v=En(y);V(v._canInitEmulator,v,"emulator-config-failed"),V(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const A=!!p?.disableWarnings,M=na(h),{host:G,port:ce}=function ra(y){const h=na(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const M=A[1];return{host:M,port:Kt(v.substr(M.length+1))}}{const[M,G]=v.split(":");return{host:M,port:Kt(G)}}}(h);v.config.emulator={url:`${M}//${G}${null===ce?"":`:${ce}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:ce,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Kn(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function pu(y,h){return Oc.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return gu(this._delegate,p)}confirmPasswordReset(p,v){return function pa(y,h,p){return St.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var A=this;return(0,g.Z)(function*(){return li(A._delegate,function On(y,h,p){return Ed.apply(this,arguments)}(A._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function _u(y,h){return Eo.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function bd(y,h){return"EMAIL_SIGNIN"===oa.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Gu(ju(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Ye(y,h){return nt.apply(this,arguments)}(p._delegate,Ms);return v?li(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function F0(y,h){En(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,A){const{next:M,error:G,complete:ce}=yl(p,v,A);return this._delegate.onAuthStateChanged(M,G,ce)}onIdTokenChanged(p,v,A){const{next:M,error:G,complete:ce}=yl(p,v,A);return this._delegate.onIdTokenChanged(M,G,ce)}sendSignInLinkToEmail(p,v){return function Yt(y,h,p){return Fc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Ui(y,h,p){return fa.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let A;switch(function zu(y,h){Va(Object.values(Tr).includes(h),y,"invalid-persistence-type"),(0,N.b$)()?Va(h!==Tr.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?Va(h===Tr.NONE,y,"unsupported-persistence-type"):Yd()?Va(h===Tr.NONE||h===Tr.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):Va(h===Tr.NONE||Uf(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Tr.SESSION:A=Bi;break;case Tr.LOCAL:A=(yield ie(Ro)._isAvailable())?Ro:qc;break;case Tr.NONE:A=F;break;default:return Ce("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return li(this._delegate,function Pc(y){return pf.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return li(this._delegate,An(this._delegate,p))}signInWithCustomToken(p){return li(this._delegate,function Es(y,h){return nr.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return li(this._delegate,function De(y,h,p){return An((0,N.m9)(y),Rc.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return li(this._delegate,function fr(y,h,p){return Io.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Eg(this._delegate,function on(y,h,p){return Da.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Gu(ju(),v._delegate,"operation-not-supported-in-this-environment"),li(v._delegate,function ko(y,h,p){return Nu.apply(this,arguments)}(v._delegate,p,Ms))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Gu(ju(),v._delegate,"operation-not-supported-in-this-environment"),yield Ba(v._delegate),function Js(y,h,p){return function gt(y,h,p){return b.apply(this,arguments)}(y,h,p)}(v._delegate,p,Ms)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Id(y,h){return mu.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Tr,y})();function yl(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const A=v;return{next:G=>A(G&&no.getOrCreate(G)),error:h,complete:p}}function bg(y,h){const p=function Bf(y,h){const p=Fo();if(!p)return[];const v=W(gl,y,h);switch(p.getItem(v)){case Tr.NONE:return[F];case Tr.LOCAL:return[Ro,Bi];case Tr.SESSION:return[Bi];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ro)&&p.push(Ro),typeof window<"u")for(const v of[qc,Bi])p.includes(v)||p.push(v);return p.includes(F)||p.push(F),p}class zf{constructor(){this.providerId="phone",this._delegate=new rl(Xd(Q.Z.auth()))}static credential(h,p){return rl.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}zf.PHONE_SIGN_IN_METHOD=rl.PHONE_SIGN_IN_METHOD,zf.PROVIDER_ID=rl.PROVIDER_ID;const Dg=V;class jy{constructor(h,p,v=Q.Z.app()){var A;Dg(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Mo(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tg(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new ml(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Rc,FacebookAuthProvider:pd,GithubAuthProvider:Mc,GoogleAuthProvider:yo,OAuthProvider:aa,SAMLAuthProvider:Ti,PhoneAuthProvider:zf,PhoneMultiFactorGenerator:ci,RecaptchaVerifier:jy,TwitterAuthProvider:md,Auth:ml,AuthCredential:Rn,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.1")}(Q.Z)},8766:(st,Ie,P)=>{P.d(Ie,{Lj:()=>Ce,X3:()=>Le});var g=P(5861);let N,se;const fe=new WeakMap,de=new WeakMap,le=new WeakMap,$=new WeakMap,j=new WeakMap;let Ee={get(V,ye,q){if(V instanceof IDBTransaction){if("done"===ye)return de.get(V);if("objectStoreNames"===ye)return V.objectStoreNames||le.get(V);if("store"===ye)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return be(V[ye])},set:(V,ye,q)=>(V[ye]=q,!0),has:(V,ye)=>V instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in V};function he(V){return"function"==typeof V?function tt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ye){return V.apply(we(this),ye),be(fe.get(this))}:function(...ye){return be(V.apply(we(this),ye))}:function(ye,...q){const Y=V.call(we(this),ye,...q);return le.set(Y,ye.sort?ye.sort():[ye]),be(Y)}}(V):(V instanceof IDBTransaction&&function Ve(V){if(de.has(V))return;const ye=new Promise((q,Y)=>{const ie=()=>{V.removeEventListener("complete",ne),V.removeEventListener("error",Ue),V.removeEventListener("abort",Ue)},ne=()=>{q(),ie()},Ue=()=>{Y(V.error||new DOMException("AbortError","AbortError")),ie()};V.addEventListener("complete",ne),V.addEventListener("error",Ue),V.addEventListener("abort",Ue)});de.set(V,ye)}(V),((V,ye)=>ye.some(q=>V instanceof q))(V,function oe(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ee):V)}function be(V){if(V instanceof IDBRequest)return function Z(V){const ye=new Promise((q,Y)=>{const ie=()=>{V.removeEventListener("success",ne),V.removeEventListener("error",Ue)},ne=()=>{q(be(V.result)),ie()},Ue=()=>{Y(V.error),ie()};V.addEventListener("success",ne),V.addEventListener("error",Ue)});return ye.then(q=>{q instanceof IDBCursor&&fe.set(q,V)}).catch(()=>{}),j.set(ye,V),ye}(V);if($.has(V))return $.get(V);const ye=he(V);return ye!==V&&($.set(V,ye),j.set(ye,V)),ye}const we=V=>j.get(V);function Le(V,ye,{blocked:q,upgrade:Y,blocking:ie,terminated:ne}={}){const Ue=indexedDB.open(V,ye),Pe=be(Ue);return Y&&Ue.addEventListener("upgradeneeded",ot=>{Y(be(Ue.result),ot.oldVersion,ot.newVersion,be(Ue.transaction))}),q&&Ue.addEventListener("blocked",()=>q()),Pe.then(ot=>{ne&&ot.addEventListener("close",()=>ne()),ie&&ot.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Pe}function Ce(V,{blocked:ye}={}){const q=indexedDB.deleteDatabase(V);return ye&&q.addEventListener("blocked",()=>ye()),be(q).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Fe=new Map;function Ne(V,ye){if(!(V instanceof IDBDatabase)||ye in V||"string"!=typeof ye)return;if(Fe.get(ye))return Fe.get(ye);const q=ye.replace(/FromIndex$/,""),Y=ye!==q,ie=Se.includes(q);if(!(q in(Y?IDBIndex:IDBObjectStore).prototype)||!ie&&!_e.includes(q))return;const ne=function(){var Ue=(0,g.Z)(function*(Pe,...ot){const en=this.transaction(Pe,ie?"readwrite":"readonly");let ln=en.store;return Y&&(ln=ln.index(ot.shift())),(yield Promise.all([ln[q](...ot),ie&&en.done]))[0]});return function(ot){return Ue.apply(this,arguments)}}();return Fe.set(ye,ne),ne}!function He(V){Ee=V(Ee)}(V=>({...V,get:(ye,q,Y)=>Ne(ye,q)||V.get(ye,q,Y),has:(ye,q)=>!!Ne(ye,q)||V.has(ye,q)}))},5861:(st,Ie,P)=>{function g(N,se,oe,ae,fe,de,le){try{var $=N[de](le),j=$.value}catch(Z){return void oe(Z)}$.done?se(j):Promise.resolve(j).then(ae,fe)}function Q(N){return function(){var se=this,oe=arguments;return new Promise(function(ae,fe){var de=N.apply(se,oe);function le(j){g(de,ae,fe,le,$,"next",j)}function $(j){g(de,ae,fe,le,$,"throw",j)}le(void 0)})}}P.d(Ie,{Z:()=>Q})}},st=>{st(st.s=3652)}]);